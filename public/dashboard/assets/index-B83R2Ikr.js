var bV=Object.defineProperty;var RC=e=>{throw TypeError(e)};var NV=(e,t,n)=>t in e?bV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Jj=(e,t,n)=>NV(e,typeof t!="symbol"?t+"":t,n),ey=(e,t,n)=>t.has(e)||RC("Cannot "+n);var ve=(e,t,n)=>(ey(e,t,"read from private field"),n?n.call(e):t.get(e)),vt=(e,t,n)=>t.has(e)?RC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),et=(e,t,n,s)=>(ey(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),zt=(e,t,n)=>(ey(e,t,"access private method"),n);var _p=(e,t,n,s)=>({set _(a){et(e,t,a,n)},get _(){return ve(e,t,s)}});function wV(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function or(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t$={exports:{}},zv={},r$={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=Symbol.for("react.element"),_V=Symbol.for("react.portal"),SV=Symbol.for("react.fragment"),CV=Symbol.for("react.strict_mode"),PV=Symbol.for("react.profiler"),AV=Symbol.for("react.provider"),EV=Symbol.for("react.context"),MV=Symbol.for("react.forward_ref"),OV=Symbol.for("react.suspense"),TV=Symbol.for("react.memo"),kV=Symbol.for("react.lazy"),LC=Symbol.iterator;function $V(e){return e===null||typeof e!="object"?null:(e=LC&&e[LC]||e["@@iterator"],typeof e=="function"?e:null)}var n$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s$=Object.assign,a$={};function Vu(e,t,n){this.props=e,this.context=t,this.refs=a$,this.updater=n||n$}Vu.prototype.isReactComponent={};Vu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function o$(){}o$.prototype=Vu.prototype;function a_(e,t,n){this.props=e,this.context=t,this.refs=a$,this.updater=n||n$}var o_=a_.prototype=new o$;o_.constructor=a_;s$(o_,Vu.prototype);o_.isPureReactComponent=!0;var BC=Array.isArray,i$=Object.prototype.hasOwnProperty,i_={current:null},l$={key:!0,ref:!0,__self:!0,__source:!0};function c$(e,t,n){var s,a={},o=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)i$.call(t,s)&&!l$.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Lh,type:e,key:o,ref:i,props:a,_owner:i_.current}}function DV(e,t){return{$$typeof:Lh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lh}function FV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zC=/\/+/g;function ty(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FV(""+e.key):t.toString(36)}function xx(e,t,n,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Lh:case _V:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+ty(i,0):s,BC(a)?(n="",e!=null&&(n=e.replace(zC,"$&/")+"/"),xx(a,t,n,"",function(d){return d})):a!=null&&(l_(a)&&(a=DV(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(zC,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",BC(e))for(var l=0;l<e.length;l++){o=e[l];var c=s+ty(o,l);i+=xx(o,t,n,c,a)}else if(c=$V(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=s+ty(o,l++),i+=xx(o,t,n,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Cp(e,t,n){if(e==null)return e;var s=[],a=0;return xx(e,s,"","",function(o){return t.call(n,o,a++)}),s}function IV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gs={current:null},gx={transition:null},RV={ReactCurrentDispatcher:gs,ReactCurrentBatchConfig:gx,ReactCurrentOwner:i_};function d$(){throw Error("act(...) is not supported in production builds of React.")}qt.Children={map:Cp,forEach:function(e,t,n){Cp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cp(e,function(){t++}),t},toArray:function(e){return Cp(e,function(t){return t})||[]},only:function(e){if(!l_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qt.Component=Vu;qt.Fragment=SV;qt.Profiler=PV;qt.PureComponent=a_;qt.StrictMode=CV;qt.Suspense=OV;qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RV;qt.act=d$;qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=s$({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=i_.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)i$.call(t,c)&&!l$.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Lh,type:e.type,key:a,ref:o,props:s,_owner:i}};qt.createContext=function(e){return e={$$typeof:EV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:AV,_context:e},e.Consumer=e};qt.createElement=c$;qt.createFactory=function(e){var t=c$.bind(null,e);return t.type=e,t};qt.createRef=function(){return{current:null}};qt.forwardRef=function(e){return{$$typeof:MV,render:e}};qt.isValidElement=l_;qt.lazy=function(e){return{$$typeof:kV,_payload:{_status:-1,_result:e},_init:IV}};qt.memo=function(e,t){return{$$typeof:TV,type:e,compare:t===void 0?null:t}};qt.startTransition=function(e){var t=gx.transition;gx.transition={};try{e()}finally{gx.transition=t}};qt.unstable_act=d$;qt.useCallback=function(e,t){return gs.current.useCallback(e,t)};qt.useContext=function(e){return gs.current.useContext(e)};qt.useDebugValue=function(){};qt.useDeferredValue=function(e){return gs.current.useDeferredValue(e)};qt.useEffect=function(e,t){return gs.current.useEffect(e,t)};qt.useId=function(){return gs.current.useId()};qt.useImperativeHandle=function(e,t,n){return gs.current.useImperativeHandle(e,t,n)};qt.useInsertionEffect=function(e,t){return gs.current.useInsertionEffect(e,t)};qt.useLayoutEffect=function(e,t){return gs.current.useLayoutEffect(e,t)};qt.useMemo=function(e,t){return gs.current.useMemo(e,t)};qt.useReducer=function(e,t,n){return gs.current.useReducer(e,t,n)};qt.useRef=function(e){return gs.current.useRef(e)};qt.useState=function(e){return gs.current.useState(e)};qt.useSyncExternalStore=function(e,t,n){return gs.current.useSyncExternalStore(e,t,n)};qt.useTransition=function(){return gs.current.useTransition()};qt.version="18.3.1";r$.exports=qt;var y=r$.exports;const K=or(y),c_=wV({__proto__:null,default:K},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LV=y,BV=Symbol.for("react.element"),zV=Symbol.for("react.fragment"),VV=Object.prototype.hasOwnProperty,WV=LV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qV={key:!0,ref:!0,__self:!0,__source:!0};function u$(e,t,n){var s,a={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)VV.call(t,s)&&!qV.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:BV,type:e,key:o,ref:i,props:a,_owner:WV.current}}zv.Fragment=zV;zv.jsx=u$;zv.jsxs=u$;t$.exports=zv;var r=t$.exports,Db={},m$={exports:{}},ra={},f$={exports:{}},h$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,D){var X=F.length;F.push(D);e:for(;0<X;){var W=X-1>>>1,B=F[W];if(0<a(B,D))F[W]=D,F[X]=B,X=W;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var D=F[0],X=F.pop();if(X!==D){F[0]=X;e:for(var W=0,B=F.length,q=B>>>1;W<q;){var te=2*(W+1)-1,Y=F[te],H=te+1,L=F[H];if(0>a(Y,X))H<B&&0>a(L,Y)?(F[W]=L,F[H]=X,W=H):(F[W]=Y,F[te]=X,W=te);else if(H<B&&0>a(L,X))F[W]=L,F[H]=X,W=H;else break e}}return D}function a(F,D){var X=F.sortIndex-D.sortIndex;return X!==0?X:F.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,f=3,h=!1,x=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(F){for(var D=n(d);D!==null;){if(D.callback===null)s(d);else if(D.startTime<=F)s(d),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(d)}}function _(F){if(p=!1,N(F),!x)if(n(c)!==null)x=!0,V(b);else{var D=n(d);D!==null&&I(_,D.startTime-F)}}function b(F,D){x=!1,p&&(p=!1,j(C),C=-1),h=!0;var X=f;try{for(N(D),m=n(c);m!==null&&(!(m.expirationTime>D)||F&&!k());){var W=m.callback;if(typeof W=="function"){m.callback=null,f=m.priorityLevel;var B=W(m.expirationTime<=D);D=e.unstable_now(),typeof B=="function"?m.callback=B:m===n(c)&&s(c),N(D)}else s(c);m=n(c)}if(m!==null)var q=!0;else{var te=n(d);te!==null&&I(_,te.startTime-D),q=!1}return q}finally{m=null,f=X,h=!1}}var w=!1,S=null,C=-1,A=5,P=-1;function k(){return!(e.unstable_now()-P<A)}function E(){if(S!==null){var F=e.unstable_now();P=F;var D=!0;try{D=S(!0,F)}finally{D?O():(w=!1,S=null)}}else w=!1}var O;if(typeof g=="function")O=function(){g(E)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,T=M.port2;M.port1.onmessage=E,O=function(){T.postMessage(null)}}else O=function(){v(E,0)};function V(F){S=F,w||(w=!0,O())}function I(F,D){C=v(function(){F(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){x||h||(x=!0,V(b))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var X=f;f=D;try{return F()}finally{f=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,D){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=f;f=F;try{return D()}finally{f=X}},e.unstable_scheduleCallback=function(F,D,X){var W=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,F={id:u++,callback:D,priorityLevel:F,startTime:X,expirationTime:B,sortIndex:-1},X>W?(F.sortIndex=X,t(d,F),n(c)===null&&F===n(d)&&(p?(j(C),C=-1):p=!0,I(_,X-W))):(F.sortIndex=B,t(c,F),x||h||(x=!0,V(b))),F},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(F){var D=f;return function(){var X=f;f=D;try{return F.apply(this,arguments)}finally{f=X}}}})(h$);f$.exports=h$;var UV=f$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KV=y,Hs=UV;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p$=new Set,bf={};function Rc(e,t){eu(e,t),eu(e+"Capture",t)}function eu(e,t){for(bf[e]=t,e=0;e<t.length;e++)p$.add(t[e])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fb=Object.prototype.hasOwnProperty,GV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VC={},WC={};function HV(e){return Fb.call(WC,e)?!0:Fb.call(VC,e)?!1:GV.test(e)?WC[e]=!0:(VC[e]=!0,!1)}function XV(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YV(e,t,n,s){if(t===null||typeof t>"u"||XV(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vs(e,t,n,s,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ln[e]=new vs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ln[t]=new vs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ln[e]=new vs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ln[e]=new vs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ln[e]=new vs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ln[e]=new vs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ln[e]=new vs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ln[e]=new vs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ln[e]=new vs(e,5,!1,e.toLowerCase(),null,!1,!1)});var d_=/[\-:]([a-z])/g;function u_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d_,u_);Ln[t]=new vs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d_,u_);Ln[t]=new vs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d_,u_);Ln[t]=new vs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ln[e]=new vs(e,1,!1,e.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new vs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ln[e]=new vs(e,1,!1,e.toLowerCase(),null,!0,!0)});function m_(e,t,n,s){var a=Ln.hasOwnProperty(t)?Ln[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YV(t,n,a,s)&&(n=null),s||a===null?HV(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var hi=KV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pp=Symbol.for("react.element"),dd=Symbol.for("react.portal"),ud=Symbol.for("react.fragment"),f_=Symbol.for("react.strict_mode"),Ib=Symbol.for("react.profiler"),x$=Symbol.for("react.provider"),g$=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),Rb=Symbol.for("react.suspense"),Lb=Symbol.for("react.suspense_list"),p_=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),v$=Symbol.for("react.offscreen"),qC=Symbol.iterator;function ym(e){return e===null||typeof e!="object"?null:(e=qC&&e[qC]||e["@@iterator"],typeof e=="function"?e:null)}var Ur=Object.assign,ry;function Um(e){if(ry===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ry=t&&t[1]||""}return`
`+ry+e}var ny=!1;function sy(e,t){if(!e||ny)return"";ny=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=s.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{ny=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Um(e):""}function QV(e){switch(e.tag){case 5:return Um(e.type);case 16:return Um("Lazy");case 13:return Um("Suspense");case 19:return Um("SuspenseList");case 0:case 2:case 15:return e=sy(e.type,!1),e;case 11:return e=sy(e.type.render,!1),e;case 1:return e=sy(e.type,!0),e;default:return""}}function Bb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ud:return"Fragment";case dd:return"Portal";case Ib:return"Profiler";case f_:return"StrictMode";case Rb:return"Suspense";case Lb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g$:return(e.displayName||"Context")+".Consumer";case x$:return(e._context.displayName||"Context")+".Provider";case h_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p_:return t=e.displayName||null,t!==null?t:Bb(e.type)||"Memo";case Ei:t=e._payload,e=e._init;try{return Bb(e(t))}catch{}}return null}function ZV(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bb(t);case 8:return t===f_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function j$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JV(e){var t=j$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ap(e){e._valueTracker||(e._valueTracker=JV(e))}function y$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=j$(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Bx(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zb(e,t){var n=t.checked;return Ur({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function UC(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ml(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function b$(e,t){t=t.checked,t!=null&&m_(e,"checked",t,!1)}function Vb(e,t){b$(e,t);var n=ml(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wb(e,t.type,ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function KC(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wb(e,t,n){(t!=="number"||Bx(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Km=Array.isArray;function Pd(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ml(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function qb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Ur({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function GC(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ue(92));if(Km(n)){if(1<n.length)throw Error(Ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ml(n)}}function N$(e,t){var n=ml(t.value),s=ml(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function HC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ub(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ep,_$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ep=Ep||document.createElement("div"),Ep.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ep.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e9=["Webkit","ms","Moz","O"];Object.keys(ef).forEach(function(e){e9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ef[t]=ef[e]})});function S$(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ef.hasOwnProperty(e)&&ef[e]?(""+t).trim():t+"px"}function C$(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=S$(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var t9=Ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kb(e,t){if(t){if(t9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function Gb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hb=null;function x_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xb=null,Ad=null,Ed=null;function XC(e){if(e=Vh(e)){if(typeof Xb!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=Kv(t),Xb(e.stateNode,e.type,t))}}function P$(e){Ad?Ed?Ed.push(e):Ed=[e]:Ad=e}function A$(){if(Ad){var e=Ad,t=Ed;if(Ed=Ad=null,XC(e),t)for(e=0;e<t.length;e++)XC(t[e])}}function E$(e,t){return e(t)}function M$(){}var ay=!1;function O$(e,t,n){if(ay)return e(t,n);ay=!0;try{return E$(e,t,n)}finally{ay=!1,(Ad!==null||Ed!==null)&&(M$(),A$())}}function wf(e,t){var n=e.stateNode;if(n===null)return null;var s=Kv(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ue(231,t,typeof n));return n}var Yb=!1;if(ni)try{var bm={};Object.defineProperty(bm,"passive",{get:function(){Yb=!0}}),window.addEventListener("test",bm,bm),window.removeEventListener("test",bm,bm)}catch{Yb=!1}function r9(e,t,n,s,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var tf=!1,zx=null,Vx=!1,Qb=null,n9={onError:function(e){tf=!0,zx=e}};function s9(e,t,n,s,a,o,i,l,c){tf=!1,zx=null,r9.apply(n9,arguments)}function a9(e,t,n,s,a,o,i,l,c){if(s9.apply(this,arguments),tf){if(tf){var d=zx;tf=!1,zx=null}else throw Error(Ue(198));Vx||(Vx=!0,Qb=d)}}function Lc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function T$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function YC(e){if(Lc(e)!==e)throw Error(Ue(188))}function o9(e){var t=e.alternate;if(!t){if(t=Lc(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return YC(a),e;if(o===s)return YC(a),t;o=o.sibling}throw Error(Ue(188))}if(n.return!==s.return)n=a,s=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,s=o;break}if(l===s){i=!0,s=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,s=a;break}if(l===s){i=!0,s=o,n=a;break}l=l.sibling}if(!i)throw Error(Ue(189))}}if(n.alternate!==s)throw Error(Ue(190))}if(n.tag!==3)throw Error(Ue(188));return n.stateNode.current===n?e:t}function k$(e){return e=o9(e),e!==null?$$(e):null}function $$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$$(e);if(t!==null)return t;e=e.sibling}return null}var D$=Hs.unstable_scheduleCallback,QC=Hs.unstable_cancelCallback,i9=Hs.unstable_shouldYield,l9=Hs.unstable_requestPaint,tn=Hs.unstable_now,c9=Hs.unstable_getCurrentPriorityLevel,g_=Hs.unstable_ImmediatePriority,F$=Hs.unstable_UserBlockingPriority,Wx=Hs.unstable_NormalPriority,d9=Hs.unstable_LowPriority,I$=Hs.unstable_IdlePriority,Vv=null,bo=null;function u9(e){if(bo&&typeof bo.onCommitFiberRoot=="function")try{bo.onCommitFiberRoot(Vv,e,void 0,(e.current.flags&128)===128)}catch{}}var Wa=Math.clz32?Math.clz32:h9,m9=Math.log,f9=Math.LN2;function h9(e){return e>>>=0,e===0?32:31-(m9(e)/f9|0)|0}var Mp=64,Op=4194304;function Gm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qx(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~a;l!==0?s=Gm(l):(o&=i,o!==0&&(s=Gm(o)))}else i=n&~a,i!==0?s=Gm(i):o!==0&&(s=Gm(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Wa(t),a=1<<n,s|=e[n],t&=~a;return s}function p9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x9(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Wa(o),l=1<<i,c=a[i];c===-1?(!(l&n)||l&s)&&(a[i]=p9(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Zb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function R$(){var e=Mp;return Mp<<=1,!(Mp&4194240)&&(Mp=64),e}function oy(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wa(t),e[t]=n}function g9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Wa(n),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~o}}function v_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Wa(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var ur=0;function L$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var B$,j_,z$,V$,W$,Jb=!1,Tp=[],Zi=null,Ji=null,el=null,_f=new Map,Sf=new Map,Ti=[],v9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZC(e,t){switch(e){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":el=null;break;case"pointerover":case"pointerout":_f.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sf.delete(t.pointerId)}}function Nm(e,t,n,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Vh(t),t!==null&&j_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function j9(e,t,n,s,a){switch(t){case"focusin":return Zi=Nm(Zi,e,t,n,s,a),!0;case"dragenter":return Ji=Nm(Ji,e,t,n,s,a),!0;case"mouseover":return el=Nm(el,e,t,n,s,a),!0;case"pointerover":var o=a.pointerId;return _f.set(o,Nm(_f.get(o)||null,e,t,n,s,a)),!0;case"gotpointercapture":return o=a.pointerId,Sf.set(o,Nm(Sf.get(o)||null,e,t,n,s,a)),!0}return!1}function q$(e){var t=Yl(e.target);if(t!==null){var n=Lc(t);if(n!==null){if(t=n.tag,t===13){if(t=T$(n),t!==null){e.blockedOn=t,W$(e.priority,function(){z$(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=eN(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Hb=s,n.target.dispatchEvent(s),Hb=null}else return t=Vh(n),t!==null&&j_(t),e.blockedOn=n,!1;t.shift()}return!0}function JC(e,t,n){vx(e)&&n.delete(t)}function y9(){Jb=!1,Zi!==null&&vx(Zi)&&(Zi=null),Ji!==null&&vx(Ji)&&(Ji=null),el!==null&&vx(el)&&(el=null),_f.forEach(JC),Sf.forEach(JC)}function wm(e,t){e.blockedOn===t&&(e.blockedOn=null,Jb||(Jb=!0,Hs.unstable_scheduleCallback(Hs.unstable_NormalPriority,y9)))}function Cf(e){function t(a){return wm(a,e)}if(0<Tp.length){wm(Tp[0],e);for(var n=1;n<Tp.length;n++){var s=Tp[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Zi!==null&&wm(Zi,e),Ji!==null&&wm(Ji,e),el!==null&&wm(el,e),_f.forEach(t),Sf.forEach(t),n=0;n<Ti.length;n++)s=Ti[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)q$(n),n.blockedOn===null&&Ti.shift()}var Md=hi.ReactCurrentBatchConfig,Ux=!0;function b9(e,t,n,s){var a=ur,o=Md.transition;Md.transition=null;try{ur=1,y_(e,t,n,s)}finally{ur=a,Md.transition=o}}function N9(e,t,n,s){var a=ur,o=Md.transition;Md.transition=null;try{ur=4,y_(e,t,n,s)}finally{ur=a,Md.transition=o}}function y_(e,t,n,s){if(Ux){var a=eN(e,t,n,s);if(a===null)xy(e,t,s,Kx,n),ZC(e,s);else if(j9(a,e,t,n,s))s.stopPropagation();else if(ZC(e,s),t&4&&-1<v9.indexOf(e)){for(;a!==null;){var o=Vh(a);if(o!==null&&B$(o),o=eN(e,t,n,s),o===null&&xy(e,t,s,Kx,n),o===a)break;a=o}a!==null&&s.stopPropagation()}else xy(e,t,s,null,n)}}var Kx=null;function eN(e,t,n,s){if(Kx=null,e=x_(s),e=Yl(e),e!==null)if(t=Lc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=T$(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kx=e,null}function U$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c9()){case g_:return 1;case F$:return 4;case Wx:case d9:return 16;case I$:return 536870912;default:return 16}default:return 16}}var Ki=null,b_=null,jx=null;function K$(){if(jx)return jx;var e,t=b_,n=t.length,s,a="value"in Ki?Ki.value:Ki.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===a[o-s];s++);return jx=a.slice(e,1<s?1-s:void 0)}function yx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kp(){return!0}function eP(){return!1}function na(e){function t(n,s,a,o,i){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kp:eP,this.isPropagationStopped=eP,this}return Ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kp)},persist:function(){},isPersistent:kp}),t}var Wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N_=na(Wu),zh=Ur({},Wu,{view:0,detail:0}),w9=na(zh),iy,ly,_m,Wv=Ur({},zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_m&&(_m&&e.type==="mousemove"?(iy=e.screenX-_m.screenX,ly=e.screenY-_m.screenY):ly=iy=0,_m=e),iy)},movementY:function(e){return"movementY"in e?e.movementY:ly}}),tP=na(Wv),_9=Ur({},Wv,{dataTransfer:0}),S9=na(_9),C9=Ur({},zh,{relatedTarget:0}),cy=na(C9),P9=Ur({},Wu,{animationName:0,elapsedTime:0,pseudoElement:0}),A9=na(P9),E9=Ur({},Wu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),M9=na(E9),O9=Ur({},Wu,{data:0}),rP=na(O9),T9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$9[e])?!!t[e]:!1}function w_(){return D9}var F9=Ur({},zh,{key:function(e){if(e.key){var t=T9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?k9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w_,charCode:function(e){return e.type==="keypress"?yx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I9=na(F9),R9=Ur({},Wv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nP=na(R9),L9=Ur({},zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w_}),B9=na(L9),z9=Ur({},Wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),V9=na(z9),W9=Ur({},Wv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q9=na(W9),U9=[9,13,27,32],__=ni&&"CompositionEvent"in window,rf=null;ni&&"documentMode"in document&&(rf=document.documentMode);var K9=ni&&"TextEvent"in window&&!rf,G$=ni&&(!__||rf&&8<rf&&11>=rf),sP=" ",aP=!1;function H$(e,t){switch(e){case"keyup":return U9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var md=!1;function G9(e,t){switch(e){case"compositionend":return X$(t);case"keypress":return t.which!==32?null:(aP=!0,sP);case"textInput":return e=t.data,e===sP&&aP?null:e;default:return null}}function H9(e,t){if(md)return e==="compositionend"||!__&&H$(e,t)?(e=K$(),jx=b_=Ki=null,md=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return G$&&t.locale!=="ko"?null:t.data;default:return null}}var X9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!X9[e.type]:t==="textarea"}function Y$(e,t,n,s){P$(s),t=Gx(t,"onChange"),0<t.length&&(n=new N_("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var nf=null,Pf=null;function Y9(e){iD(e,0)}function qv(e){var t=pd(e);if(y$(t))return e}function Q9(e,t){if(e==="change")return t}var Q$=!1;if(ni){var dy;if(ni){var uy="oninput"in document;if(!uy){var iP=document.createElement("div");iP.setAttribute("oninput","return;"),uy=typeof iP.oninput=="function"}dy=uy}else dy=!1;Q$=dy&&(!document.documentMode||9<document.documentMode)}function lP(){nf&&(nf.detachEvent("onpropertychange",Z$),Pf=nf=null)}function Z$(e){if(e.propertyName==="value"&&qv(Pf)){var t=[];Y$(t,Pf,e,x_(e)),O$(Y9,t)}}function Z9(e,t,n){e==="focusin"?(lP(),nf=t,Pf=n,nf.attachEvent("onpropertychange",Z$)):e==="focusout"&&lP()}function J9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qv(Pf)}function eW(e,t){if(e==="click")return qv(t)}function tW(e,t){if(e==="input"||e==="change")return qv(t)}function rW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:rW;function Af(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Fb.call(t,a)||!Ya(e[a],t[a]))return!1}return!0}function cP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dP(e,t){var n=cP(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cP(n)}}function J$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?J$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eD(){for(var e=window,t=Bx();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bx(e.document)}return t}function S_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nW(e){var t=eD(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&J$(n.ownerDocument.documentElement,n)){if(s!==null&&S_(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=dP(n,o);var i=dP(n,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sW=ni&&"documentMode"in document&&11>=document.documentMode,fd=null,tN=null,sf=null,rN=!1;function uP(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rN||fd==null||fd!==Bx(s)||(s=fd,"selectionStart"in s&&S_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),sf&&Af(sf,s)||(sf=s,s=Gx(tN,"onSelect"),0<s.length&&(t=new N_("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=fd)))}function $p(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hd={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionend:$p("Transition","TransitionEnd")},my={},tD={};ni&&(tD=document.createElement("div").style,"AnimationEvent"in window||(delete hd.animationend.animation,delete hd.animationiteration.animation,delete hd.animationstart.animation),"TransitionEvent"in window||delete hd.transitionend.transition);function Uv(e){if(my[e])return my[e];if(!hd[e])return e;var t=hd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tD)return my[e]=t[n];return e}var rD=Uv("animationend"),nD=Uv("animationiteration"),sD=Uv("animationstart"),aD=Uv("transitionend"),oD=new Map,mP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(e,t){oD.set(e,t),Rc(t,[e])}for(var fy=0;fy<mP.length;fy++){var hy=mP[fy],aW=hy.toLowerCase(),oW=hy[0].toUpperCase()+hy.slice(1);Sl(aW,"on"+oW)}Sl(rD,"onAnimationEnd");Sl(nD,"onAnimationIteration");Sl(sD,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(aD,"onTransitionEnd");eu("onMouseEnter",["mouseout","mouseover"]);eu("onMouseLeave",["mouseout","mouseover"]);eu("onPointerEnter",["pointerout","pointerover"]);eu("onPointerLeave",["pointerout","pointerover"]);Rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iW=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hm));function fP(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,a9(s,t,void 0,e),e.currentTarget=null}function iD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;fP(a,l,d),o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;fP(a,l,d),o=c}}}if(Vx)throw e=Qb,Vx=!1,Qb=null,e}function Or(e,t){var n=t[iN];n===void 0&&(n=t[iN]=new Set);var s=e+"__bubble";n.has(s)||(lD(t,e,2,!1),n.add(s))}function py(e,t,n){var s=0;t&&(s|=4),lD(n,e,s,t)}var Dp="_reactListening"+Math.random().toString(36).slice(2);function Ef(e){if(!e[Dp]){e[Dp]=!0,p$.forEach(function(n){n!=="selectionchange"&&(iW.has(n)||py(n,!1,e),py(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dp]||(t[Dp]=!0,py("selectionchange",!1,t))}}function lD(e,t,n,s){switch(U$(t)){case 1:var a=b9;break;case 4:a=N9;break;default:a=y_}n=a.bind(null,t,n,e),a=void 0,!Yb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function xy(e,t,n,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Yl(l),i===null)return;if(c=i.tag,c===5||c===6){s=o=i;continue e}l=l.parentNode}}s=s.return}O$(function(){var d=o,u=x_(n),m=[];e:{var f=oD.get(e);if(f!==void 0){var h=N_,x=e;switch(e){case"keypress":if(yx(n)===0)break e;case"keydown":case"keyup":h=I9;break;case"focusin":x="focus",h=cy;break;case"focusout":x="blur",h=cy;break;case"beforeblur":case"afterblur":h=cy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=S9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=B9;break;case rD:case nD:case sD:h=A9;break;case aD:h=V9;break;case"scroll":h=w9;break;case"wheel":h=q9;break;case"copy":case"cut":case"paste":h=M9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nP}var p=(t&4)!==0,v=!p&&e==="scroll",j=p?f!==null?f+"Capture":null:f;p=[];for(var g=d,N;g!==null;){N=g;var _=N.stateNode;if(N.tag===5&&_!==null&&(N=_,j!==null&&(_=wf(g,j),_!=null&&p.push(Mf(g,_,N)))),v)break;g=g.return}0<p.length&&(f=new h(f,x,null,n,u),m.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==Hb&&(x=n.relatedTarget||n.fromElement)&&(Yl(x)||x[si]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(x=n.relatedTarget||n.toElement,h=d,x=x?Yl(x):null,x!==null&&(v=Lc(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(h=null,x=d),h!==x)){if(p=tP,_="onMouseLeave",j="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=nP,_="onPointerLeave",j="onPointerEnter",g="pointer"),v=h==null?f:pd(h),N=x==null?f:pd(x),f=new p(_,g+"leave",h,n,u),f.target=v,f.relatedTarget=N,_=null,Yl(u)===d&&(p=new p(j,g+"enter",x,n,u),p.target=N,p.relatedTarget=v,_=p),v=_,h&&x)t:{for(p=h,j=x,g=0,N=p;N;N=Zc(N))g++;for(N=0,_=j;_;_=Zc(_))N++;for(;0<g-N;)p=Zc(p),g--;for(;0<N-g;)j=Zc(j),N--;for(;g--;){if(p===j||j!==null&&p===j.alternate)break t;p=Zc(p),j=Zc(j)}p=null}else p=null;h!==null&&hP(m,f,h,p,!1),x!==null&&v!==null&&hP(m,v,x,p,!0)}}e:{if(f=d?pd(d):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=Q9;else if(oP(f))if(Q$)b=tW;else{b=J9;var w=Z9}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=eW);if(b&&(b=b(e,d))){Y$(m,b,n,u);break e}w&&w(e,f,d),e==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&Wb(f,"number",f.value)}switch(w=d?pd(d):window,e){case"focusin":(oP(w)||w.contentEditable==="true")&&(fd=w,tN=d,sf=null);break;case"focusout":sf=tN=fd=null;break;case"mousedown":rN=!0;break;case"contextmenu":case"mouseup":case"dragend":rN=!1,uP(m,n,u);break;case"selectionchange":if(sW)break;case"keydown":case"keyup":uP(m,n,u)}var S;if(__)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else md?H$(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(G$&&n.locale!=="ko"&&(md||C!=="onCompositionStart"?C==="onCompositionEnd"&&md&&(S=K$()):(Ki=u,b_="value"in Ki?Ki.value:Ki.textContent,md=!0)),w=Gx(d,C),0<w.length&&(C=new rP(C,e,null,n,u),m.push({event:C,listeners:w}),S?C.data=S:(S=X$(n),S!==null&&(C.data=S)))),(S=K9?G9(e,n):H9(e,n))&&(d=Gx(d,"onBeforeInput"),0<d.length&&(u=new rP("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=S))}iD(m,t)})}function Mf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gx(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=wf(e,n),o!=null&&s.unshift(Mf(e,o,a)),o=wf(e,t),o!=null&&s.push(Mf(e,o,a))),e=e.return}return s}function Zc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hP(e,t,n,s,a){for(var o=t._reactName,i=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=wf(n,o),c!=null&&i.unshift(Mf(n,c,l))):a||(c=wf(n,o),c!=null&&i.push(Mf(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var lW=/\r\n?/g,cW=/\u0000|\uFFFD/g;function pP(e){return(typeof e=="string"?e:""+e).replace(lW,`
`).replace(cW,"")}function Fp(e,t,n){if(t=pP(t),pP(e)!==t&&n)throw Error(Ue(425))}function Hx(){}var nN=null,sN=null;function aN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oN=typeof setTimeout=="function"?setTimeout:void 0,dW=typeof clearTimeout=="function"?clearTimeout:void 0,xP=typeof Promise=="function"?Promise:void 0,uW=typeof queueMicrotask=="function"?queueMicrotask:typeof xP<"u"?function(e){return xP.resolve(null).then(e).catch(mW)}:oN;function mW(e){setTimeout(function(){throw e})}function gy(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Cf(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Cf(t)}function tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qu=Math.random().toString(36).slice(2),fo="__reactFiber$"+qu,Of="__reactProps$"+qu,si="__reactContainer$"+qu,iN="__reactEvents$"+qu,fW="__reactListeners$"+qu,hW="__reactHandles$"+qu;function Yl(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[si]||n[fo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gP(e);e!==null;){if(n=e[fo])return n;e=gP(e)}return t}e=n,n=e.parentNode}return null}function Vh(e){return e=e[fo]||e[si],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function Kv(e){return e[Of]||null}var lN=[],xd=-1;function Cl(e){return{current:e}}function $r(e){0>xd||(e.current=lN[xd],lN[xd]=null,xd--)}function Cr(e,t){xd++,lN[xd]=e.current,e.current=t}var fl={},Yn=Cl(fl),Es=Cl(!1),jc=fl;function tu(e,t){var n=e.type.contextTypes;if(!n)return fl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ms(e){return e=e.childContextTypes,e!=null}function Xx(){$r(Es),$r(Yn)}function vP(e,t,n){if(Yn.current!==fl)throw Error(Ue(168));Cr(Yn,t),Cr(Es,n)}function cD(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Ue(108,ZV(e)||"Unknown",a));return Ur({},n,s)}function Yx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fl,jc=Yn.current,Cr(Yn,e),Cr(Es,Es.current),!0}function jP(e,t,n){var s=e.stateNode;if(!s)throw Error(Ue(169));n?(e=cD(e,t,jc),s.__reactInternalMemoizedMergedChildContext=e,$r(Es),$r(Yn),Cr(Yn,e)):$r(Es),Cr(Es,n)}var Vo=null,Gv=!1,vy=!1;function dD(e){Vo===null?Vo=[e]:Vo.push(e)}function pW(e){Gv=!0,dD(e)}function Pl(){if(!vy&&Vo!==null){vy=!0;var e=0,t=ur;try{var n=Vo;for(ur=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Vo=null,Gv=!1}catch(a){throw Vo!==null&&(Vo=Vo.slice(e+1)),D$(g_,Pl),a}finally{ur=t,vy=!1}}return null}var gd=[],vd=0,Qx=null,Zx=0,da=[],ua=0,yc=null,Ko=1,Go="";function Vl(e,t){gd[vd++]=Zx,gd[vd++]=Qx,Qx=e,Zx=t}function uD(e,t,n){da[ua++]=Ko,da[ua++]=Go,da[ua++]=yc,yc=e;var s=Ko;e=Go;var a=32-Wa(s)-1;s&=~(1<<a),n+=1;var o=32-Wa(t)+a;if(30<o){var i=a-a%5;o=(s&(1<<i)-1).toString(32),s>>=i,a-=i,Ko=1<<32-Wa(t)+a|n<<a|s,Go=o+e}else Ko=1<<o|n<<a|s,Go=e}function C_(e){e.return!==null&&(Vl(e,1),uD(e,1,0))}function P_(e){for(;e===Qx;)Qx=gd[--vd],gd[vd]=null,Zx=gd[--vd],gd[vd]=null;for(;e===yc;)yc=da[--ua],da[ua]=null,Go=da[--ua],da[ua]=null,Ko=da[--ua],da[ua]=null}var Ks=null,Us=null,Ir=!1,Ia=null;function mD(e,t){var n=fa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yP(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ks=e,Us=tl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ks=e,Us=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=yc!==null?{id:Ko,overflow:Go}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fa(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ks=e,Us=null,!0):!1;default:return!1}}function cN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dN(e){if(Ir){var t=Us;if(t){var n=t;if(!yP(e,t)){if(cN(e))throw Error(Ue(418));t=tl(n.nextSibling);var s=Ks;t&&yP(e,t)?mD(s,n):(e.flags=e.flags&-4097|2,Ir=!1,Ks=e)}}else{if(cN(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,Ir=!1,Ks=e}}}function bP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ks=e}function Ip(e){if(e!==Ks)return!1;if(!Ir)return bP(e),Ir=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!aN(e.type,e.memoizedProps)),t&&(t=Us)){if(cN(e))throw fD(),Error(Ue(418));for(;t;)mD(e,t),t=tl(t.nextSibling)}if(bP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Us=tl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Us=null}}else Us=Ks?tl(e.stateNode.nextSibling):null;return!0}function fD(){for(var e=Us;e;)e=tl(e.nextSibling)}function ru(){Us=Ks=null,Ir=!1}function A_(e){Ia===null?Ia=[e]:Ia.push(e)}var xW=hi.ReactCurrentBatchConfig;function Sm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ue(309));var s=n.stateNode}if(!s)throw Error(Ue(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ue(284));if(!n._owner)throw Error(Ue(290,e))}return e}function Rp(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NP(e){var t=e._init;return t(e._payload)}function hD(e){function t(j,g){if(e){var N=j.deletions;N===null?(j.deletions=[g],j.flags|=16):N.push(g)}}function n(j,g){if(!e)return null;for(;g!==null;)t(j,g),g=g.sibling;return null}function s(j,g){for(j=new Map;g!==null;)g.key!==null?j.set(g.key,g):j.set(g.index,g),g=g.sibling;return j}function a(j,g){return j=al(j,g),j.index=0,j.sibling=null,j}function o(j,g,N){return j.index=N,e?(N=j.alternate,N!==null?(N=N.index,N<g?(j.flags|=2,g):N):(j.flags|=2,g)):(j.flags|=1048576,g)}function i(j){return e&&j.alternate===null&&(j.flags|=2),j}function l(j,g,N,_){return g===null||g.tag!==6?(g=Sy(N,j.mode,_),g.return=j,g):(g=a(g,N),g.return=j,g)}function c(j,g,N,_){var b=N.type;return b===ud?u(j,g,N.props.children,_,N.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ei&&NP(b)===g.type)?(_=a(g,N.props),_.ref=Sm(j,g,N),_.return=j,_):(_=Px(N.type,N.key,N.props,null,j.mode,_),_.ref=Sm(j,g,N),_.return=j,_)}function d(j,g,N,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==N.containerInfo||g.stateNode.implementation!==N.implementation?(g=Cy(N,j.mode,_),g.return=j,g):(g=a(g,N.children||[]),g.return=j,g)}function u(j,g,N,_,b){return g===null||g.tag!==7?(g=pc(N,j.mode,_,b),g.return=j,g):(g=a(g,N),g.return=j,g)}function m(j,g,N){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Sy(""+g,j.mode,N),g.return=j,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Pp:return N=Px(g.type,g.key,g.props,null,j.mode,N),N.ref=Sm(j,null,g),N.return=j,N;case dd:return g=Cy(g,j.mode,N),g.return=j,g;case Ei:var _=g._init;return m(j,_(g._payload),N)}if(Km(g)||ym(g))return g=pc(g,j.mode,N,null),g.return=j,g;Rp(j,g)}return null}function f(j,g,N,_){var b=g!==null?g.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return b!==null?null:l(j,g,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Pp:return N.key===b?c(j,g,N,_):null;case dd:return N.key===b?d(j,g,N,_):null;case Ei:return b=N._init,f(j,g,b(N._payload),_)}if(Km(N)||ym(N))return b!==null?null:u(j,g,N,_,null);Rp(j,N)}return null}function h(j,g,N,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return j=j.get(N)||null,l(g,j,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pp:return j=j.get(_.key===null?N:_.key)||null,c(g,j,_,b);case dd:return j=j.get(_.key===null?N:_.key)||null,d(g,j,_,b);case Ei:var w=_._init;return h(j,g,N,w(_._payload),b)}if(Km(_)||ym(_))return j=j.get(N)||null,u(g,j,_,b,null);Rp(g,_)}return null}function x(j,g,N,_){for(var b=null,w=null,S=g,C=g=0,A=null;S!==null&&C<N.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var P=f(j,S,N[C],_);if(P===null){S===null&&(S=A);break}e&&S&&P.alternate===null&&t(j,S),g=o(P,g,C),w===null?b=P:w.sibling=P,w=P,S=A}if(C===N.length)return n(j,S),Ir&&Vl(j,C),b;if(S===null){for(;C<N.length;C++)S=m(j,N[C],_),S!==null&&(g=o(S,g,C),w===null?b=S:w.sibling=S,w=S);return Ir&&Vl(j,C),b}for(S=s(j,S);C<N.length;C++)A=h(S,j,C,N[C],_),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),g=o(A,g,C),w===null?b=A:w.sibling=A,w=A);return e&&S.forEach(function(k){return t(j,k)}),Ir&&Vl(j,C),b}function p(j,g,N,_){var b=ym(N);if(typeof b!="function")throw Error(Ue(150));if(N=b.call(N),N==null)throw Error(Ue(151));for(var w=b=null,S=g,C=g=0,A=null,P=N.next();S!==null&&!P.done;C++,P=N.next()){S.index>C?(A=S,S=null):A=S.sibling;var k=f(j,S,P.value,_);if(k===null){S===null&&(S=A);break}e&&S&&k.alternate===null&&t(j,S),g=o(k,g,C),w===null?b=k:w.sibling=k,w=k,S=A}if(P.done)return n(j,S),Ir&&Vl(j,C),b;if(S===null){for(;!P.done;C++,P=N.next())P=m(j,P.value,_),P!==null&&(g=o(P,g,C),w===null?b=P:w.sibling=P,w=P);return Ir&&Vl(j,C),b}for(S=s(j,S);!P.done;C++,P=N.next())P=h(S,j,C,P.value,_),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?C:P.key),g=o(P,g,C),w===null?b=P:w.sibling=P,w=P);return e&&S.forEach(function(E){return t(j,E)}),Ir&&Vl(j,C),b}function v(j,g,N,_){if(typeof N=="object"&&N!==null&&N.type===ud&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Pp:e:{for(var b=N.key,w=g;w!==null;){if(w.key===b){if(b=N.type,b===ud){if(w.tag===7){n(j,w.sibling),g=a(w,N.props.children),g.return=j,j=g;break e}}else if(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ei&&NP(b)===w.type){n(j,w.sibling),g=a(w,N.props),g.ref=Sm(j,w,N),g.return=j,j=g;break e}n(j,w);break}else t(j,w);w=w.sibling}N.type===ud?(g=pc(N.props.children,j.mode,_,N.key),g.return=j,j=g):(_=Px(N.type,N.key,N.props,null,j.mode,_),_.ref=Sm(j,g,N),_.return=j,j=_)}return i(j);case dd:e:{for(w=N.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===N.containerInfo&&g.stateNode.implementation===N.implementation){n(j,g.sibling),g=a(g,N.children||[]),g.return=j,j=g;break e}else{n(j,g);break}else t(j,g);g=g.sibling}g=Cy(N,j.mode,_),g.return=j,j=g}return i(j);case Ei:return w=N._init,v(j,g,w(N._payload),_)}if(Km(N))return x(j,g,N,_);if(ym(N))return p(j,g,N,_);Rp(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,g!==null&&g.tag===6?(n(j,g.sibling),g=a(g,N),g.return=j,j=g):(n(j,g),g=Sy(N,j.mode,_),g.return=j,j=g),i(j)):n(j,g)}return v}var nu=hD(!0),pD=hD(!1),Jx=Cl(null),eg=null,jd=null,E_=null;function M_(){E_=jd=eg=null}function O_(e){var t=Jx.current;$r(Jx),e._currentValue=t}function uN(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Od(e,t){eg=e,E_=jd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ps=!0),e.firstContext=null)}function ga(e){var t=e._currentValue;if(E_!==e)if(e={context:e,memoizedValue:t,next:null},jd===null){if(eg===null)throw Error(Ue(308));jd=e,eg.dependencies={lanes:0,firstContext:e}}else jd=jd.next=e;return t}var Ql=null;function T_(e){Ql===null?Ql=[e]:Ql.push(e)}function xD(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,T_(t)):(n.next=a.next,a.next=n),t.interleaved=n,ai(e,s)}function ai(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mi=!1;function k_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Yt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,ai(e,n)}return a=s.interleaved,a===null?(t.next=t,T_(s)):(t.next=a.next,a.next=t),s.interleaved=t,ai(e,n)}function bx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,v_(e,n)}}function wP(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function tg(e,t,n,s){var a=e.updateQueue;Mi=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;i=0,u=d=c=null,l=o;do{var f=l.lane,h=l.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,p=l;switch(f=t,h=n,p.tag){case 1:if(x=p.payload,typeof x=="function"){m=x.call(h,m,f);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,f=typeof x=="function"?x.call(h,m,f):x,f==null)break e;m=Ur({},m,f);break e;case 2:Mi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=h,c=m):u=u.next=h,i|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Nc|=i,e.lanes=i,e.memoizedState=m}}function _P(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(Ue(191,a));a.call(s)}}}var Wh={},No=Cl(Wh),Tf=Cl(Wh),kf=Cl(Wh);function Zl(e){if(e===Wh)throw Error(Ue(174));return e}function $_(e,t){switch(Cr(kf,t),Cr(Tf,e),Cr(No,Wh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ub(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ub(t,e)}$r(No),Cr(No,t)}function su(){$r(No),$r(Tf),$r(kf)}function vD(e){Zl(kf.current);var t=Zl(No.current),n=Ub(t,e.type);t!==n&&(Cr(Tf,e),Cr(No,n))}function D_(e){Tf.current===e&&($r(No),$r(Tf))}var Br=Cl(0);function rg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jy=[];function F_(){for(var e=0;e<jy.length;e++)jy[e]._workInProgressVersionPrimary=null;jy.length=0}var Nx=hi.ReactCurrentDispatcher,yy=hi.ReactCurrentBatchConfig,bc=0,qr=null,vn=null,En=null,ng=!1,af=!1,$f=0,gW=0;function Bn(){throw Error(Ue(321))}function I_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ya(e[n],t[n]))return!1;return!0}function R_(e,t,n,s,a,o){if(bc=o,qr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nx.current=e===null||e.memoizedState===null?bW:NW,e=n(s,a),af){o=0;do{if(af=!1,$f=0,25<=o)throw Error(Ue(301));o+=1,En=vn=null,t.updateQueue=null,Nx.current=wW,e=n(s,a)}while(af)}if(Nx.current=sg,t=vn!==null&&vn.next!==null,bc=0,En=vn=qr=null,ng=!1,t)throw Error(Ue(300));return e}function L_(){var e=$f!==0;return $f=0,e}function io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?qr.memoizedState=En=e:En=En.next=e,En}function va(){if(vn===null){var e=qr.alternate;e=e!==null?e.memoizedState:null}else e=vn.next;var t=En===null?qr.memoizedState:En.next;if(t!==null)En=t,vn=e;else{if(e===null)throw Error(Ue(310));vn=e,e={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},En===null?qr.memoizedState=En=e:En=En.next=e}return En}function Df(e,t){return typeof t=="function"?t(e):t}function by(e){var t=va(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var s=vn,a=s.baseQueue,o=n.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}s.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,s=s.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((bc&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=s):c=c.next=m,qr.lanes|=u,Nc|=u}d=d.next}while(d!==null&&d!==o);c===null?i=s:c.next=l,Ya(s,t.memoizedState)||(Ps=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do o=a.lane,qr.lanes|=o,Nc|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ny(e){var t=va(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Ya(o,t.memoizedState)||(Ps=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function jD(){}function yD(e,t){var n=qr,s=va(),a=t(),o=!Ya(s.memoizedState,a);if(o&&(s.memoizedState=a,Ps=!0),s=s.queue,B_(wD.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,Ff(9,ND.bind(null,n,s,a,t),void 0,null),Tn===null)throw Error(Ue(349));bc&30||bD(n,t,a)}return a}function bD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qr.updateQueue,t===null?(t={lastEffect:null,stores:null},qr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ND(e,t,n,s){t.value=n,t.getSnapshot=s,_D(t)&&SD(e)}function wD(e,t,n){return n(function(){_D(t)&&SD(e)})}function _D(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ya(e,n)}catch{return!0}}function SD(e){var t=ai(e,1);t!==null&&qa(t,e,1,-1)}function SP(e){var t=io();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:e},t.queue=e,e=e.dispatch=yW.bind(null,qr,e),[t.memoizedState,e]}function Ff(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=qr.updateQueue,t===null?(t={lastEffect:null,stores:null},qr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function CD(){return va().memoizedState}function wx(e,t,n,s){var a=io();qr.flags|=e,a.memoizedState=Ff(1|t,n,void 0,s===void 0?null:s)}function Hv(e,t,n,s){var a=va();s=s===void 0?null:s;var o=void 0;if(vn!==null){var i=vn.memoizedState;if(o=i.destroy,s!==null&&I_(s,i.deps)){a.memoizedState=Ff(t,n,o,s);return}}qr.flags|=e,a.memoizedState=Ff(1|t,n,o,s)}function CP(e,t){return wx(8390656,8,e,t)}function B_(e,t){return Hv(2048,8,e,t)}function PD(e,t){return Hv(4,2,e,t)}function AD(e,t){return Hv(4,4,e,t)}function ED(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MD(e,t,n){return n=n!=null?n.concat([e]):null,Hv(4,4,ED.bind(null,t,e),n)}function z_(){}function OD(e,t){var n=va();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&I_(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function TD(e,t){var n=va();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&I_(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function kD(e,t,n){return bc&21?(Ya(n,t)||(n=R$(),qr.lanes|=n,Nc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ps=!0),e.memoizedState=n)}function vW(e,t){var n=ur;ur=n!==0&&4>n?n:4,e(!0);var s=yy.transition;yy.transition={};try{e(!1),t()}finally{ur=n,yy.transition=s}}function $D(){return va().memoizedState}function jW(e,t,n){var s=sl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},DD(e))FD(t,n);else if(n=xD(e,t,n,s),n!==null){var a=ds();qa(n,e,s,a),ID(n,t,s)}}function yW(e,t,n){var s=sl(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(DD(e))FD(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,Ya(l,i)){var c=t.interleaved;c===null?(a.next=a,T_(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=xD(e,t,a,s),n!==null&&(a=ds(),qa(n,e,s,a),ID(n,t,s))}}function DD(e){var t=e.alternate;return e===qr||t!==null&&t===qr}function FD(e,t){af=ng=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ID(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,v_(e,n)}}var sg={readContext:ga,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},bW={readContext:ga,useCallback:function(e,t){return io().memoizedState=[e,t===void 0?null:t],e},useContext:ga,useEffect:CP,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wx(4194308,4,ED.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wx(4194308,4,e,t)},useInsertionEffect:function(e,t){return wx(4,2,e,t)},useMemo:function(e,t){var n=io();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=io();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=jW.bind(null,qr,e),[s.memoizedState,e]},useRef:function(e){var t=io();return e={current:e},t.memoizedState=e},useState:SP,useDebugValue:z_,useDeferredValue:function(e){return io().memoizedState=e},useTransition:function(){var e=SP(!1),t=e[0];return e=vW.bind(null,e[1]),io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=qr,a=io();if(Ir){if(n===void 0)throw Error(Ue(407));n=n()}else{if(n=t(),Tn===null)throw Error(Ue(349));bc&30||bD(s,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,CP(wD.bind(null,s,o,e),[e]),s.flags|=2048,Ff(9,ND.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=io(),t=Tn.identifierPrefix;if(Ir){var n=Go,s=Ko;n=(s&~(1<<32-Wa(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=$f++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gW++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},NW={readContext:ga,useCallback:OD,useContext:ga,useEffect:B_,useImperativeHandle:MD,useInsertionEffect:PD,useLayoutEffect:AD,useMemo:TD,useReducer:by,useRef:CD,useState:function(){return by(Df)},useDebugValue:z_,useDeferredValue:function(e){var t=va();return kD(t,vn.memoizedState,e)},useTransition:function(){var e=by(Df)[0],t=va().memoizedState;return[e,t]},useMutableSource:jD,useSyncExternalStore:yD,useId:$D,unstable_isNewReconciler:!1},wW={readContext:ga,useCallback:OD,useContext:ga,useEffect:B_,useImperativeHandle:MD,useInsertionEffect:PD,useLayoutEffect:AD,useMemo:TD,useReducer:Ny,useRef:CD,useState:function(){return Ny(Df)},useDebugValue:z_,useDeferredValue:function(e){var t=va();return vn===null?t.memoizedState=e:kD(t,vn.memoizedState,e)},useTransition:function(){var e=Ny(Df)[0],t=va().memoizedState;return[e,t]},useMutableSource:jD,useSyncExternalStore:yD,useId:$D,unstable_isNewReconciler:!1};function Oa(e,t){if(e&&e.defaultProps){t=Ur({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function mN(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ur({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xv={isMounted:function(e){return(e=e._reactInternals)?Lc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ds(),a=sl(e),o=Qo(s,a);o.payload=t,n!=null&&(o.callback=n),t=rl(e,o,a),t!==null&&(qa(t,e,a,s),bx(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ds(),a=sl(e),o=Qo(s,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=rl(e,o,a),t!==null&&(qa(t,e,a,s),bx(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ds(),s=sl(e),a=Qo(n,s);a.tag=2,t!=null&&(a.callback=t),t=rl(e,a,s),t!==null&&(qa(t,e,s,n),bx(t,e,s))}};function PP(e,t,n,s,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Af(n,s)||!Af(a,o):!0}function RD(e,t,n){var s=!1,a=fl,o=t.contextType;return typeof o=="object"&&o!==null?o=ga(o):(a=Ms(t)?jc:Yn.current,s=t.contextTypes,o=(s=s!=null)?tu(e,a):fl),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xv,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function AP(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Xv.enqueueReplaceState(t,t.state,null)}function fN(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},k_(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=ga(o):(o=Ms(t)?jc:Yn.current,a.context=tu(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(mN(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Xv.enqueueReplaceState(a,a.state,null),tg(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function au(e,t){try{var n="",s=t;do n+=QV(s),s=s.return;while(s);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function wy(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hN(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _W=typeof WeakMap=="function"?WeakMap:Map;function LD(e,t,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){og||(og=!0,_N=s),hN(e,t)},n}function BD(e,t,n){n=Qo(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){hN(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){hN(e,t),typeof s!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function EP(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new _W;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=RW.bind(null,e,t,n),t.then(e,e))}function MP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OP(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qo(-1,1),t.tag=2,rl(n,t,1))),n.lanes|=1),e)}var SW=hi.ReactCurrentOwner,Ps=!1;function ts(e,t,n,s){t.child=e===null?pD(t,null,n,s):nu(t,e.child,n,s)}function TP(e,t,n,s,a){n=n.render;var o=t.ref;return Od(t,a),s=R_(e,t,n,s,o,a),n=L_(),e!==null&&!Ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,oi(e,t,a)):(Ir&&n&&C_(t),t.flags|=1,ts(e,t,s,a),t.child)}function kP(e,t,n,s,a){if(e===null){var o=n.type;return typeof o=="function"&&!X_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,zD(e,t,o,s,a)):(e=Px(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Af,n(i,s)&&e.ref===t.ref)return oi(e,t,a)}return t.flags|=1,e=al(o,s),e.ref=t.ref,e.return=t,t.child=e}function zD(e,t,n,s,a){if(e!==null){var o=e.memoizedProps;if(Af(o,s)&&e.ref===t.ref)if(Ps=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(Ps=!0);else return t.lanes=e.lanes,oi(e,t,a)}return pN(e,t,n,s,a)}function VD(e,t,n){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(bd,Vs),Vs|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(bd,Vs),Vs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,Cr(bd,Vs),Vs|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,Cr(bd,Vs),Vs|=s;return ts(e,t,a,n),t.child}function WD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pN(e,t,n,s,a){var o=Ms(n)?jc:Yn.current;return o=tu(t,o),Od(t,a),n=R_(e,t,n,s,o,a),s=L_(),e!==null&&!Ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,oi(e,t,a)):(Ir&&s&&C_(t),t.flags|=1,ts(e,t,n,a),t.child)}function $P(e,t,n,s,a){if(Ms(n)){var o=!0;Yx(t)}else o=!1;if(Od(t,a),t.stateNode===null)_x(e,t),RD(t,n,s),fN(t,n,s,a),s=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=ga(d):(d=Ms(n)?jc:Yn.current,d=tu(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||c!==d)&&AP(t,i,s,d),Mi=!1;var f=t.memoizedState;i.state=f,tg(t,s,i,a),c=t.memoizedState,l!==s||f!==c||Es.current||Mi?(typeof u=="function"&&(mN(t,n,u,s),c=t.memoizedState),(l=Mi||PP(t,n,l,s,f,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=d,s=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,gD(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Oa(t.type,l),i.props=d,m=t.pendingProps,f=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=ga(c):(c=Ms(n)?jc:Yn.current,c=tu(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||f!==c)&&AP(t,i,s,c),Mi=!1,f=t.memoizedState,i.state=f,tg(t,s,i,a);var x=t.memoizedState;l!==m||f!==x||Es.current||Mi?(typeof h=="function"&&(mN(t,n,h,s),x=t.memoizedState),(d=Mi||PP(t,n,d,s,f,x,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,x,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),i.props=s,i.state=x,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return xN(e,t,n,s,o,a)}function xN(e,t,n,s,a,o){WD(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&jP(t,n,!1),oi(e,t,o);s=t.stateNode,SW.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=nu(t,e.child,null,o),t.child=nu(t,null,l,o)):ts(e,t,l,o),t.memoizedState=s.state,a&&jP(t,n,!0),t.child}function qD(e){var t=e.stateNode;t.pendingContext?vP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vP(e,t.context,!1),$_(e,t.containerInfo)}function DP(e,t,n,s,a){return ru(),A_(a),t.flags|=256,ts(e,t,n,s),t.child}var gN={dehydrated:null,treeContext:null,retryLane:0};function vN(e){return{baseLanes:e,cachePool:null,transitions:null}}function UD(e,t,n){var s=t.pendingProps,a=Br.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Cr(Br,a&1),e===null)return dN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,o?(s=t.mode,o=t.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Zv(i,s,0,null),e=pc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=vN(n),t.memoizedState=gN,e):V_(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return CW(e,t,i,s,l,a,n);if(o){o=s.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=al(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=al(l,o):(o=pc(o,i,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,i=e.child.memoizedState,i=i===null?vN(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=gN,s}return o=e.child,e=o.sibling,s=al(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function V_(e,t){return t=Zv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lp(e,t,n,s){return s!==null&&A_(s),nu(t,e.child,null,n),e=V_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function CW(e,t,n,s,a,o,i){if(n)return t.flags&256?(t.flags&=-257,s=wy(Error(Ue(422))),Lp(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=Zv({mode:"visible",children:s.children},a,0,null),o=pc(o,a,i,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&nu(t,e.child,null,i),t.child.memoizedState=vN(i),t.memoizedState=gN,o);if(!(t.mode&1))return Lp(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(Ue(419)),s=wy(o,s,void 0),Lp(e,t,i,s)}if(l=(i&e.childLanes)!==0,Ps||l){if(s=Tn,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,ai(e,a),qa(s,e,a,-1))}return H_(),s=wy(Error(Ue(421))),Lp(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=LW.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Us=tl(a.nextSibling),Ks=t,Ir=!0,Ia=null,e!==null&&(da[ua++]=Ko,da[ua++]=Go,da[ua++]=yc,Ko=e.id,Go=e.overflow,yc=t),t=V_(t,s.children),t.flags|=4096,t)}function FP(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),uN(e.return,t,n)}function _y(e,t,n,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a)}function KD(e,t,n){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(ts(e,t,s.children,n),s=Br.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&FP(e,n,t);else if(e.tag===19)FP(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cr(Br,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&rg(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),_y(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&rg(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}_y(t,!0,n,null,o);break;case"together":_y(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _x(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function oi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Nc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,n=al(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=al(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function PW(e,t,n){switch(t.tag){case 3:qD(t),ru();break;case 5:vD(t);break;case 1:Ms(t.type)&&Yx(t);break;case 4:$_(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Cr(Jx,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Cr(Br,Br.current&1),t.flags|=128,null):n&t.child.childLanes?UD(e,t,n):(Cr(Br,Br.current&1),e=oi(e,t,n),e!==null?e.sibling:null);Cr(Br,Br.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return KD(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Cr(Br,Br.current),s)break;return null;case 22:case 23:return t.lanes=0,VD(e,t,n)}return oi(e,t,n)}var GD,jN,HD,XD;GD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jN=function(){};HD=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Zl(No.current);var o=null;switch(n){case"input":a=zb(e,a),s=zb(e,s),o=[];break;case"select":a=Ur({},a,{value:void 0}),s=Ur({},s,{value:void 0}),o=[];break;case"textarea":a=qb(e,a),s=qb(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Hx)}Kb(n,s);var i;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bf.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bf.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Or("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};XD=function(e,t,n,s){n!==s&&(t.flags|=4)};function Cm(e,t){if(!Ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function zn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function AW(e,t,n){var s=t.pendingProps;switch(P_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(t),null;case 1:return Ms(t.type)&&Xx(),zn(t),null;case 3:return s=t.stateNode,su(),$r(Es),$r(Yn),F_(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ip(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ia!==null&&(PN(Ia),Ia=null))),jN(e,t),zn(t),null;case 5:D_(t);var a=Zl(kf.current);if(n=t.type,e!==null&&t.stateNode!=null)HD(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Ue(166));return zn(t),null}if(e=Zl(No.current),Ip(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[fo]=t,s[Of]=o,e=(t.mode&1)!==0,n){case"dialog":Or("cancel",s),Or("close",s);break;case"iframe":case"object":case"embed":Or("load",s);break;case"video":case"audio":for(a=0;a<Hm.length;a++)Or(Hm[a],s);break;case"source":Or("error",s);break;case"img":case"image":case"link":Or("error",s),Or("load",s);break;case"details":Or("toggle",s);break;case"input":UC(s,o),Or("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Or("invalid",s);break;case"textarea":GC(s,o),Or("invalid",s)}Kb(n,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&Fp(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Fp(s.textContent,l,e),a=["children",""+l]):bf.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Or("scroll",s)}switch(n){case"input":Ap(s),KC(s,o,!0);break;case"textarea":Ap(s),HC(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Hx)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w$(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[fo]=t,e[Of]=s,GD(e,t,!1,!1),t.stateNode=e;e:{switch(i=Gb(n,s),n){case"dialog":Or("cancel",e),Or("close",e),a=s;break;case"iframe":case"object":case"embed":Or("load",e),a=s;break;case"video":case"audio":for(a=0;a<Hm.length;a++)Or(Hm[a],e);a=s;break;case"source":Or("error",e),a=s;break;case"img":case"image":case"link":Or("error",e),Or("load",e),a=s;break;case"details":Or("toggle",e),a=s;break;case"input":UC(e,s),a=zb(e,s),Or("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ur({},s,{value:void 0}),Or("invalid",e);break;case"textarea":GC(e,s),a=qb(e,s),Or("invalid",e);break;default:a=s}Kb(n,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?C$(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_$(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nf(e,c):typeof c=="number"&&Nf(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bf.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Or("scroll",e):c!=null&&m_(e,o,c,i))}switch(n){case"input":Ap(e),KC(e,s,!1);break;case"textarea":Ap(e),HC(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ml(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?Pd(e,!!s.multiple,o,!1):s.defaultValue!=null&&Pd(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Hx)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zn(t),null;case 6:if(e&&t.stateNode!=null)XD(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Ue(166));if(n=Zl(kf.current),Zl(No.current),Ip(t)){if(s=t.stateNode,n=t.memoizedProps,s[fo]=t,(o=s.nodeValue!==n)&&(e=Ks,e!==null))switch(e.tag){case 3:Fp(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fp(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[fo]=t,t.stateNode=s}return zn(t),null;case 13:if($r(Br),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ir&&Us!==null&&t.mode&1&&!(t.flags&128))fD(),ru(),t.flags|=98560,o=!1;else if(o=Ip(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(Ue(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ue(317));o[fo]=t}else ru(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zn(t),o=!1}else Ia!==null&&(PN(Ia),Ia=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Br.current&1?yn===0&&(yn=3):H_())),t.updateQueue!==null&&(t.flags|=4),zn(t),null);case 4:return su(),jN(e,t),e===null&&Ef(t.stateNode.containerInfo),zn(t),null;case 10:return O_(t.type._context),zn(t),null;case 17:return Ms(t.type)&&Xx(),zn(t),null;case 19:if($r(Br),o=t.memoizedState,o===null)return zn(t),null;if(s=(t.flags&128)!==0,i=o.rendering,i===null)if(s)Cm(o,!1);else{if(yn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=rg(e),i!==null){for(t.flags|=128,Cm(o,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Br,Br.current&1|2),t.child}e=e.sibling}o.tail!==null&&tn()>ou&&(t.flags|=128,s=!0,Cm(o,!1),t.lanes=4194304)}else{if(!s)if(e=rg(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ir)return zn(t),null}else 2*tn()-o.renderingStartTime>ou&&n!==1073741824&&(t.flags|=128,s=!0,Cm(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=tn(),t.sibling=null,n=Br.current,Cr(Br,s?n&1|2:n&1),t):(zn(t),null);case 22:case 23:return G_(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Vs&1073741824&&(zn(t),t.subtreeFlags&6&&(t.flags|=8192)):zn(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function EW(e,t){switch(P_(t),t.tag){case 1:return Ms(t.type)&&Xx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return su(),$r(Es),$r(Yn),F_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return D_(t),null;case 13:if($r(Br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));ru()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $r(Br),null;case 4:return su(),null;case 10:return O_(t.type._context),null;case 22:case 23:return G_(),null;case 24:return null;default:return null}}var Bp=!1,Kn=!1,MW=typeof WeakSet=="function"?WeakSet:Set,at=null;function yd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Yr(e,t,s)}else n.current=null}function yN(e,t,n){try{n()}catch(s){Yr(e,t,s)}}var IP=!1;function OW(e,t){if(nN=Ux,e=eD(),S_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var h;m!==n||a!==0&&m.nodeType!==3||(l=i+a),m!==o||s!==0&&m.nodeType!==3||(c=i+s),m.nodeType===3&&(i+=m.nodeValue.length),(h=m.firstChild)!==null;)f=m,m=h;for(;;){if(m===e)break t;if(f===n&&++d===a&&(l=i),f===o&&++u===s&&(c=i),(h=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sN={focusedElem:e,selectionRange:n},Ux=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){t=at;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,v=x.memoizedState,j=t.stateNode,g=j.getSnapshotBeforeUpdate(t.elementType===t.type?p:Oa(t.type,p),v);j.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(_){Yr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}return x=IP,IP=!1,x}function of(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&yN(t,n,o)}a=a.next}while(a!==s)}}function Yv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function bN(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function YD(e){var t=e.alternate;t!==null&&(e.alternate=null,YD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fo],delete t[Of],delete t[iN],delete t[fW],delete t[hW])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QD(e){return e.tag===5||e.tag===3||e.tag===4}function RP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function NN(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hx));else if(s!==4&&(e=e.child,e!==null))for(NN(e,t,n),e=e.sibling;e!==null;)NN(e,t,n),e=e.sibling}function wN(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(wN(e,t,n),e=e.sibling;e!==null;)wN(e,t,n),e=e.sibling}var Fn=null,$a=!1;function bi(e,t,n){for(n=n.child;n!==null;)ZD(e,t,n),n=n.sibling}function ZD(e,t,n){if(bo&&typeof bo.onCommitFiberUnmount=="function")try{bo.onCommitFiberUnmount(Vv,n)}catch{}switch(n.tag){case 5:Kn||yd(n,t);case 6:var s=Fn,a=$a;Fn=null,bi(e,t,n),Fn=s,$a=a,Fn!==null&&($a?(e=Fn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fn.removeChild(n.stateNode));break;case 18:Fn!==null&&($a?(e=Fn,n=n.stateNode,e.nodeType===8?gy(e.parentNode,n):e.nodeType===1&&gy(e,n),Cf(e)):gy(Fn,n.stateNode));break;case 4:s=Fn,a=$a,Fn=n.stateNode.containerInfo,$a=!0,bi(e,t,n),Fn=s,$a=a;break;case 0:case 11:case 14:case 15:if(!Kn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&yN(n,t,i),a=a.next}while(a!==s)}bi(e,t,n);break;case 1:if(!Kn&&(yd(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Yr(n,t,l)}bi(e,t,n);break;case 21:bi(e,t,n);break;case 22:n.mode&1?(Kn=(s=Kn)||n.memoizedState!==null,bi(e,t,n),Kn=s):bi(e,t,n);break;default:bi(e,t,n)}}function LP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new MW),t.forEach(function(s){var a=BW.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Pa(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Fn=l.stateNode,$a=!1;break e;case 3:Fn=l.stateNode.containerInfo,$a=!0;break e;case 4:Fn=l.stateNode.containerInfo,$a=!0;break e}l=l.return}if(Fn===null)throw Error(Ue(160));ZD(o,i,a),Fn=null,$a=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Yr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)JD(t,e),t=t.sibling}function JD(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pa(t,e),oo(e),s&4){try{of(3,e,e.return),Yv(3,e)}catch(p){Yr(e,e.return,p)}try{of(5,e,e.return)}catch(p){Yr(e,e.return,p)}}break;case 1:Pa(t,e),oo(e),s&512&&n!==null&&yd(n,n.return);break;case 5:if(Pa(t,e),oo(e),s&512&&n!==null&&yd(n,n.return),e.flags&32){var a=e.stateNode;try{Nf(a,"")}catch(p){Yr(e,e.return,p)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&b$(a,o),Gb(l,i);var d=Gb(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?C$(a,m):u==="dangerouslySetInnerHTML"?_$(a,m):u==="children"?Nf(a,m):m_(a,u,m,d)}switch(l){case"input":Vb(a,o);break;case"textarea":N$(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Pd(a,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Pd(a,!!o.multiple,o.defaultValue,!0):Pd(a,!!o.multiple,o.multiple?[]:"",!1))}a[Of]=o}catch(p){Yr(e,e.return,p)}}break;case 6:if(Pa(t,e),oo(e),s&4){if(e.stateNode===null)throw Error(Ue(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(p){Yr(e,e.return,p)}}break;case 3:if(Pa(t,e),oo(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Cf(t.containerInfo)}catch(p){Yr(e,e.return,p)}break;case 4:Pa(t,e),oo(e);break;case 13:Pa(t,e),oo(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(U_=tn())),s&4&&LP(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Kn=(d=Kn)||u,Pa(t,e),Kn=d):Pa(t,e),oo(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(at=e,u=e.child;u!==null;){for(m=at=u;at!==null;){switch(f=at,h=f.child,f.tag){case 0:case 11:case 14:case 15:of(4,f,f.return);break;case 1:yd(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(p){Yr(s,n,p)}}break;case 5:yd(f,f.return);break;case 22:if(f.memoizedState!==null){zP(m);continue}}h!==null?(h.return=f,at=h):zP(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=S$("display",i))}catch(p){Yr(e,e.return,p)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){Yr(e,e.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Pa(t,e),oo(e),s&4&&LP(e);break;case 21:break;default:Pa(t,e),oo(e)}}function oo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(QD(n)){var s=n;break e}n=n.return}throw Error(Ue(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Nf(a,""),s.flags&=-33);var o=RP(e);wN(e,o,a);break;case 3:case 4:var i=s.stateNode.containerInfo,l=RP(e);NN(e,l,i);break;default:throw Error(Ue(161))}}catch(c){Yr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TW(e,t,n){at=e,eF(e)}function eF(e,t,n){for(var s=(e.mode&1)!==0;at!==null;){var a=at,o=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||Bp;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Kn;l=Bp;var d=Kn;if(Bp=i,(Kn=c)&&!d)for(at=a;at!==null;)i=at,c=i.child,i.tag===22&&i.memoizedState!==null?VP(a):c!==null?(c.return=i,at=c):VP(a);for(;o!==null;)at=o,eF(o),o=o.sibling;at=a,Bp=l,Kn=d}BP(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,at=o):BP(e)}}function BP(e){for(;at!==null;){var t=at;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kn||Yv(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Kn)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Oa(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&_P(t,o,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_P(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Cf(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}Kn||t.flags&512&&bN(t)}catch(f){Yr(t,t.return,f)}}if(t===e){at=null;break}if(n=t.sibling,n!==null){n.return=t.return,at=n;break}at=t.return}}function zP(e){for(;at!==null;){var t=at;if(t===e){at=null;break}var n=t.sibling;if(n!==null){n.return=t.return,at=n;break}at=t.return}}function VP(e){for(;at!==null;){var t=at;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yv(4,t)}catch(c){Yr(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Yr(t,a,c)}}var o=t.return;try{bN(t)}catch(c){Yr(t,o,c)}break;case 5:var i=t.return;try{bN(t)}catch(c){Yr(t,i,c)}}}catch(c){Yr(t,t.return,c)}if(t===e){at=null;break}var l=t.sibling;if(l!==null){l.return=t.return,at=l;break}at=t.return}}var kW=Math.ceil,ag=hi.ReactCurrentDispatcher,W_=hi.ReactCurrentOwner,pa=hi.ReactCurrentBatchConfig,Yt=0,Tn=null,ln=null,In=0,Vs=0,bd=Cl(0),yn=0,If=null,Nc=0,Qv=0,q_=0,lf=null,Cs=null,U_=0,ou=1/0,Lo=null,og=!1,_N=null,nl=null,zp=!1,Gi=null,ig=0,cf=0,SN=null,Sx=-1,Cx=0;function ds(){return Yt&6?tn():Sx!==-1?Sx:Sx=tn()}function sl(e){return e.mode&1?Yt&2&&In!==0?In&-In:xW.transition!==null?(Cx===0&&(Cx=R$()),Cx):(e=ur,e!==0||(e=window.event,e=e===void 0?16:U$(e.type)),e):1}function qa(e,t,n,s){if(50<cf)throw cf=0,SN=null,Error(Ue(185));Bh(e,n,s),(!(Yt&2)||e!==Tn)&&(e===Tn&&(!(Yt&2)&&(Qv|=n),yn===4&&ki(e,In)),Os(e,s),n===1&&Yt===0&&!(t.mode&1)&&(ou=tn()+500,Gv&&Pl()))}function Os(e,t){var n=e.callbackNode;x9(e,t);var s=qx(e,e===Tn?In:0);if(s===0)n!==null&&QC(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&QC(n),t===1)e.tag===0?pW(WP.bind(null,e)):dD(WP.bind(null,e)),uW(function(){!(Yt&6)&&Pl()}),n=null;else{switch(L$(s)){case 1:n=g_;break;case 4:n=F$;break;case 16:n=Wx;break;case 536870912:n=I$;break;default:n=Wx}n=lF(n,tF.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tF(e,t){if(Sx=-1,Cx=0,Yt&6)throw Error(Ue(327));var n=e.callbackNode;if(Td()&&e.callbackNode!==n)return null;var s=qx(e,e===Tn?In:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=lg(e,s);else{t=s;var a=Yt;Yt|=2;var o=nF();(Tn!==e||In!==t)&&(Lo=null,ou=tn()+500,hc(e,t));do try{FW();break}catch(l){rF(e,l)}while(!0);M_(),ag.current=o,Yt=a,ln!==null?t=0:(Tn=null,In=0,t=yn)}if(t!==0){if(t===2&&(a=Zb(e),a!==0&&(s=a,t=CN(e,a))),t===1)throw n=If,hc(e,0),ki(e,s),Os(e,tn()),n;if(t===6)ki(e,s);else{if(a=e.current.alternate,!(s&30)&&!$W(a)&&(t=lg(e,s),t===2&&(o=Zb(e),o!==0&&(s=o,t=CN(e,o))),t===1))throw n=If,hc(e,0),ki(e,s),Os(e,tn()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Ue(345));case 2:Wl(e,Cs,Lo);break;case 3:if(ki(e,s),(s&130023424)===s&&(t=U_+500-tn(),10<t)){if(qx(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ds(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=oN(Wl.bind(null,e,Cs,Lo),t);break}Wl(e,Cs,Lo);break;case 4:if(ki(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-Wa(s);o=1<<i,i=t[i],i>a&&(a=i),s&=~o}if(s=a,s=tn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kW(s/1960))-s,10<s){e.timeoutHandle=oN(Wl.bind(null,e,Cs,Lo),s);break}Wl(e,Cs,Lo);break;case 5:Wl(e,Cs,Lo);break;default:throw Error(Ue(329))}}}return Os(e,tn()),e.callbackNode===n?tF.bind(null,e):null}function CN(e,t){var n=lf;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),e=lg(e,t),e!==2&&(t=Cs,Cs=n,t!==null&&PN(t)),e}function PN(e){Cs===null?Cs=e:Cs.push.apply(Cs,e)}function $W(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],o=a.getSnapshot;a=a.value;try{if(!Ya(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ki(e,t){for(t&=~q_,t&=~Qv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wa(t),s=1<<n;e[n]=-1,t&=~s}}function WP(e){if(Yt&6)throw Error(Ue(327));Td();var t=qx(e,0);if(!(t&1))return Os(e,tn()),null;var n=lg(e,t);if(e.tag!==0&&n===2){var s=Zb(e);s!==0&&(t=s,n=CN(e,s))}if(n===1)throw n=If,hc(e,0),ki(e,t),Os(e,tn()),n;if(n===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wl(e,Cs,Lo),Os(e,tn()),null}function K_(e,t){var n=Yt;Yt|=1;try{return e(t)}finally{Yt=n,Yt===0&&(ou=tn()+500,Gv&&Pl())}}function wc(e){Gi!==null&&Gi.tag===0&&!(Yt&6)&&Td();var t=Yt;Yt|=1;var n=pa.transition,s=ur;try{if(pa.transition=null,ur=1,e)return e()}finally{ur=s,pa.transition=n,Yt=t,!(Yt&6)&&Pl()}}function G_(){Vs=bd.current,$r(bd)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dW(n)),ln!==null)for(n=ln.return;n!==null;){var s=n;switch(P_(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Xx();break;case 3:su(),$r(Es),$r(Yn),F_();break;case 5:D_(s);break;case 4:su();break;case 13:$r(Br);break;case 19:$r(Br);break;case 10:O_(s.type._context);break;case 22:case 23:G_()}n=n.return}if(Tn=e,ln=e=al(e.current,null),In=Vs=t,yn=0,If=null,q_=Qv=Nc=0,Cs=lf=null,Ql!==null){for(t=0;t<Ql.length;t++)if(n=Ql[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,o=n.pending;if(o!==null){var i=o.next;o.next=a,s.next=i}n.pending=s}Ql=null}return e}function rF(e,t){do{var n=ln;try{if(M_(),Nx.current=sg,ng){for(var s=qr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ng=!1}if(bc=0,En=vn=qr=null,af=!1,$f=0,W_.current=null,n===null||n.return===null){yn=1,If=t,ln=null;break}e:{var o=e,i=n.return,l=n,c=t;if(t=In,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=MP(i);if(h!==null){h.flags&=-257,OP(h,i,l,o,t),h.mode&1&&EP(o,d,t),t=h,c=d;var x=t.updateQueue;if(x===null){var p=new Set;p.add(c),t.updateQueue=p}else x.add(c);break e}else{if(!(t&1)){EP(o,d,t),H_();break e}c=Error(Ue(426))}}else if(Ir&&l.mode&1){var v=MP(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),OP(v,i,l,o,t),A_(au(c,l));break e}}o=c=au(c,l),yn!==4&&(yn=2),lf===null?lf=[o]:lf.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var j=LD(o,c,t);wP(o,j);break e;case 1:l=c;var g=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(nl===null||!nl.has(N)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=BD(o,l,t);wP(o,_);break e}}o=o.return}while(o!==null)}aF(n)}catch(b){t=b,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function nF(){var e=ag.current;return ag.current=sg,e===null?sg:e}function H_(){(yn===0||yn===3||yn===2)&&(yn=4),Tn===null||!(Nc&268435455)&&!(Qv&268435455)||ki(Tn,In)}function lg(e,t){var n=Yt;Yt|=2;var s=nF();(Tn!==e||In!==t)&&(Lo=null,hc(e,t));do try{DW();break}catch(a){rF(e,a)}while(!0);if(M_(),Yt=n,ag.current=s,ln!==null)throw Error(Ue(261));return Tn=null,In=0,yn}function DW(){for(;ln!==null;)sF(ln)}function FW(){for(;ln!==null&&!i9();)sF(ln)}function sF(e){var t=iF(e.alternate,e,Vs);e.memoizedProps=e.pendingProps,t===null?aF(e):ln=t,W_.current=null}function aF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=EW(n,t),n!==null){n.flags&=32767,ln=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yn=6,ln=null;return}}else if(n=AW(n,t,Vs),n!==null){ln=n;return}if(t=t.sibling,t!==null){ln=t;return}ln=t=e}while(t!==null);yn===0&&(yn=5)}function Wl(e,t,n){var s=ur,a=pa.transition;try{pa.transition=null,ur=1,IW(e,t,n,s)}finally{pa.transition=a,ur=s}return null}function IW(e,t,n,s){do Td();while(Gi!==null);if(Yt&6)throw Error(Ue(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(g9(e,o),e===Tn&&(ln=Tn=null,In=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zp||(zp=!0,lF(Wx,function(){return Td(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=pa.transition,pa.transition=null;var i=ur;ur=1;var l=Yt;Yt|=4,W_.current=null,OW(e,n),JD(n,e),nW(sN),Ux=!!nN,sN=nN=null,e.current=n,TW(n),l9(),Yt=l,ur=i,pa.transition=o}else e.current=n;if(zp&&(zp=!1,Gi=e,ig=a),o=e.pendingLanes,o===0&&(nl=null),u9(n.stateNode),Os(e,tn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(og)throw og=!1,e=_N,_N=null,e;return ig&1&&e.tag!==0&&Td(),o=e.pendingLanes,o&1?e===SN?cf++:(cf=0,SN=e):cf=0,Pl(),null}function Td(){if(Gi!==null){var e=L$(ig),t=pa.transition,n=ur;try{if(pa.transition=null,ur=16>e?16:e,Gi===null)var s=!1;else{if(e=Gi,Gi=null,ig=0,Yt&6)throw Error(Ue(331));var a=Yt;for(Yt|=4,at=e.current;at!==null;){var o=at,i=o.child;if(at.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(at=d;at!==null;){var u=at;switch(u.tag){case 0:case 11:case 15:of(8,u,o)}var m=u.child;if(m!==null)m.return=u,at=m;else for(;at!==null;){u=at;var f=u.sibling,h=u.return;if(YD(u),u===d){at=null;break}if(f!==null){f.return=h,at=f;break}at=h}}}var x=o.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}at=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,at=i;else e:for(;at!==null;){if(o=at,o.flags&2048)switch(o.tag){case 0:case 11:case 15:of(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,at=j;break e}at=o.return}}var g=e.current;for(at=g;at!==null;){i=at;var N=i.child;if(i.subtreeFlags&2064&&N!==null)N.return=i,at=N;else e:for(i=g;at!==null;){if(l=at,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yv(9,l)}}catch(b){Yr(l,l.return,b)}if(l===i){at=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,at=_;break e}at=l.return}}if(Yt=a,Pl(),bo&&typeof bo.onPostCommitFiberRoot=="function")try{bo.onPostCommitFiberRoot(Vv,e)}catch{}s=!0}return s}finally{ur=n,pa.transition=t}}return!1}function qP(e,t,n){t=au(n,t),t=LD(e,t,1),e=rl(e,t,1),t=ds(),e!==null&&(Bh(e,1,t),Os(e,t))}function Yr(e,t,n){if(e.tag===3)qP(e,e,n);else for(;t!==null;){if(t.tag===3){qP(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(nl===null||!nl.has(s))){e=au(n,e),e=BD(t,e,1),t=rl(t,e,1),e=ds(),t!==null&&(Bh(t,1,e),Os(t,e));break}}t=t.return}}function RW(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=ds(),e.pingedLanes|=e.suspendedLanes&n,Tn===e&&(In&n)===n&&(yn===4||yn===3&&(In&130023424)===In&&500>tn()-U_?hc(e,0):q_|=n),Os(e,t)}function oF(e,t){t===0&&(e.mode&1?(t=Op,Op<<=1,!(Op&130023424)&&(Op=4194304)):t=1);var n=ds();e=ai(e,t),e!==null&&(Bh(e,t,n),Os(e,n))}function LW(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oF(e,n)}function BW(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Ue(314))}s!==null&&s.delete(t),oF(e,n)}var iF;iF=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Es.current)Ps=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ps=!1,PW(e,t,n);Ps=!!(e.flags&131072)}else Ps=!1,Ir&&t.flags&1048576&&uD(t,Zx,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;_x(e,t),e=t.pendingProps;var a=tu(t,Yn.current);Od(t,n),a=R_(null,t,s,e,a,n);var o=L_();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ms(s)?(o=!0,Yx(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,k_(t),a.updater=Xv,t.stateNode=a,a._reactInternals=t,fN(t,s,e,n),t=xN(null,t,s,!0,o,n)):(t.tag=0,Ir&&o&&C_(t),ts(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(_x(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=VW(s),e=Oa(s,e),a){case 0:t=pN(null,t,s,e,n);break e;case 1:t=$P(null,t,s,e,n);break e;case 11:t=TP(null,t,s,e,n);break e;case 14:t=kP(null,t,s,Oa(s.type,e),n);break e}throw Error(Ue(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),pN(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),$P(e,t,s,a,n);case 3:e:{if(qD(t),e===null)throw Error(Ue(387));s=t.pendingProps,o=t.memoizedState,a=o.element,gD(e,t),tg(t,s,null,n);var i=t.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=au(Error(Ue(423)),t),t=DP(e,t,s,n,a);break e}else if(s!==a){a=au(Error(Ue(424)),t),t=DP(e,t,s,n,a);break e}else for(Us=tl(t.stateNode.containerInfo.firstChild),Ks=t,Ir=!0,Ia=null,n=pD(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ru(),s===a){t=oi(e,t,n);break e}ts(e,t,s,n)}t=t.child}return t;case 5:return vD(t),e===null&&dN(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,aN(s,a)?i=null:o!==null&&aN(s,o)&&(t.flags|=32),WD(e,t),ts(e,t,i,n),t.child;case 6:return e===null&&dN(t),null;case 13:return UD(e,t,n);case 4:return $_(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=nu(t,null,s,n):ts(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),TP(e,t,s,a,n);case 7:return ts(e,t,t.pendingProps,n),t.child;case 8:return ts(e,t,t.pendingProps.children,n),t.child;case 12:return ts(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Cr(Jx,s._currentValue),s._currentValue=i,o!==null)if(Ya(o.value,i)){if(o.children===a.children&&!Es.current){t=oi(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=Qo(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),uN(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Ue(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),uN(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ts(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Od(t,n),a=ga(a),s=s(a),t.flags|=1,ts(e,t,s,n),t.child;case 14:return s=t.type,a=Oa(s,t.pendingProps),a=Oa(s.type,a),kP(e,t,s,a,n);case 15:return zD(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),_x(e,t),t.tag=1,Ms(s)?(e=!0,Yx(t)):e=!1,Od(t,n),RD(t,s,a),fN(t,s,a,n),xN(null,t,s,!0,e,n);case 19:return KD(e,t,n);case 22:return VD(e,t,n)}throw Error(Ue(156,t.tag))};function lF(e,t){return D$(e,t)}function zW(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,n,s){return new zW(e,t,n,s)}function X_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VW(e){if(typeof e=="function")return X_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h_)return 11;if(e===p_)return 14}return 2}function al(e,t){var n=e.alternate;return n===null?(n=fa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Px(e,t,n,s,a,o){var i=2;if(s=e,typeof e=="function")X_(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ud:return pc(n.children,a,o,t);case f_:i=8,a|=8;break;case Ib:return e=fa(12,n,t,a|2),e.elementType=Ib,e.lanes=o,e;case Rb:return e=fa(13,n,t,a),e.elementType=Rb,e.lanes=o,e;case Lb:return e=fa(19,n,t,a),e.elementType=Lb,e.lanes=o,e;case v$:return Zv(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x$:i=10;break e;case g$:i=9;break e;case h_:i=11;break e;case p_:i=14;break e;case Ei:i=16,s=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=fa(i,n,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function pc(e,t,n,s){return e=fa(7,e,s,t),e.lanes=n,e}function Zv(e,t,n,s){return e=fa(22,e,s,t),e.elementType=v$,e.lanes=n,e.stateNode={isHidden:!1},e}function Sy(e,t,n){return e=fa(6,e,null,t),e.lanes=n,e}function Cy(e,t,n){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WW(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oy(0),this.expirationTimes=oy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oy(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Y_(e,t,n,s,a,o,i,l,c){return e=new WW(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=fa(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},k_(o),e}function qW(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dd,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function cF(e){if(!e)return fl;e=e._reactInternals;e:{if(Lc(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ms(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var n=e.type;if(Ms(n))return cD(e,n,t)}return t}function dF(e,t,n,s,a,o,i,l,c){return e=Y_(n,s,!0,e,a,o,i,l,c),e.context=cF(null),n=e.current,s=ds(),a=sl(n),o=Qo(s,a),o.callback=t??null,rl(n,o,a),e.current.lanes=a,Bh(e,a,s),Os(e,s),e}function Jv(e,t,n,s){var a=t.current,o=ds(),i=sl(a);return n=cF(n),t.context===null?t.context=n:t.pendingContext=n,t=Qo(o,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rl(a,t,i),e!==null&&(qa(e,a,i,o),bx(e,a,i)),i}function cg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function UP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Q_(e,t){UP(e,t),(e=e.alternate)&&UP(e,t)}function UW(){return null}var uF=typeof reportError=="function"?reportError:function(e){console.error(e)};function Z_(e){this._internalRoot=e}e0.prototype.render=Z_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));Jv(e,t,null,null)};e0.prototype.unmount=Z_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wc(function(){Jv(null,e,null,null)}),t[si]=null}};function e0(e){this._internalRoot=e}e0.prototype.unstable_scheduleHydration=function(e){if(e){var t=V$();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ti.length&&t!==0&&t<Ti[n].priority;n++);Ti.splice(n,0,e),n===0&&q$(e)}};function J_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function t0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function KP(){}function KW(e,t,n,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var d=cg(i);o.call(d)}}var i=dF(t,s,e,0,null,!1,!1,"",KP);return e._reactRootContainer=i,e[si]=i.current,Ef(e.nodeType===8?e.parentNode:e),wc(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=cg(c);l.call(d)}}var c=Y_(e,0,!1,null,null,!1,!1,"",KP);return e._reactRootContainer=c,e[si]=c.current,Ef(e.nodeType===8?e.parentNode:e),wc(function(){Jv(t,c,n,s)}),c}function r0(e,t,n,s,a){var o=n._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=cg(i);l.call(c)}}Jv(t,i,e,a)}else i=KW(n,t,e,a,s);return cg(i)}B$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gm(t.pendingLanes);n!==0&&(v_(t,n|1),Os(t,tn()),!(Yt&6)&&(ou=tn()+500,Pl()))}break;case 13:wc(function(){var s=ai(e,1);if(s!==null){var a=ds();qa(s,e,1,a)}}),Q_(e,1)}};j_=function(e){if(e.tag===13){var t=ai(e,134217728);if(t!==null){var n=ds();qa(t,e,134217728,n)}Q_(e,134217728)}};z$=function(e){if(e.tag===13){var t=sl(e),n=ai(e,t);if(n!==null){var s=ds();qa(n,e,t,s)}Q_(e,t)}};V$=function(){return ur};W$=function(e,t){var n=ur;try{return ur=e,t()}finally{ur=n}};Xb=function(e,t,n){switch(t){case"input":if(Vb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Kv(s);if(!a)throw Error(Ue(90));y$(s),Vb(s,a)}}}break;case"textarea":N$(e,n);break;case"select":t=n.value,t!=null&&Pd(e,!!n.multiple,t,!1)}};E$=K_;M$=wc;var GW={usingClientEntryPoint:!1,Events:[Vh,pd,Kv,P$,A$,K_]},Pm={findFiberByHostInstance:Yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HW={bundleType:Pm.bundleType,version:Pm.version,rendererPackageName:Pm.rendererPackageName,rendererConfig:Pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=k$(e),e===null?null:e.stateNode},findFiberByHostInstance:Pm.findFiberByHostInstance||UW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{Vv=Vp.inject(HW),bo=Vp}catch{}}ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GW;ra.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J_(t))throw Error(Ue(200));return qW(e,t,null,n)};ra.createRoot=function(e,t){if(!J_(e))throw Error(Ue(299));var n=!1,s="",a=uF;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Y_(e,1,!1,null,null,n,!1,s,a),e[si]=t.current,Ef(e.nodeType===8?e.parentNode:e),new Z_(t)};ra.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=k$(t),e=e===null?null:e.stateNode,e};ra.flushSync=function(e){return wc(e)};ra.hydrate=function(e,t,n){if(!t0(t))throw Error(Ue(200));return r0(null,e,t,!0,n)};ra.hydrateRoot=function(e,t,n){if(!J_(e))throw Error(Ue(405));var s=n!=null&&n.hydratedSources||null,a=!1,o="",i=uF;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=dF(t,null,e,1,n??null,a,!1,o,i),e[si]=t.current,Ef(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new e0(t)};ra.render=function(e,t,n){if(!t0(t))throw Error(Ue(200));return r0(null,e,t,!1,n)};ra.unmountComponentAtNode=function(e){if(!t0(e))throw Error(Ue(40));return e._reactRootContainer?(wc(function(){r0(null,null,e,!1,function(){e._reactRootContainer=null,e[si]=null})}),!0):!1};ra.unstable_batchedUpdates=K_;ra.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!t0(n))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return r0(e,t,n,!1,s)};ra.version="18.3.1-next-f1338f8080-20240426";function mF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mF)}catch(e){console.error(e)}}mF(),m$.exports=ra;var Bc=m$.exports;const fF=or(Bc);var GP=Bc;Db.createRoot=GP.createRoot,Db.hydrateRoot=GP.hydrateRoot;const XW=1,YW=1e6;let Py=0;function QW(){return Py=(Py+1)%Number.MAX_SAFE_INTEGER,Py.toString()}const Ay=new Map,HP=e=>{if(Ay.has(e))return;const t=setTimeout(()=>{Ay.delete(e),df({type:"REMOVE_TOAST",toastId:e})},YW);Ay.set(e,t)},ZW=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,XW)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?HP(n):e.toasts.forEach(s=>{HP(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ax=[];let Ex={toasts:[]};function df(e){Ex=ZW(Ex,e),Ax.forEach(t=>{t(Ex)})}function Le({...e}){const t=QW(),n=a=>df({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>df({type:"DISMISS_TOAST",toastId:t});return df({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function Rs(){const[e,t]=y.useState(Ex);return y.useEffect(()=>(Ax.push(t),()=>{const n=Ax.indexOf(t);n>-1&&Ax.splice(n,1)}),[e]),{...e,toast:Le,dismiss:n=>df({type:"DISMISS_TOAST",toastId:n})}}function Ge(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function XP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ii(...e){return t=>{let n=!1;const s=e.map(a=>{const o=XP(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():XP(e[a],null)}}}}function Ft(...e){return y.useCallback(ii(...e),e)}function JW(e,t){const n=y.createContext(t),s=o=>{const{children:i,...l}=o,c=y.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:i})};s.displayName=e+"Provider";function a(o){const i=y.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function hn(e,t=[]){let n=[];function s(o,i){const l=y.createContext(i),c=n.length;n=[...n,i];const d=m=>{var j;const{scope:f,children:h,...x}=m,p=((j=f==null?void 0:f[e])==null?void 0:j[c])||l,v=y.useMemo(()=>x,Object.values(x));return r.jsx(p.Provider,{value:v,children:h})};d.displayName=o+"Provider";function u(m,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[c])||l,x=y.useContext(h);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=n.map(i=>y.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return y.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,eq(a,...t)]}function eq(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function hl(e){const t=rq(e),n=y.forwardRef((s,a)=>{const{children:o,...i}=s,l=y.Children.toArray(o),c=l.find(nq);if(c){const d=c.props.children,u=l.map(m=>m===c?y.Children.count(d)>1?y.Children.only(null):y.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...i,ref:a,children:y.isValidElement(d)?y.cloneElement(d,void 0,u):null})}return r.jsx(t,{...i,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var tq=hl("Slot");function rq(e){const t=y.forwardRef((n,s)=>{const{children:a,...o}=n;if(y.isValidElement(a)){const i=aq(a),l=sq(o,a.props);return a.type!==y.Fragment&&(l.ref=s?ii(s,i):i),y.cloneElement(a,l)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hF=Symbol("radix.slottable");function pF(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=hF,t}function nq(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hF}function sq(e,t){const n={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function aq(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function qh(e){const t=e+"CollectionProvider",[n,s]=hn(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:v,children:j}=p,g=K.useRef(null),N=K.useRef(new Map).current;return r.jsx(a,{scope:v,itemMap:N,collectionRef:g,children:j})};i.displayName=t;const l=e+"CollectionSlot",c=hl(l),d=K.forwardRef((p,v)=>{const{scope:j,children:g}=p,N=o(l,j),_=Ft(v,N.collectionRef);return r.jsx(c,{ref:_,children:g})});d.displayName=l;const u=e+"CollectionItemSlot",m="data-radix-collection-item",f=hl(u),h=K.forwardRef((p,v)=>{const{scope:j,children:g,...N}=p,_=K.useRef(null),b=Ft(v,_),w=o(u,j);return K.useEffect(()=>(w.itemMap.set(_,{ref:_,...N}),()=>void w.itemMap.delete(_))),r.jsx(f,{[m]:"",ref:b,children:g})});h.displayName=u;function x(p){const v=o(e+"CollectionConsumer",p);return K.useCallback(()=>{const g=v.collectionRef.current;if(!g)return[];const N=Array.from(g.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((w,S)=>N.indexOf(w.ref.current)-N.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:d,ItemSlot:h},x,s]}var oq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=oq.reduce((e,t)=>{const n=hl(`Primitive.${t}`),s=y.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function eS(e,t){e&&Bc.flushSync(()=>e.dispatchEvent(t))}function fs(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function iq(e,t=globalThis==null?void 0:globalThis.document){const n=fs(e);y.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var lq="DismissableLayer",AN="dismissableLayer.update",cq="dismissableLayer.pointerDownOutside",dq="dismissableLayer.focusOutside",YP,xF=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zc=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=y.useContext(xF),[u,m]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=y.useState({}),x=Ft(t,S=>m(S)),p=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),j=p.indexOf(v),g=u?p.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,_=g>=j,b=mq(S=>{const C=S.target,A=[...d.branches].some(P=>P.contains(C));!_||A||(a==null||a(S),i==null||i(S),S.defaultPrevented||l==null||l())},f),w=fq(S=>{const C=S.target;[...d.branches].some(P=>P.contains(C))||(o==null||o(S),i==null||i(S),S.defaultPrevented||l==null||l())},f);return iq(S=>{g===d.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},f),y.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(YP=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),QP(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=YP)}},[u,f,n,d]),y.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),QP())},[u,d]),y.useEffect(()=>{const S=()=>h({});return document.addEventListener(AN,S),()=>document.removeEventListener(AN,S)},[]),r.jsx(Ze.div,{...c,ref:x,style:{pointerEvents:N?_?"auto":"none":void 0,...e.style},onFocusCapture:Ge(e.onFocusCapture,w.onFocusCapture),onBlurCapture:Ge(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:Ge(e.onPointerDownCapture,b.onPointerDownCapture)})});zc.displayName=lq;var uq="DismissableLayerBranch",gF=y.forwardRef((e,t)=>{const n=y.useContext(xF),s=y.useRef(null),a=Ft(t,s);return y.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),r.jsx(Ze.div,{...e,ref:a})});gF.displayName=uq;function mq(e,t=globalThis==null?void 0:globalThis.document){const n=fs(e),s=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){vF(cq,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function fq(e,t=globalThis==null?void 0:globalThis.document){const n=fs(e),s=y.useRef(!1);return y.useEffect(()=>{const a=o=>{o.target&&!s.current&&vF(dq,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function QP(){const e=new CustomEvent(AN);document.dispatchEvent(e)}function vF(e,t,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?eS(a,o):a.dispatchEvent(o)}var hq=zc,pq=gF,nn=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},xq="Portal",Uu=y.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[a,o]=y.useState(!1);nn(()=>o(!0),[]);const i=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?fF.createPortal(r.jsx(Ze.div,{...s,ref:t}),i):null});Uu.displayName=xq;function gq(e,t){return y.useReducer((n,s)=>t[n][s]??n,e)}var Qn=e=>{const{present:t,children:n}=e,s=vq(t),a=typeof n=="function"?n({present:s.isPresent}):y.Children.only(n),o=Ft(s.ref,jq(a));return typeof n=="function"||s.isPresent?y.cloneElement(a,{ref:o}):null};Qn.displayName="Presence";function vq(e){const[t,n]=y.useState(),s=y.useRef(null),a=y.useRef(e),o=y.useRef("none"),i=e?"mounted":"unmounted",[l,c]=gq(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const d=Wp(s.current);o.current=l==="mounted"?d:"none"},[l]),nn(()=>{const d=s.current,u=a.current;if(u!==e){const f=o.current,h=Wp(d);e?c("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),nn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=h=>{const p=Wp(s.current).includes(h.animationName);if(h.target===t&&p&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=h=>{h.target===t&&(o.current=Wp(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function Wp(e){return(e==null?void 0:e.animationName)||"none"}function jq(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var yq=c_[" useInsertionEffect ".trim().toString()]||nn;function hs({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,o,i]=bq({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const u=y.useRef(e!==void 0);y.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,s])}const d=y.useCallback(u=>{var m;if(l){const f=Nq(u)?u(e):u;f!==e&&((m=i.current)==null||m.call(i,f))}else o(u)},[l,e,o,i]);return[c,d]}function bq({defaultProp:e,onChange:t}){const[n,s]=y.useState(e),a=y.useRef(n),o=y.useRef(t);return yq(()=>{o.current=t},[t]),y.useEffect(()=>{var i;a.current!==n&&((i=o.current)==null||i.call(o,n),a.current=n)},[n,a]),[n,s,o]}function Nq(e){return typeof e=="function"}var jF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wq="VisuallyHidden",n0=y.forwardRef((e,t)=>r.jsx(Ze.span,{...e,ref:t,style:{...jF,...e.style}}));n0.displayName=wq;var _q=n0,tS="ToastProvider",[rS,Sq,Cq]=qh("Toast"),[yF,pFe]=hn("Toast",[Cq]),[Pq,s0]=yF(tS),bF=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=y.useState(null),[d,u]=y.useState(0),m=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${tS}\`. Expected non-empty \`string\`.`),r.jsx(rS.Provider,{scope:t,children:r.jsx(Pq,{scope:t,label:n,duration:s,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>u(h=>h+1),[]),onToastRemove:y.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:i})})};bF.displayName=tS;var NF="ToastViewport",Aq=["F8"],EN="toast.viewportPause",MN="toast.viewportResume",wF=y.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=Aq,label:a="Notifications ({hotkey})",...o}=e,i=s0(NF,n),l=Sq(n),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),m=y.useRef(null),f=Ft(t,m,i.onViewportChange),h=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=i.toastCount>0;y.useEffect(()=>{const v=j=>{var N;s.length!==0&&s.every(_=>j[_]||j.code===_)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s]),y.useEffect(()=>{const v=c.current,j=m.current;if(x&&v&&j){const g=()=>{if(!i.isClosePausedRef.current){const w=new CustomEvent(EN);j.dispatchEvent(w),i.isClosePausedRef.current=!0}},N=()=>{if(i.isClosePausedRef.current){const w=new CustomEvent(MN);j.dispatchEvent(w),i.isClosePausedRef.current=!1}},_=w=>{!v.contains(w.relatedTarget)&&N()},b=()=>{v.contains(document.activeElement)||N()};return v.addEventListener("focusin",g),v.addEventListener("focusout",_),v.addEventListener("pointermove",g),v.addEventListener("pointerleave",b),window.addEventListener("blur",g),window.addEventListener("focus",N),()=>{v.removeEventListener("focusin",g),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",g),v.removeEventListener("pointerleave",b),window.removeEventListener("blur",g),window.removeEventListener("focus",N)}}},[x,i.isClosePausedRef]);const p=y.useCallback(({tabbingDirection:v})=>{const g=l().map(N=>{const _=N.ref.current,b=[_,...zq(_)];return v==="forwards"?b:b.reverse()});return(v==="forwards"?g.reverse():g).flat()},[l]);return y.useEffect(()=>{const v=m.current;if(v){const j=g=>{var b,w,S;const N=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!N){const C=document.activeElement,A=g.shiftKey;if(g.target===v&&A){(b=d.current)==null||b.focus();return}const E=p({tabbingDirection:A?"backwards":"forwards"}),O=E.findIndex(M=>M===C);Ey(E.slice(O+1))?g.preventDefault():A?(w=d.current)==null||w.focus():(S=u.current)==null||S.focus()}};return v.addEventListener("keydown",j),()=>v.removeEventListener("keydown",j)}},[l,p]),r.jsxs(pq,{ref:c,role:"region","aria-label":a.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&r.jsx(ON,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});Ey(v)}}),r.jsx(rS.Slot,{scope:n,children:r.jsx(Ze.ol,{tabIndex:-1,...o,ref:f})}),x&&r.jsx(ON,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});Ey(v)}})]})});wF.displayName=NF;var _F="ToastFocusProxy",ON=y.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...a}=e,o=s0(_F,n);return r.jsx(n0,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});ON.displayName=_F;var Uh="Toast",Eq="toast.swipeStart",Mq="toast.swipeMove",Oq="toast.swipeCancel",Tq="toast.swipeEnd",SF=y.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:a,onOpenChange:o,...i}=e,[l,c]=hs({prop:s,defaultProp:a??!0,onChange:o,caller:Uh});return r.jsx(Qn,{present:n||l,children:r.jsx(Dq,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:fs(e.onPause),onResume:fs(e.onResume),onSwipeStart:Ge(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ge(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Ge(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ge(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});SF.displayName=Uh;var[kq,$q]=yF(Uh,{onClose(){}}),Dq=y.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:h,...x}=e,p=s0(Uh,n),[v,j]=y.useState(null),g=Ft(t,M=>j(M)),N=y.useRef(null),_=y.useRef(null),b=a||p.duration,w=y.useRef(0),S=y.useRef(b),C=y.useRef(0),{onToastAdd:A,onToastRemove:P}=p,k=fs(()=>{var T;(v==null?void 0:v.contains(document.activeElement))&&((T=p.viewport)==null||T.focus()),i()}),E=y.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),w.current=new Date().getTime(),C.current=window.setTimeout(k,M))},[k]);y.useEffect(()=>{const M=p.viewport;if(M){const T=()=>{E(S.current),d==null||d()},V=()=>{const I=new Date().getTime()-w.current;S.current=S.current-I,window.clearTimeout(C.current),c==null||c()};return M.addEventListener(EN,V),M.addEventListener(MN,T),()=>{M.removeEventListener(EN,V),M.removeEventListener(MN,T)}}},[p.viewport,b,c,d,E]),y.useEffect(()=>{o&&!p.isClosePausedRef.current&&E(b)},[o,b,p.isClosePausedRef,E]),y.useEffect(()=>(A(),()=>P()),[A,P]);const O=y.useMemo(()=>v?TF(v):null,[v]);return p.viewport?r.jsxs(r.Fragment,{children:[O&&r.jsx(Fq,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),r.jsx(kq,{scope:n,onClose:k,children:Bc.createPortal(r.jsx(rS.ItemSlot,{scope:n,children:r.jsx(hq,{asChild:!0,onEscapeKeyDown:Ge(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||k(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...x,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ge(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:Ge(e.onPointerDown,M=>{M.button===0&&(N.current={x:M.clientX,y:M.clientY})}),onPointerMove:Ge(e.onPointerMove,M=>{if(!N.current)return;const T=M.clientX-N.current.x,V=M.clientY-N.current.y,I=!!_.current,F=["left","right"].includes(p.swipeDirection),D=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,X=F?D(0,T):0,W=F?0:D(0,V),B=M.pointerType==="touch"?10:2,q={x:X,y:W},te={originalEvent:M,delta:q};I?(_.current=q,qp(Mq,m,te,{discrete:!1})):ZP(q,p.swipeDirection,B)?(_.current=q,qp(Eq,u,te,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(T)>B||Math.abs(V)>B)&&(N.current=null)}),onPointerUp:Ge(e.onPointerUp,M=>{const T=_.current,V=M.target;if(V.hasPointerCapture(M.pointerId)&&V.releasePointerCapture(M.pointerId),_.current=null,N.current=null,T){const I=M.currentTarget,F={originalEvent:M,delta:T};ZP(T,p.swipeDirection,p.swipeThreshold)?qp(Tq,h,F,{discrete:!0}):qp(Oq,f,F,{discrete:!0}),I.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Fq=e=>{const{__scopeToast:t,children:n,...s}=e,a=s0(Uh,t),[o,i]=y.useState(!1),[l,c]=y.useState(!1);return Lq(()=>i(!0)),y.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(Uu,{asChild:!0,children:r.jsx(n0,{...s,children:o&&r.jsxs(r.Fragment,{children:[a.label," ",n]})})})},Iq="ToastTitle",CF=y.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Ze.div,{...s,ref:t})});CF.displayName=Iq;var Rq="ToastDescription",PF=y.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Ze.div,{...s,ref:t})});PF.displayName=Rq;var AF="ToastAction",EF=y.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(OF,{altText:n,asChild:!0,children:r.jsx(nS,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${AF}\`. Expected non-empty \`string\`.`),null)});EF.displayName=AF;var MF="ToastClose",nS=y.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,a=$q(MF,n);return r.jsx(OF,{asChild:!0,children:r.jsx(Ze.button,{type:"button",...s,ref:t,onClick:Ge(e.onClick,a.onClose)})})});nS.displayName=MF;var OF=y.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...a}=e;return r.jsx(Ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function TF(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),Bq(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...TF(s))}}),t}function qp(e,t,n,{discrete:s}){const a=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?eS(a,o):a.dispatchEvent(o)}var ZP=(e,t,n=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),o=s>a;return t==="left"||t==="right"?o&&s>n:!o&&a>n};function Lq(e=()=>{}){const t=fs(e);nn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function Bq(e){return e.nodeType===e.ELEMENT_NODE}function zq(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ey(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Vq=bF,kF=wF,$F=SF,DF=CF,FF=PF,IF=EF,RF=nS;function LF(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=LF(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Mt(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=LF(e))&&(s&&(s+=" "),s+=t);return s}const JP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,eA=Mt,Kh=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return eA(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],m=o==null?void 0:o[d];if(u===null)return null;const f=JP(u)||JP(m);return a[d][f]}),l=n&&Object.entries(n).reduce((d,u)=>{let[m,f]=u;return f===void 0||(d[m]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:m,className:f,...h}=u;return Object.entries(h).every(x=>{let[p,v]=x;return Array.isArray(v)?v.includes({...o,...l}[p]):{...o,...l}[p]===v})?[...d,m,f]:d},[]);return eA(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BF=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:i,...l},c)=>y.createElement("svg",{ref:c,...qq,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:BF("lucide",a),...l},[...i.map(([d,u])=>y.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(e,t)=>{const n=y.forwardRef(({className:s,...a},o)=>y.createElement(Uq,{ref:o,iconNode:t,className:BF(`lucide-${Wq(e)}`,s),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=lt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=lt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=lt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=lt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=lt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=lt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=lt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=lt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=lt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=lt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=lt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=lt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=lt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=lt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=lt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=lt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=lt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=lt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=lt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=lt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=lt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=lt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=lt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=lt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=lt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=lt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=lt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=lt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=lt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=lt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=lt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=lt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=lt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=lt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=lt("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=lt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=lt("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=lt("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=lt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=lt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=lt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=lt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=lt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=lt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=lt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=lt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=lt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=lt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=lt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=lt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=lt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=lt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=lt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=lt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=lt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=lt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=lt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=lt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=lt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=lt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),lS="-",lU=e=>{const t=dU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(lS);return l[0]===""&&l.length!==1&&l.shift(),qF(l,t)||cU(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},qF=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?qF(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(lS);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},nA=/^\[(.+)\]$/,cU=e=>{if(nA.test(e)){const t=nA.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},dU=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return mU(Object.entries(e.classGroups),n).forEach(([o,i])=>{$N(i,s,o,t)}),s},$N=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:sA(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(uU(a)){$N(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,i])=>{$N(i,sA(t,o),n,s)})})},sA=(e,t)=>{let n=e;return t.split(lS).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},uU=e=>e.isThemeGetter,mU=(e,t)=>t?e.map(([n,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[n,a]}):e,fU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return a(o,i),i},set(o,i){n.has(o)?n.set(o,i):a(o,i)}}},UF="!",hU=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,u=0,m;for(let v=0;v<l.length;v++){let j=l[v];if(d===0){if(j===a&&(s||l.slice(v,v+o)===t)){c.push(l.slice(u,v)),u=v+o;continue}if(j==="/"){m=v;continue}}j==="["?d++:j==="]"&&d--}const f=c.length===0?l:l.substring(u),h=f.startsWith(UF),x=h?f.substring(1):f,p=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:x,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:i}):i},pU=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},xU=e=>({cache:fU(e.cacheSize),parseClassName:hU(e),...lU(e)}),gU=/\s+/,vU=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(gU);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}=n(d);let x=!!h,p=s(x?f.substring(0,h):f);if(!p){if(!x){l=d+(l.length>0?" "+l:l);continue}if(p=s(f),!p){l=d+(l.length>0?" "+l:l);continue}x=!1}const v=pU(u).join(":"),j=m?v+UF:v,g=j+p;if(o.includes(g))continue;o.push(g);const N=a(p,x);for(let _=0;_<N.length;++_){const b=N[_];o.push(j+b)}l=d+(l.length>0?" "+l:l)}return l};function jU(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=KF(t))&&(s&&(s+=" "),s+=n);return s}const KF=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=KF(e[s]))&&(n&&(n+=" "),n+=t);return n};function yU(e,...t){let n,s,a,o=i;function i(c){const d=t.reduce((u,m)=>m(u),e());return n=xU(d),s=n.cache.get,a=n.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=vU(c,n);return a(c,u),u}return function(){return o(jU.apply(null,arguments))}}const Mr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},GF=/^\[(?:([a-z-]+):)?(.+)\]$/i,bU=/^\d+\/\d+$/,NU=new Set(["px","full","screen"]),wU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_U=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,CU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$o=e=>kd(e)||NU.has(e)||bU.test(e),Ni=e=>Hu(e,"length",DU),kd=e=>!!e&&!Number.isNaN(Number(e)),ky=e=>Hu(e,"number",kd),Am=e=>!!e&&Number.isInteger(Number(e)),AU=e=>e.endsWith("%")&&kd(e.slice(0,-1)),Rt=e=>GF.test(e),wi=e=>wU.test(e),EU=new Set(["length","size","percentage"]),MU=e=>Hu(e,EU,HF),OU=e=>Hu(e,"position",HF),TU=new Set(["image","url"]),kU=e=>Hu(e,TU,IU),$U=e=>Hu(e,"",FU),Em=()=>!0,Hu=(e,t,n)=>{const s=GF.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},DU=e=>_U.test(e)&&!SU.test(e),HF=()=>!1,FU=e=>CU.test(e),IU=e=>PU.test(e),RU=()=>{const e=Mr("colors"),t=Mr("spacing"),n=Mr("blur"),s=Mr("brightness"),a=Mr("borderColor"),o=Mr("borderRadius"),i=Mr("borderSpacing"),l=Mr("borderWidth"),c=Mr("contrast"),d=Mr("grayscale"),u=Mr("hueRotate"),m=Mr("invert"),f=Mr("gap"),h=Mr("gradientColorStops"),x=Mr("gradientColorStopPositions"),p=Mr("inset"),v=Mr("margin"),j=Mr("opacity"),g=Mr("padding"),N=Mr("saturate"),_=Mr("scale"),b=Mr("sepia"),w=Mr("skew"),S=Mr("space"),C=Mr("translate"),A=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Rt,t],E=()=>[Rt,t],O=()=>["",$o,Ni],M=()=>["auto",kd,Rt],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Rt],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[kd,Rt];return{cacheSize:500,separator:":",theme:{colors:[Em],spacing:[$o,Ni],blur:["none","",wi,Rt],brightness:W(),borderColor:[e],borderRadius:["none","","full",wi,Rt],borderSpacing:E(),borderWidth:O(),contrast:W(),grayscale:D(),hueRotate:W(),invert:D(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[AU,Ni],inset:k(),margin:k(),opacity:W(),padding:E(),saturate:W(),scale:W(),sepia:D(),skew:W(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Rt]}],container:["container"],columns:[{columns:[wi]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),Rt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Am,Rt]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Rt]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Am,Rt]}],"grid-cols":[{"grid-cols":[Em]}],"col-start-end":[{col:["auto",{span:["full",Am,Rt]},Rt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Em]}],"row-start-end":[{row:["auto",{span:[Am,Rt]},Rt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Rt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Rt,t]}],"min-w":[{"min-w":[Rt,t,"min","max","fit"]}],"max-w":[{"max-w":[Rt,t,"none","full","min","max","fit","prose",{screen:[wi]},wi]}],h:[{h:[Rt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Rt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Rt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Rt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",wi,Ni]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ky]}],"font-family":[{font:[Em]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Rt]}],"line-clamp":[{"line-clamp":["none",kd,ky]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$o,Rt]}],"list-image":[{"list-image":["none",Rt]}],"list-style-type":[{list:["none","disc","decimal",Rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$o,Ni]}],"underline-offset":[{"underline-offset":["auto",$o,Rt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),OU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:V()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[$o,Rt]}],"outline-w":[{outline:[$o,Ni]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[$o,Ni]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",wi,$U]}],"shadow-color":[{shadow:[Em]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wi,Rt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Rt]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Rt]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Am,Rt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$o,Ni,ky]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LU=yU(RU);function Te(...e){return LU(Mt(e))}function Ke(e,t=2){return e==null?"$0.00":"$"+e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})}const BU=Vq,XF=y.forwardRef(({className:e,...t},n)=>r.jsx(kF,{ref:n,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));XF.displayName=kF.displayName;const zU=Kh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),YF=y.forwardRef(({className:e,variant:t,...n},s)=>r.jsx($F,{ref:s,className:Te(zU({variant:t}),e),...n}));YF.displayName=$F.displayName;const VU=y.forwardRef(({className:e,...t},n)=>r.jsx(IF,{ref:n,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));VU.displayName=IF.displayName;const QF=y.forwardRef(({className:e,...t},n)=>r.jsx(RF,{ref:n,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Yh,{className:"h-4 w-4"})}));QF.displayName=RF.displayName;const ZF=y.forwardRef(({className:e,...t},n)=>r.jsx(DF,{ref:n,className:Te("text-sm font-semibold",e),...t}));ZF.displayName=DF.displayName;const JF=y.forwardRef(({className:e,...t},n)=>r.jsx(FF,{ref:n,className:Te("text-sm opacity-90",e),...t}));JF.displayName=FF.displayName;function WU(){const{toasts:e}=Rs();return r.jsxs(BU,{children:[e.map(function({id:t,title:n,description:s,action:a,...o}){return r.jsxs(YF,{...o,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(ZF,{children:n}),s&&r.jsx(JF,{children:s})]}),a,r.jsx(QF,{})]},t)}),r.jsx(XF,{})]})}var aA=["light","dark"],qU="(prefers-color-scheme: dark)",UU=y.createContext(void 0),KU={setTheme:e=>{},themes:[]},GU=()=>{var e;return(e=y.useContext(UU))!=null?e:KU};y.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let d=o==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=a?aA.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,p=!1,v=!0)=>{let j=i?i[x]:x,g=p?x+"|| ''":`'${j}'`,N="";return a&&v&&!p&&aA.includes(x)&&(N+=`d.style.colorScheme = '${x}';`),n==="class"?p||j?N+=`c.add(${g})`:N+="null":j&&(N+=`d[s](n,${g})`),N},h=e?`!function(){${u}${f(e)}}()`:s?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${qU}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${d?"":"else{"+f(o,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(o,!1,!1)};}${m}}catch(t){}}();`;return y.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});var HU=e=>{switch(e){case"success":return QU;case"info":return JU;case"warning":return ZU;case"error":return e7;default:return null}},XU=Array(12).fill(0),YU=({visible:e,className:t})=>K.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},K.createElement("div",{className:"sonner-spinner"},XU.map((n,s)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),QU=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ZU=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),JU=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),e7=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),t7=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),r7=()=>{let[e,t]=K.useState(document.hidden);return K.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},DN=1,n7=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:DN++,o=this.toasts.find(l=>l.id===a),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:i,title:n}):l):this.addToast({title:n,...s,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=n!==void 0,o,i=s.then(async c=>{if(o=["resolve",c],K.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(a7(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:d,description:u})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||DN++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ss=new n7,s7=(e,t)=>{let n=(t==null?void 0:t.id)||DN++;return Ss.addToast({title:e,...t,id:n}),n},a7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",o7=s7,i7=()=>Ss.toasts,l7=()=>Ss.getActiveToasts(),Xt=Object.assign(o7,{success:Ss.success,info:Ss.info,warning:Ss.warning,error:Ss.error,custom:Ss.custom,message:Ss.message,promise:Ss.promise,dismiss:Ss.dismiss,loading:Ss.loading},{getHistory:i7,getToasts:l7});function c7(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}c7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Up(e){return e.label!==void 0}var d7=3,u7="32px",m7="16px",oA=4e3,f7=356,h7=14,p7=20,x7=200;function Aa(...e){return e.filter(Boolean).join(" ")}function g7(e){let[t,n]=e.split("-"),s=[];return t&&s.push(t),n&&s.push(n),s}var v7=e=>{var t,n,s,a,o,i,l,c,d,u,m;let{invert:f,toast:h,unstyled:x,interacting:p,setHeights:v,visibleToasts:j,heights:g,index:N,toasts:_,expanded:b,removeToast:w,defaultRichColors:S,closeButton:C,style:A,cancelButtonStyle:P,actionButtonStyle:k,className:E="",descriptionClassName:O="",duration:M,position:T,gap:V,loadingIcon:I,expandByDefault:F,classNames:D,icons:X,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:B}=e,[q,te]=K.useState(null),[Y,H]=K.useState(null),[L,ue]=K.useState(!1),[pe,we]=K.useState(!1),[re,de]=K.useState(!1),[he,ee]=K.useState(!1),[z,U]=K.useState(!1),[oe,Se]=K.useState(0),[Ne,$]=K.useState(0),ie=K.useRef(h.duration||M||oA),J=K.useRef(null),ge=K.useRef(null),je=N===0,ye=N+1<=j,Ce=h.type,We=h.dismissible!==!1,$t=h.className||"",nr=h.descriptionClassName||"",en=K.useMemo(()=>g.findIndex(Be=>Be.toastId===h.id)||0,[g,h.id]),Ee=K.useMemo(()=>{var Be;return(Be=h.closeButton)!=null?Be:C},[h.closeButton,C]),He=K.useMemo(()=>h.duration||M||oA,[h.duration,M]),Vt=K.useRef(0),At=K.useRef(0),R=K.useRef(0),xe=K.useRef(null),[Re,Ve]=T.split("-"),Xe=K.useMemo(()=>g.reduce((Be,Ye,ft)=>ft>=en?Be:Be+Ye.height,0),[g,en]),nt=r7(),st=h.invert||f,Nt=Ce==="loading";At.current=K.useMemo(()=>en*V+Xe,[en,Xe]),K.useEffect(()=>{ie.current=He},[He]),K.useEffect(()=>{ue(!0)},[]),K.useEffect(()=>{let Be=ge.current;if(Be){let Ye=Be.getBoundingClientRect().height;return $(Ye),v(ft=>[{toastId:h.id,height:Ye,position:h.position},...ft]),()=>v(ft=>ft.filter(Bt=>Bt.toastId!==h.id))}},[v,h.id]),K.useLayoutEffect(()=>{if(!L)return;let Be=ge.current,Ye=Be.style.height;Be.style.height="auto";let ft=Be.getBoundingClientRect().height;Be.style.height=Ye,$(ft),v(Bt=>Bt.find(_t=>_t.toastId===h.id)?Bt.map(_t=>_t.toastId===h.id?{..._t,height:ft}:_t):[{toastId:h.id,height:ft,position:h.position},...Bt])},[L,h.title,h.description,v,h.id]);let wt=K.useCallback(()=>{we(!0),Se(At.current),v(Be=>Be.filter(Ye=>Ye.toastId!==h.id)),setTimeout(()=>{w(h)},x7)},[h,w,v,At]);K.useEffect(()=>{if(h.promise&&Ce==="loading"||h.duration===1/0||h.type==="loading")return;let Be;return b||p||B&&nt?(()=>{if(R.current<Vt.current){let Ye=new Date().getTime()-Vt.current;ie.current=ie.current-Ye}R.current=new Date().getTime()})():ie.current!==1/0&&(Vt.current=new Date().getTime(),Be=setTimeout(()=>{var Ye;(Ye=h.onAutoClose)==null||Ye.call(h,h),wt()},ie.current)),()=>clearTimeout(Be)},[b,p,h,Ce,B,nt,wt]),K.useEffect(()=>{h.delete&&wt()},[wt,h.delete]);function pt(){var Be,Ye,ft;return X!=null&&X.loading?K.createElement("div",{className:Aa(D==null?void 0:D.loader,(Be=h==null?void 0:h.classNames)==null?void 0:Be.loader,"sonner-loader"),"data-visible":Ce==="loading"},X.loading):I?K.createElement("div",{className:Aa(D==null?void 0:D.loader,(Ye=h==null?void 0:h.classNames)==null?void 0:Ye.loader,"sonner-loader"),"data-visible":Ce==="loading"},I):K.createElement(YU,{className:Aa(D==null?void 0:D.loader,(ft=h==null?void 0:h.classNames)==null?void 0:ft.loader),visible:Ce==="loading"})}return K.createElement("li",{tabIndex:0,ref:ge,className:Aa(E,$t,D==null?void 0:D.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[Ce],(n=h==null?void 0:h.classNames)==null?void 0:n[Ce]),"data-sonner-toast":"","data-rich-colors":(s=h.richColors)!=null?s:S,"data-styled":!(h.jsx||h.unstyled||x),"data-mounted":L,"data-promise":!!h.promise,"data-swiped":z,"data-removed":pe,"data-visible":ye,"data-y-position":Re,"data-x-position":Ve,"data-index":N,"data-front":je,"data-swiping":re,"data-dismissible":We,"data-type":Ce,"data-invert":st,"data-swipe-out":he,"data-swipe-direction":Y,"data-expanded":!!(b||F&&L),style:{"--index":N,"--toasts-before":N,"--z-index":_.length-N,"--offset":`${pe?oe:At.current}px`,"--initial-height":F?"auto":`${Ne}px`,...A,...h.style},onDragEnd:()=>{de(!1),te(null),xe.current=null},onPointerDown:Be=>{Nt||!We||(J.current=new Date,Se(At.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(de(!0),xe.current={x:Be.clientX,y:Be.clientY}))},onPointerUp:()=>{var Be,Ye,ft,Bt;if(he||!We)return;xe.current=null;let _t=Number(((Be=ge.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Zt=Number(((Ye=ge.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pn=new Date().getTime()-((ft=J.current)==null?void 0:ft.getTime()),fe=q==="x"?_t:Zt,be=Math.abs(fe)/pn;if(Math.abs(fe)>=p7||be>.11){Se(At.current),(Bt=h.onDismiss)==null||Bt.call(h,h),H(q==="x"?_t>0?"right":"left":Zt>0?"down":"up"),wt(),ee(!0),U(!1);return}de(!1),te(null)},onPointerMove:Be=>{var Ye,ft,Bt,_t;if(!xe.current||!We||((Ye=window.getSelection())==null?void 0:Ye.toString().length)>0)return;let Zt=Be.clientY-xe.current.y,pn=Be.clientX-xe.current.x,fe=(ft=e.swipeDirections)!=null?ft:g7(T);!q&&(Math.abs(pn)>1||Math.abs(Zt)>1)&&te(Math.abs(pn)>Math.abs(Zt)?"x":"y");let be={x:0,y:0};q==="y"?(fe.includes("top")||fe.includes("bottom"))&&(fe.includes("top")&&Zt<0||fe.includes("bottom")&&Zt>0)&&(be.y=Zt):q==="x"&&(fe.includes("left")||fe.includes("right"))&&(fe.includes("left")&&pn<0||fe.includes("right")&&pn>0)&&(be.x=pn),(Math.abs(be.x)>0||Math.abs(be.y)>0)&&U(!0),(Bt=ge.current)==null||Bt.style.setProperty("--swipe-amount-x",`${be.x}px`),(_t=ge.current)==null||_t.style.setProperty("--swipe-amount-y",`${be.y}px`)}},Ee&&!h.jsx?K.createElement("button",{"aria-label":W,"data-disabled":Nt,"data-close-button":!0,onClick:Nt||!We?()=>{}:()=>{var Be;wt(),(Be=h.onDismiss)==null||Be.call(h,h)},className:Aa(D==null?void 0:D.closeButton,(a=h==null?void 0:h.classNames)==null?void 0:a.closeButton)},(o=X==null?void 0:X.close)!=null?o:t7):null,h.jsx||y.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:K.createElement(K.Fragment,null,Ce||h.icon||h.promise?K.createElement("div",{"data-icon":"",className:Aa(D==null?void 0:D.icon,(i=h==null?void 0:h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||pt():null,h.type!=="loading"?h.icon||(X==null?void 0:X[Ce])||HU(Ce):null):null,K.createElement("div",{"data-content":"",className:Aa(D==null?void 0:D.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},K.createElement("div",{"data-title":"",className:Aa(D==null?void 0:D.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?K.createElement("div",{"data-description":"",className:Aa(O,nr,D==null?void 0:D.description,(d=h==null?void 0:h.classNames)==null?void 0:d.description)},typeof h.description=="function"?h.description():h.description):null),y.isValidElement(h.cancel)?h.cancel:h.cancel&&Up(h.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||P,onClick:Be=>{var Ye,ft;Up(h.cancel)&&We&&((ft=(Ye=h.cancel).onClick)==null||ft.call(Ye,Be),wt())},className:Aa(D==null?void 0:D.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,y.isValidElement(h.action)?h.action:h.action&&Up(h.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||k,onClick:Be=>{var Ye,ft;Up(h.action)&&((ft=(Ye=h.action).onClick)==null||ft.call(Ye,Be),!Be.defaultPrevented&&wt())},className:Aa(D==null?void 0:D.actionButton,(m=h==null?void 0:h.classNames)==null?void 0:m.actionButton)},h.action.label):null))};function iA(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function j7(e,t){let n={};return[e,t].forEach((s,a)=>{let o=a===1,i=o?"--mobile-offset":"--offset",l=o?m7:u7;function c(d){["top","right","bottom","left"].forEach(u=>{n[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?n[`${i}-${d}`]=l:n[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),n}var y7=y.forwardRef(function(e,t){let{invert:n,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:m,duration:f,style:h,visibleToasts:x=d7,toastOptions:p,dir:v=iA(),gap:j=h7,loadingIcon:g,icons:N,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:b}=e,[w,S]=K.useState([]),C=K.useMemo(()=>Array.from(new Set([s].concat(w.filter(B=>B.position).map(B=>B.position)))),[w,s]),[A,P]=K.useState([]),[k,E]=K.useState(!1),[O,M]=K.useState(!1),[T,V]=K.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=K.useRef(null),F=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=K.useRef(null),X=K.useRef(!1),W=K.useCallback(B=>{S(q=>{var te;return(te=q.find(Y=>Y.id===B.id))!=null&&te.delete||Ss.dismiss(B.id),q.filter(({id:Y})=>Y!==B.id)})},[]);return K.useEffect(()=>Ss.subscribe(B=>{if(B.dismiss){S(q=>q.map(te=>te.id===B.id?{...te,delete:!0}:te));return}setTimeout(()=>{fF.flushSync(()=>{S(q=>{let te=q.findIndex(Y=>Y.id===B.id);return te!==-1?[...q.slice(0,te),{...q[te],...B},...q.slice(te+1)]:[B,...q]})})})}),[]),K.useEffect(()=>{if(u!=="system"){V(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;let B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:q})=>{V(q?"dark":"light")})}catch{B.addListener(({matches:te})=>{try{V(te?"dark":"light")}catch(Y){console.error(Y)}})}},[u]),K.useEffect(()=>{w.length<=1&&E(!1)},[w]),K.useEffect(()=>{let B=q=>{var te,Y;a.every(H=>q[H]||q.code===H)&&(E(!0),(te=I.current)==null||te.focus()),q.code==="Escape"&&(document.activeElement===I.current||(Y=I.current)!=null&&Y.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[a]),K.useEffect(()=>{if(I.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,X.current=!1)}},[I.current]),K.createElement("section",{ref:t,"aria-label":`${_} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((B,q)=>{var te;let[Y,H]=B.split("-");return w.length?K.createElement("ol",{key:B,dir:v==="auto"?iA():v,tabIndex:-1,ref:I,className:l,"data-sonner-toaster":!0,"data-theme":T,"data-y-position":Y,"data-lifted":k&&w.length>1&&!o,"data-x-position":H,style:{"--front-toast-height":`${((te=A[0])==null?void 0:te.height)||0}px`,"--width":`${f7}px`,"--gap":`${j}px`,...h,...j7(c,d)},onBlur:L=>{X.current&&!L.currentTarget.contains(L.relatedTarget)&&(X.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||X.current||(X.current=!0,D.current=L.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{O||E(!1)},onDragEnd:()=>E(!1),onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},w.filter(L=>!L.position&&q===0||L.position===B).map((L,ue)=>{var pe,we;return K.createElement(v7,{key:L.id,icons:N,index:ue,toast:L,defaultRichColors:m,duration:(pe=p==null?void 0:p.duration)!=null?pe:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:x,closeButton:(we=p==null?void 0:p.closeButton)!=null?we:i,interacting:O,position:B,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:W,toasts:w.filter(re=>re.position==L.position),heights:A.filter(re=>re.position==L.position),setHeights:P,expandByDefault:o,gap:j,loadingIcon:g,expanded:k,pauseWhenPageIsHidden:b,swipeDirections:e.swipeDirections})})):null}))});const b7=({...e})=>{const{theme:t="system"}=GU();return r.jsx(y7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var N7=c_[" useId ".trim().toString()]||(()=>{}),w7=0;function cn(e){const[t,n]=y.useState(N7());return nn(()=>{n(s=>s??String(w7++))},[e]),t?`radix-${t}`:""}const _7=["top","right","bottom","left"],xl=Math.min,Ws=Math.max,mg=Math.round,Kp=Math.floor,wo=e=>({x:e,y:e}),S7={left:"right",right:"left",bottom:"top",top:"bottom"},C7={start:"end",end:"start"};function FN(e,t,n){return Ws(e,xl(t,n))}function ci(e,t){return typeof e=="function"?e(t):e}function di(e){return e.split("-")[0]}function Xu(e){return e.split("-")[1]}function cS(e){return e==="x"?"y":"x"}function dS(e){return e==="y"?"height":"width"}const P7=new Set(["top","bottom"]);function go(e){return P7.has(di(e))?"y":"x"}function uS(e){return cS(go(e))}function A7(e,t,n){n===void 0&&(n=!1);const s=Xu(e),a=uS(e),o=dS(a);let i=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=fg(i)),[i,fg(i)]}function E7(e){const t=fg(e);return[IN(e),t,IN(t)]}function IN(e){return e.replace(/start|end/g,t=>C7[t])}const lA=["left","right"],cA=["right","left"],M7=["top","bottom"],O7=["bottom","top"];function T7(e,t,n){switch(e){case"top":case"bottom":return n?t?cA:lA:t?lA:cA;case"left":case"right":return t?M7:O7;default:return[]}}function k7(e,t,n,s){const a=Xu(e);let o=T7(di(e),n==="start",s);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(IN)))),o}function fg(e){return e.replace(/left|right|bottom|top/g,t=>S7[t])}function $7(e){return{top:0,right:0,bottom:0,left:0,...e}}function eI(e){return typeof e!="number"?$7(e):{top:e,right:e,bottom:e,left:e}}function hg(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function dA(e,t,n){let{reference:s,floating:a}=e;const o=go(t),i=uS(t),l=dS(i),c=di(t),d=o==="y",u=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,f=s[l]/2-a[l]/2;let h;switch(c){case"top":h={x:u,y:s.y-a.height};break;case"bottom":h={x:u,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:m};break;case"left":h={x:s.x-a.width,y:m};break;default:h={x:s.x,y:s.y}}switch(Xu(t)){case"start":h[i]-=f*(n&&d?-1:1);break;case"end":h[i]+=f*(n&&d?-1:1);break}return h}const D7=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=dA(d,s,c),f=s,h={},x=0;for(let p=0;p<l.length;p++){const{name:v,fn:j}=l[p],{x:g,y:N,data:_,reset:b}=await j({x:u,y:m,initialPlacement:s,placement:f,strategy:a,middlewareData:h,rects:d,platform:i,elements:{reference:e,floating:t}});u=g??u,m=N??m,h={...h,[v]:{...h[v],..._}},b&&x<=50&&(x++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(d=b.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):b.rects),{x:u,y:m}=dA(d,f,c)),p=-1)}return{x:u,y:m,placement:f,strategy:a,middlewareData:h}};async function Vf(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:f=!1,padding:h=0}=ci(t,e),x=eI(h),v=l[f?m==="floating"?"reference":"floating":m],j=hg(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),g=m==="floating"?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(N))?await(o.getScale==null?void 0:o.getScale(N))||{x:1,y:1}:{x:1,y:1},b=hg(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:N,strategy:c}):g);return{top:(j.top-b.top+x.top)/_.y,bottom:(b.bottom-j.bottom+x.bottom)/_.y,left:(j.left-b.left+x.left)/_.x,right:(b.right-j.right+x.right)/_.x}}const F7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ci(e,t)||{};if(d==null)return{};const m=eI(u),f={x:n,y:s},h=uS(a),x=dS(h),p=await i.getDimensions(d),v=h==="y",j=v?"top":"left",g=v?"bottom":"right",N=v?"clientHeight":"clientWidth",_=o.reference[x]+o.reference[h]-f[h]-o.floating[x],b=f[h]-o.reference[h],w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let S=w?w[N]:0;(!S||!await(i.isElement==null?void 0:i.isElement(w)))&&(S=l.floating[N]||o.floating[x]);const C=_/2-b/2,A=S/2-p[x]/2-1,P=xl(m[j],A),k=xl(m[g],A),E=P,O=S-p[x]-k,M=S/2-p[x]/2+C,T=FN(E,M,O),V=!c.arrow&&Xu(a)!=null&&M!==T&&o.reference[x]/2-(M<E?P:k)-p[x]/2<0,I=V?M<E?M-E:M-O:0;return{[h]:f[h]+I,data:{[h]:T,centerOffset:M-T-I,...V&&{alignmentOffset:I}},reset:V}}}),I7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:p=!0,...v}=ci(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const j=di(a),g=go(l),N=di(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),b=f||(N||!p?[fg(l)]:E7(l)),w=x!=="none";!f&&w&&b.push(...k7(l,p,x,_));const S=[l,...b],C=await Vf(t,v),A=[];let P=((s=o.flip)==null?void 0:s.overflows)||[];if(u&&A.push(C[j]),m){const M=A7(a,i,_);A.push(C[M[0]],C[M[1]])}if(P=[...P,{placement:a,overflows:A}],!A.every(M=>M<=0)){var k,E;const M=(((k=o.flip)==null?void 0:k.index)||0)+1,T=S[M];if(T&&(!(m==="alignment"?g!==go(T):!1)||P.every(F=>F.overflows[0]>0&&go(F.placement)===g)))return{data:{index:M,overflows:P},reset:{placement:T}};let V=(E=P.filter(I=>I.overflows[0]<=0).sort((I,F)=>I.overflows[1]-F.overflows[1])[0])==null?void 0:E.placement;if(!V)switch(h){case"bestFit":{var O;const I=(O=P.filter(F=>{if(w){const D=go(F.placement);return D===g||D==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(D=>D>0).reduce((D,X)=>D+X,0)]).sort((F,D)=>F[1]-D[1])[0])==null?void 0:O[0];I&&(V=I);break}case"initialPlacement":V=l;break}if(a!==V)return{reset:{placement:V}}}return{}}}};function uA(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mA(e){return _7.some(t=>e[t]>=0)}const R7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=ci(e,t);switch(s){case"referenceHidden":{const o=await Vf(t,{...a,elementContext:"reference"}),i=uA(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:mA(i)}}}case"escaped":{const o=await Vf(t,{...a,altBoundary:!0}),i=uA(o,n.floating);return{data:{escapedOffsets:i,escaped:mA(i)}}}default:return{}}}}},tI=new Set(["left","top"]);async function L7(e,t){const{placement:n,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),i=di(n),l=Xu(n),c=go(n)==="y",d=tI.has(i)?-1:1,u=o&&c?-1:1,m=ci(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof x=="number"&&(h=l==="end"?x*-1:x),c?{x:h*u,y:f*d}:{x:f*d,y:h*u}}const B7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await L7(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},z7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:v=>{let{x:j,y:g}=v;return{x:j,y:g}}},...c}=ci(e,t),d={x:n,y:s},u=await Vf(t,c),m=go(di(a)),f=cS(m);let h=d[f],x=d[m];if(o){const v=f==="y"?"top":"left",j=f==="y"?"bottom":"right",g=h+u[v],N=h-u[j];h=FN(g,h,N)}if(i){const v=m==="y"?"top":"left",j=m==="y"?"bottom":"right",g=x+u[v],N=x-u[j];x=FN(g,x,N)}const p=l.fn({...t,[f]:h,[m]:x});return{...p,data:{x:p.x-n,y:p.y-s,enabled:{[f]:o,[m]:i}}}}}},V7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ci(e,t),u={x:n,y:s},m=go(a),f=cS(m);let h=u[f],x=u[m];const p=ci(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const N=f==="y"?"height":"width",_=o.reference[f]-o.floating[N]+v.mainAxis,b=o.reference[f]+o.reference[N]-v.mainAxis;h<_?h=_:h>b&&(h=b)}if(d){var j,g;const N=f==="y"?"width":"height",_=tI.has(di(a)),b=o.reference[m]-o.floating[N]+(_&&((j=i.offset)==null?void 0:j[m])||0)+(_?0:v.crossAxis),w=o.reference[m]+o.reference[N]+(_?0:((g=i.offset)==null?void 0:g[m])||0)-(_?v.crossAxis:0);x<b?x=b:x>w&&(x=w)}return{[f]:h,[m]:x}}}},W7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=ci(e,t),u=await Vf(t,d),m=di(a),f=Xu(a),h=go(a)==="y",{width:x,height:p}=o.floating;let v,j;m==="top"||m==="bottom"?(v=m,j=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(j=m,v=f==="end"?"top":"bottom");const g=p-u.top-u.bottom,N=x-u.left-u.right,_=xl(p-u[v],g),b=xl(x-u[j],N),w=!t.middlewareData.shift;let S=_,C=b;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=N),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(S=g),w&&!f){const P=Ws(u.left,0),k=Ws(u.right,0),E=Ws(u.top,0),O=Ws(u.bottom,0);h?C=x-2*(P!==0||k!==0?P+k:Ws(u.left,u.right)):S=p-2*(E!==0||O!==0?E+O:Ws(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:S});const A=await i.getDimensions(l.floating);return x!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function i0(){return typeof window<"u"}function Yu(e){return rI(e)?(e.nodeName||"").toLowerCase():"#document"}function Gs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function To(e){var t;return(t=(rI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function rI(e){return i0()?e instanceof Node||e instanceof Gs(e).Node:!1}function Qa(e){return i0()?e instanceof Element||e instanceof Gs(e).Element:!1}function Eo(e){return i0()?e instanceof HTMLElement||e instanceof Gs(e).HTMLElement:!1}function fA(e){return!i0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gs(e).ShadowRoot}const q7=new Set(["inline","contents"]);function Qh(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Za(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!q7.has(a)}const U7=new Set(["table","td","th"]);function K7(e){return U7.has(Yu(e))}const G7=[":popover-open",":modal"];function l0(e){return G7.some(t=>{try{return e.matches(t)}catch{return!1}})}const H7=["transform","translate","scale","rotate","perspective"],X7=["transform","translate","scale","rotate","perspective","filter"],Y7=["paint","layout","strict","content"];function mS(e){const t=fS(),n=Qa(e)?Za(e):e;return H7.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||X7.some(s=>(n.willChange||"").includes(s))||Y7.some(s=>(n.contain||"").includes(s))}function Q7(e){let t=gl(e);for(;Eo(t)&&!iu(t);){if(mS(t))return t;if(l0(t))return null;t=gl(t)}return null}function fS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Z7=new Set(["html","body","#document"]);function iu(e){return Z7.has(Yu(e))}function Za(e){return Gs(e).getComputedStyle(e)}function c0(e){return Qa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gl(e){if(Yu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fA(e)&&e.host||To(e);return fA(t)?t.host:t}function nI(e){const t=gl(e);return iu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Eo(t)&&Qh(t)?t:nI(t)}function Wf(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=nI(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),i=Gs(a);if(o){const l=RN(i);return t.concat(i,i.visualViewport||[],Qh(a)?a:[],l&&n?Wf(l):[])}return t.concat(a,Wf(a,[],n))}function RN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sI(e){const t=Za(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Eo(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:s,l=mg(n)!==o||mg(s)!==i;return l&&(n=o,s=i),{width:n,height:s,$:l}}function hS(e){return Qa(e)?e:e.contextElement}function $d(e){const t=hS(e);if(!Eo(t))return wo(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:o}=sI(t);let i=(o?mg(n.width):n.width)/s,l=(o?mg(n.height):n.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const J7=wo(0);function aI(e){const t=Gs(e);return!fS()||!t.visualViewport?J7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function eK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gs(e)?!1:t}function Sc(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=hS(e);let i=wo(1);t&&(s?Qa(s)&&(i=$d(s)):i=$d(e));const l=eK(o,n,s)?aI(o):wo(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,m=a.height/i.y;if(o){const f=Gs(o),h=s&&Qa(s)?Gs(s):s;let x=f,p=RN(x);for(;p&&s&&h!==x;){const v=$d(p),j=p.getBoundingClientRect(),g=Za(p),N=j.left+(p.clientLeft+parseFloat(g.paddingLeft))*v.x,_=j.top+(p.clientTop+parseFloat(g.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,m*=v.y,c+=N,d+=_,x=Gs(p),p=RN(x)}}return hg({width:u,height:m,x:c,y:d})}function pS(e,t){const n=c0(e).scrollLeft;return t?t.left+n:Sc(To(e)).left+n}function oI(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(n?0:pS(e,s)),o=s.top+t.scrollTop;return{x:a,y:o}}function tK(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const o=a==="fixed",i=To(s),l=t?l0(t.floating):!1;if(s===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=wo(1);const u=wo(0),m=Eo(s);if((m||!m&&!o)&&((Yu(s)!=="body"||Qh(i))&&(c=c0(s)),Eo(s))){const h=Sc(s);d=$d(s),u.x=h.x+s.clientLeft,u.y=h.y+s.clientTop}const f=i&&!m&&!o?oI(i,c,!0):wo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:n.y*d.y-c.scrollTop*d.y+u.y+f.y}}function rK(e){return Array.from(e.getClientRects())}function nK(e){const t=To(e),n=c0(e),s=e.ownerDocument.body,a=Ws(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=Ws(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+pS(e);const l=-n.scrollTop;return Za(s).direction==="rtl"&&(i+=Ws(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:i,y:l}}function sK(e,t){const n=Gs(e),s=To(e),a=n.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=fS();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}const aK=new Set(["absolute","fixed"]);function oK(e,t){const n=Sc(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,o=Eo(e)?$d(e):wo(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function hA(e,t,n){let s;if(t==="viewport")s=sK(e,n);else if(t==="document")s=nK(To(e));else if(Qa(t))s=oK(t,n);else{const a=aI(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return hg(s)}function iI(e,t){const n=gl(e);return n===t||!Qa(n)||iu(n)?!1:Za(n).position==="fixed"||iI(n,t)}function iK(e,t){const n=t.get(e);if(n)return n;let s=Wf(e,[],!1).filter(l=>Qa(l)&&Yu(l)!=="body"),a=null;const o=Za(e).position==="fixed";let i=o?gl(e):e;for(;Qa(i)&&!iu(i);){const l=Za(i),c=mS(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&aK.has(a.position)||Qh(i)&&!c&&iI(e,i))?s=s.filter(u=>u!==i):a=l,i=gl(i)}return t.set(e,s),s}function lK(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const i=[...n==="clippingAncestors"?l0(t)?[]:iK(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((d,u)=>{const m=hA(t,u,a);return d.top=Ws(m.top,d.top),d.right=xl(m.right,d.right),d.bottom=xl(m.bottom,d.bottom),d.left=Ws(m.left,d.left),d},hA(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function cK(e){const{width:t,height:n}=sI(e);return{width:t,height:n}}function dK(e,t,n){const s=Eo(t),a=To(t),o=n==="fixed",i=Sc(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=wo(0);function d(){c.x=pS(a)}if(s||!s&&!o)if((Yu(t)!=="body"||Qh(a))&&(l=c0(t)),s){const h=Sc(t,!0,o,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else a&&d();o&&!s&&a&&d();const u=a&&!s&&!o?oI(a,l):wo(0),m=i.left+l.scrollLeft-c.x-u.x,f=i.top+l.scrollTop-c.y-u.y;return{x:m,y:f,width:i.width,height:i.height}}function $y(e){return Za(e).position==="static"}function pA(e,t){if(!Eo(e)||Za(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return To(e)===n&&(n=n.ownerDocument.body),n}function lI(e,t){const n=Gs(e);if(l0(e))return n;if(!Eo(e)){let a=gl(e);for(;a&&!iu(a);){if(Qa(a)&&!$y(a))return a;a=gl(a)}return n}let s=pA(e,t);for(;s&&K7(s)&&$y(s);)s=pA(s,t);return s&&iu(s)&&$y(s)&&!mS(s)?n:s||Q7(e)||n}const uK=async function(e){const t=this.getOffsetParent||lI,n=this.getDimensions,s=await n(e.floating);return{reference:dK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function mK(e){return Za(e).direction==="rtl"}const fK={convertOffsetParentRelativeRectToViewportRelativeRect:tK,getDocumentElement:To,getClippingRect:lK,getOffsetParent:lI,getElementRects:uK,getClientRects:rK,getDimensions:cK,getScale:$d,isElement:Qa,isRTL:mK};function cI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function hK(e,t){let n=null,s;const a=To(e);function o(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:u,top:m,width:f,height:h}=d;if(l||t(),!f||!h)return;const x=Kp(m),p=Kp(a.clientWidth-(u+f)),v=Kp(a.clientHeight-(m+h)),j=Kp(u),N={rootMargin:-x+"px "+-p+"px "+-v+"px "+-j+"px",threshold:Ws(0,xl(1,c))||1};let _=!0;function b(w){const S=w[0].intersectionRatio;if(S!==c){if(!_)return i();S?i(!1,S):s=setTimeout(()=>{i(!1,1e-7)},1e3)}S===1&&!cI(d,e.getBoundingClientRect())&&i(),_=!1}try{n=new IntersectionObserver(b,{...N,root:a.ownerDocument})}catch{n=new IntersectionObserver(b,N)}n.observe(e)}return i(!0),o}function pK(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=hS(e),u=a||o?[...d?Wf(d):[],...Wf(t)]:[];u.forEach(j=>{a&&j.addEventListener("scroll",n,{passive:!0}),o&&j.addEventListener("resize",n)});const m=d&&l?hK(d,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(j=>{let[g]=j;g&&g.target===d&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var N;(N=h)==null||N.observe(t)})),n()}),d&&!c&&h.observe(d),h.observe(t));let x,p=c?Sc(e):null;c&&v();function v(){const j=Sc(e);p&&!cI(p,j)&&n(),p=j,x=requestAnimationFrame(v)}return n(),()=>{var j;u.forEach(g=>{a&&g.removeEventListener("scroll",n),o&&g.removeEventListener("resize",n)}),m==null||m(),(j=h)==null||j.disconnect(),h=null,c&&cancelAnimationFrame(x)}}const xK=B7,gK=z7,vK=I7,jK=W7,yK=R7,xA=F7,bK=V7,NK=(e,t,n)=>{const s=new Map,a={platform:fK,...n},o={...a.platform,_c:s};return D7(e,t,{...a,platform:o})};var wK=typeof document<"u",_K=function(){},Mx=wK?y.useLayoutEffect:_K;function pg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!pg(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!pg(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function dI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gA(e,t){const n=dI(e);return Math.round(t*n)/n}function Dy(e){const t=y.useRef(e);return Mx(()=>{t.current=e}),t}function SK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=y.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=y.useState(s);pg(f,s)||h(s);const[x,p]=y.useState(null),[v,j]=y.useState(null),g=y.useCallback(F=>{F!==w.current&&(w.current=F,p(F))},[]),N=y.useCallback(F=>{F!==S.current&&(S.current=F,j(F))},[]),_=o||x,b=i||v,w=y.useRef(null),S=y.useRef(null),C=y.useRef(u),A=c!=null,P=Dy(c),k=Dy(a),E=Dy(d),O=y.useCallback(()=>{if(!w.current||!S.current)return;const F={placement:t,strategy:n,middleware:f};k.current&&(F.platform=k.current),NK(w.current,S.current,F).then(D=>{const X={...D,isPositioned:E.current!==!1};M.current&&!pg(C.current,X)&&(C.current=X,Bc.flushSync(()=>{m(X)}))})},[f,t,n,k,E]);Mx(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(F=>({...F,isPositioned:!1})))},[d]);const M=y.useRef(!1);Mx(()=>(M.current=!0,()=>{M.current=!1}),[]),Mx(()=>{if(_&&(w.current=_),b&&(S.current=b),_&&b){if(P.current)return P.current(_,b,O);O()}},[_,b,O,P,A]);const T=y.useMemo(()=>({reference:w,floating:S,setReference:g,setFloating:N}),[g,N]),V=y.useMemo(()=>({reference:_,floating:b}),[_,b]),I=y.useMemo(()=>{const F={position:n,left:0,top:0};if(!V.floating)return F;const D=gA(V.floating,u.x),X=gA(V.floating,u.y);return l?{...F,transform:"translate("+D+"px, "+X+"px)",...dI(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:X}},[n,l,V.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:O,refs:T,elements:V,floatingStyles:I}),[u,O,T,V,I])}const CK=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?xA({element:s.current,padding:a}).fn(n):{}:s?xA({element:s,padding:a}).fn(n):{}}}},PK=(e,t)=>({...xK(e),options:[e,t]}),AK=(e,t)=>({...gK(e),options:[e,t]}),EK=(e,t)=>({...bK(e),options:[e,t]}),MK=(e,t)=>({...vK(e),options:[e,t]}),OK=(e,t)=>({...jK(e),options:[e,t]}),TK=(e,t)=>({...yK(e),options:[e,t]}),kK=(e,t)=>({...CK(e),options:[e,t]});var $K="Arrow",uI=y.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...o}=e;return r.jsx(Ze.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});uI.displayName=$K;var DK=uI;function d0(e){const[t,n]=y.useState(void 0);return nn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var xS="Popper",[mI,Al]=hn(xS),[FK,fI]=mI(xS),hI=e=>{const{__scopePopper:t,children:n}=e,[s,a]=y.useState(null);return r.jsx(FK,{scope:t,anchor:s,onAnchorChange:a,children:n})};hI.displayName=xS;var pI="PopperAnchor",xI=y.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,o=fI(pI,n),i=y.useRef(null),l=Ft(t,i);return y.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Ze.div,{...a,ref:l})});xI.displayName=pI;var gS="PopperContent",[IK,RK]=mI(gS),gI=y.forwardRef((e,t)=>{var L,ue,pe,we,re,de;const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:x,...p}=e,v=fI(gS,n),[j,g]=y.useState(null),N=Ft(t,he=>g(he)),[_,b]=y.useState(null),w=d0(_),S=(w==null?void 0:w.width)??0,C=(w==null?void 0:w.height)??0,A=s+(o!=="center"?"-"+o:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(d)?d:[d],E=k.length>0,O={padding:P,boundary:k.filter(BK),altBoundary:E},{refs:M,floatingStyles:T,placement:V,isPositioned:I,middlewareData:F}=SK({strategy:"fixed",placement:A,whileElementsMounted:(...he)=>pK(...he,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[PK({mainAxis:a+C,alignmentAxis:i}),c&&AK({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?EK():void 0,...O}),c&&MK({...O}),OK({...O,apply:({elements:he,rects:ee,availableWidth:z,availableHeight:U})=>{const{width:oe,height:Se}=ee.reference,Ne=he.floating.style;Ne.setProperty("--radix-popper-available-width",`${z}px`),Ne.setProperty("--radix-popper-available-height",`${U}px`),Ne.setProperty("--radix-popper-anchor-width",`${oe}px`),Ne.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),_&&kK({element:_,padding:l}),zK({arrowWidth:S,arrowHeight:C}),f&&TK({strategy:"referenceHidden",...O})]}),[D,X]=yI(V),W=fs(x);nn(()=>{I&&(W==null||W())},[I,W]);const B=(L=F.arrow)==null?void 0:L.x,q=(ue=F.arrow)==null?void 0:ue.y,te=((pe=F.arrow)==null?void 0:pe.centerOffset)!==0,[Y,H]=y.useState();return nn(()=>{j&&H(window.getComputedStyle(j).zIndex)},[j]),r.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:I?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(we=F.transformOrigin)==null?void 0:we.x,(re=F.transformOrigin)==null?void 0:re.y].join(" "),...((de=F.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(IK,{scope:n,placedSide:D,onArrowChange:b,arrowX:B,arrowY:q,shouldHideArrow:te,children:r.jsx(Ze.div,{"data-side":D,"data-align":X,...p,ref:N,style:{...p.style,animation:I?void 0:"none"}})})})});gI.displayName=gS;var vI="PopperArrow",LK={top:"bottom",right:"left",bottom:"top",left:"right"},jI=y.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,o=RK(vI,s),i=LK[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(DK,{...a,ref:n,style:{...a.style,display:"block"}})})});jI.displayName=vI;function BK(e){return e!==null}var zK=e=>({name:"transformOrigin",options:e,fn(t){var v,j,g;const{placement:n,rects:s,middlewareData:a}=t,i=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=yI(n),m={start:"0%",center:"50%",end:"100%"}[u],f=(((j=a.arrow)==null?void 0:j.x)??0)+l/2,h=(((g=a.arrow)==null?void 0:g.y)??0)+c/2;let x="",p="";return d==="bottom"?(x=i?m:`${f}px`,p=`${-c}px`):d==="top"?(x=i?m:`${f}px`,p=`${s.floating.height+c}px`):d==="right"?(x=`${-c}px`,p=i?m:`${h}px`):d==="left"&&(x=`${s.floating.width+c}px`,p=i?m:`${h}px`),{data:{x,y:p}}}});function yI(e){const[t,n="center"]=e.split("-");return[t,n]}var u0=hI,Zh=xI,m0=gI,f0=jI,[h0,xFe]=hn("Tooltip",[Al]),p0=Al(),bI="TooltipProvider",VK=700,LN="tooltip.open",[WK,vS]=h0(bI),NI=e=>{const{__scopeTooltip:t,delayDuration:n=VK,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,i=y.useRef(!0),l=y.useRef(!1),c=y.useRef(0);return y.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(WK,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:y.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};NI.displayName=bI;var qf="Tooltip",[qK,x0]=h0(qf),wI=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:a,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=e,c=vS(qf,e.__scopeTooltip),d=p0(t),[u,m]=y.useState(null),f=cn(),h=y.useRef(0),x=i??c.disableHoverableContent,p=l??c.delayDuration,v=y.useRef(!1),[j,g]=hs({prop:s,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(LN))):c.onClose(),o==null||o(S)},caller:qf}),N=y.useMemo(()=>j?v.current?"delayed-open":"instant-open":"closed",[j]),_=y.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,g(!0)},[g]),b=y.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g(!1)},[g]),w=y.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,g(!0),h.current=0},p)},[p,g]);return y.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),r.jsx(u0,{...d,children:r.jsx(qK,{scope:t,contentId:f,open:j,stateAttribute:N,trigger:u,onTriggerChange:m,onTriggerEnter:y.useCallback(()=>{c.isOpenDelayedRef.current?w():_()},[c.isOpenDelayedRef,w,_]),onTriggerLeave:y.useCallback(()=>{x?b():(window.clearTimeout(h.current),h.current=0)},[b,x]),onOpen:_,onClose:b,disableHoverableContent:x,children:n})})};wI.displayName=qf;var BN="TooltipTrigger",_I=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=x0(BN,n),o=vS(BN,n),i=p0(n),l=y.useRef(null),c=Ft(t,l,a.onTriggerChange),d=y.useRef(!1),u=y.useRef(!1),m=y.useCallback(()=>d.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),r.jsx(Zh,{asChild:!0,...i,children:r.jsx(Ze.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Ge(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ge(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Ge(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Ge(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Ge(e.onBlur,a.onClose),onClick:Ge(e.onClick,a.onClose)})})});_I.displayName=BN;var UK="TooltipPortal",[gFe,KK]=h0(UK,{forceMount:void 0}),lu="TooltipContent",SI=y.forwardRef((e,t)=>{const n=KK(lu,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=e,i=x0(lu,e.__scopeTooltip);return r.jsx(Qn,{present:s||i.open,children:i.disableHoverableContent?r.jsx(CI,{side:a,...o,ref:t}):r.jsx(GK,{side:a,...o,ref:t})})}),GK=y.forwardRef((e,t)=>{const n=x0(lu,e.__scopeTooltip),s=vS(lu,e.__scopeTooltip),a=y.useRef(null),o=Ft(t,a),[i,l]=y.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:m}=s,f=y.useCallback(()=>{l(null),m(!1)},[m]),h=y.useCallback((x,p)=>{const v=x.currentTarget,j={x:x.clientX,y:x.clientY},g=ZK(j,v.getBoundingClientRect()),N=JK(j,g),_=eG(p.getBoundingClientRect()),b=rG([...N,..._]);l(b),m(!0)},[m]);return y.useEffect(()=>()=>f(),[f]),y.useEffect(()=>{if(c&&u){const x=v=>h(v,u),p=v=>h(v,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",p)}}},[c,u,h,f]),y.useEffect(()=>{if(i){const x=p=>{const v=p.target,j={x:p.clientX,y:p.clientY},g=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),N=!tG(j,i);g?f():N&&(f(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,i,d,f]),r.jsx(CI,{...e,ref:o})}),[HK,XK]=h0(qf,{isInside:!1}),YK=pF("TooltipContent"),CI=y.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=x0(lu,n),d=p0(n),{onClose:u}=c;return y.useEffect(()=>(document.addEventListener(LN,u),()=>document.removeEventListener(LN,u)),[u]),y.useEffect(()=>{if(c.trigger){const m=f=>{const h=f.target;h!=null&&h.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),r.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:r.jsxs(m0,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(YK,{children:s}),r.jsx(HK,{scope:n,isInside:!0,children:r.jsx(_q,{id:c.contentId,role:"tooltip",children:a||s})})]})})});SI.displayName=lu;var PI="TooltipArrow",QK=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=p0(n);return XK(PI,n).isInside?null:r.jsx(f0,{...a,...s,ref:t})});QK.displayName=PI;function ZK(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,s,a,o)){case o:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function JK(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function eG(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function tG(e,t){const{x:n,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,u=l.y,m=c.x,f=c.y;u>s!=f>s&&n<(m-d)*(s-u)/(f-u)+d&&(a=!a)}return a}function rG(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),nG(t)}function nG(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var sG=NI,aG=wI,oG=_I,AI=SI;const iG=sG,vA=aG,jA=oG,zN=y.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(AI,{ref:s,sideOffset:t,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));zN.displayName=AI.displayName;var Qu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cc=typeof window>"u"||"Deno"in globalThis;function rs(){}function lG(e,t){return typeof e=="function"?e(t):e}function VN(e){return typeof e=="number"&&e>=0&&e!==1/0}function EI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ol(e,t){return typeof e=="function"?e(t):e}function ca(e,t){return typeof e=="function"?e(t):e}function yA(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==jS(i,t.options))return!1}else if(!Uf(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function bA(e,t){const{exact:n,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Pc(t.options.mutationKey)!==Pc(o))return!1}else if(!Uf(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function jS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Pc)(e)}function Pc(e){return JSON.stringify(e,(t,n)=>WN(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Uf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Uf(e[n],t[n])):!1}function MI(e,t){if(e===t)return e;const n=NA(e)&&NA(t);if(n||WN(e)&&WN(t)){const s=n?e:Object.keys(e),a=s.length,o=n?t:Object.keys(t),i=o.length,l=n?[]:{},c=new Set(s);let d=0;for(let u=0;u<i;u++){const m=n?u:o[u];(!n&&c.has(m)||n)&&e[m]===void 0&&t[m]===void 0?(l[m]=void 0,d++):(l[m]=MI(e[m],t[m]),l[m]===e[m]&&e[m]!==void 0&&d++)}return a===i&&d===a?e:l}return t}function xg(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function NA(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function WN(e){if(!wA(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!wA(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wA(e){return Object.prototype.toString.call(e)==="[object Object]"}function cG(e){return new Promise(t=>{setTimeout(t,e)})}function qN(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?MI(e,t):t}function dG(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function uG(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var yS=Symbol();function OI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function TI(e,t){return typeof e=="function"?e(...t):!!e}var ac,Fi,Vd,Uk,mG=(Uk=class extends Qu{constructor(){super();vt(this,ac);vt(this,Fi);vt(this,Vd);et(this,Vd,t=>{if(!Cc&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ve(this,Fi)||this.setEventListener(ve(this,Vd))}onUnsubscribe(){var t;this.hasListeners()||((t=ve(this,Fi))==null||t.call(this),et(this,Fi,void 0))}setEventListener(t){var n;et(this,Vd,t),(n=ve(this,Fi))==null||n.call(this),et(this,Fi,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){ve(this,ac)!==t&&(et(this,ac,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof ve(this,ac)=="boolean"?ve(this,ac):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ac=new WeakMap,Fi=new WeakMap,Vd=new WeakMap,Uk),bS=new mG,Wd,Ii,qd,Kk,fG=(Kk=class extends Qu{constructor(){super();vt(this,Wd,!0);vt(this,Ii);vt(this,qd);et(this,qd,t=>{if(!Cc&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){ve(this,Ii)||this.setEventListener(ve(this,qd))}onUnsubscribe(){var t;this.hasListeners()||((t=ve(this,Ii))==null||t.call(this),et(this,Ii,void 0))}setEventListener(t){var n;et(this,qd,t),(n=ve(this,Ii))==null||n.call(this),et(this,Ii,t(this.setOnline.bind(this)))}setOnline(t){ve(this,Wd)!==t&&(et(this,Wd,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return ve(this,Wd)}},Wd=new WeakMap,Ii=new WeakMap,qd=new WeakMap,Kk),gg=new fG;function UN(){let e,t;const n=new Promise((a,o)=>{e=a,t=o});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}function hG(e){return Math.min(1e3*2**e,3e4)}function kI(e){return(e??"online")==="online"?gg.isOnline():!0}var $I=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Fy(e){return e instanceof $I}function DI(e){let t=!1,n=0,s=!1,a;const o=UN(),i=p=>{var v;s||(f(new $I(p)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>bS.isFocused()&&(e.networkMode==="always"||gg.isOnline())&&e.canRun(),u=()=>kI(e.networkMode)&&e.canRun(),m=p=>{var v;s||(s=!0,(v=e.onSuccess)==null||v.call(e,p),a==null||a(),o.resolve(p))},f=p=>{var v;s||(s=!0,(v=e.onError)==null||v.call(e,p),a==null||a(),o.reject(p))},h=()=>new Promise(p=>{var v;a=j=>{(s||d())&&p(j)},(v=e.onPause)==null||v.call(e)}).then(()=>{var p;a=void 0,s||(p=e.onContinue)==null||p.call(e)}),x=()=>{if(s)return;let p;const v=n===0?e.initialPromise:void 0;try{p=v??e.fn()}catch(j){p=Promise.reject(j)}Promise.resolve(p).then(m).catch(j=>{var w;if(s)return;const g=e.retry??(Cc?0:3),N=e.retryDelay??hG,_=typeof N=="function"?N(n,j):N,b=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,j);if(t||!b){f(j);return}n++,(w=e.onFail)==null||w.call(e,n,j),cG(_).then(()=>d()?void 0:h()).then(()=>{t?f(j):x()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():h().then(x),o)}}var pG=e=>setTimeout(e,0);function xG(){let e=[],t=0,n=l=>{l()},s=l=>{l()},a=pG;const o=l=>{t?e.push(l):a(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var jn=xG(),oc,Gk,FI=(Gk=class{constructor(){vt(this,oc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),VN(this.gcTime)&&et(this,oc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Cc?1/0:5*60*1e3))}clearGcTimeout(){ve(this,oc)&&(clearTimeout(ve(this,oc)),et(this,oc,void 0))}},oc=new WeakMap,Gk),Ud,ic,la,lc,Wn,Dh,cc,Ta,Ro,Hk,gG=(Hk=class extends FI{constructor(t){super();vt(this,Ta);vt(this,Ud);vt(this,ic);vt(this,la);vt(this,lc);vt(this,Wn);vt(this,Dh);vt(this,cc);et(this,cc,!1),et(this,Dh,t.defaultOptions),this.setOptions(t.options),this.observers=[],et(this,lc,t.client),et(this,la,ve(this,lc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,et(this,Ud,vG(this.options)),this.state=t.state??ve(this,Ud),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ve(this,Wn))==null?void 0:t.promise}setOptions(t){this.options={...ve(this,Dh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ve(this,la).remove(this)}setData(t,n){const s=qN(this.state.data,t,this.options);return zt(this,Ta,Ro).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){zt(this,Ta,Ro).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=ve(this,Wn))==null?void 0:s.promise;return(a=ve(this,Wn))==null||a.cancel(t),n?n.then(rs).catch(rs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ve(this,Ud))}isActive(){return this.observers.some(t=>ca(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ol(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!EI(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=ve(this,Wn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=ve(this,Wn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ve(this,la).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(ve(this,Wn)&&(ve(this,cc)?ve(this,Wn).cancel({revert:!0}):ve(this,Wn).cancelRetry()),this.scheduleGc()),ve(this,la).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||zt(this,Ta,Ro).call(this,{type:"invalidate"})}fetch(t,n){var d,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ve(this,Wn))return ve(this,Wn).continueRetry(),ve(this,Wn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(et(this,cc,!0),s.signal)})},o=()=>{const f=OI(this.options,n),x=(()=>{const p={client:ve(this,lc),queryKey:this.queryKey,meta:this.meta};return a(p),p})();return et(this,cc,!1),this.options.persister?this.options.persister(f,x,this):f(x)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ve(this,lc),state:this.state,fetchFn:o};return a(f),f})();(d=this.options.behavior)==null||d.onFetch(l,this),et(this,ic,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&zt(this,Ta,Ro).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=f=>{var h,x,p,v;Fy(f)&&f.silent||zt(this,Ta,Ro).call(this,{type:"error",error:f}),Fy(f)||((x=(h=ve(this,la).config).onError)==null||x.call(h,f,this),(v=(p=ve(this,la).config).onSettled)==null||v.call(p,this.state.data,f,this)),this.scheduleGc()};return et(this,Wn,DI({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var h,x,p,v;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(j){c(j);return}(x=(h=ve(this,la).config).onSuccess)==null||x.call(h,f,this),(v=(p=ve(this,la).config).onSettled)==null||v.call(p,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,h)=>{zt(this,Ta,Ro).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{zt(this,Ta,Ro).call(this,{type:"pause"})},onContinue:()=>{zt(this,Ta,Ro).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ve(this,Wn).start()}},Ud=new WeakMap,ic=new WeakMap,la=new WeakMap,lc=new WeakMap,Wn=new WeakMap,Dh=new WeakMap,cc=new WeakMap,Ta=new WeakSet,Ro=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...II(s.data,this.options),fetchMeta:t.meta??null};case"success":return et(this,ic,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Fy(a)&&a.revert&&ve(this,ic)?{...ve(this,ic),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),jn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ve(this,la).notify({query:this,type:"updated",action:t})})},Hk);function II(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kI(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vG(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var co,Xk,jG=(Xk=class extends Qu{constructor(t={}){super();vt(this,co);this.config=t,et(this,co,new Map)}build(t,n,s){const a=n.queryKey,o=n.queryHash??jS(a,n);let i=this.get(o);return i||(i=new gG({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){ve(this,co).has(t.queryHash)||(ve(this,co).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=ve(this,co).get(t.queryHash);n&&(t.destroy(),n===t&&ve(this,co).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){jn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ve(this,co).get(t)}getAll(){return[...ve(this,co).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>yA(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>yA(t,s)):n}notify(t){jn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},co=new WeakMap,Xk),uo,Jn,dc,mo,Ci,Yk,yG=(Yk=class extends FI{constructor(t){super();vt(this,mo);vt(this,uo);vt(this,Jn);vt(this,dc);this.mutationId=t.mutationId,et(this,Jn,t.mutationCache),et(this,uo,[]),this.state=t.state||RI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ve(this,uo).includes(t)||(ve(this,uo).push(t),this.clearGcTimeout(),ve(this,Jn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){et(this,uo,ve(this,uo).filter(n=>n!==t)),this.scheduleGc(),ve(this,Jn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ve(this,uo).length||(this.state.status==="pending"?this.scheduleGc():ve(this,Jn).remove(this))}continue(){var t;return((t=ve(this,dc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,u,m,f,h,x,p,v,j,g,N,_,b,w,S,C;const n=()=>{zt(this,mo,Ci).call(this,{type:"continue"})};et(this,dc,DI({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,P)=>{zt(this,mo,Ci).call(this,{type:"failed",failureCount:A,error:P})},onPause:()=>{zt(this,mo,Ci).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ve(this,Jn).canRun(this)}));const s=this.state.status==="pending",a=!ve(this,dc).canStart();try{if(s)n();else{zt(this,mo,Ci).call(this,{type:"pending",variables:t,isPaused:a}),await((i=(o=ve(this,Jn).config).onMutate)==null?void 0:i.call(o,t,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));P!==this.state.context&&zt(this,mo,Ci).call(this,{type:"pending",context:P,variables:t,isPaused:a})}const A=await ve(this,dc).start();return await((u=(d=ve(this,Jn).config).onSuccess)==null?void 0:u.call(d,A,t,this.state.context,this)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,A,t,this.state.context)),await((x=(h=ve(this,Jn).config).onSettled)==null?void 0:x.call(h,A,null,this.state.variables,this.state.context,this)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,A,null,t,this.state.context)),zt(this,mo,Ci).call(this,{type:"success",data:A}),A}catch(A){try{throw await((g=(j=ve(this,Jn).config).onError)==null?void 0:g.call(j,A,t,this.state.context,this)),await((_=(N=this.options).onError)==null?void 0:_.call(N,A,t,this.state.context)),await((w=(b=ve(this,Jn).config).onSettled)==null?void 0:w.call(b,void 0,A,this.state.variables,this.state.context,this)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,A,t,this.state.context)),A}finally{zt(this,mo,Ci).call(this,{type:"error",error:A})}}finally{ve(this,Jn).runNext(this)}}},uo=new WeakMap,Jn=new WeakMap,dc=new WeakMap,mo=new WeakSet,Ci=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),jn.batch(()=>{ve(this,uo).forEach(s=>{s.onMutationUpdate(t)}),ve(this,Jn).notify({mutation:this,type:"updated",action:t})})},Yk);function RI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wo,ka,Fh,Qk,bG=(Qk=class extends Qu{constructor(t={}){super();vt(this,Wo);vt(this,ka);vt(this,Fh);this.config=t,et(this,Wo,new Set),et(this,ka,new Map),et(this,Fh,0)}build(t,n,s){const a=new yG({mutationCache:this,mutationId:++_p(this,Fh)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){ve(this,Wo).add(t);const n=Gp(t);if(typeof n=="string"){const s=ve(this,ka).get(n);s?s.push(t):ve(this,ka).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ve(this,Wo).delete(t)){const n=Gp(t);if(typeof n=="string"){const s=ve(this,ka).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&ve(this,ka).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Gp(t);if(typeof n=="string"){const s=ve(this,ka).get(n),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=Gp(t);if(typeof n=="string"){const a=(s=ve(this,ka).get(n))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jn.batch(()=>{ve(this,Wo).forEach(t=>{this.notify({type:"removed",mutation:t})}),ve(this,Wo).clear(),ve(this,ka).clear()})}getAll(){return Array.from(ve(this,Wo))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>bA(n,s))}findAll(t={}){return this.getAll().filter(n=>bA(t,n))}notify(t){jn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return jn.batch(()=>Promise.all(t.map(n=>n.continue().catch(rs))))}},Wo=new WeakMap,ka=new WeakMap,Fh=new WeakMap,Qk);function Gp(e){var t;return(t=e.options.scope)==null?void 0:t.id}function _A(e){return{onFetch:(t,n)=>{var u,m,f,h,x;const s=t.options,a=(f=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,o=((h=t.state.data)==null?void 0:h.pages)||[],i=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},j=OI(t.options,t.fetchOptions),g=async(N,_,b)=>{if(p)return Promise.reject();if(_==null&&N.pages.length)return Promise.resolve(N);const S=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:_,direction:b?"backward":"forward",meta:t.options.meta};return v(k),k})(),C=await j(S),{maxPages:A}=t.options,P=b?uG:dG;return{pages:P(N.pages,C,A),pageParams:P(N.pageParams,_,A)}};if(a&&o.length){const N=a==="backward",_=N?NG:SA,b={pages:o,pageParams:i},w=_(s,b);l=await g(b,w,N)}else{const N=e??o.length;do{const _=c===0?i[0]??s.initialPageParam:SA(s,l);if(c>0&&_==null)break;l=await g(l,_),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var p,v;return(v=(p=t.options).persister)==null?void 0:v.call(p,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function SA(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function NG(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Xr,Ri,Li,Kd,Gd,Bi,Hd,Xd,Zk,wG=(Zk=class{constructor(e={}){vt(this,Xr);vt(this,Ri);vt(this,Li);vt(this,Kd);vt(this,Gd);vt(this,Bi);vt(this,Hd);vt(this,Xd);et(this,Xr,e.queryCache||new jG),et(this,Ri,e.mutationCache||new bG),et(this,Li,e.defaultOptions||{}),et(this,Kd,new Map),et(this,Gd,new Map),et(this,Bi,0)}mount(){_p(this,Bi)._++,ve(this,Bi)===1&&(et(this,Hd,bS.subscribe(async e=>{e&&(await this.resumePausedMutations(),ve(this,Xr).onFocus())})),et(this,Xd,gg.subscribe(async e=>{e&&(await this.resumePausedMutations(),ve(this,Xr).onOnline())})))}unmount(){var e,t;_p(this,Bi)._--,ve(this,Bi)===0&&((e=ve(this,Hd))==null||e.call(this),et(this,Hd,void 0),(t=ve(this,Xd))==null||t.call(this),et(this,Xd,void 0))}isFetching(e){return ve(this,Xr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ve(this,Ri).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ve(this,Xr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=ve(this,Xr).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ol(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return ve(this,Xr).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=ve(this,Xr).get(s.queryHash),o=a==null?void 0:a.state.data,i=lG(t,o);if(i!==void 0)return ve(this,Xr).build(this,s).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return jn.batch(()=>ve(this,Xr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ve(this,Xr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=ve(this,Xr);jn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=ve(this,Xr);return jn.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=jn.batch(()=>ve(this,Xr).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(rs).catch(rs)}invalidateQueries(e,t={}){return jn.batch(()=>(ve(this,Xr).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=jn.batch(()=>ve(this,Xr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(rs)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(rs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=ve(this,Xr).build(this,t);return n.isStaleByTime(ol(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rs).catch(rs)}fetchInfiniteQuery(e){return e.behavior=_A(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rs).catch(rs)}ensureInfiniteQueryData(e){return e.behavior=_A(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gg.isOnline()?ve(this,Ri).resumePausedMutations():Promise.resolve()}getQueryCache(){return ve(this,Xr)}getMutationCache(){return ve(this,Ri)}getDefaultOptions(){return ve(this,Li)}setDefaultOptions(e){et(this,Li,e)}setQueryDefaults(e,t){ve(this,Kd).set(Pc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ve(this,Kd).values()],n={};return t.forEach(s=>{Uf(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){ve(this,Gd).set(Pc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ve(this,Gd).values()],n={};return t.forEach(s=>{Uf(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ve(this,Li).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=jS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===yS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ve(this,Li).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ve(this,Xr).clear(),ve(this,Ri).clear()}},Xr=new WeakMap,Ri=new WeakMap,Li=new WeakMap,Kd=new WeakMap,Gd=new WeakMap,Bi=new WeakMap,Hd=new WeakMap,Xd=new WeakMap,Zk),Ns,Ut,Ih,es,uc,Yd,zi,Vi,Rh,Qd,Zd,mc,fc,Wi,Jd,lr,Xm,KN,GN,HN,XN,YN,QN,ZN,LI,Jk,_G=(Jk=class extends Qu{constructor(t,n){super();vt(this,lr);vt(this,Ns);vt(this,Ut);vt(this,Ih);vt(this,es);vt(this,uc);vt(this,Yd);vt(this,zi);vt(this,Vi);vt(this,Rh);vt(this,Qd);vt(this,Zd);vt(this,mc);vt(this,fc);vt(this,Wi);vt(this,Jd,new Set);this.options=n,et(this,Ns,t),et(this,Vi,null),et(this,zi,UN()),this.options.experimental_prefetchInRender||ve(this,zi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ve(this,Ut).addObserver(this),CA(ve(this,Ut),this.options)?zt(this,lr,Xm).call(this):this.updateResult(),zt(this,lr,XN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return JN(ve(this,Ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return JN(ve(this,Ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,zt(this,lr,YN).call(this),zt(this,lr,QN).call(this),ve(this,Ut).removeObserver(this)}setOptions(t){const n=this.options,s=ve(this,Ut);if(this.options=ve(this,Ns).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ca(this.options.enabled,ve(this,Ut))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");zt(this,lr,ZN).call(this),ve(this,Ut).setOptions(this.options),n._defaulted&&!xg(this.options,n)&&ve(this,Ns).getQueryCache().notify({type:"observerOptionsUpdated",query:ve(this,Ut),observer:this});const a=this.hasListeners();a&&PA(ve(this,Ut),s,this.options,n)&&zt(this,lr,Xm).call(this),this.updateResult(),a&&(ve(this,Ut)!==s||ca(this.options.enabled,ve(this,Ut))!==ca(n.enabled,ve(this,Ut))||ol(this.options.staleTime,ve(this,Ut))!==ol(n.staleTime,ve(this,Ut)))&&zt(this,lr,KN).call(this);const o=zt(this,lr,GN).call(this);a&&(ve(this,Ut)!==s||ca(this.options.enabled,ve(this,Ut))!==ca(n.enabled,ve(this,Ut))||o!==ve(this,Wi))&&zt(this,lr,HN).call(this,o)}getOptimisticResult(t){const n=ve(this,Ns).getQueryCache().build(ve(this,Ns),t),s=this.createResult(n,t);return CG(this,s)&&(et(this,es,s),et(this,Yd,this.options),et(this,uc,ve(this,Ut).state)),s}getCurrentResult(){return ve(this,es)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),Reflect.get(s,a))})}trackProp(t){ve(this,Jd).add(t)}getCurrentQuery(){return ve(this,Ut)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=ve(this,Ns).defaultQueryOptions(t),s=ve(this,Ns).getQueryCache().build(ve(this,Ns),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return zt(this,lr,Xm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ve(this,es)))}createResult(t,n){var A;const s=ve(this,Ut),a=this.options,o=ve(this,es),i=ve(this,uc),l=ve(this,Yd),d=t!==s?t.state:ve(this,Ih),{state:u}=t;let m={...u},f=!1,h;if(n._optimisticResults){const P=this.hasListeners(),k=!P&&CA(t,n),E=P&&PA(t,s,n,a);(k||E)&&(m={...m,...II(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:p,status:v}=m;h=m.data;let j=!1;if(n.placeholderData!==void 0&&h===void 0&&v==="pending"){let P;o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(P=o.data,j=!0):P=typeof n.placeholderData=="function"?n.placeholderData((A=ve(this,Zd))==null?void 0:A.state.data,ve(this,Zd)):n.placeholderData,P!==void 0&&(v="success",h=qN(o==null?void 0:o.data,P,n),f=!0)}if(n.select&&h!==void 0&&!j)if(o&&h===(i==null?void 0:i.data)&&n.select===ve(this,Rh))h=ve(this,Qd);else try{et(this,Rh,n.select),h=n.select(h),h=qN(o==null?void 0:o.data,h,n),et(this,Qd,h),et(this,Vi,null)}catch(P){et(this,Vi,P)}ve(this,Vi)&&(x=ve(this,Vi),h=ve(this,Qd),p=Date.now(),v="error");const g=m.fetchStatus==="fetching",N=v==="pending",_=v==="error",b=N&&g,w=h!==void 0,C={status:v,fetchStatus:m.fetchStatus,isPending:N,isSuccess:v==="success",isError:_,isInitialLoading:b,isLoading:b,data:h,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:p,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!N,isLoadingError:_&&!w,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:_&&w,isStale:NS(t,n),refetch:this.refetch,promise:ve(this,zi),isEnabled:ca(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=O=>{C.status==="error"?O.reject(C.error):C.data!==void 0&&O.resolve(C.data)},k=()=>{const O=et(this,zi,C.promise=UN());P(O)},E=ve(this,zi);switch(E.status){case"pending":t.queryHash===s.queryHash&&P(E);break;case"fulfilled":(C.status==="error"||C.data!==E.value)&&k();break;case"rejected":(C.status!=="error"||C.error!==E.reason)&&k();break}}return C}updateResult(){const t=ve(this,es),n=this.createResult(ve(this,Ut),this.options);if(et(this,uc,ve(this,Ut).state),et(this,Yd,this.options),ve(this,uc).data!==void 0&&et(this,Zd,ve(this,Ut)),xg(n,t))return;et(this,es,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!ve(this,Jd).size)return!0;const i=new Set(o??ve(this,Jd));return this.options.throwOnError&&i.add("error"),Object.keys(ve(this,es)).some(l=>{const c=l;return ve(this,es)[c]!==t[c]&&i.has(c)})};zt(this,lr,LI).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&zt(this,lr,XN).call(this)}},Ns=new WeakMap,Ut=new WeakMap,Ih=new WeakMap,es=new WeakMap,uc=new WeakMap,Yd=new WeakMap,zi=new WeakMap,Vi=new WeakMap,Rh=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,mc=new WeakMap,fc=new WeakMap,Wi=new WeakMap,Jd=new WeakMap,lr=new WeakSet,Xm=function(t){zt(this,lr,ZN).call(this);let n=ve(this,Ut).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(rs)),n},KN=function(){zt(this,lr,YN).call(this);const t=ol(this.options.staleTime,ve(this,Ut));if(Cc||ve(this,es).isStale||!VN(t))return;const s=EI(ve(this,es).dataUpdatedAt,t)+1;et(this,mc,setTimeout(()=>{ve(this,es).isStale||this.updateResult()},s))},GN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ve(this,Ut)):this.options.refetchInterval)??!1},HN=function(t){zt(this,lr,QN).call(this),et(this,Wi,t),!(Cc||ca(this.options.enabled,ve(this,Ut))===!1||!VN(ve(this,Wi))||ve(this,Wi)===0)&&et(this,fc,setInterval(()=>{(this.options.refetchIntervalInBackground||bS.isFocused())&&zt(this,lr,Xm).call(this)},ve(this,Wi)))},XN=function(){zt(this,lr,KN).call(this),zt(this,lr,HN).call(this,zt(this,lr,GN).call(this))},YN=function(){ve(this,mc)&&(clearTimeout(ve(this,mc)),et(this,mc,void 0))},QN=function(){ve(this,fc)&&(clearInterval(ve(this,fc)),et(this,fc,void 0))},ZN=function(){const t=ve(this,Ns).getQueryCache().build(ve(this,Ns),this.options);if(t===ve(this,Ut))return;const n=ve(this,Ut);et(this,Ut,t),et(this,Ih,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},LI=function(t){jn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(ve(this,es))}),ve(this,Ns).getQueryCache().notify({query:ve(this,Ut),type:"observerResultsUpdated"})})},Jk);function SG(e,t){return ca(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function CA(e,t){return SG(e,t)||e.state.data!==void 0&&JN(e,t,t.refetchOnMount)}function JN(e,t,n){if(ca(t.enabled,e)!==!1&&ol(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&NS(e,t)}return!1}function PA(e,t,n,s){return(e!==t||ca(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&NS(e,n)}function NS(e,t){return ca(t.enabled,e)!==!1&&e.isStaleByTime(ol(t.staleTime,e))}function CG(e,t){return!xg(e.getCurrentResult(),t)}var qi,Ui,ws,qo,ri,Ox,ew,e$,PG=(e$=class extends Qu{constructor(n,s){super();vt(this,ri);vt(this,qi);vt(this,Ui);vt(this,ws);vt(this,qo);et(this,qi,n),this.setOptions(s),this.bindMethods(),zt(this,ri,Ox).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=ve(this,qi).defaultMutationOptions(n),xg(this.options,s)||ve(this,qi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ve(this,ws),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Pc(s.mutationKey)!==Pc(this.options.mutationKey)?this.reset():((a=ve(this,ws))==null?void 0:a.state.status)==="pending"&&ve(this,ws).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ve(this,ws))==null||n.removeObserver(this)}onMutationUpdate(n){zt(this,ri,Ox).call(this),zt(this,ri,ew).call(this,n)}getCurrentResult(){return ve(this,Ui)}reset(){var n;(n=ve(this,ws))==null||n.removeObserver(this),et(this,ws,void 0),zt(this,ri,Ox).call(this),zt(this,ri,ew).call(this)}mutate(n,s){var a;return et(this,qo,s),(a=ve(this,ws))==null||a.removeObserver(this),et(this,ws,ve(this,qi).getMutationCache().build(ve(this,qi),this.options)),ve(this,ws).addObserver(this),ve(this,ws).execute(n)}},qi=new WeakMap,Ui=new WeakMap,ws=new WeakMap,qo=new WeakMap,ri=new WeakSet,Ox=function(){var s;const n=((s=ve(this,ws))==null?void 0:s.state)??RI();et(this,Ui,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ew=function(n){jn.batch(()=>{var s,a,o,i,l,c,d,u;if(ve(this,qo)&&this.hasListeners()){const m=ve(this,Ui).variables,f=ve(this,Ui).context;(n==null?void 0:n.type)==="success"?((a=(s=ve(this,qo)).onSuccess)==null||a.call(s,n.data,m,f),(i=(o=ve(this,qo)).onSettled)==null||i.call(o,n.data,null,m,f)):(n==null?void 0:n.type)==="error"&&((c=(l=ve(this,qo)).onError)==null||c.call(l,n.error,m,f),(u=(d=ve(this,qo)).onSettled)==null||u.call(d,void 0,n.error,m,f))}this.listeners.forEach(m=>{m(ve(this,Ui))})})},e$),BI=y.createContext(void 0),Gr=e=>{const t=y.useContext(BI);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},AG=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(BI.Provider,{value:e,children:t})),zI=y.createContext(!1),EG=()=>y.useContext(zI);zI.Provider;function MG(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var OG=y.createContext(MG()),TG=()=>y.useContext(OG),kG=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},$G=e=>{y.useEffect(()=>{e.clearReset()},[e])},DG=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||TI(n,[e.error,s])),FG=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>t(n(...s)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},IG=(e,t)=>e.isLoading&&e.isFetching&&!t,RG=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,AA=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function LG(e,t,n){var m,f,h,x,p;const s=EG(),a=TG(),o=Gr(),i=o.defaultQueryOptions(e);(f=(m=o.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||f.call(m,i),i._optimisticResults=s?"isRestoring":"optimistic",FG(i),kG(i,a),$G(a);const l=!o.getQueryCache().get(i.queryHash),[c]=y.useState(()=>new t(o,i)),d=c.getOptimisticResult(i),u=!s&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(v=>{const j=u?c.subscribe(jn.batchCalls(v)):rs;return c.updateResult(),j},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(i)},[i,c]),RG(i,d))throw AA(i,c,a);if(DG({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((x=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||x.call(h,i,d),i.experimental_prefetchInRender&&!Cc&&IG(d,s)){const v=l?AA(i,c,a):(p=o.getQueryCache().get(i.queryHash))==null?void 0:p.promise;v==null||v.catch(rs).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function it(e,t){return LG(e,_G)}function Qt(e,t){const n=Gr(),[s]=y.useState(()=>new PG(n,e));y.useEffect(()=>{s.setOptions(e)},[s,e]);const a=y.useSyncExternalStore(y.useCallback(i=>s.subscribe(jn.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=y.useCallback((i,l)=>{s.mutate(i,l).catch(rs)},[s]);if(a.error&&TI(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kf(){return Kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kf.apply(this,arguments)}var Hi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hi||(Hi={}));const EA="popstate";function BG(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:i,hash:l}=s.location;return tw("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:vg(a)}return VG(t,n,null,e)}function dn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function VI(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zG(){return Math.random().toString(36).substr(2,8)}function MA(e,t){return{usr:e.state,key:e.key,idx:t}}function tw(e,t,n,s){return n===void 0&&(n=null),Kf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zu(t):t,{state:n,key:t&&t.key||s||zG()})}function vg(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Zu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function VG(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,i=a.history,l=Hi.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(Kf({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=Hi.Pop;let v=u(),j=v==null?null:v-d;d=v,c&&c({action:l,location:p.location,delta:j})}function f(v,j){l=Hi.Push;let g=tw(p.location,v,j);d=u()+1;let N=MA(g,d),_=p.createHref(g);try{i.pushState(N,"",_)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;a.location.assign(_)}o&&c&&c({action:l,location:p.location,delta:1})}function h(v,j){l=Hi.Replace;let g=tw(p.location,v,j);d=u();let N=MA(g,d),_=p.createHref(g);i.replaceState(N,"",_),o&&c&&c({action:l,location:p.location,delta:0})}function x(v){let j=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof v=="string"?v:vg(v);return g=g.replace(/ $/,"%20"),dn(j,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,j)}let p={get action(){return l},get location(){return e(a,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(EA,m),c=v,()=>{a.removeEventListener(EA,m),c=null}},createHref(v){return t(a,v)},createURL:x,encodeLocation(v){let j=x(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:f,replace:h,go(v){return i.go(v)}};return p}var OA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(OA||(OA={}));function WG(e,t,n){return n===void 0&&(n="/"),qG(e,t,n,!1)}function qG(e,t,n,s){let a=typeof t=="string"?Zu(t):t,o=wS(a.pathname||"/",n);if(o==null)return null;let i=WI(e);UG(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=rH(o);l=eH(i[c],d,s)}return l}function WI(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(dn(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=il([s,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(dn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),WI(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:ZG(d,o.index),routesMeta:u})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of qI(o.path))a(o,i,c)}),t}function qI(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let i=qI(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function UG(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:JG(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const KG=/^:[\w-]+$/,GG=3,HG=2,XG=1,YG=10,QG=-2,TA=e=>e==="*";function ZG(e,t){let n=e.split("/"),s=n.length;return n.some(TA)&&(s+=QG),t&&(s+=HG),n.filter(a=>!TA(a)).reduce((a,o)=>a+(KG.test(o)?GG:o===""?XG:YG),s)}function JG(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function eH(e,t,n){let{routesMeta:s}=e,a={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=kA({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!m&&d&&n&&!s[s.length-1].route.index&&(m=kA({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:il([o,m.pathname]),pathnameBase:oH(il([o,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(o=il([o,m.pathnameBase]))}return i}function kA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=tH(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let p=l[m]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const x=l[m];return h&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function tH(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),VI(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function rH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return VI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function nH(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?Zu(e):e;return{pathname:n?n.startsWith("/")?n:sH(n,t):t,search:iH(s),hash:lH(a)}}function sH(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Iy(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aH(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function UI(e,t){let n=aH(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function KI(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Zu(e):(a=Kf({},e),dn(!a.pathname||!a.pathname.includes("?"),Iy("?","pathname","search",a)),dn(!a.pathname||!a.pathname.includes("#"),Iy("#","pathname","hash",a)),dn(!a.search||!a.search.includes("#"),Iy("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=n;else{let m=t.length-1;if(!s&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}l=m>=0?t[m]:"/"}let c=nH(a,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const il=e=>e.join("/").replace(/\/\/+/g,"/"),oH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const GI=["post","put","patch","delete"];new Set(GI);const dH=["get",...GI];new Set(dH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gf.apply(this,arguments)}const _S=y.createContext(null),uH=y.createContext(null),Vc=y.createContext(null),g0=y.createContext(null),Wc=y.createContext({outlet:null,matches:[],isDataRoute:!1}),HI=y.createContext(null);function mH(e,t){let{relative:n}=t===void 0?{}:t;Jh()||dn(!1);let{basename:s,navigator:a}=y.useContext(Vc),{hash:o,pathname:i,search:l}=YI(e,{relative:n}),c=i;return s!=="/"&&(c=i==="/"?s:il([s,i])),a.createHref({pathname:c,search:l,hash:o})}function Jh(){return y.useContext(g0)!=null}function Ju(){return Jh()||dn(!1),y.useContext(g0).location}function XI(e){y.useContext(Vc).static||y.useLayoutEffect(e)}function SS(){let{isDataRoute:e}=y.useContext(Wc);return e?SH():fH()}function fH(){Jh()||dn(!1);let e=y.useContext(_S),{basename:t,future:n,navigator:s}=y.useContext(Vc),{matches:a}=y.useContext(Wc),{pathname:o}=Ju(),i=JSON.stringify(UI(a,n.v7_relativeSplatPath)),l=y.useRef(!1);return XI(()=>{l.current=!0}),y.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let m=KI(d,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:il([t,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[t,s,i,o,e])}function YI(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=y.useContext(Vc),{matches:a}=y.useContext(Wc),{pathname:o}=Ju(),i=JSON.stringify(UI(a,s.v7_relativeSplatPath));return y.useMemo(()=>KI(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function hH(e,t){return pH(e,t)}function pH(e,t,n,s){Jh()||dn(!1);let{navigator:a}=y.useContext(Vc),{matches:o}=y.useContext(Wc),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Ju(),u;if(t){var m;let v=typeof t=="string"?Zu(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||dn(!1),u=v}else u=d;let f=u.pathname||"/",h=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=WG(e,{pathname:h}),p=yH(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:il([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:il([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,s);return t&&p?y.createElement(g0.Provider,{value:{location:Gf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Hi.Pop}},p):p}function xH(){let e=_H(),t=cH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:a},n):null,null)}const gH=y.createElement(xH,null);class vH extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(Wc.Provider,{value:this.props.routeContext},y.createElement(HI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jH(e){let{routeContext:t,match:n,children:s}=e,a=y.useContext(_S);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Wc.Provider,{value:t},s)}function yH(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let u=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||dn(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:f,errors:h}=n,x=m.route.loader&&f[m.route.id]===void 0&&(!h||h[m.route.id]===void 0);if(m.route.lazy||x){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,f)=>{let h,x=!1,p=null,v=null;n&&(h=l&&m.route.id?l[m.route.id]:void 0,p=m.route.errorElement||gH,c&&(d<0&&f===0?(x=!0,v=null):d===f&&(x=!0,v=m.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,f+1)),g=()=>{let N;return h?N=p:x?N=v:m.route.Component?N=y.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=u,y.createElement(jH,{match:m,routeContext:{outlet:u,matches:j,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?y.createElement(vH,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:g(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):g()},null)}var QI=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QI||{}),jg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jg||{});function bH(e){let t=y.useContext(_S);return t||dn(!1),t}function NH(e){let t=y.useContext(uH);return t||dn(!1),t}function wH(e){let t=y.useContext(Wc);return t||dn(!1),t}function ZI(e){let t=wH(),n=t.matches[t.matches.length-1];return n.route.id||dn(!1),n.route.id}function _H(){var e;let t=y.useContext(HI),n=NH(jg.UseRouteError),s=ZI(jg.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function SH(){let{router:e}=bH(QI.UseNavigateStable),t=ZI(jg.UseNavigateStable),n=y.useRef(!1);return XI(()=>{n.current=!0}),y.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Gf({fromRouteId:t},o)))},[e,t])}function CH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Hr(e){dn(!1)}function PH(e){let{basename:t="/",children:n=null,location:s,navigationType:a=Hi.Pop,navigator:o,static:i=!1,future:l}=e;Jh()&&dn(!1);let c=t.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:o,static:i,future:Gf({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=Zu(s));let{pathname:u="/",search:m="",hash:f="",state:h=null,key:x="default"}=s,p=y.useMemo(()=>{let v=wS(u,c);return v==null?null:{location:{pathname:v,search:m,hash:f,state:h,key:x},navigationType:a}},[c,u,m,f,h,x,a]);return p==null?null:y.createElement(Vc.Provider,{value:d},y.createElement(g0.Provider,{children:n,value:p}))}function AH(e){let{children:t,location:n}=e;return hH(rw(t),n)}new Promise(()=>{});function rw(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(s,a)=>{if(!y.isValidElement(s))return;let o=[...t,a];if(s.type===y.Fragment){n.push.apply(n,rw(s.props.children,o));return}s.type!==Hr&&dn(!1),!s.props.index||!s.props.children||dn(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=rw(s.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nw.apply(this,arguments)}function EH(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function MH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function OH(e,t){return e.button===0&&(!t||t==="_self")&&!MH(e)}const TH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kH="6";try{window.__reactRouterVersion=kH}catch{}const $H="startTransition",$A=c_[$H];function DH(e){let{basename:t,children:n,future:s,window:a}=e,o=y.useRef();o.current==null&&(o.current=BG({window:a,v5Compat:!0}));let i=o.current,[l,c]=y.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},u=y.useCallback(m=>{d&&$A?$A(()=>c(m)):c(m)},[c,d]);return y.useLayoutEffect(()=>i.listen(u),[i,u]),y.useEffect(()=>CH(s),[s]),y.createElement(PH,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:s})}const FH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hp=y.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,f=EH(t,TH),{basename:h}=y.useContext(Vc),x,p=!1;if(typeof d=="string"&&IH.test(d)&&(x=d,FH))try{let N=new URL(window.location.href),_=d.startsWith("//")?new URL(N.protocol+d):new URL(d),b=wS(_.pathname,h);_.origin===N.origin&&b!=null?d=b+_.search+_.hash:p=!0}catch{}let v=mH(d,{relative:a}),j=RH(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function g(N){s&&s(N),N.defaultPrevented||j(N)}return y.createElement("a",nw({},f,{href:x||v,onClick:p||o?s:g,ref:n,target:c}))});var DA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DA||(DA={}));var FA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(FA||(FA={}));function RH(e,t){let{target:n,replace:s,state:a,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=SS(),d=Ju(),u=YI(e,{relative:i});return y.useCallback(m=>{if(OH(m,n)){m.preventDefault();let f=s!==void 0?s:vg(d)===vg(u);c(e,{replace:f,state:a,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,u,s,a,n,e,o,i,l])}const G=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));G.displayName="Card";const ne=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));ne.displayName="CardHeader";const ae=y.forwardRef(({className:e,...t},n)=>r.jsx("h3",{ref:n,className:Te("text-2xl font-semibold leading-none tracking-tight",e),...t}));ae.displayName="CardTitle";const Me=y.forwardRef(({className:e,...t},n)=>r.jsx("p",{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));Me.displayName="CardDescription";const Q=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Te("p-6 pt-0",e),...t}));Q.displayName="CardContent";const LH=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Te("flex items-center p-6 pt-0",e),...t}));LH.displayName="CardFooter";var BH=Array.isArray,js=BH,zH=typeof Sp=="object"&&Sp&&Sp.Object===Object&&Sp,JI=zH,VH=JI,WH=typeof self=="object"&&self&&self.Object===Object&&self,qH=VH||WH||Function("return this")(),eo=qH,UH=eo,KH=UH.Symbol,em=KH,IA=em,e4=Object.prototype,GH=e4.hasOwnProperty,HH=e4.toString,Mm=IA?IA.toStringTag:void 0;function XH(e){var t=GH.call(e,Mm),n=e[Mm];try{e[Mm]=void 0;var s=!0}catch{}var a=HH.call(e);return s&&(t?e[Mm]=n:delete e[Mm]),a}var YH=XH,QH=Object.prototype,ZH=QH.toString;function JH(e){return ZH.call(e)}var eX=JH,RA=em,tX=YH,rX=eX,nX="[object Null]",sX="[object Undefined]",LA=RA?RA.toStringTag:void 0;function aX(e){return e==null?e===void 0?sX:nX:LA&&LA in Object(e)?tX(e):rX(e)}var xi=aX;function oX(e){return e!=null&&typeof e=="object"}var to=oX,iX=xi,lX=to,cX="[object Symbol]";function dX(e){return typeof e=="symbol"||lX(e)&&iX(e)==cX}var tm=dX,uX=js,mX=tm,fX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hX=/^\w*$/;function pX(e,t){if(uX(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||mX(e)?!0:hX.test(e)||!fX.test(e)||t!=null&&e in Object(t)}var CS=pX;function xX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ro=xX;const rm=or(ro);var gX=xi,vX=ro,jX="[object AsyncFunction]",yX="[object Function]",bX="[object GeneratorFunction]",NX="[object Proxy]";function wX(e){if(!vX(e))return!1;var t=gX(e);return t==yX||t==bX||t==jX||t==NX}var PS=wX;const xt=or(PS);var _X=eo,SX=_X["__core-js_shared__"],CX=SX,Ry=CX,BA=function(){var e=/[^.]+$/.exec(Ry&&Ry.keys&&Ry.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function PX(e){return!!BA&&BA in e}var AX=PX,EX=Function.prototype,MX=EX.toString;function OX(e){if(e!=null){try{return MX.call(e)}catch{}try{return e+""}catch{}}return""}var t4=OX,TX=PS,kX=AX,$X=ro,DX=t4,FX=/[\\^$.*+?()[\]{}|]/g,IX=/^\[object .+?Constructor\]$/,RX=Function.prototype,LX=Object.prototype,BX=RX.toString,zX=LX.hasOwnProperty,VX=RegExp("^"+BX.call(zX).replace(FX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WX(e){if(!$X(e)||kX(e))return!1;var t=TX(e)?VX:IX;return t.test(DX(e))}var qX=WX;function UX(e,t){return e==null?void 0:e[t]}var KX=UX,GX=qX,HX=KX;function XX(e,t){var n=HX(e,t);return GX(n)?n:void 0}var qc=XX,YX=qc,QX=YX(Object,"create"),v0=QX,zA=v0;function ZX(){this.__data__=zA?zA(null):{},this.size=0}var JX=ZX;function eY(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var tY=eY,rY=v0,nY="__lodash_hash_undefined__",sY=Object.prototype,aY=sY.hasOwnProperty;function oY(e){var t=this.__data__;if(rY){var n=t[e];return n===nY?void 0:n}return aY.call(t,e)?t[e]:void 0}var iY=oY,lY=v0,cY=Object.prototype,dY=cY.hasOwnProperty;function uY(e){var t=this.__data__;return lY?t[e]!==void 0:dY.call(t,e)}var mY=uY,fY=v0,hY="__lodash_hash_undefined__";function pY(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fY&&t===void 0?hY:t,this}var xY=pY,gY=JX,vY=tY,jY=iY,yY=mY,bY=xY;function nm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}nm.prototype.clear=gY;nm.prototype.delete=vY;nm.prototype.get=jY;nm.prototype.has=yY;nm.prototype.set=bY;var NY=nm;function wY(){this.__data__=[],this.size=0}var _Y=wY;function SY(e,t){return e===t||e!==e&&t!==t}var j0=SY,CY=j0;function PY(e,t){for(var n=e.length;n--;)if(CY(e[n][0],t))return n;return-1}var y0=PY,AY=y0,EY=Array.prototype,MY=EY.splice;function OY(e){var t=this.__data__,n=AY(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():MY.call(t,n,1),--this.size,!0}var TY=OY,kY=y0;function $Y(e){var t=this.__data__,n=kY(t,e);return n<0?void 0:t[n][1]}var DY=$Y,FY=y0;function IY(e){return FY(this.__data__,e)>-1}var RY=IY,LY=y0;function BY(e,t){var n=this.__data__,s=LY(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var zY=BY,VY=_Y,WY=TY,qY=DY,UY=RY,KY=zY;function sm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}sm.prototype.clear=VY;sm.prototype.delete=WY;sm.prototype.get=qY;sm.prototype.has=UY;sm.prototype.set=KY;var b0=sm,GY=qc,HY=eo,XY=GY(HY,"Map"),AS=XY,VA=NY,YY=b0,QY=AS;function ZY(){this.size=0,this.__data__={hash:new VA,map:new(QY||YY),string:new VA}}var JY=ZY;function eQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var tQ=eQ,rQ=tQ;function nQ(e,t){var n=e.__data__;return rQ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var N0=nQ,sQ=N0;function aQ(e){var t=sQ(this,e).delete(e);return this.size-=t?1:0,t}var oQ=aQ,iQ=N0;function lQ(e){return iQ(this,e).get(e)}var cQ=lQ,dQ=N0;function uQ(e){return dQ(this,e).has(e)}var mQ=uQ,fQ=N0;function hQ(e,t){var n=fQ(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var pQ=hQ,xQ=JY,gQ=oQ,vQ=cQ,jQ=mQ,yQ=pQ;function am(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}am.prototype.clear=xQ;am.prototype.delete=gQ;am.prototype.get=vQ;am.prototype.has=jQ;am.prototype.set=yQ;var ES=am,r4=ES,bQ="Expected a function";function MS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bQ);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,s);return n.cache=o.set(a,i)||o,i};return n.cache=new(MS.Cache||r4),n}MS.Cache=r4;var n4=MS;const NQ=or(n4);var wQ=n4,_Q=500;function SQ(e){var t=wQ(e,function(s){return n.size===_Q&&n.clear(),s}),n=t.cache;return t}var CQ=SQ,PQ=CQ,AQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EQ=/\\(\\)?/g,MQ=PQ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(AQ,function(n,s,a,o){t.push(a?o.replace(EQ,"$1"):s||n)}),t}),OQ=MQ;function TQ(e,t){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}var w0=TQ,WA=em,kQ=w0,$Q=js,DQ=tm,FQ=1/0,qA=WA?WA.prototype:void 0,UA=qA?qA.toString:void 0;function s4(e){if(typeof e=="string")return e;if($Q(e))return kQ(e,s4)+"";if(DQ(e))return UA?UA.call(e):"";var t=e+"";return t=="0"&&1/e==-FQ?"-0":t}var IQ=s4,RQ=IQ;function LQ(e){return e==null?"":RQ(e)}var a4=LQ,BQ=js,zQ=CS,VQ=OQ,WQ=a4;function qQ(e,t){return BQ(e)?e:zQ(e,t)?[e]:VQ(WQ(e))}var _0=qQ,UQ=tm,KQ=1/0;function GQ(e){if(typeof e=="string"||UQ(e))return e;var t=e+"";return t=="0"&&1/e==-KQ?"-0":t}var ep=GQ,HQ=_0,XQ=ep;function YQ(e,t){t=HQ(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[XQ(t[n++])];return n&&n==s?e:void 0}var S0=YQ,QQ=S0;function ZQ(e,t,n){var s=e==null?void 0:QQ(e,t);return s===void 0?n:s}var o4=ZQ;const ks=or(o4);function JQ(e){return e==null}var eZ=JQ;const bt=or(eZ);var tZ=xi,rZ=js,nZ=to,sZ="[object String]";function aZ(e){return typeof e=="string"||!rZ(e)&&nZ(e)&&tZ(e)==sZ}var oZ=aZ;const Ac=or(oZ);var i4={exports:{}},pr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=Symbol.for("react.element"),TS=Symbol.for("react.portal"),C0=Symbol.for("react.fragment"),P0=Symbol.for("react.strict_mode"),A0=Symbol.for("react.profiler"),E0=Symbol.for("react.provider"),M0=Symbol.for("react.context"),iZ=Symbol.for("react.server_context"),O0=Symbol.for("react.forward_ref"),T0=Symbol.for("react.suspense"),k0=Symbol.for("react.suspense_list"),$0=Symbol.for("react.memo"),D0=Symbol.for("react.lazy"),lZ=Symbol.for("react.offscreen"),l4;l4=Symbol.for("react.module.reference");function _a(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case OS:switch(e=e.type,e){case C0:case A0:case P0:case T0:case k0:return e;default:switch(e=e&&e.$$typeof,e){case iZ:case M0:case O0:case D0:case $0:case E0:return e;default:return t}}case TS:return t}}}pr.ContextConsumer=M0;pr.ContextProvider=E0;pr.Element=OS;pr.ForwardRef=O0;pr.Fragment=C0;pr.Lazy=D0;pr.Memo=$0;pr.Portal=TS;pr.Profiler=A0;pr.StrictMode=P0;pr.Suspense=T0;pr.SuspenseList=k0;pr.isAsyncMode=function(){return!1};pr.isConcurrentMode=function(){return!1};pr.isContextConsumer=function(e){return _a(e)===M0};pr.isContextProvider=function(e){return _a(e)===E0};pr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===OS};pr.isForwardRef=function(e){return _a(e)===O0};pr.isFragment=function(e){return _a(e)===C0};pr.isLazy=function(e){return _a(e)===D0};pr.isMemo=function(e){return _a(e)===$0};pr.isPortal=function(e){return _a(e)===TS};pr.isProfiler=function(e){return _a(e)===A0};pr.isStrictMode=function(e){return _a(e)===P0};pr.isSuspense=function(e){return _a(e)===T0};pr.isSuspenseList=function(e){return _a(e)===k0};pr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===C0||e===A0||e===P0||e===T0||e===k0||e===lZ||typeof e=="object"&&e!==null&&(e.$$typeof===D0||e.$$typeof===$0||e.$$typeof===E0||e.$$typeof===M0||e.$$typeof===O0||e.$$typeof===l4||e.getModuleId!==void 0)};pr.typeOf=_a;i4.exports=pr;var cZ=i4.exports,dZ=xi,uZ=to,mZ="[object Number]";function fZ(e){return typeof e=="number"||uZ(e)&&dZ(e)==mZ}var c4=fZ;const hZ=or(c4);var pZ=c4;function xZ(e){return pZ(e)&&e!=+e}var gZ=xZ;const El=or(gZ);var os=function(t){return t===0?0:t>0?1:-1},Jl=function(t){return Ac(t)&&t.indexOf("%")===t.length-1},qe=function(t){return hZ(t)&&!El(t)},vZ=function(t){return bt(t)},bn=function(t){return qe(t)||Ac(t)},jZ=0,gi=function(t){var n=++jZ;return"".concat(t||"").concat(n)},is=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qe(t)&&!Ac(t))return s;var o;if(Jl(t)){var i=t.indexOf("%");o=n*parseFloat(t.slice(0,i))/100}else o=+t;return El(o)&&(o=s),a&&o>n&&(o=n),o},$i=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},yZ=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},a=0;a<n;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},zr=function(t,n){return qe(t)&&qe(n)?function(s){return t+s*(n-t)}:function(){return n}};function yg(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):ks(s,t))===n})}var bZ=function(t){if(!t||!t.length)return null;for(var n=t.length,s=0,a=0,o=0,i=0,l=1/0,c=-1/0,d=0,u=0,m=0;m<n;m++)d=t[m].cx||0,u=t[m].cy||0,s+=d,a+=u,o+=d*u,i+=d*d,l=Math.min(l,d),c=Math.max(c,d);var f=n*i!==s*s?(n*o-s*a)/(n*i-s*s):0;return{xmin:l,xmax:c,a:f,b:(a-f*s)/n}},NZ=function(t,n){return qe(t)&&qe(n)?t-n:Ac(t)&&Ac(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Dd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function sw(e){"@babel/helpers - typeof";return sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sw(e)}var wZ=["viewBox","children"],_Z=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],KA=["points","pathLength"],Ly={svg:wZ,polygon:KA,polyline:KA},kS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],bg=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(y.isValidElement(t)&&(s=t.props),!rm(s))return null;var a={};return Object.keys(s).forEach(function(o){kS.includes(o)&&(a[o]=n||function(i){return s[o](s,i)})}),a},SZ=function(t,n,s){return function(a){return t(n,s,a),null}},vl=function(t,n,s){if(!rm(t)||sw(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(o){var i=t[o];kS.includes(o)&&typeof i=="function"&&(a||(a={}),a[o]=SZ(i,n,s))}),a},CZ=["children"],PZ=["children"];function GA(e,t){if(e==null)return{};var n=AZ(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function AZ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function aw(e){"@babel/helpers - typeof";return aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aw(e)}var HA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Jo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},XA=null,By=null,F0=function e(t){if(t===XA&&Array.isArray(By))return By;var n=[];return y.Children.forEach(t,function(s){bt(s)||(cZ.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),By=n,XA=t,n};function us(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(a){return Jo(a)}):s=[Jo(t)],F0(e).forEach(function(a){var o=ks(a,"type.displayName")||ks(a,"type.name");s.indexOf(o)!==-1&&n.push(a)}),n}function Un(e,t){var n=us(e,t);return n&&n[0]}var ow=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,a=n.height;return!(!qe(s)||s<=0||!qe(a)||a<=0)},EZ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],d4=function(t){return t&&t.type&&Ac(t.type)&&EZ.indexOf(t.type)>=0},u4=function(t){return t&&aw(t)==="object"&&"clipDot"in t},MZ=function(t,n,s,a){var o,i=(o=Ly==null?void 0:Ly[a])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!xt(t)&&(a&&i.includes(n)||_Z.includes(n))||s&&kS.includes(n)},OZ=function(t){var n=[];return F0(t).forEach(function(s){d4(s)&&n.push(s)}),n},ct=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(y.isValidElement(t)&&(a=t.props),!rm(a))return null;var o={};return Object.keys(a).forEach(function(i){var l;MZ((l=a)===null||l===void 0?void 0:l[i],i,n,s)&&(o[i]=a[i])}),o},iw=function e(t,n){if(t===n)return!0;var s=y.Children.count(t);if(s!==y.Children.count(n))return!1;if(s===0)return!0;if(s===1)return YA(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<s;a++){var o=t[a],i=n[a];if(Array.isArray(o)||Array.isArray(i)){if(!e(o,i))return!1}else if(!YA(o,i))return!1}return!0},YA=function(t,n){if(bt(t)&&bt(n))return!0;if(!bt(t)&&!bt(n)){var s=t.props||{},a=s.children,o=GA(s,CZ),i=n.props||{},l=i.children,c=GA(i,PZ);return a&&l?Dd(o,c)&&iw(a,l):!a&&!l?Dd(o,c):!1}return!1},QA=function(t,n){var s=[],a={};return F0(t).forEach(function(o,i){if(d4(o))s.push(o);else if(o){var l=Jo(o.type),c=n[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var m=d(o,l,i);s.push(m),a[l]=!0}}}),s},TZ=function(t){var n=t&&t.type;return n&&HA[n]?HA[n]:null},kZ=function(t,n){return F0(n).indexOf(t)},$Z=["children","width","height","viewBox","className","style","title","desc"];function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lw.apply(this,arguments)}function DZ(e,t){if(e==null)return{};var n=FZ(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function FZ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Ng(e){var t=e.children,n=e.width,s=e.height,a=e.viewBox,o=e.className,i=e.style,l=e.title,c=e.desc,d=DZ(e,$Z),u=a||{width:n,height:s,x:0,y:0},m=Mt("recharts-surface",o);return K.createElement("svg",lw({},ct(d,!0,"svg"),{className:m,width:n,height:s,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),K.createElement("title",null,l),K.createElement("desc",null,c),t)}var IZ=["children","className"];function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cw.apply(this,arguments)}function RZ(e,t){if(e==null)return{};var n=LZ(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function LZ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Dt=K.forwardRef(function(e,t){var n=e.children,s=e.className,a=RZ(e,IZ),o=Mt("recharts-layer",s);return K.createElement("g",cw({className:o},ct(a,!0),{ref:t}),n)}),Ka=function(t,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o]};function BZ(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++s<a;)o[s]=e[s+t];return o}var m4=BZ,zZ=m4;function VZ(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:zZ(e,t,n)}var WZ=VZ,qZ="\\ud800-\\udfff",UZ="\\u0300-\\u036f",KZ="\\ufe20-\\ufe2f",GZ="\\u20d0-\\u20ff",HZ=UZ+KZ+GZ,XZ="\\ufe0e\\ufe0f",YZ="\\u200d",QZ=RegExp("["+YZ+qZ+HZ+XZ+"]");function ZZ(e){return QZ.test(e)}var f4=ZZ;function JZ(e){return e.split("")}var eJ=JZ,h4="\\ud800-\\udfff",tJ="\\u0300-\\u036f",rJ="\\ufe20-\\ufe2f",nJ="\\u20d0-\\u20ff",sJ=tJ+rJ+nJ,aJ="\\ufe0e\\ufe0f",oJ="["+h4+"]",dw="["+sJ+"]",uw="\\ud83c[\\udffb-\\udfff]",iJ="(?:"+dw+"|"+uw+")",p4="[^"+h4+"]",x4="(?:\\ud83c[\\udde6-\\uddff]){2}",g4="[\\ud800-\\udbff][\\udc00-\\udfff]",lJ="\\u200d",v4=iJ+"?",j4="["+aJ+"]?",cJ="(?:"+lJ+"(?:"+[p4,x4,g4].join("|")+")"+j4+v4+")*",dJ=j4+v4+cJ,uJ="(?:"+[p4+dw+"?",dw,x4,g4,oJ].join("|")+")",mJ=RegExp(uw+"(?="+uw+")|"+uJ+dJ,"g");function fJ(e){return e.match(mJ)||[]}var hJ=fJ,pJ=eJ,xJ=f4,gJ=hJ;function vJ(e){return xJ(e)?gJ(e):pJ(e)}var jJ=vJ,yJ=WZ,bJ=f4,NJ=jJ,wJ=a4;function _J(e){return function(t){t=wJ(t);var n=bJ(t)?NJ(t):void 0,s=n?n[0]:t.charAt(0),a=n?yJ(n,1).join(""):t.slice(1);return s[e]()+a}}var SJ=_J,CJ=SJ,PJ=CJ("toUpperCase"),AJ=PJ;const I0=or(AJ);function Sr(e){return function(){return e}}const y4=Math.cos,wg=Math.sin,no=Math.sqrt,_g=Math.PI,R0=2*_g,mw=Math.PI,fw=2*mw,ql=1e-6,EJ=fw-ql;function b4(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function MJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return b4;const n=10**t;return function(s){this._+=s[0];for(let a=1,o=s.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class OJ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?b4:MJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,a){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,n,s,a,o,i){this._append`C${+t},${+n},${+s},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(t,n,s,a,o){if(t=+t,n=+n,s=+s,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,l=this._y1,c=s-t,d=a-n,u=i-t,m=l-n,f=u*u+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>ql)if(!(Math.abs(m*c-d*u)>ql)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=s-i,x=a-l,p=c*c+d*d,v=h*h+x*x,j=Math.sqrt(p),g=Math.sqrt(f),N=o*Math.tan((mw-Math.acos((p+f-v)/(2*j*g)))/2),_=N/g,b=N/j;Math.abs(_-1)>ql&&this._append`L${t+_*u},${n+_*m}`,this._append`A${o},${o},0,0,${+(m*h>u*x)},${this._x1=t+b*c},${this._y1=n+b*d}`}}arc(t,n,s,a,o,i){if(t=+t,n=+n,s=+s,i=!!i,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,u=n+c,m=1^i,f=i?a-o:o-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>ql||Math.abs(this._y1-u)>ql)&&this._append`L${d},${u}`,s&&(f<0&&(f=f%fw+fw),f>EJ?this._append`A${s},${s},0,1,${m},${t-l},${n-c}A${s},${s},0,1,${m},${this._x1=d},${this._y1=u}`:f>ql&&this._append`A${s},${s},0,${+(f>=mw)},${m},${this._x1=t+s*Math.cos(o)},${this._y1=n+s*Math.sin(o)}`)}rect(t,n,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function $S(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new OJ(t)}function DS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function N4(e){this._context=e}N4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function L0(e){return new N4(e)}function w4(e){return e[0]}function _4(e){return e[1]}function S4(e,t){var n=Sr(!0),s=null,a=L0,o=null,i=$S(l);e=typeof e=="function"?e:e===void 0?w4:Sr(e),t=typeof t=="function"?t:t===void 0?_4:Sr(t);function l(c){var d,u=(c=DS(c)).length,m,f=!1,h;for(s==null&&(o=a(h=i())),d=0;d<=u;++d)!(d<u&&n(m=c[d],d,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(m,d,c),+t(m,d,c));if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Sr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Sr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Sr(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,s!=null&&(o=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=o=null:o=a(s=c),l):s},l}function Xp(e,t,n){var s=null,a=Sr(!0),o=null,i=L0,l=null,c=$S(d);e=typeof e=="function"?e:e===void 0?w4:Sr(+e),t=typeof t=="function"?t:Sr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?_4:Sr(+n);function d(m){var f,h,x,p=(m=DS(m)).length,v,j=!1,g,N=new Array(p),_=new Array(p);for(o==null&&(l=i(g=c())),f=0;f<=p;++f){if(!(f<p&&a(v=m[f],f,m))===j)if(j=!j)h=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=f-1;x>=h;--x)l.point(N[x],_[x]);l.lineEnd(),l.areaEnd()}j&&(N[f]=+e(v,f,m),_[f]=+t(v,f,m),l.point(s?+s(v,f,m):N[f],n?+n(v,f,m):_[f]))}if(g)return l=null,g+""||null}function u(){return S4().defined(a).curve(i).context(o)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Sr(+m),s=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Sr(+m),d):e},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:Sr(+m),d):s},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:Sr(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Sr(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Sr(+m),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Sr(!!m),d):a},d.curve=function(m){return arguments.length?(i=m,o!=null&&(l=i(o)),d):i},d.context=function(m){return arguments.length?(m==null?o=l=null:l=i(o=m),d):o},d}class C4{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function TJ(e){return new C4(e,!0)}function kJ(e){return new C4(e,!1)}const FS={draw(e,t){const n=no(t/_g);e.moveTo(n,0),e.arc(0,0,n,0,R0)}},$J={draw(e,t){const n=no(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},P4=no(1/3),DJ=P4*2,FJ={draw(e,t){const n=no(t/DJ),s=n*P4;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},IJ={draw(e,t){const n=no(t),s=-n/2;e.rect(s,s,n,n)}},RJ=.8908130915292852,A4=wg(_g/10)/wg(7*_g/10),LJ=wg(R0/10)*A4,BJ=-y4(R0/10)*A4,zJ={draw(e,t){const n=no(t*RJ),s=LJ*n,a=BJ*n;e.moveTo(0,-n),e.lineTo(s,a);for(let o=1;o<5;++o){const i=R0*o/5,l=y4(i),c=wg(i);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},zy=no(3),VJ={draw(e,t){const n=-no(t/(zy*3));e.moveTo(0,n*2),e.lineTo(-zy*n,-n),e.lineTo(zy*n,-n),e.closePath()}},sa=-.5,aa=no(3)/2,hw=1/no(12),WJ=(hw/2+1)*3,qJ={draw(e,t){const n=no(t/WJ),s=n/2,a=n*hw,o=s,i=n*hw+n,l=-o,c=i;e.moveTo(s,a),e.lineTo(o,i),e.lineTo(l,c),e.lineTo(sa*s-aa*a,aa*s+sa*a),e.lineTo(sa*o-aa*i,aa*o+sa*i),e.lineTo(sa*l-aa*c,aa*l+sa*c),e.lineTo(sa*s+aa*a,sa*a-aa*s),e.lineTo(sa*o+aa*i,sa*i-aa*o),e.lineTo(sa*l+aa*c,sa*c-aa*l),e.closePath()}};function UJ(e,t){let n=null,s=$S(a);e=typeof e=="function"?e:Sr(e||FS),t=typeof t=="function"?t:Sr(t===void 0?64:+t);function a(){let o;if(n||(n=o=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return a.type=function(o){return arguments.length?(e=typeof o=="function"?o:Sr(o),a):e},a.size=function(o){return arguments.length?(t=typeof o=="function"?o:Sr(+o),a):t},a.context=function(o){return arguments.length?(n=o??null,a):n},a}function Sg(){}function Cg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function E4(e){this._context=e}E4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KJ(e){return new E4(e)}function M4(e){this._context=e}M4.prototype={areaStart:Sg,areaEnd:Sg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Cg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GJ(e){return new M4(e)}function O4(e){this._context=e}O4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Cg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HJ(e){return new O4(e)}function T4(e){this._context=e}T4.prototype={areaStart:Sg,areaEnd:Sg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function XJ(e){return new T4(e)}function ZA(e){return e<0?-1:1}function JA(e,t,n){var s=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(s||a<0&&-0),i=(n-e._y1)/(a||s<0&&-0),l=(o*a+i*s)/(s+a);return(ZA(o)+ZA(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function eE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Vy(e,t,n){var s=e._x0,a=e._y0,o=e._x1,i=e._y1,l=(o-s)/3;e._context.bezierCurveTo(s+l,a+l*t,o-l,i-l*n,o,i)}function Pg(e){this._context=e}Pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vy(this,this._t0,eE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Vy(this,eE(this,n=JA(this,e,t)),n);break;default:Vy(this,this._t0,n=JA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function k4(e){this._context=new $4(e)}(k4.prototype=Object.create(Pg.prototype)).point=function(e,t){Pg.prototype.point.call(this,t,e)};function $4(e){this._context=e}$4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,a,o){this._context.bezierCurveTo(t,e,s,n,o,a)}};function YJ(e){return new Pg(e)}function QJ(e){return new k4(e)}function D4(e){this._context=e}D4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=tE(e),a=tE(t),o=0,i=1;i<n;++o,++i)this._context.bezierCurveTo(s[0][o],a[0][o],s[1][o],a[1][o],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tE(e){var t,n=e.length-1,s,a=new Array(n),o=new Array(n),i=new Array(n);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,o[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=a[t]/o[t-1],o[t]-=s,i[t]-=s*i[t-1];for(a[n-1]=i[n-1]/o[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function ZJ(e){return new D4(e)}function B0(e,t){this._context=e,this._t=t}B0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function JJ(e){return new B0(e,.5)}function eee(e){return new B0(e,0)}function tee(e){return new B0(e,1)}function cu(e,t){if((i=e.length)>1)for(var n=1,s,a,o=e[t[0]],i,l=o.length;n<i;++n)for(a=o,o=e[t[n]],s=0;s<l;++s)o[s][1]+=o[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function pw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ree(e,t){return e[t]}function nee(e){const t=[];return t.key=e,t}function see(){var e=Sr([]),t=pw,n=cu,s=ree;function a(o){var i=Array.from(e.apply(this,arguments),nee),l,c=i.length,d=-1,u;for(const m of o)for(l=0,++d;l<c;++l)(i[l][d]=[0,+s(m,i[l].key,d,o)]).data=m;for(l=0,u=DS(t(i));l<c;++l)i[u[l]].index=l;return n(i,u),i}return a.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Sr(Array.from(o)),a):e},a.value=function(o){return arguments.length?(s=typeof o=="function"?o:Sr(+o),a):s},a.order=function(o){return arguments.length?(t=o==null?pw:typeof o=="function"?o:Sr(Array.from(o)),a):t},a.offset=function(o){return arguments.length?(n=o??cu,a):n},a}function aee(e,t){if((s=e.length)>0){for(var n,s,a=0,o=e[0].length,i;a<o;++a){for(i=n=0;n<s;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<s;++n)e[n][a][1]/=i}cu(e,t)}}function oee(e,t){if((a=e.length)>0){for(var n=0,s=e[t[0]],a,o=s.length;n<o;++n){for(var i=0,l=0;i<a;++i)l+=e[i][n][1]||0;s[n][1]+=s[n][0]=-l/2}cu(e,t)}}function iee(e,t){if(!(!((i=e.length)>0)||!((o=(a=e[t[0]]).length)>0))){for(var n=0,s=1,a,o,i;s<o;++s){for(var l=0,c=0,d=0;l<i;++l){for(var u=e[t[l]],m=u[s][1]||0,f=u[s-1][1]||0,h=(m-f)/2,x=0;x<l;++x){var p=e[t[x]],v=p[s][1]||0,j=p[s-1][1]||0;h+=v-j}c+=m,d+=h*m}a[s-1][1]+=a[s-1][0]=n,c&&(n-=d/c)}a[s-1][1]+=a[s-1][0]=n,cu(e,t)}}function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}var lee=["type","size","sizeType"];function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xw.apply(this,arguments)}function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function nE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(s){cee(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cee(e,t,n){return t=dee(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dee(e){var t=uee(e,"string");return Hf(t)=="symbol"?t:t+""}function uee(e,t){if(Hf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mee(e,t){if(e==null)return{};var n=fee(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function fee(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var F4={symbolCircle:FS,symbolCross:$J,symbolDiamond:FJ,symbolSquare:IJ,symbolStar:zJ,symbolTriangle:VJ,symbolWye:qJ},hee=Math.PI/180,pee=function(t){var n="symbol".concat(I0(t));return F4[n]||FS},xee=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*hee;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},gee=function(t,n){F4["symbol".concat(I0(t))]=n},z0=function(t){var n=t.type,s=n===void 0?"circle":n,a=t.size,o=a===void 0?64:a,i=t.sizeType,l=i===void 0?"area":i,c=mee(t,lee),d=nE(nE({},c),{},{type:s,size:o,sizeType:l}),u=function(){var v=pee(s),j=UJ().type(v).size(xee(o,l,s));return j()},m=d.className,f=d.cx,h=d.cy,x=ct(d,!0);return f===+f&&h===+h&&o===+o?K.createElement("path",xw({},x,{className:Mt("recharts-symbols",m),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};z0.registerSymbol=gee;function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gw.apply(this,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function vee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(s){Xf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yee(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,R4(s.key),s)}}function bee(e,t,n){return t&&yee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nee(e,t,n){return t=Ag(t),wee(e,I4()?Reflect.construct(t,n||[],Ag(e).constructor):t.apply(e,n))}function wee(e,t){if(t&&(du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ee(e)}function _ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I4=function(){return!!e})()}function Ag(e){return Ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ag(e)}function See(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vw(e,t)}function vw(e,t){return vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},vw(e,t)}function Xf(e,t,n){return t=R4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R4(e){var t=Cee(e,"string");return du(t)=="symbol"?t:t+""}function Cee(e,t){if(du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(du(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oa=32,IS=function(e){function t(){return jee(this,t),Nee(this,t,arguments)}return See(t,e),bee(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,o=oa/2,i=oa/6,l=oa/3,c=s.inactive?a:s.color;if(s.type==="plainline")return K.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:o,x2:oa,y2:o,className:"recharts-legend-icon"});if(s.type==="line")return K.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(o,`
            H`).concat(oa,"M").concat(2*l,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if(s.type==="rect")return K.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(oa/8,"h").concat(oa,"v").concat(oa*3/4,"h").concat(-oa,"z"),className:"recharts-legend-icon"});if(K.isValidElement(s.legendIcon)){var d=vee({},s);return delete d.legendIcon,K.cloneElement(s.legendIcon,d)}return K.createElement(z0,{fill:c,cx:o,cy:o,size:oa,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,o=a.payload,i=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:oa,height:oa},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,x){var p=h.formatter||c,v=Mt(Xf(Xf({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",h.inactive));if(h.type==="none")return null;var j=xt(h.value)?null:h.value;Ka(!xt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=h.inactive?d:h.color;return K.createElement("li",gw({className:v,style:m,key:"legend-item-".concat(x)},vl(s.props,h,x)),K.createElement(Ng,{width:i,height:i,viewBox:u,style:f},s.renderIcon(h)),K.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},p?p(j,h,x):j))})}},{key:"render",value:function(){var s=this.props,a=s.payload,o=s.layout,i=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return K.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(y.PureComponent);Xf(IS,"displayName","Legend");Xf(IS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Pee=b0;function Aee(){this.__data__=new Pee,this.size=0}var Eee=Aee;function Mee(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Oee=Mee;function Tee(e){return this.__data__.get(e)}var kee=Tee;function $ee(e){return this.__data__.has(e)}var Dee=$ee,Fee=b0,Iee=AS,Ree=ES,Lee=200;function Bee(e,t){var n=this.__data__;if(n instanceof Fee){var s=n.__data__;if(!Iee||s.length<Lee-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ree(s)}return n.set(e,t),this.size=n.size,this}var zee=Bee,Vee=b0,Wee=Eee,qee=Oee,Uee=kee,Kee=Dee,Gee=zee;function om(e){var t=this.__data__=new Vee(e);this.size=t.size}om.prototype.clear=Wee;om.prototype.delete=qee;om.prototype.get=Uee;om.prototype.has=Kee;om.prototype.set=Gee;var RS=om,Hee="__lodash_hash_undefined__";function Xee(e){return this.__data__.set(e,Hee),this}var Yee=Xee;function Qee(e){return this.__data__.has(e)}var Zee=Qee,Jee=ES,ete=Yee,tte=Zee;function Eg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Jee;++t<n;)this.add(e[t])}Eg.prototype.add=Eg.prototype.push=ete;Eg.prototype.has=tte;var L4=Eg;function rte(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var B4=rte;function nte(e,t){return e.has(t)}var z4=nte,ste=L4,ate=B4,ote=z4,ite=1,lte=2;function cte(e,t,n,s,a,o){var i=n&ite,l=e.length,c=t.length;if(l!=c&&!(i&&c>l))return!1;var d=o.get(e),u=o.get(t);if(d&&u)return d==t&&u==e;var m=-1,f=!0,h=n&lte?new ste:void 0;for(o.set(e,t),o.set(t,e);++m<l;){var x=e[m],p=t[m];if(s)var v=i?s(p,x,m,t,e,o):s(x,p,m,e,t,o);if(v!==void 0){if(v)continue;f=!1;break}if(h){if(!ate(t,function(j,g){if(!ote(h,g)&&(x===j||a(x,j,n,s,o)))return h.push(g)})){f=!1;break}}else if(!(x===p||a(x,p,n,s,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var V4=cte,dte=eo,ute=dte.Uint8Array,W4=ute;function mte(e){var t=-1,n=Array(e.size);return e.forEach(function(s,a){n[++t]=[a,s]}),n}var fte=mte;function hte(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var LS=hte,aE=em,oE=W4,pte=j0,xte=V4,gte=fte,vte=LS,jte=1,yte=2,bte="[object Boolean]",Nte="[object Date]",wte="[object Error]",_te="[object Map]",Ste="[object Number]",Cte="[object RegExp]",Pte="[object Set]",Ate="[object String]",Ete="[object Symbol]",Mte="[object ArrayBuffer]",Ote="[object DataView]",iE=aE?aE.prototype:void 0,Wy=iE?iE.valueOf:void 0;function Tte(e,t,n,s,a,o,i){switch(n){case Ote:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mte:return!(e.byteLength!=t.byteLength||!o(new oE(e),new oE(t)));case bte:case Nte:case Ste:return pte(+e,+t);case wte:return e.name==t.name&&e.message==t.message;case Cte:case Ate:return e==t+"";case _te:var l=gte;case Pte:var c=s&jte;if(l||(l=vte),e.size!=t.size&&!c)return!1;var d=i.get(e);if(d)return d==t;s|=yte,i.set(e,t);var u=xte(l(e),l(t),s,a,o,i);return i.delete(e),u;case Ete:if(Wy)return Wy.call(e)==Wy.call(t)}return!1}var kte=Tte;function $te(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}var BS=$te,Dte=BS,Fte=js;function Ite(e,t,n){var s=t(e);return Fte(e)?s:Dte(s,n(e))}var q4=Ite;function Rte(e,t){for(var n=-1,s=e==null?0:e.length,a=0,o=[];++n<s;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}var Lte=Rte;function Bte(){return[]}var U4=Bte,zte=Lte,Vte=U4,Wte=Object.prototype,qte=Wte.propertyIsEnumerable,lE=Object.getOwnPropertySymbols,Ute=lE?function(e){return e==null?[]:(e=Object(e),zte(lE(e),function(t){return qte.call(e,t)}))}:Vte,zS=Ute;function Kte(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var Gte=Kte,Hte=xi,Xte=to,Yte="[object Arguments]";function Qte(e){return Xte(e)&&Hte(e)==Yte}var Zte=Qte,cE=Zte,Jte=to,K4=Object.prototype,ere=K4.hasOwnProperty,tre=K4.propertyIsEnumerable,rre=cE(function(){return arguments}())?cE:function(e){return Jte(e)&&ere.call(e,"callee")&&!tre.call(e,"callee")},VS=rre,Mg={exports:{}};function nre(){return!1}var sre=nre;Mg.exports;(function(e,t){var n=eo,s=sre,a=t&&!t.nodeType&&t,o=a&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===a,l=i?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(Mg,Mg.exports);var WS=Mg.exports,are=9007199254740991,ore=/^(?:0|[1-9]\d*)$/;function ire(e,t){var n=typeof e;return t=t??are,!!t&&(n=="number"||n!="symbol"&&ore.test(e))&&e>-1&&e%1==0&&e<t}var qS=ire,lre=9007199254740991;function cre(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lre}var US=cre,dre=xi,ure=US,mre=to,fre="[object Arguments]",hre="[object Array]",pre="[object Boolean]",xre="[object Date]",gre="[object Error]",vre="[object Function]",jre="[object Map]",yre="[object Number]",bre="[object Object]",Nre="[object RegExp]",wre="[object Set]",_re="[object String]",Sre="[object WeakMap]",Cre="[object ArrayBuffer]",Pre="[object DataView]",Are="[object Float32Array]",Ere="[object Float64Array]",Mre="[object Int8Array]",Ore="[object Int16Array]",Tre="[object Int32Array]",kre="[object Uint8Array]",$re="[object Uint8ClampedArray]",Dre="[object Uint16Array]",Fre="[object Uint32Array]",Tr={};Tr[Are]=Tr[Ere]=Tr[Mre]=Tr[Ore]=Tr[Tre]=Tr[kre]=Tr[$re]=Tr[Dre]=Tr[Fre]=!0;Tr[fre]=Tr[hre]=Tr[Cre]=Tr[pre]=Tr[Pre]=Tr[xre]=Tr[gre]=Tr[vre]=Tr[jre]=Tr[yre]=Tr[bre]=Tr[Nre]=Tr[wre]=Tr[_re]=Tr[Sre]=!1;function Ire(e){return mre(e)&&ure(e.length)&&!!Tr[dre(e)]}var Rre=Ire;function Lre(e){return function(t){return e(t)}}var V0=Lre,Og={exports:{}};Og.exports;(function(e,t){var n=JI,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===s,i=o&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=l})(Og,Og.exports);var KS=Og.exports,Bre=Rre,zre=V0,dE=KS,uE=dE&&dE.isTypedArray,Vre=uE?zre(uE):Bre,G4=Vre,Wre=Gte,qre=VS,Ure=js,Kre=WS,Gre=qS,Hre=G4,Xre=Object.prototype,Yre=Xre.hasOwnProperty;function Qre(e,t){var n=Ure(e),s=!n&&qre(e),a=!n&&!s&&Kre(e),o=!n&&!s&&!a&&Hre(e),i=n||s||a||o,l=i?Wre(e.length,String):[],c=l.length;for(var d in e)(t||Yre.call(e,d))&&!(i&&(d=="length"||a&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Gre(d,c)))&&l.push(d);return l}var H4=Qre,Zre=Object.prototype;function Jre(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Zre;return e===n}var GS=Jre;function ene(e,t){return function(n){return e(t(n))}}var X4=ene,tne=X4,rne=tne(Object.keys,Object),nne=rne,sne=GS,ane=nne,one=Object.prototype,ine=one.hasOwnProperty;function lne(e){if(!sne(e))return ane(e);var t=[];for(var n in Object(e))ine.call(e,n)&&n!="constructor"&&t.push(n);return t}var cne=lne,dne=PS,une=US;function mne(e){return e!=null&&une(e.length)&&!dne(e)}var im=mne,fne=H4,hne=cne,pne=im;function xne(e){return pne(e)?fne(e):hne(e)}var lm=xne,gne=q4,vne=zS,jne=lm;function yne(e){return gne(e,jne,vne)}var Y4=yne,mE=Y4,bne=1,Nne=Object.prototype,wne=Nne.hasOwnProperty;function _ne(e,t,n,s,a,o){var i=n&bne,l=mE(e),c=l.length,d=mE(t),u=d.length;if(c!=u&&!i)return!1;for(var m=c;m--;){var f=l[m];if(!(i?f in t:wne.call(t,f)))return!1}var h=o.get(e),x=o.get(t);if(h&&x)return h==t&&x==e;var p=!0;o.set(e,t),o.set(t,e);for(var v=i;++m<c;){f=l[m];var j=e[f],g=t[f];if(s)var N=i?s(g,j,f,t,e,o):s(j,g,f,e,t,o);if(!(N===void 0?j===g||a(j,g,n,s,o):N)){p=!1;break}v||(v=f=="constructor")}if(p&&!v){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof b=="function"&&b instanceof b)&&(p=!1)}return o.delete(e),o.delete(t),p}var Sne=_ne,Cne=qc,Pne=eo,Ane=Cne(Pne,"DataView"),Ene=Ane,Mne=qc,One=eo,Tne=Mne(One,"Promise"),kne=Tne,$ne=qc,Dne=eo,Fne=$ne(Dne,"Set"),Q4=Fne,Ine=qc,Rne=eo,Lne=Ine(Rne,"WeakMap"),Bne=Lne,jw=Ene,yw=AS,bw=kne,Nw=Q4,ww=Bne,Z4=xi,cm=t4,fE="[object Map]",zne="[object Object]",hE="[object Promise]",pE="[object Set]",xE="[object WeakMap]",gE="[object DataView]",Vne=cm(jw),Wne=cm(yw),qne=cm(bw),Une=cm(Nw),Kne=cm(ww),Ul=Z4;(jw&&Ul(new jw(new ArrayBuffer(1)))!=gE||yw&&Ul(new yw)!=fE||bw&&Ul(bw.resolve())!=hE||Nw&&Ul(new Nw)!=pE||ww&&Ul(new ww)!=xE)&&(Ul=function(e){var t=Z4(e),n=t==zne?e.constructor:void 0,s=n?cm(n):"";if(s)switch(s){case Vne:return gE;case Wne:return fE;case qne:return hE;case Une:return pE;case Kne:return xE}return t});var W0=Ul,qy=RS,Gne=V4,Hne=kte,Xne=Sne,vE=W0,jE=js,yE=WS,Yne=G4,Qne=1,bE="[object Arguments]",NE="[object Array]",Yp="[object Object]",Zne=Object.prototype,wE=Zne.hasOwnProperty;function Jne(e,t,n,s,a,o){var i=jE(e),l=jE(t),c=i?NE:vE(e),d=l?NE:vE(t);c=c==bE?Yp:c,d=d==bE?Yp:d;var u=c==Yp,m=d==Yp,f=c==d;if(f&&yE(e)){if(!yE(t))return!1;i=!0,u=!1}if(f&&!u)return o||(o=new qy),i||Yne(e)?Gne(e,t,n,s,a,o):Hne(e,t,c,n,s,a,o);if(!(n&Qne)){var h=u&&wE.call(e,"__wrapped__"),x=m&&wE.call(t,"__wrapped__");if(h||x){var p=h?e.value():e,v=x?t.value():t;return o||(o=new qy),a(p,v,n,s,o)}}return f?(o||(o=new qy),Xne(e,t,n,s,a,o)):!1}var ese=Jne,tse=ese,_E=to;function J4(e,t,n,s,a){return e===t?!0:e==null||t==null||!_E(e)&&!_E(t)?e!==e&&t!==t:tse(e,t,n,s,J4,a)}var HS=J4,rse=RS,nse=HS,sse=1,ase=2;function ose(e,t,n,s){var a=n.length,o=a,i=!s;if(e==null)return!o;for(e=Object(e);a--;){var l=n[a];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){l=n[a];var c=l[0],d=e[c],u=l[1];if(i&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new rse;if(s)var f=s(d,u,c,e,t,m);if(!(f===void 0?nse(u,d,sse|ase,s,m):f))return!1}}return!0}var ise=ose,lse=ro;function cse(e){return e===e&&!lse(e)}var eR=cse,dse=eR,use=lm;function mse(e){for(var t=use(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,dse(a)]}return t}var fse=mse;function hse(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var tR=hse,pse=ise,xse=fse,gse=tR;function vse(e){var t=xse(e);return t.length==1&&t[0][2]?gse(t[0][0],t[0][1]):function(n){return n===e||pse(n,e,t)}}var jse=vse;function yse(e,t){return e!=null&&t in Object(e)}var bse=yse,Nse=_0,wse=VS,_se=js,Sse=qS,Cse=US,Pse=ep;function Ase(e,t,n){t=Nse(t,e);for(var s=-1,a=t.length,o=!1;++s<a;){var i=Pse(t[s]);if(!(o=e!=null&&n(e,i)))break;e=e[i]}return o||++s!=a?o:(a=e==null?0:e.length,!!a&&Cse(a)&&Sse(i,a)&&(_se(e)||wse(e)))}var Ese=Ase,Mse=bse,Ose=Ese;function Tse(e,t){return e!=null&&Ose(e,t,Mse)}var kse=Tse,$se=HS,Dse=o4,Fse=kse,Ise=CS,Rse=eR,Lse=tR,Bse=ep,zse=1,Vse=2;function Wse(e,t){return Ise(e)&&Rse(t)?Lse(Bse(e),t):function(n){var s=Dse(n,e);return s===void 0&&s===t?Fse(n,e):$se(t,s,zse|Vse)}}var qse=Wse;function Use(e){return e}var dm=Use;function Kse(e){return function(t){return t==null?void 0:t[e]}}var Gse=Kse,Hse=S0;function Xse(e){return function(t){return Hse(t,e)}}var Yse=Xse,Qse=Gse,Zse=Yse,Jse=CS,eae=ep;function tae(e){return Jse(e)?Qse(eae(e)):Zse(e)}var rae=tae,nae=jse,sae=qse,aae=dm,oae=js,iae=rae;function lae(e){return typeof e=="function"?e:e==null?aae:typeof e=="object"?oae(e)?sae(e[0],e[1]):nae(e):iae(e)}var ko=lae;function cae(e,t,n,s){for(var a=e.length,o=n+(s?1:-1);s?o--:++o<a;)if(t(e[o],o,e))return o;return-1}var rR=cae;function dae(e){return e!==e}var uae=dae;function mae(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var fae=mae,hae=rR,pae=uae,xae=fae;function gae(e,t,n){return t===t?xae(e,t,n):hae(e,pae,n)}var vae=gae,jae=vae;function yae(e,t){var n=e==null?0:e.length;return!!n&&jae(e,t,0)>-1}var bae=yae;function Nae(e,t,n){for(var s=-1,a=e==null?0:e.length;++s<a;)if(n(t,e[s]))return!0;return!1}var wae=Nae;function _ae(){}var Sae=_ae,Uy=Q4,Cae=Sae,Pae=LS,Aae=1/0,Eae=Uy&&1/Pae(new Uy([,-0]))[1]==Aae?function(e){return new Uy(e)}:Cae,Mae=Eae,Oae=L4,Tae=bae,kae=wae,$ae=z4,Dae=Mae,Fae=LS,Iae=200;function Rae(e,t,n){var s=-1,a=Tae,o=e.length,i=!0,l=[],c=l;if(n)i=!1,a=kae;else if(o>=Iae){var d=t?null:Dae(e);if(d)return Fae(d);i=!1,a=$ae,c=new Oae}else c=t?[]:l;e:for(;++s<o;){var u=e[s],m=t?t(u):u;if(u=n||u!==0?u:0,i&&m===m){for(var f=c.length;f--;)if(c[f]===m)continue e;t&&c.push(m),l.push(u)}else a(c,m,n)||(c!==l&&c.push(m),l.push(u))}return l}var Lae=Rae,Bae=ko,zae=Lae;function Vae(e,t){return e&&e.length?zae(e,Bae(t)):[]}var Wae=Vae;const SE=or(Wae);function nR(e,t,n){return t===!0?SE(e,n):xt(t)?SE(e,t):e}function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}var qae=["ref"];function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(s){q0(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Uae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aR(s.key),s)}}function Kae(e,t,n){return t&&PE(e.prototype,t),n&&PE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gae(e,t,n){return t=Tg(t),Hae(e,sR()?Reflect.construct(t,n||[],Tg(e).constructor):t.apply(e,n))}function Hae(e,t){if(t&&(uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xae(e)}function Xae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sR=function(){return!!e})()}function Tg(e){return Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tg(e)}function Yae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_w(e,t)}function _w(e,t){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_w(e,t)}function q0(e,t,n){return t=aR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aR(e){var t=Qae(e,"string");return uu(t)=="symbol"?t:t+""}function Qae(e,t){if(uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(uu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zae(e,t){if(e==null)return{};var n=Jae(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Jae(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function eoe(e){return e.value}function toe(e,t){if(K.isValidElement(e))return K.cloneElement(e,t);if(typeof e=="function")return K.createElement(e,t);t.ref;var n=Zae(t,qae);return K.createElement(IS,n)}var AE=1,jr=function(e){function t(){var n;Uae(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=Gae(this,t,[].concat(a)),q0(n,"lastBoundingBox",{width:-1,height:-1}),n}return Yae(t,e),Kae(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>AE||Math.abs(a.height-this.lastBoundingBox.height)>AE)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Do({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,o=a.layout,i=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,m,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(i==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();m={left:((d||0)-h.width)/2}}else m=i==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();f={top:((u||0)-x.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Do(Do({},m),f)}},{key:"render",value:function(){var s=this,a=this.props,o=a.content,i=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,m=Do(Do({position:"absolute",width:i||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return K.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(h){s.wrapperNode=h}},toe(o,Do(Do({},this.props),{},{payload:nR(u,d,eoe)})))}}],[{key:"getWithHeight",value:function(s,a){var o=Do(Do({},this.defaultProps),s.props),i=o.layout;return i==="vertical"&&qe(s.props.height)?{height:s.props.height}:i==="horizontal"?{width:s.props.width||a}:null}}])}(y.PureComponent);q0(jr,"displayName","Legend");q0(jr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var EE=em,roe=VS,noe=js,ME=EE?EE.isConcatSpreadable:void 0;function soe(e){return noe(e)||roe(e)||!!(ME&&e&&e[ME])}var aoe=soe,ooe=BS,ioe=aoe;function oR(e,t,n,s,a){var o=-1,i=e.length;for(n||(n=ioe),a||(a=[]);++o<i;){var l=e[o];t>0&&n(l)?t>1?oR(l,t-1,n,s,a):ooe(a,l):s||(a[a.length]=l)}return a}var XS=oR;function loe(e){return function(t,n,s){for(var a=-1,o=Object(t),i=s(t),l=i.length;l--;){var c=i[e?l:++a];if(n(o[c],c,o)===!1)break}return t}}var coe=loe,doe=coe,uoe=doe(),moe=uoe,foe=moe,hoe=lm;function poe(e,t){return e&&foe(e,t,hoe)}var iR=poe,xoe=im;function goe(e,t){return function(n,s){if(n==null)return n;if(!xoe(n))return e(n,s);for(var a=n.length,o=t?a:-1,i=Object(n);(t?o--:++o<a)&&s(i[o],o,i)!==!1;);return n}}var voe=goe,joe=iR,yoe=voe,boe=yoe(joe),YS=boe,Noe=YS,woe=im;function _oe(e,t){var n=-1,s=woe(e)?Array(e.length):[];return Noe(e,function(a,o,i){s[++n]=t(a,o,i)}),s}var lR=_oe;function Soe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Coe=Soe,OE=tm;function Poe(e,t){if(e!==t){var n=e!==void 0,s=e===null,a=e===e,o=OE(e),i=t!==void 0,l=t===null,c=t===t,d=OE(t);if(!l&&!d&&!o&&e>t||o&&i&&c&&!l&&!d||s&&i&&c||!n&&c||!a)return 1;if(!s&&!o&&!d&&e<t||d&&n&&a&&!s&&!o||l&&n&&a||!i&&a||!c)return-1}return 0}var Aoe=Poe,Eoe=Aoe;function Moe(e,t,n){for(var s=-1,a=e.criteria,o=t.criteria,i=a.length,l=n.length;++s<i;){var c=Eoe(a[s],o[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Ooe=Moe,Ky=w0,Toe=S0,koe=ko,$oe=lR,Doe=Coe,Foe=V0,Ioe=Ooe,Roe=dm,Loe=js;function Boe(e,t,n){t.length?t=Ky(t,function(o){return Loe(o)?function(i){return Toe(i,o.length===1?o[0]:o)}:o}):t=[Roe];var s=-1;t=Ky(t,Foe(koe));var a=$oe(e,function(o,i,l){var c=Ky(t,function(d){return d(o)});return{criteria:c,index:++s,value:o}});return Doe(a,function(o,i){return Ioe(o,i,n)})}var zoe=Boe;function Voe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Woe=Voe,qoe=Woe,TE=Math.max;function Uoe(e,t,n){return t=TE(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,o=TE(s.length-t,0),i=Array(o);++a<o;)i[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=n(i),qoe(e,this,l)}}var cR=Uoe;function Koe(e){return function(){return e}}var Goe=Koe,Hoe=qc,Xoe=function(){try{var e=Hoe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),dR=Xoe,Yoe=Goe,kE=dR,Qoe=dm,Zoe=kE?function(e,t){return kE(e,"toString",{configurable:!0,enumerable:!1,value:Yoe(t),writable:!0})}:Qoe,Joe=Zoe,eie=800,tie=16,rie=Date.now;function nie(e){var t=0,n=0;return function(){var s=rie(),a=tie-(s-n);if(n=s,a>0){if(++t>=eie)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var sie=nie,aie=Joe,oie=sie,iie=oie(aie),uR=iie,lie=dm,cie=cR,die=uR;function uie(e,t){return die(cie(e,t,lie),e+"")}var mie=uie,fie=j0,hie=im,pie=qS,xie=ro;function gie(e,t,n){if(!xie(n))return!1;var s=typeof t;return(s=="number"?hie(n)&&pie(t,n.length):s=="string"&&t in n)?fie(n[t],e):!1}var U0=gie,vie=XS,jie=zoe,yie=mie,$E=U0,bie=yie(function(e,t){if(e==null)return[];var n=t.length;return n>1&&$E(e,t[0],t[1])?t=[]:n>2&&$E(t[0],t[1],t[2])&&(t=[t[0]]),jie(e,vie(t,1),[])}),Nie=bie;const QS=or(Nie);function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sw.apply(this,arguments)}function wie(e,t){return Pie(e)||Cie(e,t)||Sie(e,t)||_ie()}function _ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sie(e,t){if(e){if(typeof e=="string")return DE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DE(e,t)}}function DE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Cie(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Pie(e){if(Array.isArray(e))return e}function FE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(n),!0).forEach(function(s){Aie(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Aie(e,t,n){return t=Eie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eie(e){var t=Mie(e,"string");return Yf(t)=="symbol"?t:t+""}function Mie(e,t){if(Yf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Yf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oie(e){return Array.isArray(e)&&bn(e[0])&&bn(e[1])?e.join(" ~ "):e}var Tie=function(t){var n=t.separator,s=n===void 0?" : ":n,a=t.contentStyle,o=a===void 0?{}:a,i=t.itemStyle,l=i===void 0?{}:i,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,m=t.formatter,f=t.itemSorter,h=t.wrapperClassName,x=t.labelClassName,p=t.label,v=t.labelFormatter,j=t.accessibilityLayer,g=j===void 0?!1:j,N=function(){if(u&&u.length){var E={padding:0,margin:0},O=(f?QS(u,f):u).map(function(M,T){if(M.type==="none")return null;var V=Gy({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),I=M.formatter||m||Oie,F=M.value,D=M.name,X=F,W=D;if(I&&X!=null&&W!=null){var B=I(F,D,M,T,u);if(Array.isArray(B)){var q=wie(B,2);X=q[0],W=q[1]}else X=B}return K.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:V},bn(W)?K.createElement("span",{className:"recharts-tooltip-item-name"},W):null,bn(W)?K.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,K.createElement("span",{className:"recharts-tooltip-item-value"},X),K.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return K.createElement("ul",{className:"recharts-tooltip-item-list",style:E},O)}return null},_=Gy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=Gy({margin:0},d),w=!bt(p),S=w?p:"",C=Mt("recharts-default-tooltip",h),A=Mt("recharts-tooltip-label",x);w&&v&&u!==void 0&&u!==null&&(S=v(p,u));var P=g?{role:"status","aria-live":"assertive"}:{};return K.createElement("div",Sw({className:C,style:_},P),K.createElement("p",{className:A,style:b},K.isValidElement(S)?S:"".concat(S)),N())};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function Qp(e,t,n){return t=kie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kie(e){var t=$ie(e,"string");return Qf(t)=="symbol"?t:t+""}function $ie(e,t){if(Qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Om="recharts-tooltip-wrapper",Die={visibility:"hidden"};function Fie(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Mt(Om,Qp(Qp(Qp(Qp({},"".concat(Om,"-right"),qe(n)&&t&&qe(t.x)&&n>=t.x),"".concat(Om,"-left"),qe(n)&&t&&qe(t.x)&&n<t.x),"".concat(Om,"-bottom"),qe(s)&&t&&qe(t.y)&&s>=t.y),"".concat(Om,"-top"),qe(s)&&t&&qe(t.y)&&s<t.y))}function IE(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,a=e.offsetTopLeft,o=e.position,i=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(o&&qe(o[s]))return o[s];var u=n[s]-l-a,m=n[s]+a;if(t[s])return i[s]?u:m;if(i[s]){var f=u,h=c[s];return f<h?Math.max(m,c[s]):Math.max(u,c[s])}var x=m+l,p=c[s]+d;return x>p?Math.max(u,c[s]):Math.max(m,c[s])}function Iie(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Rie(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,a=e.position,o=e.reverseDirection,i=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,m;return i.height>0&&i.width>0&&n?(u=IE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),m=IE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),d=Iie({translateX:u,translateY:m,useTranslate3d:l})):d=Die,{cssProperties:d,cssClasses:Fie({translateX:u,translateY:m,coordinate:n})}}function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function RE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function LE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(n),!0).forEach(function(s){Pw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Lie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bie(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fR(s.key),s)}}function zie(e,t,n){return t&&Bie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vie(e,t,n){return t=kg(t),Wie(e,mR()?Reflect.construct(t,n||[],kg(e).constructor):t.apply(e,n))}function Wie(e,t){if(t&&(mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qie(e)}function qie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mR=function(){return!!e})()}function kg(e){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kg(e)}function Uie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cw(e,t)}function Cw(e,t){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Cw(e,t)}function Pw(e,t,n){return t=fR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fR(e){var t=Kie(e,"string");return mu(t)=="symbol"?t:t+""}function Kie(e,t){if(mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(mu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BE=1,Gie=function(e){function t(){var n;Lie(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=Vie(this,t,[].concat(a)),Pw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Pw(n,"handleKeyDown",function(i){if(i.key==="Escape"){var l,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return Uie(t,e),zie(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>BE||Math.abs(s.height-this.state.lastBoundingBox.height)>BE)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,o=a.active,i=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,m=a.hasPayload,f=a.isAnimationActive,h=a.offset,x=a.position,p=a.reverseDirection,v=a.useTranslate3d,j=a.viewBox,g=a.wrapperStyle,N=Rie({allowEscapeViewBox:i,coordinate:u,offsetTopLeft:h,position:x,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:j}),_=N.cssClasses,b=N.cssProperties,w=LE(LE({transition:f&&o?"transform ".concat(l,"ms ").concat(c):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&m?"visible":"hidden",position:"absolute",top:0,left:0},g);return K.createElement("div",{tabIndex:-1,className:_,style:w,ref:function(C){s.wrapperNode=C}},d)}}])}(y.PureComponent),Hie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},$s={isSsr:Hie(),get:function(t){return $s[t]},set:function(t,n){if(typeof t=="string")$s[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(a){$s[a]=t[a]})}}};function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(s){ZS(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Xie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yie(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,pR(s.key),s)}}function Qie(e,t,n){return t&&Yie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zie(e,t,n){return t=$g(t),Jie(e,hR()?Reflect.construct(t,n||[],$g(e).constructor):t.apply(e,n))}function Jie(e,t){if(t&&(fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ele(e)}function ele(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hR=function(){return!!e})()}function $g(e){return $g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$g(e)}function tle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aw(e,t)}function Aw(e,t){return Aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Aw(e,t)}function ZS(e,t,n){return t=pR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pR(e){var t=rle(e,"string");return fu(t)=="symbol"?t:t+""}function rle(e,t){if(fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nle(e){return e.dataKey}function sle(e,t){return K.isValidElement(e)?K.cloneElement(e,t):typeof e=="function"?K.createElement(e,t):K.createElement(Tie,t)}var yt=function(e){function t(){return Xie(this,t),Zie(this,t,arguments)}return tle(t,e),Qie(t,[{key:"render",value:function(){var s=this,a=this.props,o=a.active,i=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,m=a.filterNull,f=a.isAnimationActive,h=a.offset,x=a.payload,p=a.payloadUniqBy,v=a.position,j=a.reverseDirection,g=a.useTranslate3d,N=a.viewBox,_=a.wrapperStyle,b=x??[];m&&b.length&&(b=nR(x.filter(function(S){return S.value!=null&&(S.hide!==!0||s.props.includeHidden)}),p,nle));var w=b.length>0;return K.createElement(Gie,{allowEscapeViewBox:i,animationDuration:l,animationEasing:c,isAnimationActive:f,active:o,coordinate:u,hasPayload:w,offset:h,position:v,reverseDirection:j,useTranslate3d:g,viewBox:N,wrapperStyle:_},sle(d,VE(VE({},this.props),{},{payload:b})))}}])}(y.PureComponent);ZS(yt,"displayName","Tooltip");ZS(yt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!$s.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ale=eo,ole=function(){return ale.Date.now()},ile=ole,lle=/\s/;function cle(e){for(var t=e.length;t--&&lle.test(e.charAt(t)););return t}var dle=cle,ule=dle,mle=/^\s+/;function fle(e){return e&&e.slice(0,ule(e)+1).replace(mle,"")}var hle=fle,ple=hle,WE=ro,xle=tm,qE=NaN,gle=/^[-+]0x[0-9a-f]+$/i,vle=/^0b[01]+$/i,jle=/^0o[0-7]+$/i,yle=parseInt;function ble(e){if(typeof e=="number")return e;if(xle(e))return qE;if(WE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=WE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ple(e);var n=vle.test(e);return n||jle.test(e)?yle(e.slice(2),n?2:8):gle.test(e)?qE:+e}var xR=ble,Nle=ro,Hy=ile,UE=xR,wle="Expected a function",_le=Math.max,Sle=Math.min;function Cle(e,t,n){var s,a,o,i,l,c,d=0,u=!1,m=!1,f=!0;if(typeof e!="function")throw new TypeError(wle);t=UE(t)||0,Nle(n)&&(u=!!n.leading,m="maxWait"in n,o=m?_le(UE(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f);function h(w){var S=s,C=a;return s=a=void 0,d=w,i=e.apply(C,S),i}function x(w){return d=w,l=setTimeout(j,t),u?h(w):i}function p(w){var S=w-c,C=w-d,A=t-S;return m?Sle(A,o-C):A}function v(w){var S=w-c,C=w-d;return c===void 0||S>=t||S<0||m&&C>=o}function j(){var w=Hy();if(v(w))return g(w);l=setTimeout(j,p(w))}function g(w){return l=void 0,f&&s?h(w):(s=a=void 0,i)}function N(){l!==void 0&&clearTimeout(l),d=0,s=c=a=l=void 0}function _(){return l===void 0?i:g(Hy())}function b(){var w=Hy(),S=v(w);if(s=arguments,a=this,c=w,S){if(l===void 0)return x(c);if(m)return clearTimeout(l),l=setTimeout(j,t),h(c)}return l===void 0&&(l=setTimeout(j,t)),i}return b.cancel=N,b.flush=_,b}var Ple=Cle,Ale=Ple,Ele=ro,Mle="Expected a function";function Ole(e,t,n){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(Mle);return Ele(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),Ale(e,t,{leading:s,maxWait:t,trailing:a})}var Tle=Ole;const gR=or(Tle);function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(s){kle(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function kle(e,t,n){return t=$le(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $le(e){var t=Dle(e,"string");return Zf(t)=="symbol"?t:t+""}function Dle(e,t){if(Zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fle(e,t){return Ble(e)||Lle(e,t)||Rle(e,t)||Ile()}function Ile(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rle(e,t){if(e){if(typeof e=="string")return GE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GE(e,t)}}function GE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Lle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Ble(e){if(Array.isArray(e))return e}var mt=y.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,o=e.width,i=o===void 0?"100%":o,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,m=e.minHeight,f=e.maxHeight,h=e.children,x=e.debounce,p=x===void 0?0:x,v=e.id,j=e.className,g=e.onResize,N=e.style,_=N===void 0?{}:N,b=y.useRef(null),w=y.useRef();w.current=g,y.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var S=y.useState({containerWidth:a.width,containerHeight:a.height}),C=Fle(S,2),A=C[0],P=C[1],k=y.useCallback(function(O,M){P(function(T){var V=Math.round(O),I=Math.round(M);return T.containerWidth===V&&T.containerHeight===I?T:{containerWidth:V,containerHeight:I}})},[]);y.useEffect(function(){var O=function(D){var X,W=D[0].contentRect,B=W.width,q=W.height;k(B,q),(X=w.current)===null||X===void 0||X.call(w,B,q)};p>0&&(O=gR(O,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(O),T=b.current.getBoundingClientRect(),V=T.width,I=T.height;return k(V,I),M.observe(b.current),function(){M.disconnect()}},[k,p]);var E=y.useMemo(function(){var O=A.containerWidth,M=A.containerHeight;if(O<0||M<0)return null;Ka(Jl(i)||Jl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),Ka(!n||n>0,"The aspect(%s) must be greater than zero.",n);var T=Jl(i)?O:i,V=Jl(c)?M:c;n&&n>0&&(T?V=T/n:V&&(T=V*n),f&&V>f&&(V=f)),Ka(T>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,V,i,c,u,m,n);var I=!Array.isArray(h)&&Jo(h.type).endsWith("Chart");return K.Children.map(h,function(F){return K.isValidElement(F)?y.cloneElement(F,Zp({width:T,height:V},I?{style:Zp({height:"100%",width:"100%",maxHeight:V,maxWidth:T},F.props.style)}:{})):F})},[n,h,c,f,m,u,A,i]);return K.createElement("div",{id:v?"".concat(v):void 0,className:Mt("recharts-responsive-container",j),style:Zp(Zp({},_),{},{width:i,height:c,minWidth:u,minHeight:m,maxHeight:f}),ref:b},E)}),Kt=function(t){return null};Kt.displayName="Cell";function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(s){zle(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zle(e,t,n){return t=Vle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vle(e){var t=Wle(e,"string");return Jf(t)=="symbol"?t:t+""}function Wle(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jc={widthCache:{},cacheCount:0},qle=2e3,Ule={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XE="recharts_measurement_span";function Kle(e){var t=Ew({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Fd=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$s.isSsr)return{width:0,height:0};var s=Kle(n),a=JSON.stringify({text:t,copyStyle:s});if(Jc.widthCache[a])return Jc.widthCache[a];try{var o=document.getElementById(XE);o||(o=document.createElement("span"),o.setAttribute("id",XE),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=Ew(Ew({},Ule),s);Object.assign(o.style,i),o.textContent="".concat(t);var l=o.getBoundingClientRect(),c={width:l.width,height:l.height};return Jc.widthCache[a]=c,++Jc.cacheCount>qle&&(Jc.cacheCount=0,Jc.widthCache={}),c}catch{return{width:0,height:0}}},Gle=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function Dg(e,t){return Qle(e)||Yle(e,t)||Xle(e,t)||Hle()}function Hle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xle(e,t){if(e){if(typeof e=="string")return YE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YE(e,t)}}function YE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Yle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Qle(e){if(Array.isArray(e))return e}function Zle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ece(s.key),s)}}function Jle(e,t,n){return t&&QE(e.prototype,t),n&&QE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ece(e){var t=tce(e,"string");return eh(t)=="symbol"?t:t+""}function tce(e,t){if(eh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(eh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vR={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sce=Object.keys(vR),Nd="NaN";function ace(e,t){return e*vR[t]}var Jp=function(){function e(t,n){Zle(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!rce.test(n)&&(this.num=NaN,this.unit=""),sce.includes(n)&&(this.num=ace(t,n),this.unit="px")}return Jle(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,a=(s=nce.exec(n))!==null&&s!==void 0?s:[],o=Dg(a,3),i=o[1],l=o[2];return new e(parseFloat(i),l??"")}}])}();function jR(e){if(e.includes(Nd))return Nd;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=ZE.exec(t))!==null&&n!==void 0?n:[],a=Dg(s,4),o=a[1],i=a[2],l=a[3],c=Jp.parse(o??""),d=Jp.parse(l??""),u=i==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Nd;t=t.replace(ZE,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,f=(m=JE.exec(t))!==null&&m!==void 0?m:[],h=Dg(f,4),x=h[1],p=h[2],v=h[3],j=Jp.parse(x??""),g=Jp.parse(v??""),N=p==="+"?j.add(g):j.subtract(g);if(N.isNaN())return Nd;t=t.replace(JE,N.toString())}return t}var eM=/\(([^()]*)\)/;function oce(e){for(var t=e;t.includes("(");){var n=eM.exec(t),s=Dg(n,2),a=s[1];t=t.replace(eM,jR(a))}return t}function ice(e){var t=e.replace(/\s+/g,"");return t=oce(t),t=jR(t),t}function lce(e){try{return ice(e)}catch{return Nd}}function Xy(e){var t=lce(e.slice(5,-1));return t===Nd?"":t}var cce=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],dce=["dx","dy","angle","className","breakAll"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mw.apply(this,arguments)}function tM(e,t){if(e==null)return{};var n=uce(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function uce(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function rM(e,t){return pce(e)||hce(e,t)||fce(e,t)||mce()}function mce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fce(e,t){if(e){if(typeof e=="string")return nM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nM(e,t)}}function nM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function hce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function pce(e){if(Array.isArray(e))return e}var yR=/[ \f\n\r\t\v\u2028\u2029]+/,bR=function(t){var n=t.children,s=t.breakAll,a=t.style;try{var o=[];bt(n)||(s?o=n.toString().split(""):o=n.toString().split(yR));var i=o.map(function(c){return{word:c,width:Fd(c,a).width}}),l=s?0:Fd("",a).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},xce=function(t,n,s,a,o){var i=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=qe(i),m=l,f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(V,I){var F=I.word,D=I.width,X=V[V.length-1];if(X&&(a==null||o||X.width+D+s<Number(a)))X.words.push(F),X.width+=D+s;else{var W={words:[F],width:D};V.push(W)}return V},[])},h=f(n),x=function(T){return T.reduce(function(V,I){return V.width>I.width?V:I})};if(!u)return h;for(var p="",v=function(T){var V=m.slice(0,T),I=bR({breakAll:d,style:c,children:V+p}).wordsWithComputedWidth,F=f(I),D=F.length>i||x(F).width>Number(a);return[D,F]},j=0,g=m.length-1,N=0,_;j<=g&&N<=m.length-1;){var b=Math.floor((j+g)/2),w=b-1,S=v(w),C=rM(S,2),A=C[0],P=C[1],k=v(b),E=rM(k,1),O=E[0];if(!A&&!O&&(j=b+1),A&&O&&(g=b-1),!A&&O){_=P;break}N++}return _||h},sM=function(t){var n=bt(t)?[]:t.toString().split(yR);return[{words:n}]},gce=function(t){var n=t.width,s=t.scaleToFit,a=t.children,o=t.style,i=t.breakAll,l=t.maxLines;if((n||s)&&!$s.isSsr){var c,d,u=bR({breakAll:i,children:a,style:o});if(u){var m=u.wordsWithComputedWidth,f=u.spaceWidth;c=m,d=f}else return sM(a);return xce({breakAll:i,children:a,maxLines:l,style:o},c,d,n,s)}return sM(a)},aM="#808080",Ec=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,o=a===void 0?0:a,i=t.lineHeight,l=i===void 0?"1em":i,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,m=u===void 0?!1:u,f=t.textAnchor,h=f===void 0?"start":f,x=t.verticalAnchor,p=x===void 0?"end":x,v=t.fill,j=v===void 0?aM:v,g=tM(t,cce),N=y.useMemo(function(){return gce({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:m,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,m,g.style,g.width]),_=g.dx,b=g.dy,w=g.angle,S=g.className,C=g.breakAll,A=tM(g,dce);if(!bn(s)||!bn(o))return null;var P=s+(qe(_)?_:0),k=o+(qe(b)?b:0),E;switch(p){case"start":E=Xy("calc(".concat(d,")"));break;case"middle":E=Xy("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:E=Xy("calc(".concat(N.length-1," * -").concat(l,")"));break}var O=[];if(m){var M=N[0].width,T=g.width;O.push("scale(".concat((qe(T)?T/M:1)/M,")"))}return w&&O.push("rotate(".concat(w,", ").concat(P,", ").concat(k,")")),O.length&&(A.transform=O.join(" ")),K.createElement("text",Mw({},ct(A,!0),{x:P,y:k,className:Mt("recharts-text",S),textAnchor:h,fill:j.includes("url")?aM:j}),N.map(function(V,I){var F=V.words.join(C?"":" ");return K.createElement("tspan",{x:P,dy:I===0?E:l,key:"".concat(F,"-").concat(I)},F)}))};function ll(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vce(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JS(e){let t,n,s;e.length!==2?(t=ll,n=(l,c)=>ll(e(l),c),s=(l,c)=>e(l)-c):(t=e===ll||e===vce?e:jce,n=e,s=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const m=d+u>>>1;n(l[m],c)<0?d=m+1:u=m}while(d<u)}return d}function o(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const m=d+u>>>1;n(l[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function i(l,c,d=0,u=l.length){const m=a(l,c,d,u-1);return m>d&&s(l[m-1],c)>-s(l[m],c)?m-1:m}return{left:a,center:i,right:o}}function jce(){return 0}function NR(e){return e===null?NaN:+e}function*yce(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const bce=JS(ll),tp=bce.right;JS(NR).center;class oM extends Map{constructor(t,n=_ce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(iM(this,t))}has(t){return super.has(iM(this,t))}set(t,n){return super.set(Nce(this,t),n)}delete(t){return super.delete(wce(this,t))}}function iM({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function Nce({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function wce({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function _ce(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Sce(e=ll){if(e===ll)return wR;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function wR(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Cce=Math.sqrt(50),Pce=Math.sqrt(10),Ace=Math.sqrt(2);function Fg(e,t,n){const s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),o=s/Math.pow(10,a),i=o>=Cce?10:o>=Pce?5:o>=Ace?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/i,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*i,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?Fg(e,t,n*2):[l,c,d]}function Ow(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[a,o,i]=s?Fg(t,e,n):Fg(e,t,n);if(!(o>=a))return[];const l=o-a+1,c=new Array(l);if(s)if(i<0)for(let d=0;d<l;++d)c[d]=(o-d)/-i;else for(let d=0;d<l;++d)c[d]=(o-d)*i;else if(i<0)for(let d=0;d<l;++d)c[d]=(a+d)/-i;else for(let d=0;d<l;++d)c[d]=(a+d)*i;return c}function Tw(e,t,n){return t=+t,e=+e,n=+n,Fg(e,t,n)[2]}function kw(e,t,n){t=+t,e=+e,n=+n;const s=t<e,a=s?Tw(t,e,n):Tw(e,t,n);return(s?-1:1)*(a<0?1/-a:a)}function lM(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function cM(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function _R(e,t,n=0,s=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(a=a===void 0?wR:Sce(a);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),m=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),h=Math.max(n,Math.floor(t-d*m/c+f)),x=Math.min(s,Math.floor(t+(c-d)*m/c+f));_R(e,t,h,x,a)}const o=e[t];let i=n,l=s;for(Tm(e,n,t),a(e[s],o)>0&&Tm(e,n,s);i<l;){for(Tm(e,i,l),++i,--l;a(e[i],o)<0;)++i;for(;a(e[l],o)>0;)--l}a(e[n],o)===0?Tm(e,n,l):(++l,Tm(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function Tm(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function Ece(e,t,n){if(e=Float64Array.from(yce(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return cM(e);if(t>=1)return lM(e);var s,a=(s-1)*t,o=Math.floor(a),i=lM(_R(e,o).subarray(0,o+1)),l=cM(e.subarray(o+1));return i+(l-i)*(a-o)}}function Mce(e,t,n=NR){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,a=(s-1)*t,o=Math.floor(a),i=+n(e[o],o,e),l=+n(e[o+1],o+1,e);return i+(l-i)*(a-o)}}function Oce(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(a);++s<a;)o[s]=e+s*n;return o}function Sa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $w=Symbol("implicit");function e2(){var e=new oM,t=[],n=[],s=$w;function a(o){let i=e.get(o);if(i===void 0){if(s!==$w)return s;e.set(o,i=t.push(o)-1)}return n[i%n.length]}return a.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new oM;for(const i of o)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(o){return arguments.length?(n=Array.from(o),a):n.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.copy=function(){return e2(t,n).unknown(s)},Sa.apply(a,arguments),a}function th(){var e=e2().unknown(void 0),t=e.domain,n=e.range,s=0,a=1,o,i,l=!1,c=0,d=0,u=.5;delete e.unknown;function m(){var f=t().length,h=a<s,x=h?a:s,p=h?s:a;o=(p-x)/Math.max(1,f-c+d*2),l&&(o=Math.floor(o)),x+=(p-x-o*(f-c))*u,i=o*(1-c),l&&(x=Math.round(x),i=Math.round(i));var v=Oce(f).map(function(j){return x+o*j});return n(h?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,m()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,l=!0,m()},e.bandwidth=function(){return i},e.step=function(){return o},e.round=function(f){return arguments.length?(l=!!f,m()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),m()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),m()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,m()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),m()):u},e.copy=function(){return th(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Sa.apply(m(),arguments)}function SR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return SR(t())},e}function uf(){return SR(th.apply(null,arguments).paddingInner(1))}function t2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function CR(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function rp(){}var rh=.7,Ig=1/rh,Id="\\s*([+-]?\\d+)\\s*",nh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tce=/^#([0-9a-f]{3,8})$/,kce=new RegExp(`^rgb\\(${Id},${Id},${Id}\\)$`),$ce=new RegExp(`^rgb\\(${_o},${_o},${_o}\\)$`),Dce=new RegExp(`^rgba\\(${Id},${Id},${Id},${nh}\\)$`),Fce=new RegExp(`^rgba\\(${_o},${_o},${_o},${nh}\\)$`),Ice=new RegExp(`^hsl\\(${nh},${_o},${_o}\\)$`),Rce=new RegExp(`^hsla\\(${nh},${_o},${_o},${nh}\\)$`),dM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t2(rp,sh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uM,formatHex:uM,formatHex8:Lce,formatHsl:Bce,formatRgb:mM,toString:mM});function uM(){return this.rgb().formatHex()}function Lce(){return this.rgb().formatHex8()}function Bce(){return PR(this).formatHsl()}function mM(){return this.rgb().formatRgb()}function sh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fM(t):n===3?new As(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ex(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ex(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kce.exec(e))?new As(t[1],t[2],t[3],1):(t=$ce.exec(e))?new As(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Dce.exec(e))?ex(t[1],t[2],t[3],t[4]):(t=Fce.exec(e))?ex(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ice.exec(e))?xM(t[1],t[2]/100,t[3]/100,1):(t=Rce.exec(e))?xM(t[1],t[2]/100,t[3]/100,t[4]):dM.hasOwnProperty(e)?fM(dM[e]):e==="transparent"?new As(NaN,NaN,NaN,0):null}function fM(e){return new As(e>>16&255,e>>8&255,e&255,1)}function ex(e,t,n,s){return s<=0&&(e=t=n=NaN),new As(e,t,n,s)}function zce(e){return e instanceof rp||(e=sh(e)),e?(e=e.rgb(),new As(e.r,e.g,e.b,e.opacity)):new As}function Dw(e,t,n,s){return arguments.length===1?zce(e):new As(e,t,n,s??1)}function As(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}t2(As,Dw,CR(rp,{brighter(e){return e=e==null?Ig:Math.pow(Ig,e),new As(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rh:Math.pow(rh,e),new As(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new As(xc(this.r),xc(this.g),xc(this.b),Rg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hM,formatHex:hM,formatHex8:Vce,formatRgb:pM,toString:pM}));function hM(){return`#${ec(this.r)}${ec(this.g)}${ec(this.b)}`}function Vce(){return`#${ec(this.r)}${ec(this.g)}${ec(this.b)}${ec((isNaN(this.opacity)?1:this.opacity)*255)}`}function pM(){const e=Rg(this.opacity);return`${e===1?"rgb(":"rgba("}${xc(this.r)}, ${xc(this.g)}, ${xc(this.b)}${e===1?")":`, ${e})`}`}function Rg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ec(e){return e=xc(e),(e<16?"0":"")+e.toString(16)}function xM(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ra(e,t,n,s)}function PR(e){if(e instanceof Ra)return new Ra(e.h,e.s,e.l,e.opacity);if(e instanceof rp||(e=sh(e)),!e)return new Ra;if(e instanceof Ra)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),o=Math.max(t,n,s),i=NaN,l=o-a,c=(o+a)/2;return l?(t===o?i=(n-s)/l+(n<s)*6:n===o?i=(s-t)/l+2:i=(t-n)/l+4,l/=c<.5?o+a:2-o-a,i*=60):l=c>0&&c<1?0:i,new Ra(i,l,c,e.opacity)}function Wce(e,t,n,s){return arguments.length===1?PR(e):new Ra(e,t,n,s??1)}function Ra(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}t2(Ra,Wce,CR(rp,{brighter(e){return e=e==null?Ig:Math.pow(Ig,e),new Ra(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rh:Math.pow(rh,e),new Ra(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new As(Yy(e>=240?e-240:e+120,a,s),Yy(e,a,s),Yy(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Ra(gM(this.h),tx(this.s),tx(this.l),Rg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rg(this.opacity);return`${e===1?"hsl(":"hsla("}${gM(this.h)}, ${tx(this.s)*100}%, ${tx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gM(e){return e=(e||0)%360,e<0?e+360:e}function tx(e){return Math.max(0,Math.min(1,e||0))}function Yy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const r2=e=>()=>e;function qce(e,t){return function(n){return e+n*t}}function Uce(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function Kce(e){return(e=+e)==1?AR:function(t,n){return n-t?Uce(t,n,e):r2(isNaN(t)?n:t)}}function AR(e,t){var n=t-e;return n?qce(e,n):r2(isNaN(e)?t:e)}const vM=function e(t){var n=Kce(t);function s(a,o){var i=n((a=Dw(a)).r,(o=Dw(o)).r),l=n(a.g,o.g),c=n(a.b,o.b),d=AR(a.opacity,o.opacity);return function(u){return a.r=i(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function Gce(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(o){for(a=0;a<n;++a)s[a]=e[a]*(1-o)+t[a]*o;return s}}function Hce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xce(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),o=new Array(n),i;for(i=0;i<s;++i)a[i]=um(e[i],t[i]);for(;i<n;++i)o[i]=t[i];return function(l){for(i=0;i<s;++i)o[i]=a[i](l);return o}}function Yce(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function Lg(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Qce(e,t){var n={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=um(e[a],t[a]):s[a]=t[a];return function(o){for(a in n)s[a]=n[a](o);return s}}var Fw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qy=new RegExp(Fw.source,"g");function Zce(e){return function(){return e}}function Jce(e){return function(t){return e(t)+""}}function ede(e,t){var n=Fw.lastIndex=Qy.lastIndex=0,s,a,o,i=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Fw.exec(e))&&(a=Qy.exec(t));)(o=a.index)>n&&(o=t.slice(n,o),l[i]?l[i]+=o:l[++i]=o),(s=s[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:Lg(s,a)})),n=Qy.lastIndex;return n<t.length&&(o=t.slice(n),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?Jce(c[0].x):Zce(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)l[(m=c[u]).i]=m.x(d);return l.join("")})}function um(e,t){var n=typeof t,s;return t==null||n==="boolean"?r2(t):(n==="number"?Lg:n==="string"?(s=sh(t))?(t=s,vM):ede:t instanceof sh?vM:t instanceof Date?Yce:Hce(t)?Gce:Array.isArray(t)?Xce:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Qce:Lg)(e,t)}function n2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function tde(e,t){t===void 0&&(t=e,e=um);for(var n=0,s=t.length-1,a=t[0],o=new Array(s<0?0:s);n<s;)o[n]=e(a,a=t[++n]);return function(i){var l=Math.max(0,Math.min(s-1,Math.floor(i*=s)));return o[l](i-l)}}function rde(e){return function(){return e}}function Bg(e){return+e}var jM=[0,1];function ls(e){return e}function Iw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rde(isNaN(t)?NaN:.5)}function nde(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function sde(e,t,n){var s=e[0],a=e[1],o=t[0],i=t[1];return a<s?(s=Iw(a,s),o=n(i,o)):(s=Iw(s,a),o=n(o,i)),function(l){return o(s(l))}}function ade(e,t,n){var s=Math.min(e.length,t.length)-1,a=new Array(s),o=new Array(s),i=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<s;)a[i]=Iw(e[i],e[i+1]),o[i]=n(t[i],t[i+1]);return function(l){var c=tp(e,l,1,s)-1;return o[c](a[c](l))}}function np(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function K0(){var e=jM,t=jM,n=um,s,a,o,i=ls,l,c,d;function u(){var f=Math.min(e.length,t.length);return i!==ls&&(i=nde(e[0],e[f-1])),l=f>2?ade:sde,c=d=null,m}function m(f){return f==null||isNaN(f=+f)?o:(c||(c=l(e.map(s),t,n)))(s(i(f)))}return m.invert=function(f){return i(a((d||(d=l(t,e.map(s),Lg)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,Bg),u()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),n=n2,u()},m.clamp=function(f){return arguments.length?(i=f?!0:ls,u()):i!==ls},m.interpolate=function(f){return arguments.length?(n=f,u()):n},m.unknown=function(f){return arguments.length?(o=f,m):o},function(f,h){return s=f,a=h,u()}}function s2(){return K0()(ls,ls)}function ode(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function hu(e){return e=zg(Math.abs(e)),e?e[1]:NaN}function ide(e,t){return function(n,s){for(var a=n.length,o=[],i=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),o.push(n.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[i=(i+1)%e.length];return o.reverse().join(t)}}function lde(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var cde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ah(e){if(!(t=cde.exec(e)))throw new Error("invalid format: "+e);var t;return new a2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ah.prototype=a2.prototype;function a2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}a2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dde(e){e:for(var t=e.length,n=1,s=-1,a;n<t;++n)switch(e[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var ER;function ude(e,t){var n=zg(e,t);if(!n)return e+"";var s=n[0],a=n[1],o=a-(ER=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=s.length;return o===i?s:o>i?s+new Array(o-i+1).join("0"):o>0?s.slice(0,o)+"."+s.slice(o):"0."+new Array(1-o).join("0")+zg(e,Math.max(0,t+o-1))[0]}function yM(e,t){var n=zg(e,t);if(!n)return e+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const bM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ode,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yM(e*100,t),r:yM,s:ude,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function NM(e){return e}var wM=Array.prototype.map,_M=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mde(e){var t=e.grouping===void 0||e.thousands===void 0?NM:ide(wM.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?NM:lde(wM.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(m){m=ah(m);var f=m.fill,h=m.align,x=m.sign,p=m.symbol,v=m.zero,j=m.width,g=m.comma,N=m.precision,_=m.trim,b=m.type;b==="n"?(g=!0,b="g"):bM[b]||(N===void 0&&(N=12),_=!0,b="g"),(v||f==="0"&&h==="=")&&(v=!0,f="0",h="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",S=p==="$"?s:/[%p]/.test(b)?i:"",C=bM[b],A=/[defgprs%]/.test(b);N=N===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function P(k){var E=w,O=S,M,T,V;if(b==="c")O=C(k)+O,k="";else{k=+k;var I=k<0||1/k<0;if(k=isNaN(k)?c:C(Math.abs(k),N),_&&(k=dde(k)),I&&+k==0&&x!=="+"&&(I=!1),E=(I?x==="("?x:l:x==="-"||x==="("?"":x)+E,O=(b==="s"?_M[8+ER/3]:"")+O+(I&&x==="("?")":""),A){for(M=-1,T=k.length;++M<T;)if(V=k.charCodeAt(M),48>V||V>57){O=(V===46?a+k.slice(M+1):k.slice(M))+O,k=k.slice(0,M);break}}}g&&!v&&(k=t(k,1/0));var F=E.length+k.length+O.length,D=F<j?new Array(j-F+1).join(f):"";switch(g&&v&&(k=t(D+k,D.length?j-O.length:1/0),D=""),h){case"<":k=E+k+O+D;break;case"=":k=E+D+k+O;break;case"^":k=D.slice(0,F=D.length>>1)+E+k+O+D.slice(F);break;default:k=D+E+k+O;break}return o(k)}return P.toString=function(){return m+""},P}function u(m,f){var h=d((m=ah(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(hu(f)/3)))*3,p=Math.pow(10,-x),v=_M[8+x/3];return function(j){return h(p*j)+v}}return{format:d,formatPrefix:u}}var rx,o2,MR;fde({thousands:",",grouping:[3],currency:["$",""]});function fde(e){return rx=mde(e),o2=rx.format,MR=rx.formatPrefix,rx}function hde(e){return Math.max(0,-hu(Math.abs(e)))}function pde(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hu(t)/3)))*3-hu(Math.abs(e)))}function xde(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hu(t)-hu(e))+1}function OR(e,t,n,s){var a=kw(e,t,n),o;switch(s=ah(s??",f"),s.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(o=pde(a,i))&&(s.precision=o),MR(s,i)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(o=xde(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=o-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(o=hde(a))&&(s.precision=o-(s.type==="%")*2);break}}return o2(s)}function Ml(e){var t=e.domain;return e.ticks=function(n){var s=t();return Ow(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var a=t();return OR(a[0],a[a.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),a=0,o=s.length-1,i=s[a],l=s[o],c,d,u=10;for(l<i&&(d=i,i=l,l=d,d=a,a=o,o=d);u-- >0;){if(d=Tw(i,l,n),d===c)return s[a]=i,s[o]=l,t(s);if(d>0)i=Math.floor(i/d)*d,l=Math.ceil(l/d)*d;else if(d<0)i=Math.ceil(i*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Vg(){var e=s2();return e.copy=function(){return np(e,Vg())},Sa.apply(e,arguments),Ml(e)}function TR(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Bg),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return TR(e).unknown(t)},e=arguments.length?Array.from(e,Bg):[0,1],Ml(n)}function kR(e,t){e=e.slice();var n=0,s=e.length-1,a=e[n],o=e[s],i;return o<a&&(i=n,n=s,s=i,i=a,a=o,o=i),e[n]=t.floor(a),e[s]=t.ceil(o),e}function SM(e){return Math.log(e)}function CM(e){return Math.exp(e)}function gde(e){return-Math.log(-e)}function vde(e){return-Math.exp(-e)}function jde(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yde(e){return e===10?jde:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bde(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function PM(e){return(t,n)=>-e(-t,n)}function i2(e){const t=e(SM,CM),n=t.domain;let s=10,a,o;function i(){return a=bde(s),o=yde(s),n()[0]<0?(a=PM(a),o=PM(o),e(gde,vde)):e(SM,CM),t}return t.base=function(l){return arguments.length?(s=+l,i()):s},t.domain=function(l){return arguments.length?(n(l),i()):n()},t.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let f=a(d),h=a(u),x,p;const v=l==null?10:+l;let j=[];if(!(s%1)&&h-f<v){if(f=Math.floor(f),h=Math.ceil(h),d>0){for(;f<=h;++f)for(x=1;x<s;++x)if(p=f<0?x/o(-f):x*o(f),!(p<d)){if(p>u)break;j.push(p)}}else for(;f<=h;++f)for(x=s-1;x>=1;--x)if(p=f>0?x/o(-f):x*o(f),!(p<d)){if(p>u)break;j.push(p)}j.length*2<v&&(j=Ow(d,u,v))}else j=Ow(f,h,Math.min(h-f,v)).map(o);return m?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=ah(c)).precision==null&&(c.trim=!0),c=o2(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let m=u/o(Math.round(a(u)));return m*s<s-.5&&(m*=s),m<=d?c(u):""}},t.nice=()=>n(kR(n(),{floor:l=>o(Math.floor(a(l))),ceil:l=>o(Math.ceil(a(l)))})),t}function $R(){const e=i2(K0()).domain([1,10]);return e.copy=()=>np(e,$R()).base(e.base()),Sa.apply(e,arguments),e}function AM(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function EM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function l2(e){var t=1,n=e(AM(t),EM(t));return n.constant=function(s){return arguments.length?e(AM(t=+s),EM(t)):t},Ml(n)}function DR(){var e=l2(K0());return e.copy=function(){return np(e,DR()).constant(e.constant())},Sa.apply(e,arguments)}function MM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Nde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wde(e){return e<0?-e*e:e*e}function c2(e){var t=e(ls,ls),n=1;function s(){return n===1?e(ls,ls):n===.5?e(Nde,wde):e(MM(n),MM(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,s()):n},Ml(t)}function d2(){var e=c2(K0());return e.copy=function(){return np(e,d2()).exponent(e.exponent())},Sa.apply(e,arguments),e}function _de(){return d2.apply(null,arguments).exponent(.5)}function OM(e){return Math.sign(e)*e*e}function Sde(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function FR(){var e=s2(),t=[0,1],n=!1,s;function a(o){var i=Sde(e(o));return isNaN(i)?s:n?Math.round(i):i}return a.invert=function(o){return e.invert(OM(o))},a.domain=function(o){return arguments.length?(e.domain(o),a):e.domain()},a.range=function(o){return arguments.length?(e.range((t=Array.from(o,Bg)).map(OM)),a):t.slice()},a.rangeRound=function(o){return a.range(o).round(!0)},a.round=function(o){return arguments.length?(n=!!o,a):n},a.clamp=function(o){return arguments.length?(e.clamp(o),a):e.clamp()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.copy=function(){return FR(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},Sa.apply(a,arguments),Ml(a)}function IR(){var e=[],t=[],n=[],s;function a(){var i=0,l=Math.max(1,t.length);for(n=new Array(l-1);++i<l;)n[i-1]=Mce(e,i/l);return o}function o(i){return i==null||isNaN(i=+i)?s:t[tp(n,i)]}return o.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},o.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ll),a()},o.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},o.unknown=function(i){return arguments.length?(s=i,o):s},o.quantiles=function(){return n.slice()},o.copy=function(){return IR().domain(e).range(t).unknown(s)},Sa.apply(o,arguments)}function RR(){var e=0,t=1,n=1,s=[.5],a=[0,1],o;function i(c){return c!=null&&c<=c?a[tp(s,c,0,n)]:o}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},i.unknown=function(c){return arguments.length&&(o=c),i},i.thresholds=function(){return s.slice()},i.copy=function(){return RR().domain([e,t]).range(a).unknown(o)},Sa.apply(Ml(i),arguments)}function LR(){var e=[.5],t=[0,1],n,s=1;function a(o){return o!=null&&o<=o?t[tp(e,o,0,s)]:n}return a.domain=function(o){return arguments.length?(e=Array.from(o),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(o){return arguments.length?(t=Array.from(o),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(o){var i=t.indexOf(o);return[e[i-1],e[i]]},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return LR().domain(e).range(t).unknown(n)},Sa.apply(a,arguments)}const Zy=new Date,Jy=new Date;function Sn(e,t,n,s){function a(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(e(o=new Date(+o)),o),a.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),a.round=o=>{const i=a(o),l=a.ceil(o);return o-i<l-o?i:l},a.offset=(o,i)=>(t(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,l)=>{const c=[];if(o=a.ceil(o),l=l==null?1:Math.floor(l),!(o<i)||!(l>0))return c;let d;do c.push(d=new Date(+o)),t(o,l),e(o);while(d<o&&o<i);return c},a.filter=o=>Sn(i=>{if(i>=i)for(;e(i),!o(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!o(i););else for(;--l>=0;)for(;t(i,1),!o(i););}),n&&(a.count=(o,i)=>(Zy.setTime(+o),Jy.setTime(+i),e(Zy),e(Jy),Math.floor(n(Zy,Jy))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(s?i=>s(i)%o===0:i=>a.count(0,i)%o===0):a)),a}const Wg=Sn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wg);Wg.range;const Ho=1e3,ha=Ho*60,Xo=ha*60,ui=Xo*24,u2=ui*7,TM=ui*30,eb=ui*365,tc=Sn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ho)},(e,t)=>(t-e)/Ho,e=>e.getUTCSeconds());tc.range;const m2=Sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ho)},(e,t)=>{e.setTime(+e+t*ha)},(e,t)=>(t-e)/ha,e=>e.getMinutes());m2.range;const f2=Sn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ha)},(e,t)=>(t-e)/ha,e=>e.getUTCMinutes());f2.range;const h2=Sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ho-e.getMinutes()*ha)},(e,t)=>{e.setTime(+e+t*Xo)},(e,t)=>(t-e)/Xo,e=>e.getHours());h2.range;const p2=Sn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xo)},(e,t)=>(t-e)/Xo,e=>e.getUTCHours());p2.range;const sp=Sn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ha)/ui,e=>e.getDate()-1);sp.range;const G0=Sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ui,e=>e.getUTCDate()-1);G0.range;const BR=Sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ui,e=>Math.floor(e/ui));BR.range;function Uc(e){return Sn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ha)/u2)}const H0=Uc(0),qg=Uc(1),Cde=Uc(2),Pde=Uc(3),pu=Uc(4),Ade=Uc(5),Ede=Uc(6);H0.range;qg.range;Cde.range;Pde.range;pu.range;Ade.range;Ede.range;function Kc(e){return Sn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/u2)}const X0=Kc(0),Ug=Kc(1),Mde=Kc(2),Ode=Kc(3),xu=Kc(4),Tde=Kc(5),kde=Kc(6);X0.range;Ug.range;Mde.range;Ode.range;xu.range;Tde.range;kde.range;const x2=Sn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());x2.range;const g2=Sn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());g2.range;const mi=Sn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});mi.range;const fi=Sn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});fi.range;function zR(e,t,n,s,a,o){const i=[[tc,1,Ho],[tc,5,5*Ho],[tc,15,15*Ho],[tc,30,30*Ho],[o,1,ha],[o,5,5*ha],[o,15,15*ha],[o,30,30*ha],[a,1,Xo],[a,3,3*Xo],[a,6,6*Xo],[a,12,12*Xo],[s,1,ui],[s,2,2*ui],[n,1,u2],[t,1,TM],[t,3,3*TM],[e,1,eb]];function l(d,u,m){const f=u<d;f&&([d,u]=[u,d]);const h=m&&typeof m.range=="function"?m:c(d,u,m),x=h?h.range(d,+u+1):[];return f?x.reverse():x}function c(d,u,m){const f=Math.abs(u-d)/m,h=JS(([,,v])=>v).right(i,f);if(h===i.length)return e.every(kw(d/eb,u/eb,m));if(h===0)return Wg.every(Math.max(kw(d,u,m),1));const[x,p]=i[f/i[h-1][2]<i[h][2]/f?h-1:h];return x.every(p)}return[l,c]}const[$de,Dde]=zR(fi,g2,X0,BR,p2,f2),[Fde,Ide]=zR(mi,x2,H0,sp,h2,m2);function tb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function km(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Rde(e){var t=e.dateTime,n=e.date,s=e.time,a=e.periods,o=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,d=$m(a),u=Dm(a),m=$m(o),f=Dm(o),h=$m(i),x=Dm(i),p=$m(l),v=Dm(l),j=$m(c),g=Dm(c),N={a:I,A:F,b:D,B:X,c:null,d:RM,e:RM,f:iue,g:gue,G:jue,H:sue,I:aue,j:oue,L:VR,m:lue,M:cue,p:W,q:B,Q:zM,s:VM,S:due,u:uue,U:mue,V:fue,w:hue,W:pue,x:null,X:null,y:xue,Y:vue,Z:yue,"%":BM},_={a:q,A:te,b:Y,B:H,c:null,d:LM,e:LM,f:_ue,g:$ue,G:Fue,H:bue,I:Nue,j:wue,L:qR,m:Sue,M:Cue,p:L,q:ue,Q:zM,s:VM,S:Pue,u:Aue,U:Eue,V:Mue,w:Oue,W:Tue,x:null,X:null,y:kue,Y:Due,Z:Iue,"%":BM},b={a:P,A:k,b:E,B:O,c:M,d:FM,e:FM,f:eue,g:DM,G:$M,H:IM,I:IM,j:Yde,L:Jde,m:Xde,M:Qde,p:A,q:Hde,Q:rue,s:nue,S:Zde,u:Wde,U:qde,V:Ude,w:Vde,W:Kde,x:T,X:V,y:DM,Y:$M,Z:Gde,"%":tue};N.x=w(n,N),N.X=w(s,N),N.c=w(t,N),_.x=w(n,_),_.X=w(s,_),_.c=w(t,_);function w(pe,we){return function(re){var de=[],he=-1,ee=0,z=pe.length,U,oe,Se;for(re instanceof Date||(re=new Date(+re));++he<z;)pe.charCodeAt(he)===37&&(de.push(pe.slice(ee,he)),(oe=kM[U=pe.charAt(++he)])!=null?U=pe.charAt(++he):oe=U==="e"?" ":"0",(Se=we[U])&&(U=Se(re,oe)),de.push(U),ee=he+1);return de.push(pe.slice(ee,he)),de.join("")}}function S(pe,we){return function(re){var de=km(1900,void 0,1),he=C(de,pe,re+="",0),ee,z;if(he!=re.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(we&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(ee=rb(km(de.y,0,1)),z=ee.getUTCDay(),ee=z>4||z===0?Ug.ceil(ee):Ug(ee),ee=G0.offset(ee,(de.V-1)*7),de.y=ee.getUTCFullYear(),de.m=ee.getUTCMonth(),de.d=ee.getUTCDate()+(de.w+6)%7):(ee=tb(km(de.y,0,1)),z=ee.getDay(),ee=z>4||z===0?qg.ceil(ee):qg(ee),ee=sp.offset(ee,(de.V-1)*7),de.y=ee.getFullYear(),de.m=ee.getMonth(),de.d=ee.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),z="Z"in de?rb(km(de.y,0,1)).getUTCDay():tb(km(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(z+5)%7:de.w+de.U*7-(z+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,rb(de)):tb(de)}}function C(pe,we,re,de){for(var he=0,ee=we.length,z=re.length,U,oe;he<ee;){if(de>=z)return-1;if(U=we.charCodeAt(he++),U===37){if(U=we.charAt(he++),oe=b[U in kM?we.charAt(he++):U],!oe||(de=oe(pe,re,de))<0)return-1}else if(U!=re.charCodeAt(de++))return-1}return de}function A(pe,we,re){var de=d.exec(we.slice(re));return de?(pe.p=u.get(de[0].toLowerCase()),re+de[0].length):-1}function P(pe,we,re){var de=h.exec(we.slice(re));return de?(pe.w=x.get(de[0].toLowerCase()),re+de[0].length):-1}function k(pe,we,re){var de=m.exec(we.slice(re));return de?(pe.w=f.get(de[0].toLowerCase()),re+de[0].length):-1}function E(pe,we,re){var de=j.exec(we.slice(re));return de?(pe.m=g.get(de[0].toLowerCase()),re+de[0].length):-1}function O(pe,we,re){var de=p.exec(we.slice(re));return de?(pe.m=v.get(de[0].toLowerCase()),re+de[0].length):-1}function M(pe,we,re){return C(pe,t,we,re)}function T(pe,we,re){return C(pe,n,we,re)}function V(pe,we,re){return C(pe,s,we,re)}function I(pe){return i[pe.getDay()]}function F(pe){return o[pe.getDay()]}function D(pe){return c[pe.getMonth()]}function X(pe){return l[pe.getMonth()]}function W(pe){return a[+(pe.getHours()>=12)]}function B(pe){return 1+~~(pe.getMonth()/3)}function q(pe){return i[pe.getUTCDay()]}function te(pe){return o[pe.getUTCDay()]}function Y(pe){return c[pe.getUTCMonth()]}function H(pe){return l[pe.getUTCMonth()]}function L(pe){return a[+(pe.getUTCHours()>=12)]}function ue(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var we=w(pe+="",N);return we.toString=function(){return pe},we},parse:function(pe){var we=S(pe+="",!1);return we.toString=function(){return pe},we},utcFormat:function(pe){var we=w(pe+="",_);return we.toString=function(){return pe},we},utcParse:function(pe){var we=S(pe+="",!0);return we.toString=function(){return pe},we}}}var kM={"-":"",_:" ",0:"0"},kn=/^\s*\d+/,Lde=/^%/,Bde=/[\\^$*+?|[\]().{}]/g;function rr(e,t,n){var s=e<0?"-":"",a=(s?-e:e)+"",o=a.length;return s+(o<n?new Array(n-o+1).join(t)+a:a)}function zde(e){return e.replace(Bde,"\\$&")}function $m(e){return new RegExp("^(?:"+e.map(zde).join("|")+")","i")}function Dm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Vde(e,t,n){var s=kn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function Wde(e,t,n){var s=kn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function qde(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function Ude(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function Kde(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function $M(e,t,n){var s=kn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function DM(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function Gde(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function Hde(e,t,n){var s=kn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function Xde(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function FM(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function Yde(e,t,n){var s=kn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function IM(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function Qde(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function Zde(e,t,n){var s=kn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Jde(e,t,n){var s=kn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function eue(e,t,n){var s=kn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function tue(e,t,n){var s=Lde.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function rue(e,t,n){var s=kn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function nue(e,t,n){var s=kn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function RM(e,t){return rr(e.getDate(),t,2)}function sue(e,t){return rr(e.getHours(),t,2)}function aue(e,t){return rr(e.getHours()%12||12,t,2)}function oue(e,t){return rr(1+sp.count(mi(e),e),t,3)}function VR(e,t){return rr(e.getMilliseconds(),t,3)}function iue(e,t){return VR(e,t)+"000"}function lue(e,t){return rr(e.getMonth()+1,t,2)}function cue(e,t){return rr(e.getMinutes(),t,2)}function due(e,t){return rr(e.getSeconds(),t,2)}function uue(e){var t=e.getDay();return t===0?7:t}function mue(e,t){return rr(H0.count(mi(e)-1,e),t,2)}function WR(e){var t=e.getDay();return t>=4||t===0?pu(e):pu.ceil(e)}function fue(e,t){return e=WR(e),rr(pu.count(mi(e),e)+(mi(e).getDay()===4),t,2)}function hue(e){return e.getDay()}function pue(e,t){return rr(qg.count(mi(e)-1,e),t,2)}function xue(e,t){return rr(e.getFullYear()%100,t,2)}function gue(e,t){return e=WR(e),rr(e.getFullYear()%100,t,2)}function vue(e,t){return rr(e.getFullYear()%1e4,t,4)}function jue(e,t){var n=e.getDay();return e=n>=4||n===0?pu(e):pu.ceil(e),rr(e.getFullYear()%1e4,t,4)}function yue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+rr(t/60|0,"0",2)+rr(t%60,"0",2)}function LM(e,t){return rr(e.getUTCDate(),t,2)}function bue(e,t){return rr(e.getUTCHours(),t,2)}function Nue(e,t){return rr(e.getUTCHours()%12||12,t,2)}function wue(e,t){return rr(1+G0.count(fi(e),e),t,3)}function qR(e,t){return rr(e.getUTCMilliseconds(),t,3)}function _ue(e,t){return qR(e,t)+"000"}function Sue(e,t){return rr(e.getUTCMonth()+1,t,2)}function Cue(e,t){return rr(e.getUTCMinutes(),t,2)}function Pue(e,t){return rr(e.getUTCSeconds(),t,2)}function Aue(e){var t=e.getUTCDay();return t===0?7:t}function Eue(e,t){return rr(X0.count(fi(e)-1,e),t,2)}function UR(e){var t=e.getUTCDay();return t>=4||t===0?xu(e):xu.ceil(e)}function Mue(e,t){return e=UR(e),rr(xu.count(fi(e),e)+(fi(e).getUTCDay()===4),t,2)}function Oue(e){return e.getUTCDay()}function Tue(e,t){return rr(Ug.count(fi(e)-1,e),t,2)}function kue(e,t){return rr(e.getUTCFullYear()%100,t,2)}function $ue(e,t){return e=UR(e),rr(e.getUTCFullYear()%100,t,2)}function Due(e,t){return rr(e.getUTCFullYear()%1e4,t,4)}function Fue(e,t){var n=e.getUTCDay();return e=n>=4||n===0?xu(e):xu.ceil(e),rr(e.getUTCFullYear()%1e4,t,4)}function Iue(){return"+0000"}function BM(){return"%"}function zM(e){return+e}function VM(e){return Math.floor(+e/1e3)}var ed,KR,GR;Rue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rue(e){return ed=Rde(e),KR=ed.format,ed.parse,GR=ed.utcFormat,ed.utcParse,ed}function Lue(e){return new Date(e)}function Bue(e){return e instanceof Date?+e:+new Date(+e)}function v2(e,t,n,s,a,o,i,l,c,d){var u=s2(),m=u.invert,f=u.domain,h=d(".%L"),x=d(":%S"),p=d("%I:%M"),v=d("%I %p"),j=d("%a %d"),g=d("%b %d"),N=d("%B"),_=d("%Y");function b(w){return(c(w)<w?h:l(w)<w?x:i(w)<w?p:o(w)<w?v:s(w)<w?a(w)<w?j:g:n(w)<w?N:_)(w)}return u.invert=function(w){return new Date(m(w))},u.domain=function(w){return arguments.length?f(Array.from(w,Bue)):f().map(Lue)},u.ticks=function(w){var S=f();return e(S[0],S[S.length-1],w??10)},u.tickFormat=function(w,S){return S==null?b:d(S)},u.nice=function(w){var S=f();return(!w||typeof w.range!="function")&&(w=t(S[0],S[S.length-1],w??10)),w?f(kR(S,w)):u},u.copy=function(){return np(u,v2(e,t,n,s,a,o,i,l,c,d))},u}function zue(){return Sa.apply(v2(Fde,Ide,mi,x2,H0,sp,h2,m2,tc,KR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vue(){return Sa.apply(v2($de,Dde,fi,g2,X0,G0,p2,f2,tc,GR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Y0(){var e=0,t=1,n,s,a,o,i=ls,l=!1,c;function d(m){return m==null||isNaN(m=+m)?c:i(a===0?.5:(m=(o(m)-n)*a,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=o(e=+e),s=o(t=+t),a=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(i=m,d):i};function u(m){return function(f){var h,x;return arguments.length?([h,x]=f,i=m(h,x),d):[i(0),i(1)]}}return d.range=u(um),d.rangeRound=u(n2),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return o=m,n=m(e),s=m(t),a=n===s?0:1/(s-n),d}}function Ol(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function HR(){var e=Ml(Y0()(ls));return e.copy=function(){return Ol(e,HR())},vi.apply(e,arguments)}function XR(){var e=i2(Y0()).domain([1,10]);return e.copy=function(){return Ol(e,XR()).base(e.base())},vi.apply(e,arguments)}function YR(){var e=l2(Y0());return e.copy=function(){return Ol(e,YR()).constant(e.constant())},vi.apply(e,arguments)}function j2(){var e=c2(Y0());return e.copy=function(){return Ol(e,j2()).exponent(e.exponent())},vi.apply(e,arguments)}function Wue(){return j2.apply(null,arguments).exponent(.5)}function QR(){var e=[],t=ls;function n(s){if(s!=null&&!isNaN(s=+s))return t((tp(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ll),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,o)=>Ece(e,o/s))},n.copy=function(){return QR(t).domain(e)},vi.apply(n,arguments)}function Q0(){var e=0,t=.5,n=1,s=1,a,o,i,l,c,d=ls,u,m=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-o)*(s*p<s*o?l:c),d(m?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,a=u(e=+e),o=u(t=+t),i=u(n=+n),l=a===o?0:.5/(o-a),c=o===i?0:.5/(i-o),s=o<a?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(m=!!p,h):m},h.interpolator=function(p){return arguments.length?(d=p,h):d};function x(p){return function(v){var j,g,N;return arguments.length?([j,g,N]=v,d=tde(p,[j,g,N]),h):[d(0),d(.5),d(1)]}}return h.range=x(um),h.rangeRound=x(n2),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return u=p,a=p(e),o=p(t),i=p(n),l=a===o?0:.5/(o-a),c=o===i?0:.5/(i-o),s=o<a?-1:1,h}}function ZR(){var e=Ml(Q0()(ls));return e.copy=function(){return Ol(e,ZR())},vi.apply(e,arguments)}function JR(){var e=i2(Q0()).domain([.1,1,10]);return e.copy=function(){return Ol(e,JR()).base(e.base())},vi.apply(e,arguments)}function e3(){var e=l2(Q0());return e.copy=function(){return Ol(e,e3()).constant(e.constant())},vi.apply(e,arguments)}function y2(){var e=c2(Q0());return e.copy=function(){return Ol(e,y2()).exponent(e.exponent())},vi.apply(e,arguments)}function que(){return y2.apply(null,arguments).exponent(.5)}const WM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:th,scaleDiverging:ZR,scaleDivergingLog:JR,scaleDivergingPow:y2,scaleDivergingSqrt:que,scaleDivergingSymlog:e3,scaleIdentity:TR,scaleImplicit:$w,scaleLinear:Vg,scaleLog:$R,scaleOrdinal:e2,scalePoint:uf,scalePow:d2,scaleQuantile:IR,scaleQuantize:RR,scaleRadial:FR,scaleSequential:HR,scaleSequentialLog:XR,scaleSequentialPow:j2,scaleSequentialQuantile:QR,scaleSequentialSqrt:Wue,scaleSequentialSymlog:YR,scaleSqrt:_de,scaleSymlog:DR,scaleThreshold:LR,scaleTime:zue,scaleUtc:Vue,tickFormat:OR},Symbol.toStringTag,{value:"Module"}));var Uue=tm;function Kue(e,t,n){for(var s=-1,a=e.length;++s<a;){var o=e[s],i=t(o);if(i!=null&&(l===void 0?i===i&&!Uue(i):n(i,l)))var l=i,c=o}return c}var Z0=Kue;function Gue(e,t){return e>t}var t3=Gue,Hue=Z0,Xue=t3,Yue=dm;function Que(e){return e&&e.length?Hue(e,Yue,Xue):void 0}var Zue=Que;const Xi=or(Zue);function Jue(e,t){return e<t}var r3=Jue,eme=Z0,tme=r3,rme=dm;function nme(e){return e&&e.length?eme(e,rme,tme):void 0}var sme=nme;const J0=or(sme);var ame=w0,ome=ko,ime=lR,lme=js;function cme(e,t){var n=lme(e)?ame:ime;return n(e,ome(t))}var dme=cme,ume=XS,mme=dme;function fme(e,t){return ume(mme(e,t),1)}var hme=fme;const pme=or(hme);var xme=HS;function gme(e,t){return xme(e,t)}var vme=gme;const jl=or(vme);var mm=1e9,jme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},N2,Rr=!0,ja="[DecimalError] ",gc=ja+"Invalid argument: ",b2=ja+"Exponent out of range: ",fm=Math.floor,Kl=Math.pow,yme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qs,An=1e7,kr=7,n3=9007199254740991,Kg=fm(n3/kr),ot={};ot.absoluteValue=ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ot.comparedTo=ot.cmp=function(e){var t,n,s,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(s=o.d.length,a=e.d.length,t=0,n=s<a?s:a;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return s===a?0:s>a^o.s<0?1:-1};ot.decimalPlaces=ot.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*kr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ot.dividedBy=ot.div=function(e){return ei(this,new this.constructor(e))};ot.dividedToIntegerBy=ot.idiv=function(e){var t=this,n=t.constructor;return br(ei(t,new n(e),0,1),n.precision)};ot.equals=ot.eq=function(e){return!this.cmp(e)};ot.exponent=function(){return un(this)};ot.greaterThan=ot.gt=function(e){return this.cmp(e)>0};ot.greaterThanOrEqualTo=ot.gte=function(e){return this.cmp(e)>=0};ot.isInteger=ot.isint=function(){return this.e>this.d.length-2};ot.isNegative=ot.isneg=function(){return this.s<0};ot.isPositive=ot.ispos=function(){return this.s>0};ot.isZero=function(){return this.s===0};ot.lessThan=ot.lt=function(e){return this.cmp(e)<0};ot.lessThanOrEqualTo=ot.lte=function(e){return this.cmp(e)<1};ot.logarithm=ot.log=function(e){var t,n=this,s=n.constructor,a=s.precision,o=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(qs))throw Error(ja+"NaN");if(n.s<1)throw Error(ja+(n.s?"NaN":"-Infinity"));return n.eq(qs)?new s(0):(Rr=!1,t=ei(oh(n,o),oh(e,o),o),Rr=!0,br(t,a))};ot.minus=ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?o3(t,e):s3(t,(e.s=-e.s,e))};ot.modulo=ot.mod=function(e){var t,n=this,s=n.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(ja+"NaN");return n.s?(Rr=!1,t=ei(n,e,0,1).times(e),Rr=!0,n.minus(t)):br(new s(n),a)};ot.naturalExponential=ot.exp=function(){return a3(this)};ot.naturalLogarithm=ot.ln=function(){return oh(this)};ot.negated=ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ot.plus=ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?s3(t,e):o3(t,(e.s=-e.s,e))};ot.precision=ot.sd=function(e){var t,n,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(gc+e);if(t=un(a)+1,s=a.d.length-1,n=s*kr+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};ot.squareRoot=ot.sqrt=function(){var e,t,n,s,a,o,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ja+"NaN")}for(e=un(l),Rr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=vo(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=fm((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),n=c.precision,a=i=n+3;;)if(o=s,s=o.plus(ei(l,o,i+2)).times(.5),vo(o.d).slice(0,i)===(t=vo(s.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(br(o,n+1,0),o.times(o).eq(l)){s=o;break}}else if(t!="9999")break;i+=4}return Rr=!0,br(s,n)};ot.times=ot.mul=function(e){var t,n,s,a,o,i,l,c,d,u=this,m=u.constructor,f=u.d,h=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,d=h.length,c<d&&(o=f,f=h,h=o,i=c,c=d,d=i),o=[],i=c+d,s=i;s--;)o.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=o[a]+h[s]*f[a-s-1]+t,o[a--]=l%An|0,t=l/An|0;o[a]=(o[a]+t)%An|0}for(;!o[--i];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Rr?br(e,m.precision):e};ot.toDecimalPlaces=ot.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Mo(e,0,mm),t===void 0?t=s.rounding:Mo(t,0,8),br(n,e+un(n)+1,t))};ot.toExponential=function(e,t){var n,s=this,a=s.constructor;return e===void 0?n=Mc(s,!0):(Mo(e,0,mm),t===void 0?t=a.rounding:Mo(t,0,8),s=br(new a(s),e+1,t),n=Mc(s,!0,e+1)),n};ot.toFixed=function(e,t){var n,s,a=this,o=a.constructor;return e===void 0?Mc(a):(Mo(e,0,mm),t===void 0?t=o.rounding:Mo(t,0,8),s=br(new o(a),e+un(a)+1,t),n=Mc(s.abs(),!1,e+un(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};ot.toInteger=ot.toint=function(){var e=this,t=e.constructor;return br(new t(e),un(e)+1,t.rounding)};ot.toNumber=function(){return+this};ot.toPower=ot.pow=function(e){var t,n,s,a,o,i,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(qs);if(l=new c(l),!l.s){if(e.s<1)throw Error(ja+"Infinity");return l}if(l.eq(qs))return l;if(s=c.precision,e.eq(qs))return br(l,s);if(t=e.e,n=e.d.length-1,i=t>=n,o=l.s,i){if((n=u<0?-u:u)<=n3){for(a=new c(qs),t=Math.ceil(s/kr+4),Rr=!1;n%2&&(a=a.times(l),UM(a.d,t)),n=fm(n/2),n!==0;)l=l.times(l),UM(l.d,t);return Rr=!0,e.s<0?new c(qs).div(a):br(a,s)}}else if(o<0)throw Error(ja+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Rr=!1,a=e.times(oh(l,s+d)),Rr=!0,a=a3(a),a.s=o,a};ot.toPrecision=function(e,t){var n,s,a=this,o=a.constructor;return e===void 0?(n=un(a),s=Mc(a,n<=o.toExpNeg||n>=o.toExpPos)):(Mo(e,1,mm),t===void 0?t=o.rounding:Mo(t,0,8),a=br(new o(a),e,t),n=un(a),s=Mc(a,e<=n||n<=o.toExpNeg,e)),s};ot.toSignificantDigits=ot.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Mo(e,1,mm),t===void 0?t=s.rounding:Mo(t,0,8)),br(new s(n),e,t)};ot.toString=ot.valueOf=ot.val=ot.toJSON=ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=un(e),n=e.constructor;return Mc(e,t<=n.toExpNeg||t>=n.toExpPos)};function s3(e,t){var n,s,a,o,i,l,c,d,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Rr?br(t,m):t;if(c=e.d,d=t.d,i=e.e,a=t.e,c=c.slice(),o=i-a,o){for(o<0?(s=c,o=-o,l=d.length):(s=d,a=i,l=c.length),i=Math.ceil(m/kr),l=i>l?i+1:l+1,o>l&&(o=l,s.length=1),s.reverse();o--;)s.push(0);s.reverse()}for(l=c.length,o=d.length,l-o<0&&(o=l,s=d,d=c,c=s),n=0;o;)n=(c[--o]=c[o]+d[o]+n)/An|0,c[o]%=An;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Rr?br(t,m):t}function Mo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(gc+e)}function vo(e){var t,n,s,a=e.length-1,o="",i=e[0];if(a>0){for(o+=i,t=1;t<a;t++)s=e[t]+"",n=kr-s.length,n&&(o+=Oi(n)),o+=s;i=e[t],s=i+"",n=kr-s.length,n&&(o+=Oi(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}var ei=function(){function e(s,a){var o,i=0,l=s.length;for(s=s.slice();l--;)o=s[l]*a+i,s[l]=o%An|0,i=o/An|0;return i&&s.unshift(i),s}function t(s,a,o,i){var l,c;if(o!=i)c=o>i?1:-1;else for(l=c=0;l<o;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function n(s,a,o){for(var i=0;o--;)s[o]-=i,i=s[o]<a[o]?1:0,s[o]=i*An+s[o]-a[o];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,o,i){var l,c,d,u,m,f,h,x,p,v,j,g,N,_,b,w,S,C,A=s.constructor,P=s.s==a.s?1:-1,k=s.d,E=a.d;if(!s.s)return new A(s);if(!a.s)throw Error(ja+"Division by zero");for(c=s.e-a.e,S=E.length,b=k.length,h=new A(P),x=h.d=[],d=0;E[d]==(k[d]||0);)++d;if(E[d]>(k[d]||0)&&--c,o==null?g=o=A.precision:i?g=o+(un(s)-un(a))+1:g=o,g<0)return new A(0);if(g=g/kr+2|0,d=0,S==1)for(u=0,E=E[0],g++;(d<b||u)&&g--;d++)N=u*An+(k[d]||0),x[d]=N/E|0,u=N%E|0;else{for(u=An/(E[0]+1)|0,u>1&&(E=e(E,u),k=e(k,u),S=E.length,b=k.length),_=S,p=k.slice(0,S),v=p.length;v<S;)p[v++]=0;C=E.slice(),C.unshift(0),w=E[0],E[1]>=An/2&&++w;do u=0,l=t(E,p,S,v),l<0?(j=p[0],S!=v&&(j=j*An+(p[1]||0)),u=j/w|0,u>1?(u>=An&&(u=An-1),m=e(E,u),f=m.length,v=p.length,l=t(m,p,f,v),l==1&&(u--,n(m,S<f?C:E,f))):(u==0&&(l=u=1),m=E.slice()),f=m.length,f<v&&m.unshift(0),n(p,m,v),l==-1&&(v=p.length,l=t(E,p,S,v),l<1&&(u++,n(p,S<v?C:E,v))),v=p.length):l===0&&(u++,p=[0]),x[d++]=u,l&&p[0]?p[v++]=k[_]||0:(p=[k[_]],v=1);while((_++<b||p[0]!==void 0)&&g--)}return x[0]||x.shift(),h.e=c,br(h,i?o+un(h)+1:o)}}();function a3(e,t){var n,s,a,o,i,l,c=0,d=0,u=e.constructor,m=u.precision;if(un(e)>16)throw Error(b2+un(e));if(!e.s)return new u(qs);for(t==null?(Rr=!1,l=m):l=t,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),d+=5;for(s=Math.log(Kl(2,d))/Math.LN10*2+5|0,l+=s,n=a=o=new u(qs),u.precision=l;;){if(a=br(a.times(e),l),n=n.times(++c),i=o.plus(ei(a,n,l)),vo(i.d).slice(0,l)===vo(o.d).slice(0,l)){for(;d--;)o=br(o.times(o),l);return u.precision=m,t==null?(Rr=!0,br(o,m)):o}o=i}}function un(e){for(var t=e.e*kr,n=e.d[0];n>=10;n/=10)t++;return t}function nb(e,t,n){if(t>e.LN10.sd())throw Rr=!0,n&&(e.precision=n),Error(ja+"LN10 precision limit exceeded");return br(new e(e.LN10),t)}function Oi(e){for(var t="";e--;)t+="0";return t}function oh(e,t){var n,s,a,o,i,l,c,d,u,m=1,f=10,h=e,x=h.d,p=h.constructor,v=p.precision;if(h.s<1)throw Error(ja+(h.s?"NaN":"-Infinity"));if(h.eq(qs))return new p(0);if(t==null?(Rr=!1,d=v):d=t,h.eq(10))return t==null&&(Rr=!0),nb(p,d);if(d+=f,p.precision=d,n=vo(x),s=n.charAt(0),o=un(h),Math.abs(o)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)h=h.times(e),n=vo(h.d),s=n.charAt(0),m++;o=un(h),s>1?(h=new p("0."+n),o++):h=new p(s+"."+n.slice(1))}else return c=nb(p,d+2,v).times(o+""),h=oh(new p(s+"."+n.slice(1)),d-f).plus(c),p.precision=v,t==null?(Rr=!0,br(h,v)):h;for(l=i=h=ei(h.minus(qs),h.plus(qs),d),u=br(h.times(h),d),a=3;;){if(i=br(i.times(u),d),c=l.plus(ei(i,new p(a),d)),vo(c.d).slice(0,d)===vo(l.d).slice(0,d))return l=l.times(2),o!==0&&(l=l.plus(nb(p,d+2,v).times(o+""))),l=ei(l,new p(m),d),p.precision=v,t==null?(Rr=!0,br(l,v)):l;l=c,a+=2}}function qM(e,t){var n,s,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,n=n-s-1,e.e=fm(n/kr),e.d=[],s=(n+1)%kr,n<0&&(s+=kr),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=kr;s<a;)e.d.push(+t.slice(s,s+=kr));t=t.slice(s),s=kr-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),Rr&&(e.e>Kg||e.e<-Kg))throw Error(b2+n)}else e.s=0,e.e=0,e.d=[0];return e}function br(e,t,n){var s,a,o,i,l,c,d,u,m=e.d;for(i=1,o=m[0];o>=10;o/=10)i++;if(s=t-i,s<0)s+=kr,a=t,d=m[u=0];else{if(u=Math.ceil((s+1)/kr),o=m.length,u>=o)return e;for(d=o=m[u],i=1;o>=10;o/=10)i++;s%=kr,a=s-kr+i}if(n!==void 0&&(o=Kl(10,i-a-1),l=d/o%10|0,c=t<0||m[u+1]!==void 0||d%o,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?a>0?d/Kl(10,i-a):0:m[u-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return c?(o=un(e),m.length=1,t=t-o-1,m[0]=Kl(10,(kr-t%kr)%kr),e.e=fm(-t/kr)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(s==0?(m.length=u,o=1,u--):(m.length=u+1,o=Kl(10,kr-s),m[u]=a>0?(d/Kl(10,i-a)%Kl(10,a)|0)*o:0),c)for(;;)if(u==0){(m[0]+=o)==An&&(m[0]=1,++e.e);break}else{if(m[u]+=o,m[u]!=An)break;m[u--]=0,o=1}for(s=m.length;m[--s]===0;)m.pop();if(Rr&&(e.e>Kg||e.e<-Kg))throw Error(b2+un(e));return e}function o3(e,t){var n,s,a,o,i,l,c,d,u,m,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Rr?br(t,h):t;if(c=e.d,m=t.d,s=t.e,d=e.e,c=c.slice(),i=d-s,i){for(u=i<0,u?(n=c,i=-i,l=m.length):(n=m,s=d,l=c.length),a=Math.max(Math.ceil(h/kr),l)+2,i>a&&(i=a,n.length=1),n.reverse(),a=i;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=m.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}i=0}for(u&&(n=c,c=m,m=n,t.s=-t.s),l=c.length,a=m.length-l;a>0;--a)c[l++]=0;for(a=m.length;a>i;){if(c[--a]<m[a]){for(o=a;o&&c[--o]===0;)c[o]=An-1;--c[o],c[a]+=An}c[a]-=m[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,Rr?br(t,h):t):new f(0)}function Mc(e,t,n){var s,a=un(e),o=vo(e.d),i=o.length;return t?(n&&(s=n-i)>0?o=o.charAt(0)+"."+o.slice(1)+Oi(s):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+Oi(-a-1)+o,n&&(s=n-i)>0&&(o+=Oi(s))):a>=i?(o+=Oi(a+1-i),n&&(s=n-a-1)>0&&(o=o+"."+Oi(s))):((s=a+1)<i&&(o=o.slice(0,s)+"."+o.slice(s)),n&&(s=n-i)>0&&(a+1===i&&(o+="."),o+=Oi(s))),e.s<0?"-"+o:o}function UM(e,t){if(e.length>t)return e.length=t,!0}function i3(e){var t,n,s;function a(o){var i=this;if(!(i instanceof a))return new a(o);if(i.constructor=a,o instanceof a){i.s=o.s,i.e=o.e,i.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(gc+o);if(o>0)i.s=1;else if(o<0)o=-o,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(o===~~o&&o<1e7){i.e=0,i.d=[o];return}return qM(i,o.toString())}else if(typeof o!="string")throw Error(gc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),i.s=-1):i.s=1,yme.test(o))qM(i,o);else throw Error(gc+o)}if(a.prototype=ot,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=i3,a.config=a.set=bme,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return a.config(e),a}function bme(e){if(!e||typeof e!="object")throw Error(ja+"Object expected");var t,n,s,a=["precision",1,mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[n=a[t]])!==void 0)if(fm(s)===s&&s>=a[t+1]&&s<=a[t+2])this[n]=s;else throw Error(gc+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(gc+n+": "+s);return this}var N2=i3(jme);qs=new N2(1);const xr=N2;function Nme(e){return Cme(e)||Sme(e)||_me(e)||wme()}function wme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _me(e,t){if(e){if(typeof e=="string")return Rw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rw(e,t)}}function Sme(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Cme(e){if(Array.isArray(e))return Rw(e)}function Rw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Pme=function(t){return t},l3={"@@functional/placeholder":!0},c3=function(t){return t===l3},KM=function(t){return function n(){return arguments.length===0||arguments.length===1&&c3(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Ame=function e(t,n){return t===1?n:KM(function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];var i=a.filter(function(l){return l!==l3}).length;return i>=t?n.apply(void 0,a):e(t-i,KM(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(m){return c3(m)?c.shift():m});return n.apply(void 0,Nme(u).concat(c))}))})},ej=function(t){return Ame(t.length,t)},Lw=function(t,n){for(var s=[],a=t;a<n;++a)s[a-t]=a;return s},Eme=ej(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Mme=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return Pme;var a=n.reverse(),o=a[0],i=a.slice(1);return function(){return i.reduce(function(l,c){return c(l)},o.apply(void 0,arguments))}},Bw=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},d3=function(t){var n=null,s=null;return function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n&&o.every(function(l,c){return l===n[c]})||(n=o,s=t.apply(void 0,o)),s}};function Ome(e){var t;return e===0?t=1:t=Math.floor(new xr(e).abs().log(10).toNumber())+1,t}function Tme(e,t,n){for(var s=new xr(e),a=0,o=[];s.lt(t)&&a<1e5;)o.push(s.toNumber()),s=s.add(n),a++;return o}var kme=ej(function(e,t,n){var s=+e,a=+t;return s+n*(a-s)}),$me=ej(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),Dme=ej(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const tj={rangeStep:Tme,getDigitCount:Ome,interpolateNumber:kme,uninterpolateNumber:$me,uninterpolateTruncation:Dme};function zw(e){return Rme(e)||Ime(e)||u3(e)||Fme()}function Fme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ime(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Rme(e){if(Array.isArray(e))return Vw(e)}function ih(e,t){return zme(e)||Bme(e,t)||u3(e,t)||Lme()}function Lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u3(e,t){if(e){if(typeof e=="string")return Vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vw(e,t)}}function Vw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Bme(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,a=!1,o=void 0;try{for(var i=e[Symbol.iterator](),l;!(s=(l=i.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){a=!0,o=c}finally{try{!s&&i.return!=null&&i.return()}finally{if(a)throw o}}return n}}function zme(e){if(Array.isArray(e))return e}function m3(e){var t=ih(e,2),n=t[0],s=t[1],a=n,o=s;return n>s&&(a=s,o=n),[a,o]}function f3(e,t,n){if(e.lte(0))return new xr(0);var s=tj.getDigitCount(e.toNumber()),a=new xr(10).pow(s),o=e.div(a),i=s!==1?.05:.1,l=new xr(Math.ceil(o.div(i).toNumber())).add(n).mul(i),c=l.mul(a);return t?c:new xr(Math.ceil(c))}function Vme(e,t,n){var s=1,a=new xr(e);if(!a.isint()&&n){var o=Math.abs(e);o<1?(s=new xr(10).pow(tj.getDigitCount(e)-1),a=new xr(Math.floor(a.div(s).toNumber())).mul(s)):o>1&&(a=new xr(Math.floor(e)))}else e===0?a=new xr(Math.floor((t-1)/2)):n||(a=new xr(Math.floor(e)));var i=Math.floor((t-1)/2),l=Mme(Eme(function(c){return a.add(new xr(c-i).mul(s)).toNumber()}),Lw);return l(0,t)}function h3(e,t,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new xr(0),tickMin:new xr(0),tickMax:new xr(0)};var o=f3(new xr(t).sub(e).div(n-1),s,a),i;e<=0&&t>=0?i=new xr(0):(i=new xr(e).add(t).div(2),i=i.sub(new xr(i).mod(o)));var l=Math.ceil(i.sub(e).div(o).toNumber()),c=Math.ceil(new xr(t).sub(i).div(o).toNumber()),d=l+c+1;return d>n?h3(e,t,n,s,a+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:o,tickMin:i.sub(new xr(l).mul(o)),tickMax:i.add(new xr(c).mul(o))})}function Wme(e){var t=ih(e,2),n=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),l=m3([n,s]),c=ih(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(zw(Lw(0,a-1).map(function(){return 1/0}))):[].concat(zw(Lw(0,a-1).map(function(){return-1/0})),[u]);return n>s?Bw(m):m}if(d===u)return Vme(d,a,o);var f=h3(d,u,i,o),h=f.step,x=f.tickMin,p=f.tickMax,v=tj.rangeStep(x,p.add(new xr(.1).mul(h)),h);return n>s?Bw(v):v}function qme(e,t){var n=ih(e,2),s=n[0],a=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=m3([s,a]),l=ih(i,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),m=f3(new xr(d).sub(c).div(u-1),o,0),f=[].concat(zw(tj.rangeStep(new xr(c),new xr(d).sub(new xr(.99).mul(m)),m)),[d]);return s>a?Bw(f):f}var Ume=d3(Wme),Kme=d3(qme),Gme="Invariant failed";function Oc(e,t){throw new Error(Gme)}var Hme=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gg.apply(this,arguments)}function Xme(e,t){return Jme(e)||Zme(e,t)||Qme(e,t)||Yme()}function Yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qme(e,t){if(e){if(typeof e=="string")return GM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GM(e,t)}}function GM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Zme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Jme(e){if(Array.isArray(e))return e}function efe(e,t){if(e==null)return{};var n=tfe(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function tfe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function rfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nfe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,g3(s.key),s)}}function sfe(e,t,n){return t&&nfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function afe(e,t,n){return t=Hg(t),ofe(e,p3()?Reflect.construct(t,n||[],Hg(e).constructor):t.apply(e,n))}function ofe(e,t){if(t&&(gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ife(e)}function ife(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p3=function(){return!!e})()}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hg(e)}function lfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ww(e,t)}function Ww(e,t){return Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ww(e,t)}function x3(e,t,n){return t=g3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g3(e){var t=cfe(e,"string");return gu(t)=="symbol"?t:t+""}function cfe(e,t){if(gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(gu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hm=function(e){function t(){return rfe(this,t),afe(this,t,arguments)}return lfe(t,e),sfe(t,[{key:"render",value:function(){var s=this.props,a=s.offset,o=s.layout,i=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,m=s.yAxis,f=efe(s,Hme),h=ct(f,!1);this.props.direction==="x"&&u.type!=="number"&&Oc();var x=c.map(function(p){var v=d(p,l),j=v.x,g=v.y,N=v.value,_=v.errorVal;if(!_)return null;var b=[],w,S;if(Array.isArray(_)){var C=Xme(_,2);w=C[0],S=C[1]}else w=S=_;if(o==="vertical"){var A=u.scale,P=g+a,k=P+i,E=P-i,O=A(N-w),M=A(N+S);b.push({x1:M,y1:k,x2:M,y2:E}),b.push({x1:O,y1:P,x2:M,y2:P}),b.push({x1:O,y1:k,x2:O,y2:E})}else if(o==="horizontal"){var T=m.scale,V=j+a,I=V-i,F=V+i,D=T(N-w),X=T(N+S);b.push({x1:I,y1:X,x2:F,y2:X}),b.push({x1:V,y1:D,x2:V,y2:X}),b.push({x1:I,y1:D,x2:F,y2:D})}return K.createElement(Dt,Gg({className:"recharts-errorBar",key:"bar-".concat(b.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},h),b.map(function(W){return K.createElement("line",Gg({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return K.createElement(Dt,{className:"recharts-errorBars"},x)}}])}(K.Component);x3(hm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});x3(hm,"displayName","ErrorBar");function lh(e){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}function HM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HM(Object(n),!0).forEach(function(s){dfe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function dfe(e,t,n){return t=ufe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ufe(e){var t=mfe(e,"string");return lh(t)=="symbol"?t:t+""}function mfe(e,t){if(lh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(lh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v3=function(t){var n=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,o=t.legendContent,i=Un(n,jr);if(!i)return null;var l=jr.defaultProps,c=l!==void 0?Ll(Ll({},l),i.props):{},d;return i.props&&i.props.payload?d=i.props&&i.props.payload:o==="children"?d=(s||[]).reduce(function(u,m){var f=m.item,h=m.props,x=h.sectors||h.data||[];return u.concat(x.map(function(p){return{type:i.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(s||[]).map(function(u){var m=u.item,f=m.type.defaultProps,h=f!==void 0?Ll(Ll({},f),m.props):{},x=h.dataKey,p=h.name,v=h.legendType,j=h.hide;return{inactive:j,dataKey:x,type:c.iconType||v||"square",color:w2(m),value:p||x,payload:h}}),Ll(Ll(Ll({},c),jr.getWithHeight(i,a)),{},{payload:d,item:i})};function ch(e){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function XM(e){return xfe(e)||pfe(e)||hfe(e)||ffe()}function ffe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hfe(e,t){if(e){if(typeof e=="string")return qw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qw(e,t)}}function pfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xfe(e){if(Array.isArray(e))return qw(e)}function qw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function YM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(n),!0).forEach(function(s){Rd(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Rd(e,t,n){return t=gfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gfe(e){var t=vfe(e,"string");return ch(t)=="symbol"?t:t+""}function vfe(e,t){if(ch(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ch(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yr(e,t,n){return bt(e)||bt(t)?n:bn(t)?ks(e,t,n):xt(t)?t(e):n}function mf(e,t,n,s){var a=pme(e,function(l){return yr(l,t)});if(n==="number"){var o=a.filter(function(l){return qe(l)||parseFloat(l)});return o.length?[J0(o),Xi(o)]:[1/0,-1/0]}var i=s?a.filter(function(l){return!bt(l)}):a;return i.map(function(l){return bn(l)||l instanceof Date?l:""})}var jfe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,m=a[d].coordinate,f=d>=l-1?a[0].coordinate:a[d+1].coordinate,h=void 0;if(os(m-u)!==os(f-m)){var x=[];if(os(f-m)===os(c[1]-c[0])){h=f;var p=m+c[1]-c[0];x[0]=Math.min(p,(p+u)/2),x[1]=Math.max(p,(p+u)/2)}else{h=u;var v=f+c[1]-c[0];x[0]=Math.min(m,(v+m)/2),x[1]=Math.max(m,(v+m)/2)}var j=[Math.min(m,(h+m)/2),Math.max(m,(h+m)/2)];if(t>j[0]&&t<=j[1]||t>=x[0]&&t<=x[1]){i=a[d].index;break}}else{var g=Math.min(u,f),N=Math.max(u,f);if(t>(g+m)/2&&t<=(N+m)/2){i=a[d].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(s[_].coordinate+s[_+1].coordinate)/2||_>0&&_<l-1&&t>(s[_].coordinate+s[_-1].coordinate)/2&&t<=(s[_].coordinate+s[_+1].coordinate)/2||_===l-1&&t>(s[_].coordinate+s[_-1].coordinate)/2){i=s[_].index;break}return i},w2=function(t){var n,s=t,a=s.type.displayName,o=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Qr(Qr({},t.type.defaultProps),t.props):t.props,i=o.stroke,l=o.fill,c;switch(a){case"Line":c=i;break;case"Area":case"Radar":c=i&&i!=="none"?i:l;break;default:c=l;break}return c},yfe=function(t){var n=t.barSize,s=t.totalSize,a=t.stackGroups,o=a===void 0?{}:a;if(!o)return{};for(var i={},l=Object.keys(o),c=0,d=l.length;c<d;c++)for(var u=o[l[c]].stackGroups,m=Object.keys(u),f=0,h=m.length;f<h;f++){var x=u[m[f]],p=x.items,v=x.cateAxisId,j=p.filter(function(S){return Jo(S.type).indexOf("Bar")>=0});if(j&&j.length){var g=j[0].type.defaultProps,N=g!==void 0?Qr(Qr({},g),j[0].props):j[0].props,_=N.barSize,b=N[v];i[b]||(i[b]=[]);var w=bt(_)?n:_;i[b].push({item:j[0],stackList:j.slice(1),barSize:bt(w)?void 0:is(w,s,0)})}}return i},bfe=function(t){var n=t.barGap,s=t.barCategoryGap,a=t.bandSize,o=t.sizeList,i=o===void 0?[]:o,l=t.maxBarSize,c=i.length;if(c<1)return null;var d=is(n,a,0,!0),u,m=[];if(i[0].barSize===+i[0].barSize){var f=!1,h=a/c,x=i.reduce(function(_,b){return _+b.barSize||0},0);x+=(c-1)*d,x>=a&&(x-=(c-1)*d,d=0),x>=a&&h>0&&(f=!0,h*=.9,x=c*h);var p=(a-x)/2>>0,v={offset:p-d,size:0};u=i.reduce(function(_,b){var w={item:b.item,position:{offset:v.offset+v.size+d,size:f?h:b.barSize}},S=[].concat(XM(_),[w]);return v=S[S.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){S.push({item:C,position:v})}),S},m)}else{var j=is(s,a,0,!0);a-2*j-(c-1)*d<=0&&(d=0);var g=(a-2*j-(c-1)*d)/c;g>1&&(g>>=0);var N=l===+l?Math.min(g,l):g;u=i.reduce(function(_,b,w){var S=[].concat(XM(_),[{item:b.item,position:{offset:j+(g+d)*w+(g-N)/2,size:N}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){S.push({item:C,position:S[S.length-1].position})}),S},m)}return u},Nfe=function(t,n,s,a){var o=s.children,i=s.width,l=s.margin,c=i-(l.left||0)-(l.right||0),d=v3({children:o,legendWidth:c});if(d){var u=a||{},m=u.width,f=u.height,h=d.align,x=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&x==="middle")&&h!=="center"&&qe(t[h]))return Qr(Qr({},t),{},Rd({},h,t[h]+(m||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&x!=="middle"&&qe(t[x]))return Qr(Qr({},t),{},Rd({},x,t[x]+(f||0)))}return t},wfe=function(t,n,s){return bt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},j3=function(t,n,s,a,o){var i=n.props.children,l=us(i,hm).filter(function(d){return wfe(a,o,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var m=yr(u,s);if(bt(m))return d;var f=Array.isArray(m)?[J0(m),Xi(m)]:[m,m],h=c.reduce(function(x,p){var v=yr(u,p,0),j=f[0]-Math.abs(Array.isArray(v)?v[0]:v),g=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(j,x[0]),Math.max(g,x[1])]},[1/0,-1/0]);return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0])}return null},_fe=function(t,n,s,a,o){var i=n.map(function(l){return j3(t,l,s,o,a)}).filter(function(l){return!bt(l)});return i&&i.length?i.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},y3=function(t,n,s,a,o){var i=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&j3(t,c,d,a)||mf(t,d,s,o)});if(s==="number")return i.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return i.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},b3=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},N3=function(t,n,s,a){if(a)return t.map(function(c){return c.coordinate});var o,i,l=t.map(function(c){return c.coordinate===n&&(o=!0),c.coordinate===s&&(i=!0),c.coordinate});return o||l.push(n),i||l.push(s),l},Yo=function(t,n,s){if(!t)return null;var a=t.scale,o=t.duplicateDomain,i=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||s)&&i==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?os(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(m){var f=o?o.indexOf(m):m;return{coordinate:a(f)+d,value:m,offset:d}});return u.filter(function(m){return!El(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,f){return{coordinate:a(m)+d,value:m,index:f,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,f){return{coordinate:a(m)+d,value:o?o[m]:m,index:f,offset:d}})},sb=new WeakMap,nx=function(t,n){if(typeof n!="function")return t;sb.has(t)||sb.set(t,new WeakMap);var s=sb.get(t);if(s.has(n))return s.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,a),a},w3=function(t,n,s){var a=t.scale,o=t.type,i=t.layout,l=t.axisType;if(a==="auto")return i==="radial"&&l==="radiusAxis"?{scale:th(),realScaleType:"band"}:i==="radial"&&l==="angleAxis"?{scale:Vg(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:uf(),realScaleType:"point"}:o==="category"?{scale:th(),realScaleType:"band"}:{scale:Vg(),realScaleType:"linear"};if(Ac(a)){var c="scale".concat(I0(a));return{scale:(WM[c]||uf)(),realScaleType:WM[c]?c:"point"}}return xt(a)?{scale:a}:{scale:uf(),realScaleType:"point"}},QM=1e-4,_3=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,a=t.range(),o=Math.min(a[0],a[1])-QM,i=Math.max(a[0],a[1])+QM,l=t(n[0]),c=t(n[s-1]);(l<o||l>i||c<o||c>i)&&t.domain([n[0],n[s-1]])}},Sfe=function(t,n){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===n)return t[s].position;return null},Cfe=function(t,n){if(!n||n.length!==2||!qe(n[0])||!qe(n[1]))return t;var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),o=[t[0],t[1]];return(!qe(t[0])||t[0]<s)&&(o[0]=s),(!qe(t[1])||t[1]>a)&&(o[1]=a),o[0]>a&&(o[0]=a),o[1]<s&&(o[1]=s),o},Pfe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var o=0,i=0,l=0;l<n;++l){var c=El(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1]):(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1])}},Afe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var o=0,i=0;i<n;++i){var l=El(t[i][s][1])?t[i][s][0]:t[i][s][1];l>=0?(t[i][s][0]=o,t[i][s][1]=o+l,o=t[i][s][1]):(t[i][s][0]=0,t[i][s][1]=0)}},Efe={sign:Pfe,expand:aee,none:cu,silhouette:oee,wiggle:iee,positive:Afe},Mfe=function(t,n,s){var a=n.map(function(l){return l.props.dataKey}),o=Efe[s],i=see().keys(a).value(function(l,c){return+yr(l,c,0)}).order(pw).offset(o);return i(t)},Ofe=function(t,n,s,a,o,i){if(!t)return null;var l=i?n.reverse():n,c={},d=l.reduce(function(m,f){var h,x=(h=f.type)!==null&&h!==void 0&&h.defaultProps?Qr(Qr({},f.type.defaultProps),f.props):f.props,p=x.stackId,v=x.hide;if(v)return m;var j=x[s],g=m[j]||{hasStack:!1,stackGroups:{}};if(bn(p)){var N=g.stackGroups[p]||{numericAxisId:s,cateAxisId:a,items:[]};N.items.push(f),g.hasStack=!0,g.stackGroups[p]=N}else g.stackGroups[gi("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[f]};return Qr(Qr({},m),{},Rd({},j,g))},c),u={};return Object.keys(d).reduce(function(m,f){var h=d[f];if(h.hasStack){var x={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,v){var j=h.stackGroups[v];return Qr(Qr({},p),{},Rd({},v,{numericAxisId:s,cateAxisId:a,items:j.items,stackedData:Mfe(t,j.items,o)}))},x)}return Qr(Qr({},m),{},Rd({},f,h))},u)},S3=function(t,n){var s=n.realScaleType,a=n.type,o=n.tickCount,i=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&a==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=Ume(d,o,l);return t.domain([J0(u),Xi(u)]),{niceTicks:u}}if(o&&a==="number"){var m=t.domain(),f=Kme(m,o,l);return{niceTicks:f}}return null};function vu(e){var t=e.axis,n=e.ticks,s=e.bandSize,a=e.entry,o=e.index,i=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!bt(a[t.dataKey])){var l=yg(n,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return n[o]?n[o].coordinate+s/2:null}var c=yr(a,bt(i)?t.dataKey:i);return bt(c)?null:t.scale(c)}var ZM=function(t){var n=t.axis,s=t.ticks,a=t.offset,o=t.bandSize,i=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+a:null;var c=yr(i,n.dataKey,n.domain[l]);return bt(c)?null:n.scale(c)-o/2+a},Tfe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var a=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return a<=0&&o>=0?0:o<0?o:a}return s[0]},kfe=function(t,n){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Qr(Qr({},t.type.defaultProps),t.props):t.props,o=a.stackId;if(bn(o)){var i=n[o];if(i){var l=i.items.indexOf(t);return l>=0?i.stackedData[l]:null}}return null},$fe=function(t){return t.reduce(function(n,s){return[J0(s.concat([n[0]]).filter(qe)),Xi(s.concat([n[1]]).filter(qe))]},[1/0,-1/0])},C3=function(t,n,s){return Object.keys(t).reduce(function(a,o){var i=t[o],l=i.stackedData,c=l.reduce(function(d,u){var m=$fe(u.slice(n,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},JM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Uw=function(t,n,s){if(xt(t))return t(n,s);if(!Array.isArray(t))return n;var a=[];if(qe(t[0]))a[0]=s?t[0]:Math.min(t[0],n[0]);else if(JM.test(t[0])){var o=+JM.exec(t[0])[1];a[0]=n[0]-o}else xt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(qe(t[1]))a[1]=s?t[1]:Math.max(t[1],n[1]);else if(eO.test(t[1])){var i=+eO.exec(t[1])[1];a[1]=n[1]+i}else xt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Xg=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&n&&n.length>=2){for(var o=QS(n,function(m){return m.coordinate}),i=1/0,l=1,c=o.length;l<c;l++){var d=o[l],u=o[l-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return s?void 0:0},tO=function(t,n,s){return!t||!t.length||jl(t,ks(s,"type.defaultProps.domain"))?n:t},P3=function(t,n){var s=t.type.defaultProps?Qr(Qr({},t.type.defaultProps),t.props):t.props,a=s.dataKey,o=s.name,i=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return Qr(Qr({},ct(t,!1)),{},{dataKey:a,unit:i,formatter:l,name:o||a,color:w2(t),value:yr(n,a),type:c,payload:n,chartType:d,hide:u})};function dh(e){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dh(e)}function rO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(n),!0).forEach(function(s){A3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function A3(e,t,n){return t=Dfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dfe(e){var t=Ffe(e,"string");return dh(t)=="symbol"?t:t+""}function Ffe(e,t){if(dh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(dh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ife(e,t){return zfe(e)||Bfe(e,t)||Lfe(e,t)||Rfe()}function Rfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lfe(e,t){if(e){if(typeof e=="string")return nO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nO(e,t)}}function nO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Bfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function zfe(e){if(Array.isArray(e))return e}var Yg=Math.PI/180,Vfe=function(t){return t*180/Math.PI},Pr=function(t,n,s,a){return{x:t+Math.cos(-Yg*a)*s,y:n+Math.sin(-Yg*a)*s}},E3=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},Wfe=function(t,n,s,a,o){var i=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=is(t.cx,i,i/2),m=is(t.cy,l,l/2),f=E3(i,l,s),h=is(t.innerRadius,f,0),x=is(t.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(v,j){var g=n[j],N=g.domain,_=g.reversed,b;if(bt(g.range))a==="angleAxis"?b=[c,d]:a==="radiusAxis"&&(b=[h,x]),_&&(b=[b[1],b[0]]);else{b=g.range;var w=b,S=Ife(w,2);c=S[0],d=S[1]}var C=w3(g,o),A=C.realScaleType,P=C.scale;P.domain(N).range(b),_3(P);var k=S3(P,Bo(Bo({},g),{},{realScaleType:A})),E=Bo(Bo(Bo({},g),k),{},{range:b,radius:x,realScaleType:A,scale:P,cx:u,cy:m,innerRadius:h,outerRadius:x,startAngle:c,endAngle:d});return Bo(Bo({},v),{},A3({},j,E))},{})},qfe=function(t,n){var s=t.x,a=t.y,o=n.x,i=n.y;return Math.sqrt(Math.pow(s-o,2)+Math.pow(a-i,2))},Ufe=function(t,n){var s=t.x,a=t.y,o=n.cx,i=n.cy,l=qfe({x:s,y:a},{x:o,y:i});if(l<=0)return{radius:l};var c=(s-o)/l,d=Math.acos(c);return a>i&&(d=2*Math.PI-d),{radius:l,angle:Vfe(d),angleInRadian:d}},Kfe=function(t){var n=t.startAngle,s=t.endAngle,a=Math.floor(n/360),o=Math.floor(s/360),i=Math.min(a,o);return{startAngle:n-i*360,endAngle:s-i*360}},Gfe=function(t,n){var s=n.startAngle,a=n.endAngle,o=Math.floor(s/360),i=Math.floor(a/360),l=Math.min(o,i);return t+l*360},sO=function(t,n){var s=t.x,a=t.y,o=Ufe({x:s,y:a},n),i=o.radius,l=o.angle,c=n.innerRadius,d=n.outerRadius;if(i<c||i>d)return!1;if(i===0)return!0;var u=Kfe(n),m=u.startAngle,f=u.endAngle,h=l,x;if(m<=f){for(;h>f;)h-=360;for(;h<m;)h+=360;x=h>=m&&h<=f}else{for(;h>m;)h-=360;for(;h<f;)h+=360;x=h>=f&&h<=m}return x?Bo(Bo({},n),{},{radius:i,angle:Gfe(h,n)}):null},M3=function(t){return!y.isValidElement(t)&&!xt(t)&&typeof t!="boolean"?t.className:""};function uh(e){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}var Hfe=["offset"];function Xfe(e){return Jfe(e)||Zfe(e)||Qfe(e)||Yfe()}function Yfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qfe(e,t){if(e){if(typeof e=="string")return Kw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kw(e,t)}}function Zfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jfe(e){if(Array.isArray(e))return Kw(e)}function Kw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ehe(e,t){if(e==null)return{};var n=the(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function the(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function aO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(n),!0).forEach(function(s){rhe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rhe(e,t,n){return t=nhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nhe(e){var t=she(e,"string");return uh(t)=="symbol"?t:t+""}function she(e,t){if(uh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(uh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mh.apply(this,arguments)}var ahe=function(t){var n=t.value,s=t.formatter,a=bt(t.children)?n:t.children;return xt(s)?s(a):a},ohe=function(t,n){var s=os(n-t),a=Math.min(Math.abs(n-t),360);return s*a},ihe=function(t,n,s){var a=t.position,o=t.viewBox,i=t.offset,l=t.className,c=o,d=c.cx,u=c.cy,m=c.innerRadius,f=c.outerRadius,h=c.startAngle,x=c.endAngle,p=c.clockWise,v=(m+f)/2,j=ohe(h,x),g=j>=0?1:-1,N,_;a==="insideStart"?(N=h+g*i,_=p):a==="insideEnd"?(N=x-g*i,_=!p):a==="end"&&(N=x+g*i,_=p),_=j<=0?_:!_;var b=Pr(d,u,v,N),w=Pr(d,u,v,N+(_?1:-1)*359),S="M".concat(b.x,",").concat(b.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(w.x,",").concat(w.y),C=bt(t.id)?gi("recharts-radial-line-"):t.id;return K.createElement("text",mh({},s,{dominantBaseline:"central",className:Mt("recharts-radial-bar-label",l)}),K.createElement("defs",null,K.createElement("path",{id:C,d:S})),K.createElement("textPath",{xlinkHref:"#".concat(C)},n))},lhe=function(t){var n=t.viewBox,s=t.offset,a=t.position,o=n,i=o.cx,l=o.cy,c=o.innerRadius,d=o.outerRadius,u=o.startAngle,m=o.endAngle,f=(u+m)/2;if(a==="outside"){var h=Pr(i,l,d+s,f),x=h.x,p=h.y;return{x,y:p,textAnchor:x>=i?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+d)/2,j=Pr(i,l,v,f),g=j.x,N=j.y;return{x:g,y:N,textAnchor:"middle",verticalAnchor:"middle"}},che=function(t){var n=t.viewBox,s=t.parentViewBox,a=t.offset,o=t.position,i=n,l=i.x,c=i.y,d=i.width,u=i.height,m=u>=0?1:-1,f=m*a,h=m>0?"end":"start",x=m>0?"start":"end",p=d>=0?1:-1,v=p*a,j=p>0?"end":"start",g=p>0?"start":"end";if(o==="top"){var N={x:l+d/2,y:c-m*a,textAnchor:"middle",verticalAnchor:h};return gn(gn({},N),s?{height:Math.max(c-s.y,0),width:d}:{})}if(o==="bottom"){var _={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:x};return gn(gn({},_),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(o==="left"){var b={x:l-v,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return gn(gn({},b),s?{width:Math.max(b.x-s.x,0),height:u}:{})}if(o==="right"){var w={x:l+d+v,y:c+u/2,textAnchor:g,verticalAnchor:"middle"};return gn(gn({},w),s?{width:Math.max(s.x+s.width-w.x,0),height:u}:{})}var S=s?{width:d,height:u}:{};return o==="insideLeft"?gn({x:l+v,y:c+u/2,textAnchor:g,verticalAnchor:"middle"},S):o==="insideRight"?gn({x:l+d-v,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},S):o==="insideTop"?gn({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:x},S):o==="insideBottom"?gn({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:h},S):o==="insideTopLeft"?gn({x:l+v,y:c+f,textAnchor:g,verticalAnchor:x},S):o==="insideTopRight"?gn({x:l+d-v,y:c+f,textAnchor:j,verticalAnchor:x},S):o==="insideBottomLeft"?gn({x:l+v,y:c+u-f,textAnchor:g,verticalAnchor:h},S):o==="insideBottomRight"?gn({x:l+d-v,y:c+u-f,textAnchor:j,verticalAnchor:h},S):rm(o)&&(qe(o.x)||Jl(o.x))&&(qe(o.y)||Jl(o.y))?gn({x:l+is(o.x,d),y:c+is(o.y,u),textAnchor:"end",verticalAnchor:"end"},S):gn({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},dhe=function(t){return"cx"in t&&qe(t.cx)};function Mn(e){var t=e.offset,n=t===void 0?5:t,s=ehe(e,Hfe),a=gn({offset:n},s),o=a.viewBox,i=a.position,l=a.value,c=a.children,d=a.content,u=a.className,m=u===void 0?"":u,f=a.textBreakAll;if(!o||bt(l)&&bt(c)&&!y.isValidElement(d)&&!xt(d))return null;if(y.isValidElement(d))return y.cloneElement(d,a);var h;if(xt(d)){if(h=y.createElement(d,a),y.isValidElement(h))return h}else h=ahe(a);var x=dhe(o),p=ct(a,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return ihe(a,h,p);var v=x?lhe(a):che(a);return K.createElement(Ec,mh({className:Mt("recharts-label",m)},p,v,{breakAll:f}),h)}Mn.displayName="Label";var O3=function(t){var n=t.cx,s=t.cy,a=t.angle,o=t.startAngle,i=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,m=t.x,f=t.y,h=t.top,x=t.left,p=t.width,v=t.height,j=t.clockWise,g=t.labelViewBox;if(g)return g;if(qe(p)&&qe(v)){if(qe(m)&&qe(f))return{x:m,y:f,width:p,height:v};if(qe(h)&&qe(x))return{x:h,y:x,width:p,height:v}}return qe(m)&&qe(f)?{x:m,y:f,width:0,height:0}:qe(n)&&qe(s)?{cx:n,cy:s,startAngle:o||a||0,endAngle:i||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},uhe=function(t,n){return t?t===!0?K.createElement(Mn,{key:"label-implicit",viewBox:n}):bn(t)?K.createElement(Mn,{key:"label-implicit",viewBox:n,value:t}):y.isValidElement(t)?t.type===Mn?y.cloneElement(t,{key:"label-implicit",viewBox:n}):K.createElement(Mn,{key:"label-implicit",content:t,viewBox:n}):xt(t)?K.createElement(Mn,{key:"label-implicit",content:t,viewBox:n}):rm(t)?K.createElement(Mn,mh({viewBox:n},t,{key:"label-implicit"})):null:null},mhe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,o=O3(t),i=us(a,Mn).map(function(c,d){return y.cloneElement(c,{viewBox:n||o,key:"label-".concat(d)})});if(!s)return i;var l=uhe(t.label,n||o);return[l].concat(Xfe(i))};Mn.parseViewBox=O3;Mn.renderCallByParent=mhe;function fhe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var T3=fhe;const hhe=or(T3);function fh(e){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fh(e)}var phe=["valueAccessor"],xhe=["data","dataKey","clockWise","id","textBreakAll"];function ghe(e){return bhe(e)||yhe(e)||jhe(e)||vhe()}function vhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jhe(e,t){if(e){if(typeof e=="string")return Gw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gw(e,t)}}function yhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bhe(e){if(Array.isArray(e))return Gw(e)}function Gw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qg.apply(this,arguments)}function oO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function iO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(n),!0).forEach(function(s){Nhe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Nhe(e,t,n){return t=whe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function whe(e){var t=_he(e,"string");return fh(t)=="symbol"?t:t+""}function _he(e,t){if(fh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lO(e,t){if(e==null)return{};var n=She(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function She(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Che=function(t){return Array.isArray(t.value)?hhe(t.value):t.value};function Et(e){var t=e.valueAccessor,n=t===void 0?Che:t,s=lO(e,phe),a=s.data,o=s.dataKey,i=s.clockWise,l=s.id,c=s.textBreakAll,d=lO(s,xhe);return!a||!a.length?null:K.createElement(Dt,{className:"recharts-label-list"},a.map(function(u,m){var f=bt(o)?n(u,m):yr(u&&u.payload,o),h=bt(l)?{}:{id:"".concat(l,"-").concat(m)};return K.createElement(Mn,Qg({},ct(u,!0),d,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:Mn.parseViewBox(bt(i)?u:iO(iO({},u),{},{clockWise:i})),key:"label-".concat(m),index:m}))}))}Et.displayName="LabelList";function Phe(e,t){return e?e===!0?K.createElement(Et,{key:"labelList-implicit",data:t}):K.isValidElement(e)||xt(e)?K.createElement(Et,{key:"labelList-implicit",data:t,content:e}):rm(e)?K.createElement(Et,Qg({data:t},e,{key:"labelList-implicit"})):null:null}function Ahe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=us(s,Et).map(function(i,l){return y.cloneElement(i,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var o=Phe(e.label,t);return[o].concat(ghe(a))}Et.renderCallByParent=Ahe;function hh(e){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hh(e)}function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hw.apply(this,arguments)}function cO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function dO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(n),!0).forEach(function(s){Ehe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ehe(e,t,n){return t=Mhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mhe(e){var t=Ohe(e,"string");return hh(t)=="symbol"?t:t+""}function Ohe(e,t){if(hh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var The=function(t,n){var s=os(n-t),a=Math.min(Math.abs(n-t),359.999);return s*a},sx=function(t){var n=t.cx,s=t.cy,a=t.radius,o=t.angle,i=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+a,m=Math.asin(c/u)/Yg,f=d?o:o+i*m,h=Pr(n,s,u,f),x=Pr(n,s,a,f),p=d?o-i*m:o,v=Pr(n,s,u*Math.cos(m*Yg),p);return{center:h,circleTangency:x,lineTangency:v,theta:m}},k3=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,o=t.outerRadius,i=t.startAngle,l=t.endAngle,c=The(i,l),d=i+c,u=Pr(n,s,o,i),m=Pr(n,s,o,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var h=Pr(n,s,a,i),x=Pr(n,s,a,d);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},khe=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,o=t.outerRadius,i=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,m=os(u-d),f=sx({cx:n,cy:s,radius:o,angle:d,sign:m,cornerRadius:i,cornerIsExternal:c}),h=f.circleTangency,x=f.lineTangency,p=f.theta,v=sx({cx:n,cy:s,radius:o,angle:u,sign:-m,cornerRadius:i,cornerIsExternal:c}),j=v.circleTangency,g=v.lineTangency,N=v.theta,_=c?Math.abs(d-u):Math.abs(d-u)-p-N;if(_<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):k3({cx:n,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:u});var b="M ".concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var w=sx({cx:n,cy:s,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),S=w.circleTangency,C=w.lineTangency,A=w.theta,P=sx({cx:n,cy:s,radius:a,angle:u,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),k=P.circleTangency,E=P.lineTangency,O=P.theta,M=c?Math.abs(d-u):Math.abs(d-u)-A-O;if(M<0&&i===0)return"".concat(b,"L").concat(n,",").concat(s,"Z");b+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(m>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,"Z")}else b+="L".concat(n,",").concat(s,"Z");return b},$he={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$3=function(t){var n=dO(dO({},$he),t),s=n.cx,a=n.cy,o=n.innerRadius,i=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,m=n.endAngle,f=n.className;if(i<o||u===m)return null;var h=Mt("recharts-sector",f),x=i-o,p=is(l,x,0,!0),v;return p>0&&Math.abs(u-m)<360?v=khe({cx:s,cy:a,innerRadius:o,outerRadius:i,cornerRadius:Math.min(p,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):v=k3({cx:s,cy:a,innerRadius:o,outerRadius:i,startAngle:u,endAngle:m}),K.createElement("path",Hw({},ct(n,!0),{className:h,d:v,role:"img"}))};function ph(e){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(e)}function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xw.apply(this,arguments)}function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function mO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(s){Dhe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Dhe(e,t,n){return t=Fhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fhe(e){var t=Ihe(e,"string");return ph(t)=="symbol"?t:t+""}function Ihe(e,t){if(ph(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ph(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fO={curveBasisClosed:GJ,curveBasisOpen:HJ,curveBasis:KJ,curveBumpX:TJ,curveBumpY:kJ,curveLinearClosed:XJ,curveLinear:L0,curveMonotoneX:YJ,curveMonotoneY:QJ,curveNatural:ZJ,curveStep:JJ,curveStepAfter:tee,curveStepBefore:eee},ax=function(t){return t.x===+t.x&&t.y===+t.y},Fm=function(t){return t.x},Im=function(t){return t.y},Rhe=function(t,n){if(xt(t))return t;var s="curve".concat(I0(t));return(s==="curveMonotone"||s==="curveBump")&&n?fO["".concat(s).concat(n==="vertical"?"Y":"X")]:fO[s]||L0},Lhe=function(t){var n=t.type,s=n===void 0?"linear":n,a=t.points,o=a===void 0?[]:a,i=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=Rhe(s,l),m=d?o.filter(function(p){return ax(p)}):o,f;if(Array.isArray(i)){var h=d?i.filter(function(p){return ax(p)}):i,x=m.map(function(p,v){return mO(mO({},p),{},{base:h[v]})});return l==="vertical"?f=Xp().y(Im).x1(Fm).x0(function(p){return p.base.x}):f=Xp().x(Fm).y1(Im).y0(function(p){return p.base.y}),f.defined(ax).curve(u),f(x)}return l==="vertical"&&qe(i)?f=Xp().y(Im).x1(Fm).x0(i):qe(i)?f=Xp().x(Fm).y1(Im).y0(i):f=S4().x(Fm).y(Im),f.defined(ax).curve(u),f(m)},cl=function(t){var n=t.className,s=t.points,a=t.path,o=t.pathRef;if((!s||!s.length)&&!a)return null;var i=s&&s.length?Lhe(t):a;return y.createElement("path",Xw({},ct(t,!1),bg(t),{className:Mt("recharts-curve",n),d:i,ref:o}))},D3={exports:{}},Bhe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zhe=Bhe,Vhe=zhe;function F3(){}function I3(){}I3.resetWarningCache=F3;var Whe=function(){function e(s,a,o,i,l,c){if(c!==Vhe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:I3,resetWarningCache:F3};return n.PropTypes=n,n};D3.exports=Whe();var qhe=D3.exports;const ir=or(qhe);var Uhe=Object.getOwnPropertyNames,Khe=Object.getOwnPropertySymbols,Ghe=Object.prototype.hasOwnProperty;function hO(e,t){return function(s,a,o){return e(s,a,o)&&t(s,a,o)}}function ox(e){return function(n,s,a){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,a);var o=a.cache,i=o.get(n),l=o.get(s);if(i&&l)return i===s&&l===n;o.set(n,s),o.set(s,n);var c=e(n,s,a);return o.delete(n),o.delete(s),c}}function pO(e){return Uhe(e).concat(Khe(e))}var Hhe=Object.hasOwn||function(e,t){return Ghe.call(e,t)};function Gc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Xhe="__v",Yhe="__o",Qhe="_owner",xO=Object.getOwnPropertyDescriptor,gO=Object.keys;function Zhe(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function Jhe(e,t){return Gc(e.getTime(),t.getTime())}function epe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function tpe(e,t){return e===t}function vO(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),o=e.entries(),i,l,c=0;(i=o.next())&&!i.done;){for(var d=t.entries(),u=!1,m=0;(l=d.next())&&!l.done;){if(a[m]){m++;continue}var f=i.value,h=l.value;if(n.equals(f[0],h[0],c,m,e,t,n)&&n.equals(f[1],h[1],f[0],h[0],e,t,n)){u=a[m]=!0;break}m++}if(!u)return!1;c++}return!0}var rpe=Gc;function npe(e,t,n){var s=gO(e),a=s.length;if(gO(t).length!==a)return!1;for(;a-- >0;)if(!R3(e,t,n,s[a]))return!1;return!0}function Rm(e,t,n){var s=pO(e),a=s.length;if(pO(t).length!==a)return!1;for(var o,i,l;a-- >0;)if(o=s[a],!R3(e,t,n,o)||(i=xO(e,o),l=xO(t,o),(i||l)&&(!i||!l||i.configurable!==l.configurable||i.enumerable!==l.enumerable||i.writable!==l.writable)))return!1;return!0}function spe(e,t){return Gc(e.valueOf(),t.valueOf())}function ape(e,t){return e.source===t.source&&e.flags===t.flags}function jO(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),o=e.values(),i,l;(i=o.next())&&!i.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&n.equals(i.value,l.value,i.value,l.value,e,t,n)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function ope(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function ipe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function R3(e,t,n,s){return(s===Qhe||s===Yhe||s===Xhe)&&(e.$$typeof||t.$$typeof)?!0:Hhe(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var lpe="[object Arguments]",cpe="[object Boolean]",dpe="[object Date]",upe="[object Error]",mpe="[object Map]",fpe="[object Number]",hpe="[object Object]",ppe="[object RegExp]",xpe="[object Set]",gpe="[object String]",vpe="[object URL]",jpe=Array.isArray,yO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,bO=Object.assign,ype=Object.prototype.toString.call.bind(Object.prototype.toString);function bpe(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,o=e.areMapsEqual,i=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,m=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(x,p,v){if(x===p)return!0;if(x==null||p==null)return!1;var j=typeof x;if(j!==typeof p)return!1;if(j!=="object")return j==="number"?i(x,p,v):j==="function"?a(x,p,v):!1;var g=x.constructor;if(g!==p.constructor)return!1;if(g===Object)return l(x,p,v);if(jpe(x))return t(x,p,v);if(yO!=null&&yO(x))return m(x,p,v);if(g===Date)return n(x,p,v);if(g===RegExp)return d(x,p,v);if(g===Map)return o(x,p,v);if(g===Set)return u(x,p,v);var N=ype(x);return N===dpe?n(x,p,v):N===ppe?d(x,p,v):N===mpe?o(x,p,v):N===xpe?u(x,p,v):N===hpe?typeof x.then!="function"&&typeof p.then!="function"&&l(x,p,v):N===vpe?f(x,p,v):N===upe?s(x,p,v):N===lpe?l(x,p,v):N===cpe||N===fpe||N===gpe?c(x,p,v):!1}}function Npe(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?Rm:Zhe,areDatesEqual:Jhe,areErrorsEqual:epe,areFunctionsEqual:tpe,areMapsEqual:s?hO(vO,Rm):vO,areNumbersEqual:rpe,areObjectsEqual:s?Rm:npe,arePrimitiveWrappersEqual:spe,areRegExpsEqual:ape,areSetsEqual:s?hO(jO,Rm):jO,areTypedArraysEqual:s?Rm:ope,areUrlsEqual:ipe};if(n&&(a=bO({},a,n(a))),t){var o=ox(a.areArraysEqual),i=ox(a.areMapsEqual),l=ox(a.areObjectsEqual),c=ox(a.areSetsEqual);a=bO({},a,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:l,areSetsEqual:c})}return a}function wpe(e){return function(t,n,s,a,o,i,l){return e(t,n,l)}}function _pe(e){var t=e.circular,n=e.comparator,s=e.createState,a=e.equals,o=e.strict;if(s)return function(c,d){var u=s(),m=u.cache,f=m===void 0?t?new WeakMap:void 0:m,h=u.meta;return n(c,d,{cache:f,equals:a,meta:h,strict:o})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var i={cache:void 0,equals:a,meta:void 0,strict:o};return function(c,d){return n(c,d,i)}}var Spe=Tl();Tl({strict:!0});Tl({circular:!0});Tl({circular:!0,strict:!0});Tl({createInternalComparator:function(){return Gc}});Tl({strict:!0,createInternalComparator:function(){return Gc}});Tl({circular:!0,createInternalComparator:function(){return Gc}});Tl({circular:!0,createInternalComparator:function(){return Gc},strict:!0});function Tl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,o=e.strict,i=o===void 0?!1:o,l=Npe(e),c=bpe(l),d=s?s(c):wpe(c);return _pe({circular:n,comparator:c,createState:a,equals:d,strict:i})}function Cpe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function NO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function a(o){n<0&&(n=o),o-n>t?(e(o),n=-1):Cpe(a)};requestAnimationFrame(s)}function Yw(e){"@babel/helpers - typeof";return Yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yw(e)}function Ppe(e){return Ope(e)||Mpe(e)||Epe(e)||Ape()}function Ape(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Epe(e,t){if(e){if(typeof e=="string")return wO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wO(e,t)}}function wO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Mpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ope(e){if(Array.isArray(e))return e}function Tpe(){var e={},t=function(){return null},n=!1,s=function a(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var i=o,l=Ppe(i),c=l[0],d=l.slice(1);if(typeof c=="number"){NO(a.bind(null,d),c);return}a(c),NO(a.bind(null,d));return}Yw(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,s(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function xh(e){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(e)}function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function SO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(n),!0).forEach(function(s){L3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function L3(e,t,n){return t=kpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kpe(e){var t=$pe(e,"string");return xh(t)==="symbol"?t:String(t)}function $pe(e,t){if(xh(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(xh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dpe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,a){return s.filter(function(o){return a.includes(o)})})},Fpe=function(t){return t},Ipe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ff=function(t,n){return Object.keys(n).reduce(function(s,a){return SO(SO({},s),{},L3({},a,t(a,n[a])))},{})},CO=function(t,n,s){return t.map(function(a){return"".concat(Ipe(a)," ").concat(n,"ms ").concat(s)}).join(",")};function Rpe(e,t){return zpe(e)||Bpe(e,t)||B3(e,t)||Lpe()}function Lpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function zpe(e){if(Array.isArray(e))return e}function Vpe(e){return Upe(e)||qpe(e)||B3(e)||Wpe()}function Wpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B3(e,t){if(e){if(typeof e=="string")return Qw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(e,t)}}function qpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Upe(e){if(Array.isArray(e))return Qw(e)}function Qw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Zg=1e-4,z3=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},V3=function(t,n){return t.map(function(s,a){return s*Math.pow(n,a)}).reduce(function(s,a){return s+a})},PO=function(t,n){return function(s){var a=z3(t,n);return V3(a,s)}},Kpe=function(t,n){return function(s){var a=z3(t,n),o=[].concat(Vpe(a.map(function(i,l){return i*l}).slice(1)),[0]);return V3(o,s)}},AO=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0],o=n[1],i=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,o=0,i=1,l=1;break;case"ease":a=.25,o=.1,i=.25,l=1;break;case"ease-in":a=.42,o=0,i=1,l=1;break;case"ease-out":a=.42,o=0,i=.58,l=1;break;case"ease-in-out":a=0,o=0,i=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=Rpe(d,4);a=u[0],o=u[1],i=u[2],l=u[3]}}}var m=PO(a,i),f=PO(o,l),h=Kpe(a,i),x=function(j){return j>1?1:j<0?0:j},p=function(j){for(var g=j>1?1:j,N=g,_=0;_<8;++_){var b=m(N)-g,w=h(N);if(Math.abs(b-g)<Zg||w<Zg)return f(N);N=x(N-b/w)}return f(N)};return p.isStepper=!1,p},Gpe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,a=t.damping,o=a===void 0?8:a,i=t.dt,l=i===void 0?17:i,c=function(u,m,f){var h=-(u-m)*s,x=f*o,p=f+(h-x)*l/1e3,v=f*l/1e3+u;return Math.abs(v-m)<Zg&&Math.abs(p)<Zg?[m,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},Hpe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AO(a);case"spring":return Gpe();default:if(a.split("(")[0]==="cubic-bezier")return AO(a)}return typeof a=="function"?a:null};function gh(e){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gh(e)}function EO(e){return Qpe(e)||Ype(e)||W3(e)||Xpe()}function Xpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ype(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qpe(e){if(Array.isArray(e))return Jw(e)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(s){Zw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zw(e,t,n){return t=Zpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zpe(e){var t=Jpe(e,"string");return gh(t)==="symbol"?t:String(t)}function Jpe(e,t){if(gh(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(gh(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function exe(e,t){return nxe(e)||rxe(e,t)||W3(e,t)||txe()}function txe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W3(e,t){if(e){if(typeof e=="string")return Jw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jw(e,t)}}function Jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function rxe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function nxe(e){if(Array.isArray(e))return e}var Jg=function(t,n,s){return t+(n-t)*s},e1=function(t){var n=t.from,s=t.to;return n!==s},sxe=function e(t,n,s){var a=ff(function(o,i){if(e1(i)){var l=t(i.from,i.to,i.velocity),c=exe(l,2),d=c[0],u=c[1];return $n($n({},i),{},{from:d,velocity:u})}return i},n);return s<1?ff(function(o,i){return e1(i)?$n($n({},i),{},{velocity:Jg(i.velocity,a[o].velocity,s),from:Jg(i.from,a[o].from,s)}):i},n):e(t,a,s-1)};const axe=function(e,t,n,s,a){var o=Dpe(e,t),i=o.reduce(function(v,j){return $n($n({},v),{},Zw({},j,[e[j],t[j]]))},{}),l=o.reduce(function(v,j){return $n($n({},v),{},Zw({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,d,u,m=function(){return null},f=function(){return ff(function(j,g){return g.from},l)},h=function(){return!Object.values(l).filter(e1).length},x=function(j){d||(d=j);var g=j-d,N=g/n.dt;l=sxe(n,l,N),a($n($n($n({},e),t),f())),d=j,h()||(c=requestAnimationFrame(m))},p=function(j){u||(u=j);var g=(j-u)/s,N=ff(function(b,w){return Jg.apply(void 0,EO(w).concat([n(g)]))},i);if(a($n($n($n({},e),t),N)),g<1)c=requestAnimationFrame(m);else{var _=ff(function(b,w){return Jg.apply(void 0,EO(w).concat([n(1)]))},i);a($n($n($n({},e),t),_))}};return m=n.isStepper?x:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}var oxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ixe(e,t){if(e==null)return{};var n=lxe(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function lxe(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function ab(e){return mxe(e)||uxe(e)||dxe(e)||cxe()}function cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dxe(e,t){if(e){if(typeof e=="string")return t1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t1(e,t)}}function uxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mxe(e){if(Array.isArray(e))return t1(e)}function t1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function OO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(n),!0).forEach(function(s){Ym(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ym(e,t,n){return t=q3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hxe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,q3(s.key),s)}}function pxe(e,t,n){return t&&hxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q3(e){var t=xxe(e,"string");return ju(t)==="symbol"?t:String(t)}function xxe(e,t){if(ju(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ju(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r1(e,t)}function r1(e,t){return r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},r1(e,t)}function vxe(e){var t=jxe();return function(){var s=ev(e),a;if(t){var o=ev(this).constructor;a=Reflect.construct(s,arguments,o)}else a=s.apply(this,arguments);return n1(this,a)}}function n1(e,t){if(t&&(ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s1(e)}function s1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ev(e)}var Fs=function(e){gxe(n,e);var t=vxe(n);function n(s,a){var o;fxe(this,n),o=t.call(this,s,a);var i=o.props,l=i.isActive,c=i.attributeName,d=i.from,u=i.to,m=i.steps,f=i.children,h=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(s1(o)),o.changeStyle=o.changeStyle.bind(s1(o)),!l||h<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:u}),n1(o);if(m&&m.length)o.state={style:m[0].style};else if(d){if(typeof f=="function")return o.state={style:d},n1(o);o.state={style:c?Ym({},c,d):d}}else o.state={style:{}};return o}return pxe(n,[{key:"componentDidMount",value:function(){var a=this.props,o=a.isActive,i=a.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var o=this.props,i=o.isActive,l=o.canBegin,c=o.attributeName,d=o.shouldReAnimate,u=o.to,m=o.from,f=this.state.style;if(l){if(!i){var h={style:c?Ym({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(h);return}if(!(Spe(a.to,u)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=x||d?m:a.to;if(this.state&&f){var v={style:c?Ym({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(v)}this.runAnimation(Ea(Ea({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var o=this,i=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,m=a.onAnimationEnd,f=a.onAnimationStart,h=axe(i,l,Hpe(d),c,this.changeStyle),x=function(){o.stopJSAnimation=h()};this.manager.start([f,u,x,c,m])}},{key:"runStepAnimation",value:function(a){var o=this,i=a.steps,l=a.begin,c=a.onAnimationStart,d=i[0],u=d.style,m=d.duration,f=m===void 0?0:m,h=function(p,v,j){if(j===0)return p;var g=v.duration,N=v.easing,_=N===void 0?"ease":N,b=v.style,w=v.properties,S=v.onAnimationEnd,C=j>0?i[j-1]:v,A=w||Object.keys(b);if(typeof _=="function"||_==="spring")return[].concat(ab(p),[o.runJSAnimation.bind(o,{from:C.style,to:b,duration:g,easing:_}),g]);var P=CO(A,g,_),k=Ea(Ea(Ea({},C.style),b),{},{transition:P});return[].concat(ab(p),[k,g,S]).filter(Fpe)};return this.manager.start([c].concat(ab(i.reduce(h,[u,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Tpe());var o=a.begin,i=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,m=a.onAnimationEnd,f=a.steps,h=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof h=="function"||d==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var p=l?Ym({},l,c):c,v=CO(Object.keys(p),i,d);x.start([u,o,Ea(Ea({},p),{},{transition:v}),i,m])}},{key:"render",value:function(){var a=this.props,o=a.children;a.begin;var i=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=ixe(a,oxe),d=y.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!l||d===0||i<=0)return o;var m=function(h){var x=h.props,p=x.style,v=p===void 0?{}:p,j=x.className,g=y.cloneElement(h,Ea(Ea({},c),{},{style:Ea(Ea({},v),u),className:j}));return g};return d===1?m(y.Children.only(o)):K.createElement("div",null,y.Children.map(o,function(f){return m(f)}))}}]),n}(y.PureComponent);Fs.displayName="Animate";Fs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Fs.propTypes={from:ir.oneOfType([ir.object,ir.string]),to:ir.oneOfType([ir.object,ir.string]),attributeName:ir.string,duration:ir.number,begin:ir.number,easing:ir.oneOfType([ir.string,ir.func]),steps:ir.arrayOf(ir.shape({duration:ir.number.isRequired,style:ir.object.isRequired,easing:ir.oneOfType([ir.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ir.func]),properties:ir.arrayOf("string"),onAnimationEnd:ir.func})),children:ir.oneOfType([ir.node,ir.func]),isActive:ir.bool,canBegin:ir.bool,onAnimationEnd:ir.func,shouldReAnimate:ir.bool,onAnimationStart:ir.func,onAnimationReStart:ir.func};function vh(e){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(e)}function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tv.apply(this,arguments)}function yxe(e,t){return _xe(e)||wxe(e,t)||Nxe(e,t)||bxe()}function bxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nxe(e,t){if(e){if(typeof e=="string")return TO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TO(e,t)}}function TO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function wxe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function _xe(e){if(Array.isArray(e))return e}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(n),!0).forEach(function(s){Sxe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Sxe(e,t,n){return t=Cxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cxe(e){var t=Pxe(e,"string");return vh(t)=="symbol"?t:t+""}function Pxe(e,t){if(vh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(vh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DO=function(t,n,s,a,o){var i=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(i>0&&o instanceof Array){for(var m=[0,0,0,0],f=0,h=4;f<h;f++)m[f]=o[f]>i?i:o[f];u="M".concat(t,",").concat(n+l*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(t+c*m[0],",").concat(n)),u+="L ".concat(t+s-c*m[1],",").concat(n),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*m[1])),u+="L ".concat(t+s,",").concat(n+a-l*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(t+s-c*m[2],",").concat(n+a)),u+="L ".concat(t+c*m[3],",").concat(n+a),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+a-l*m[3])),u+="Z"}else if(i>0&&o===+o&&o>0){var x=Math.min(i,o);u="M ".concat(t,",").concat(n+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(n,`
            L `).concat(t+s-c*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*x,`
            L `).concat(t+s,",").concat(n+a-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s-c*x,",").concat(n+a,`
            L `).concat(t+c*x,",").concat(n+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(n+a-l*x," Z")}else u="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},Axe=function(t,n){if(!t||!n)return!1;var s=t.x,a=t.y,o=n.x,i=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(o,o+l),u=Math.max(o,o+l),m=Math.min(i,i+c),f=Math.max(i,i+c);return s>=d&&s<=u&&a>=m&&a<=f}return!1},Exe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rj=function(t){var n=$O($O({},Exe),t),s=y.useRef(),a=y.useState(-1),o=yxe(a,2),i=o[0],l=o[1];y.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var _=s.current.getTotalLength();_&&l(_)}catch{}},[]);var c=n.x,d=n.y,u=n.width,m=n.height,f=n.radius,h=n.className,x=n.animationEasing,p=n.animationDuration,v=n.animationBegin,j=n.isAnimationActive,g=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var N=Mt("recharts-rectangle",h);return g?K.createElement(Fs,{canBegin:i>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:x,isActive:g},function(_){var b=_.width,w=_.height,S=_.x,C=_.y;return K.createElement(Fs,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:j,easing:x},K.createElement("path",tv({},ct(n,!0),{className:N,d:DO(S,C,b,w,f),ref:s})))}):K.createElement("path",tv({},ct(n,!0),{className:N,d:DO(c,d,u,m,f)}))},Mxe=["points","className","baseLinePoints","connectNulls"];function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wd.apply(this,arguments)}function Oxe(e,t){if(e==null)return{};var n=Txe(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Txe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function FO(e){return Fxe(e)||Dxe(e)||$xe(e)||kxe()}function kxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xe(e,t){if(e){if(typeof e=="string")return a1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(e,t)}}function Dxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fxe(e){if(Array.isArray(e))return a1(e)}function a1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var IO=function(t){return t&&t.x===+t.x&&t.y===+t.y},Ixe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){IO(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),IO(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},hf=function(t,n){var s=Ixe(t);n&&(s=[s.reduce(function(o,i){return[].concat(FO(o),FO(i))},[])]);var a=s.map(function(o){return o.reduce(function(i,l,c){return"".concat(i).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},Rxe=function(t,n,s){var a=hf(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(hf(n.reverse(),s).slice(1))},U3=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,o=t.connectNulls,i=Oxe(t,Mxe);if(!n||!n.length)return null;var l=Mt("recharts-polygon",s);if(a&&a.length){var c=i.stroke&&i.stroke!=="none",d=Rxe(n,a,o);return K.createElement("g",{className:l},K.createElement("path",wd({},ct(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",stroke:"none",d})),c?K.createElement("path",wd({},ct(i,!0),{fill:"none",d:hf(n,o)})):null,c?K.createElement("path",wd({},ct(i,!0),{fill:"none",d:hf(a,o)})):null)}var u=hf(n,o);return K.createElement("path",wd({},ct(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",className:l,d:u}))};function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o1.apply(this,arguments)}var ap=function(t){var n=t.cx,s=t.cy,a=t.r,o=t.className,i=Mt("recharts-dot",o);return n===+n&&s===+s&&a===+a?y.createElement("circle",o1({},ct(t,!1),bg(t),{className:i,cx:n,cy:s,r:a})):null};function jh(e){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}var Lxe=["x","y","top","left","width","height","className"];function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i1.apply(this,arguments)}function RO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Bxe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(n),!0).forEach(function(s){zxe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zxe(e,t,n){return t=Vxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vxe(e){var t=Wxe(e,"string");return jh(t)=="symbol"?t:t+""}function Wxe(e,t){if(jh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qxe(e,t){if(e==null)return{};var n=Uxe(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Uxe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Kxe=function(t,n,s,a,o,i){return"M".concat(t,",").concat(o,"v").concat(a,"M").concat(i,",").concat(n,"h").concat(s)},Gxe=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,o=a===void 0?0:a,i=t.top,l=i===void 0?0:i,c=t.left,d=c===void 0?0:c,u=t.width,m=u===void 0?0:u,f=t.height,h=f===void 0?0:f,x=t.className,p=qxe(t,Lxe),v=Bxe({x:s,y:o,top:l,left:d,width:m,height:h},p);return!qe(s)||!qe(o)||!qe(m)||!qe(h)||!qe(l)||!qe(d)?null:K.createElement("path",i1({},ct(v,!0),{className:Mt("recharts-cross",x),d:Kxe(s,o,m,h,l,d)}))},Hxe=Z0,Xxe=t3,Yxe=ko;function Qxe(e,t){return e&&e.length?Hxe(e,Yxe(t),Xxe):void 0}var Zxe=Qxe;const Jxe=or(Zxe);var ege=Z0,tge=ko,rge=r3;function nge(e,t){return e&&e.length?ege(e,tge(t),rge):void 0}var sge=nge;const age=or(sge);var oge=["cx","cy","angle","ticks","axisLine"],ige=["ticks","tick","angle","tickFormatter","stroke"];function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pf.apply(this,arguments)}function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Bl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(n),!0).forEach(function(s){nj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function BO(e,t){if(e==null)return{};var n=lge(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function lge(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function cge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zO(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,G3(s.key),s)}}function dge(e,t,n){return t&&zO(e.prototype,t),n&&zO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uge(e,t,n){return t=rv(t),mge(e,K3()?Reflect.construct(t,n||[],rv(e).constructor):t.apply(e,n))}function mge(e,t){if(t&&(yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fge(e)}function fge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K3=function(){return!!e})()}function rv(e){return rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rv(e)}function hge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l1(e,t)}function l1(e,t){return l1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},l1(e,t)}function nj(e,t,n){return t=G3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G3(e){var t=pge(e,"string");return yu(t)=="symbol"?t:t+""}function pge(e,t){if(yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(yu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sj=function(e){function t(){return cge(this,t),uge(this,t,arguments)}return hge(t,e),dge(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,o=this.props,i=o.angle,l=o.cx,c=o.cy;return Pr(l,c,a,i)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,o=s.cy,i=s.angle,l=s.ticks,c=Jxe(l,function(u){return u.coordinate||0}),d=age(l,function(u){return u.coordinate||0});return{cx:a,cy:o,startAngle:i,endAngle:i,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,o=s.cy,i=s.angle,l=s.ticks,c=s.axisLine,d=BO(s,oge),u=l.reduce(function(x,p){return[Math.min(x[0],p.coordinate),Math.max(x[1],p.coordinate)]},[1/0,-1/0]),m=Pr(a,o,u[0],i),f=Pr(a,o,u[1],i),h=Bl(Bl(Bl({},ct(d,!1)),{},{fill:"none"},ct(c,!1)),{},{x1:m.x,y1:m.y,x2:f.x,y2:f.y});return K.createElement("line",pf({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var s=this,a=this.props,o=a.ticks,i=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=BO(a,ige),m=this.getTickTextAnchor(),f=ct(u,!1),h=ct(i,!1),x=o.map(function(p,v){var j=s.getTickValueCoord(p),g=Bl(Bl(Bl(Bl({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},f),{},{stroke:"none",fill:d},h),{},{index:v},j),{},{payload:p});return K.createElement(Dt,pf({className:Mt("recharts-polar-radius-axis-tick",M3(i)),key:"tick-".concat(p.coordinate)},vl(s.props,p,v)),t.renderTickItem(i,g,c?c(p.value,v):p.value))});return K.createElement(Dt,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var s=this.props,a=s.ticks,o=s.axisLine,i=s.tick;return!a||!a.length?null:K.createElement(Dt,{className:Mt("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),Mn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,o){var i;return K.isValidElement(s)?i=K.cloneElement(s,a):xt(s)?i=s(a):i=K.createElement(Ec,pf({},a,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(y.PureComponent);nj(sj,"displayName","PolarRadiusAxis");nj(sj,"axisType","radiusAxis");nj(sj,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xl.apply(this,arguments)}function VO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function zl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(n),!0).forEach(function(s){aj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WO(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,X3(s.key),s)}}function gge(e,t,n){return t&&WO(e.prototype,t),n&&WO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vge(e,t,n){return t=nv(t),jge(e,H3()?Reflect.construct(t,n||[],nv(e).constructor):t.apply(e,n))}function jge(e,t){if(t&&(bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yge(e)}function yge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H3=function(){return!!e})()}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nv(e)}function bge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c1(e,t)}function c1(e,t){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},c1(e,t)}function aj(e,t,n){return t=X3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X3(e){var t=Nge(e,"string");return bu(t)=="symbol"?t:t+""}function Nge(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wge=Math.PI/180,qO=1e-5,oj=function(e){function t(){return xge(this,t),vge(this,t,arguments)}return bge(t,e),gge(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,o=a.cx,i=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,m=Pr(o,i,l,s.coordinate),f=Pr(o,i,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:m.x,y1:m.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,o=Math.cos(-s.coordinate*wge),i;return o>qO?i=a==="outer"?"start":"end":o<-qO?i=a==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,o=s.cy,i=s.radius,l=s.axisLine,c=s.axisLineType,d=zl(zl({},ct(this.props,!1)),{},{fill:"none"},ct(l,!1));if(c==="circle")return K.createElement(ap,Xl({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:o,r:i}));var u=this.props.ticks,m=u.map(function(f){return Pr(a,o,i,f.coordinate)});return K.createElement(U3,Xl({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,o=a.ticks,i=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=ct(this.props,!1),m=ct(i,!1),f=zl(zl({},u),{},{fill:"none"},ct(l,!1)),h=o.map(function(x,p){var v=s.getTickLineCoord(x),j=s.getTickTextAnchor(x),g=zl(zl(zl({textAnchor:j},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:x,x:v.x2,y:v.y2});return K.createElement(Dt,Xl({className:Mt("recharts-polar-angle-axis-tick",M3(i)),key:"tick-".concat(x.coordinate)},vl(s.props,x,p)),l&&K.createElement("line",Xl({className:"recharts-polar-angle-axis-tick-line"},f,v)),i&&t.renderTickItem(i,g,c?c(x.value,p):x.value))});return K.createElement(Dt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var s=this.props,a=s.ticks,o=s.radius,i=s.axisLine;return o<=0||!a||!a.length?null:K.createElement(Dt,{className:Mt("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,o){var i;return K.isValidElement(s)?i=K.cloneElement(s,a):xt(s)?i=s(a):i=K.createElement(Ec,Xl({},a,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(y.PureComponent);aj(oj,"displayName","PolarAngleAxis");aj(oj,"axisType","angleAxis");aj(oj,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var _ge=X4,Sge=_ge(Object.getPrototypeOf,Object),_2=Sge,Cge=xi,Pge=_2,Age=to,Ege="[object Object]",Mge=Function.prototype,Oge=Object.prototype,Y3=Mge.toString,Tge=Oge.hasOwnProperty,kge=Y3.call(Object);function $ge(e){if(!Age(e)||Cge(e)!=Ege)return!1;var t=Pge(e);if(t===null)return!0;var n=Tge.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Y3.call(n)==kge}var Q3=$ge;const Dge=or(Q3);var Fge=xi,Ige=to,Rge="[object Boolean]";function Lge(e){return e===!0||e===!1||Ige(e)&&Fge(e)==Rge}var Bge=Lge;const zge=or(Bge);function yh(e){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(e)}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sv.apply(this,arguments)}function Vge(e,t){return Kge(e)||Uge(e,t)||qge(e,t)||Wge()}function Wge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qge(e,t){if(e){if(typeof e=="string")return UO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UO(e,t)}}function UO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Uge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Kge(e){if(Array.isArray(e))return e}function KO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(n),!0).forEach(function(s){Gge(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Gge(e,t,n){return t=Hge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hge(e){var t=Xge(e,"string");return yh(t)=="symbol"?t:t+""}function Xge(e,t){if(yh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(yh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HO=function(t,n,s,a,o){var i=s-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-i/2,",").concat(n+o),l+="L ".concat(t+s-i/2-a,",").concat(n+o),l+="L ".concat(t,",").concat(n," Z"),l},Yge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qge=function(t){var n=GO(GO({},Yge),t),s=y.useRef(),a=y.useState(-1),o=Vge(a,2),i=o[0],l=o[1];y.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,m=n.lowerWidth,f=n.height,h=n.className,x=n.animationEasing,p=n.animationDuration,v=n.animationBegin,j=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||f!==+f||u===0&&m===0||f===0)return null;var g=Mt("recharts-trapezoid",h);return j?K.createElement(Fs,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:f,x:c,y:d},duration:p,animationEasing:x,isActive:j},function(N){var _=N.upperWidth,b=N.lowerWidth,w=N.height,S=N.x,C=N.y;return K.createElement(Fs,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:x},K.createElement("path",sv({},ct(n,!0),{className:g,d:HO(S,C,_,b,w),ref:s})))}):K.createElement("g",null,K.createElement("path",sv({},ct(n,!0),{className:g,d:HO(c,d,u,m,f)})))},Zge=["option","shapeType","propTransformer","activeClassName","isActive"];function bh(e){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(e)}function Jge(e,t){if(e==null)return{};var n=eve(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function eve(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function XO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(n),!0).forEach(function(s){tve(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tve(e,t,n){return t=rve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rve(e){var t=nve(e,"string");return bh(t)=="symbol"?t:t+""}function nve(e,t){if(bh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sve(e,t){return av(av({},t),e)}function ave(e,t){return e==="symbols"}function YO(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return K.createElement(rj,n);case"trapezoid":return K.createElement(Qge,n);case"sector":return K.createElement($3,n);case"symbols":if(ave(t))return K.createElement(z0,n);break;default:return null}}function ove(e){return y.isValidElement(e)?e.props:e}function ov(e){var t=e.option,n=e.shapeType,s=e.propTransformer,a=s===void 0?sve:s,o=e.activeClassName,i=o===void 0?"recharts-active-shape":o,l=e.isActive,c=Jge(e,Zge),d;if(y.isValidElement(t))d=y.cloneElement(t,av(av({},c),ove(t)));else if(xt(t))d=t(c);else if(Dge(t)&&!zge(t)){var u=a(t,c);d=K.createElement(YO,{shapeType:n,elementProps:u})}else{var m=c;d=K.createElement(YO,{shapeType:n,elementProps:m})}return l?K.createElement(Dt,{className:i},d):d}function ij(e,t){return t!=null&&"trapezoids"in e.props}function lj(e,t){return t!=null&&"sectors"in e.props}function Nh(e,t){return t!=null&&"points"in e.props}function ive(e,t){var n,s,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,o=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&o}function lve(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function cve(e,t){var n=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return n&&s&&a}function dve(e,t){var n;return ij(e,t)?n=ive:lj(e,t)?n=lve:Nh(e,t)&&(n=cve),n}function uve(e,t){var n;return ij(e,t)?n="trapezoids":lj(e,t)?n="sectors":Nh(e,t)&&(n="points"),n}function mve(e,t){if(ij(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(lj(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Nh(e,t)?t.payload:{}}function fve(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,a=uve(n,t),o=mve(n,t),i=s.filter(function(c,d){var u=jl(o,c),m=n.props[a].filter(function(x){var p=dve(n,t);return p(x,t)}),f=n.props[a].indexOf(m[m.length-1]),h=d===f;return u&&h}),l=s.indexOf(i[i.length-1]);return l}var Tx;function Nu(e){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(e)}function _d(){return _d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_d.apply(this,arguments)}function QO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QO(Object(n),!0).forEach(function(s){ma(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZO(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,J3(s.key),s)}}function pve(e,t,n){return t&&ZO(e.prototype,t),n&&ZO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xve(e,t,n){return t=iv(t),gve(e,Z3()?Reflect.construct(t,n||[],iv(e).constructor):t.apply(e,n))}function gve(e,t){if(t&&(Nu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vve(e)}function vve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z3=function(){return!!e})()}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iv(e)}function jve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d1(e,t)}function d1(e,t){return d1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},d1(e,t)}function ma(e,t,n){return t=J3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J3(e){var t=yve(e,"string");return Nu(t)=="symbol"?t:t+""}function yve(e,t){if(Nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Nu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xn=function(e){function t(n){var s;return hve(this,t),s=xve(this,t,[n]),ma(s,"pieRef",null),ma(s,"sectorRefs",[]),ma(s,"id",gi("recharts-pie-")),ma(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),xt(a)&&a()}),ma(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),xt(a)&&a()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return jve(t,e),pve(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,l=o.labelLine,c=o.dataKey,d=o.valueKey,u=ct(this.props,!1),m=ct(i,!1),f=ct(l,!1),h=i&&i.offsetRadius||20,x=s.map(function(p,v){var j=(p.startAngle+p.endAngle)/2,g=Pr(p.cx,p.cy,p.outerRadius+h,j),N=_r(_r(_r(_r({},u),p),{},{stroke:"none"},m),{},{index:v,textAnchor:t.getTextAnchor(g.x,p.cx)},g),_=_r(_r(_r(_r({},u),p),{},{fill:"none",stroke:p.fill},f),{},{index:v,points:[Pr(p.cx,p.cy,p.outerRadius,j),g]}),b=c;return bt(c)&&bt(d)?b="value":bt(c)&&(b=d),K.createElement(Dt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(i,N,yr(p,b)))});return K.createElement(Dt,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(s){var a=this,o=this.props,i=o.activeShape,l=o.blendStroke,c=o.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var m=a.isActiveIndex(u),f=c&&a.hasActiveIndex()?c:null,h=m?i:f,x=_r(_r({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return K.createElement(Dt,_d({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},vl(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),K.createElement(ov,_d({option:h,isActive:m,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,o=a.sectors,i=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state,f=m.prevSectors,h=m.prevIsAnimationActive;return K.createElement(Fs,{begin:l,duration:c,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var p=x.t,v=[],j=o&&o[0],g=j.startAngle;return o.forEach(function(N,_){var b=f&&f[_],w=_>0?ks(N,"paddingAngle",0):0;if(b){var S=zr(b.endAngle-b.startAngle,N.endAngle-N.startAngle),C=_r(_r({},N),{},{startAngle:g+w,endAngle:g+S(p)+w});v.push(C),g=C.endAngle}else{var A=N.endAngle,P=N.startAngle,k=zr(0,A-P),E=k(p),O=_r(_r({},N),{},{startAngle:g+w,endAngle:g+E+w});v.push(O),g=O.endAngle}}),K.createElement(Dt,null,s.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[i].focus(),a.setState({sectorToFocus:i});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,o=s.isAnimationActive,i=this.state.prevSectors;return o&&a&&a.length&&(!i||!jl(i,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,o=a.hide,i=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,m=a.innerRadius,f=a.outerRadius,h=a.isAnimationActive,x=this.state.isAnimationFinished;if(o||!i||!i.length||!qe(d)||!qe(u)||!qe(m)||!qe(f))return null;var p=Mt("recharts-pie",l);return K.createElement(Dt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(i),Mn.renderCallByParent(this.props,null,!1),(!h||x)&&Et.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,o){if(K.isValidElement(s))return K.cloneElement(s,a);if(xt(s))return s(a);var i=Mt("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return K.createElement(cl,_d({},a,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(s,a,o){if(K.isValidElement(s))return K.cloneElement(s,a);var i=o;if(xt(s)&&(i=s(a),K.isValidElement(i)))return i;var l=Mt("recharts-pie-label-text",typeof s!="boolean"&&!xt(s)?s.className:"");return K.createElement(Ec,_d({},a,{alignmentBaseline:"middle",className:l}),i)}}])}(y.PureComponent);Tx=Xn;ma(Xn,"displayName","Pie");ma(Xn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!$s.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ma(Xn,"parseDeltaAngle",function(e,t){var n=os(t-e),s=Math.min(Math.abs(t-e),360);return n*s});ma(Xn,"getRealPieData",function(e){var t=e.data,n=e.children,s=ct(e,!1),a=us(n,Kt);return t&&t.length?t.map(function(o,i){return _r(_r(_r({payload:o},s),o),a&&a[i]&&a[i].props)}):a&&a.length?a.map(function(o){return _r(_r({},s),o.props)}):[]});ma(Xn,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,a=t.width,o=t.height,i=E3(a,o),l=s+is(e.cx,a,a/2),c=n+is(e.cy,o,o/2),d=is(e.innerRadius,i,0),u=is(e.outerRadius,i,i*.8),m=e.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});ma(Xn,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?_r(_r({},t.type.defaultProps),t.props):t.props,a=Tx.getRealPieData(s);if(!a||!a.length)return null;var o=s.cornerRadius,i=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,m=s.valueKey,f=s.tooltipType,h=Math.abs(s.minAngle),x=Tx.parseCoordinateOfPie(s,n),p=Tx.parseDeltaAngle(i,l),v=Math.abs(p),j=d;bt(d)&&bt(m)?(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):bt(d)&&(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=m);var g=a.filter(function(C){return yr(C,j,0)!==0}).length,N=(v>=360?g:g-1)*c,_=v-g*h-N,b=a.reduce(function(C,A){var P=yr(A,j,0);return C+(qe(P)?P:0)},0),w;if(b>0){var S;w=a.map(function(C,A){var P=yr(C,j,0),k=yr(C,u,A),E=(qe(P)?P:0)/b,O;A?O=S.endAngle+os(p)*c*(P!==0?1:0):O=i;var M=O+os(p)*((P!==0?h:0)+E*_),T=(O+M)/2,V=(x.innerRadius+x.outerRadius)/2,I=[{name:k,value:P,payload:C,dataKey:j,type:f}],F=Pr(x.cx,x.cy,V,T);return S=_r(_r(_r({percent:E,cornerRadius:o,name:k,tooltipPayload:I,midAngle:T,middleRadius:V,tooltipPosition:F},C),x),{},{value:yr(C,j),startAngle:O,endAngle:M,payload:C,paddingAngle:os(p)*c}),S})}return _r(_r({},x),{},{sectors:w,data:a})});var bve=Math.ceil,Nve=Math.max;function wve(e,t,n,s){for(var a=-1,o=Nve(bve((t-e)/(n||1)),0),i=Array(o);o--;)i[s?o:++a]=e,e+=n;return i}var _ve=wve,Sve=xR,JO=1/0,Cve=17976931348623157e292;function Pve(e){if(!e)return e===0?e:0;if(e=Sve(e),e===JO||e===-JO){var t=e<0?-1:1;return t*Cve}return e===e?e:0}var e5=Pve,Ave=_ve,Eve=U0,ob=e5;function Mve(e){return function(t,n,s){return s&&typeof s!="number"&&Eve(t,n,s)&&(n=s=void 0),t=ob(t),n===void 0?(n=t,t=0):n=ob(n),s=s===void 0?t<n?1:-1:ob(s),Ave(t,n,s,e)}}var Ove=Mve,Tve=Ove,kve=Tve(),$ve=kve;const lv=or($ve);function wh(e){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wh(e)}function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function tT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(s){t5(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function t5(e,t,n){return t=Dve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dve(e){var t=Fve(e,"string");return wh(t)=="symbol"?t:t+""}function Fve(e,t){if(wh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ive=["Webkit","Moz","O","ms"],Rve=function(t,n){var s=t.replace(/(\w)/,function(o){return o.toUpperCase()}),a=Ive.reduce(function(o,i){return tT(tT({},o),{},t5({},i+s,n))},{});return a[t]=n,a};function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cv.apply(this,arguments)}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ib(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(s){zs(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Lve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n5(s.key),s)}}function Bve(e,t,n){return t&&nT(e.prototype,t),n&&nT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zve(e,t,n){return t=dv(t),Vve(e,r5()?Reflect.construct(t,n||[],dv(e).constructor):t.apply(e,n))}function Vve(e,t){if(t&&(wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wve(e)}function Wve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r5=function(){return!!e})()}function dv(e){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dv(e)}function qve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u1(e,t)}function u1(e,t){return u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},u1(e,t)}function zs(e,t,n){return t=n5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n5(e){var t=Uve(e,"string");return wu(t)=="symbol"?t:t+""}function Uve(e,t){if(wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kve=function(t){var n=t.data,s=t.startIndex,a=t.endIndex,o=t.x,i=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=uf().domain(lv(0,c)).range([o,o+i-l]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},sT=function(t){return t.changedTouches&&!!t.changedTouches.length},_u=function(e){function t(n){var s;return Lve(this,t),s=zve(this,t,[n]),zs(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),zs(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),zs(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,o=a.endIndex,i=a.onDragEnd,l=a.startIndex;i==null||i({endIndex:o,startIndex:l})}),s.detachDragEndListener()}),zs(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),zs(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),zs(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),zs(s,"handleSlideDragStart",function(a){var o=sT(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return qve(t,e),Bve(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,o=s.endX,i=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,m=Math.min(a,o),f=Math.max(a,o),h=t.getIndexInRange(i,m),x=t.getIndexInRange(i,f);return{startIndex:h-h%c,endIndex:x===u?u:x-x%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,o=a.data,i=a.tickFormatter,l=a.dataKey,c=yr(o[s],l,s);return xt(i)?i(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,o=a.slideMoveStartX,i=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,f=c.startIndex,h=c.endIndex,x=c.onChange,p=s.pageX-o;p>0?p=Math.min(p,d+u-m-l,d+u-m-i):p<0&&(p=Math.max(p,d-i,d-l));var v=this.getIndex({startX:i+p,endX:l+p});(v.startIndex!==f||v.endIndex!==h)&&x&&x(v),this.setState({startX:i+p,endX:l+p,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var o=sT(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,o=a.brushMoveStartX,i=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[i],u=this.props,m=u.x,f=u.width,h=u.travellerWidth,x=u.onChange,p=u.gap,v=u.data,j={startX:this.state.startX,endX:this.state.endX},g=s.pageX-o;g>0?g=Math.min(g,m+f-h-d):g<0&&(g=Math.max(g,m-d)),j[i]=d+g;var N=this.getIndex(j),_=N.startIndex,b=N.endIndex,w=function(){var C=v.length-1;return i==="startX"&&(l>c?_%p===0:b%p===0)||l<c&&b===C||i==="endX"&&(l>c?b%p===0:_%p===0)||l>c&&b===C};this.setState(zs(zs({},i,d+g),"brushMoveStartX",s.pageX),function(){x&&w()&&x(N)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var o=this,i=this.state,l=i.scaleValues,c=i.startX,d=i.endX,u=this.state[a],m=l.indexOf(u);if(m!==-1){var f=m+s;if(!(f===-1||f>=l.length)){var h=l[f];a==="startX"&&h>=d||a==="endX"&&h<=c||this.setState(zs({},a,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,o=s.y,i=s.width,l=s.height,c=s.fill,d=s.stroke;return K.createElement("rect",{stroke:d,fill:c,x:a,y:o,width:i,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,o=s.y,i=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,m=y.Children.only(d);return m?K.cloneElement(m,{x:a,y:o,width:i,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var o,i,l=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,f=c.traveller,h=c.ariaLabel,x=c.data,p=c.startIndex,v=c.endIndex,j=Math.max(s,this.props.x),g=ib(ib({},ct(this.props,!1)),{},{x:j,y:d,width:u,height:m}),N=h||"Min value: ".concat((o=x[p])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=x[v])===null||i===void 0?void 0:i.name);return K.createElement(Dt,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),l.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,g))}},{key:"renderSlide",value:function(s,a){var o=this.props,i=o.y,l=o.height,c=o.stroke,d=o.travellerWidth,u=Math.min(s,a)+d,m=Math.max(Math.abs(a-s)-d,0);return K.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:i,width:m,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,o=s.endIndex,i=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,m=u.startX,f=u.endX,h=5,x={pointerEvents:"none",fill:d};return K.createElement(Dt,{className:"recharts-brush-texts"},K.createElement(Ec,cv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,f)-h,y:i+l/2},x),this.getTextOfTick(a)),K.createElement(Ec,cv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,f)+c+h,y:i+l/2},x),this.getTextOfTick(o)))}},{key:"render",value:function(){var s=this.props,a=s.data,o=s.className,i=s.children,l=s.x,c=s.y,d=s.width,u=s.height,m=s.alwaysShowText,f=this.state,h=f.startX,x=f.endX,p=f.isTextActive,v=f.isSlideMoving,j=f.isTravellerMoving,g=f.isTravellerFocused;if(!a||!a.length||!qe(l)||!qe(c)||!qe(d)||!qe(u)||d<=0||u<=0)return null;var N=Mt("recharts-brush",o),_=K.Children.count(i)===1,b=Rve("userSelect","none");return K.createElement(Dt,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(h,x),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(x,"endX"),(p||v||j||g||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,o=s.y,i=s.width,l=s.height,c=s.stroke,d=Math.floor(o+l/2)-1;return K.createElement(K.Fragment,null,K.createElement("rect",{x:a,y:o,width:i,height:l,fill:c,stroke:"none"}),K.createElement("line",{x1:a+1,y1:d,x2:a+i-1,y2:d,fill:"none",stroke:"#fff"}),K.createElement("line",{x1:a+1,y1:d+2,x2:a+i-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var o;return K.isValidElement(s)?o=K.cloneElement(s,a):xt(s)?o=s(a):o=t.renderDefaultTraveller(a),o}},{key:"getDerivedStateFromProps",value:function(s,a){var o=s.data,i=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,m=s.endIndex;if(o!==a.prevData||d!==a.prevUpdateId)return ib({prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:i},o&&o.length?Kve({data:o,width:i,x:l,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(i!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+i-c]);var f=a.scale.domain().map(function(h){return a.scale(h)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:i,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,a){for(var o=s.length,i=0,l=o-1;l-i>1;){var c=Math.floor((i+l)/2);s[c]>a?l=c:i=c}return a>=s[l]?l:i}}])}(y.PureComponent);zs(_u,"displayName","Brush");zs(_u,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Gve=YS;function Hve(e,t){var n;return Gve(e,function(s,a,o){return n=t(s,a,o),!n}),!!n}var Xve=Hve,Yve=B4,Qve=ko,Zve=Xve,Jve=js,e0e=U0;function t0e(e,t,n){var s=Jve(e)?Yve:Zve;return n&&e0e(e,t,n)&&(t=void 0),s(e,Qve(t))}var r0e=t0e;const n0e=or(r0e);var So=function(t,n){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===n},aT=dR;function s0e(e,t,n){t=="__proto__"&&aT?aT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var S2=s0e,a0e=S2,o0e=iR,i0e=ko;function l0e(e,t){var n={};return t=i0e(t),o0e(e,function(s,a,o){a0e(n,a,t(s,a,o))}),n}var c0e=l0e;const d0e=or(c0e);function u0e(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var m0e=u0e,f0e=YS;function h0e(e,t){var n=!0;return f0e(e,function(s,a,o){return n=!!t(s,a,o),n}),n}var p0e=h0e,x0e=m0e,g0e=p0e,v0e=ko,j0e=js,y0e=U0;function b0e(e,t,n){var s=j0e(e)?x0e:g0e;return n&&y0e(e,t,n)&&(t=void 0),s(e,v0e(t))}var N0e=b0e;const s5=or(N0e);var w0e=["x","y"];function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},m1.apply(this,arguments)}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(s){_0e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _0e(e,t,n){return t=S0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S0e(e){var t=C0e(e,"string");return _h(t)=="symbol"?t:t+""}function C0e(e,t){if(_h(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(_h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P0e(e,t){if(e==null)return{};var n=A0e(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function A0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function E0e(e,t){var n=e.x,s=e.y,a=P0e(e,w0e),o="".concat(n),i=parseInt(o,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),u=parseInt(d,10),m="".concat(t.width||a.width),f=parseInt(m,10);return Lm(Lm(Lm(Lm(Lm({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function iT(e){return K.createElement(ov,m1({shapeType:"rectangle",propTransformer:E0e,activeClassName:"recharts-active-bar"},e))}var M0e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var o=qe(s)||vZ(s);return o?t(s,a):(o||Oc(),n)}},O0e=["value","background"],a5;function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function T0e(e,t){if(e==null)return{};var n=k0e(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function k0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uv.apply(this,arguments)}function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(n),!0).forEach(function(s){Yi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,i5(s.key),s)}}function D0e(e,t,n){return t&&cT(e.prototype,t),n&&cT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function F0e(e,t,n){return t=mv(t),I0e(e,o5()?Reflect.construct(t,n||[],mv(e).constructor):t.apply(e,n))}function I0e(e,t){if(t&&(Su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R0e(e)}function R0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o5=function(){return!!e})()}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(e)}function L0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f1(e,t)}function f1(e,t){return f1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},f1(e,t)}function Yi(e,t,n){return t=i5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i5(e){var t=B0e(e,"string");return Su(t)=="symbol"?t:t+""}function B0e(e,t){if(Su(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Su(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rt=function(e){function t(){var n;$0e(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=F0e(this,t,[].concat(a)),Yi(n,"state",{isAnimationFinished:!1}),Yi(n,"id",gi("recharts-bar-")),Yi(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),Yi(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return L0e(t,e),D0e(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,o=this.props,i=o.shape,l=o.dataKey,c=o.activeIndex,d=o.activeBar,u=ct(this.props,!1);return s&&s.map(function(m,f){var h=f===c,x=h?d:i,p=an(an(an({},u),m),{},{isActive:h,option:x,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return K.createElement(Dt,uv({className:"recharts-bar-rectangle"},vl(a.props,m,f),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(f)}),K.createElement(iT,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,o=a.data,i=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,f=this.state.prevData;return K.createElement(Fs,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var x=h.t,p=o.map(function(v,j){var g=f&&f[j];if(g){var N=zr(g.x,v.x),_=zr(g.y,v.y),b=zr(g.width,v.width),w=zr(g.height,v.height);return an(an({},v),{},{x:N(x),y:_(x),width:b(x),height:w(x)})}if(i==="horizontal"){var S=zr(0,v.height),C=S(x);return an(an({},v),{},{y:v.y+v.height-C,height:C})}var A=zr(0,v.width),P=A(x);return an(an({},v),{},{width:P})});return K.createElement(Dt,null,s.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,o=s.isAnimationActive,i=this.state.prevData;return o&&a&&a.length&&(!i||!jl(i,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,o=a.data,i=a.dataKey,l=a.activeIndex,c=ct(this.props.background,!1);return o.map(function(d,u){d.value;var m=d.background,f=T0e(d,O0e);if(!m)return null;var h=an(an(an(an(an({},f),{},{fill:"#eee"},m),c),vl(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:i,index:u,className:"recharts-bar-background-rectangle"});return K.createElement(iT,uv({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},h))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,l=o.xAxis,c=o.yAxis,d=o.layout,u=o.children,m=us(u,hm);if(!m)return null;var f=d==="vertical"?i[0].height/2:i[0].width/2,h=function(v,j){var g=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:g,errorVal:yr(v,j)}},x={clipPath:s?"url(#clipPath-".concat(a,")"):null};return K.createElement(Dt,x,m.map(function(p){return K.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:i,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,o=s.data,i=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,m=s.width,f=s.height,h=s.isAnimationActive,x=s.background,p=s.id;if(a||!o||!o.length)return null;var v=this.state.isAnimationFinished,j=Mt("recharts-bar",i),g=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,_=g||N,b=bt(p)?this.id:p;return K.createElement(Dt,{className:j},g||N?K.createElement("defs",null,K.createElement("clipPath",{id:"clipPath-".concat(b)},K.createElement("rect",{x:g?d:d-m/2,y:N?u:u-f/2,width:g?m:m*2,height:N?f:f*2}))):null,K.createElement(Dt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(b,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,b),(!h||v)&&Et.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(y.PureComponent);a5=rt;Yi(rt,"displayName","Bar");Yi(rt,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!$s.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yi(rt,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,a=e.bandSize,o=e.xAxis,i=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,f=e.offset,h=Sfe(s,n);if(!h)return null;var x=t.layout,p=n.type.defaultProps,v=p!==void 0?an(an({},p),n.props):n.props,j=v.dataKey,g=v.children,N=v.minPointSize,_=x==="horizontal"?i:o,b=d?_.scale.domain():null,w=Tfe({numericAxis:_}),S=us(g,Kt),C=m.map(function(A,P){var k,E,O,M,T,V;d?k=Cfe(d[u+P],b):(k=yr(A,j),Array.isArray(k)||(k=[w,k]));var I=M0e(N,a5.defaultProps.minPointSize)(k[1],P);if(x==="horizontal"){var F,D=[i.scale(k[0]),i.scale(k[1])],X=D[0],W=D[1];E=ZM({axis:o,ticks:l,bandSize:a,offset:h.offset,entry:A,index:P}),O=(F=W??X)!==null&&F!==void 0?F:void 0,M=h.size;var B=X-W;if(T=Number.isNaN(B)?0:B,V={x:E,y:i.y,width:M,height:i.height},Math.abs(I)>0&&Math.abs(T)<Math.abs(I)){var q=os(T||I)*(Math.abs(I)-Math.abs(T));O-=q,T+=q}}else{var te=[o.scale(k[0]),o.scale(k[1])],Y=te[0],H=te[1];if(E=Y,O=ZM({axis:i,ticks:c,bandSize:a,offset:h.offset,entry:A,index:P}),M=H-Y,T=h.size,V={x:o.x,y:O,width:o.width,height:T},Math.abs(I)>0&&Math.abs(M)<Math.abs(I)){var L=os(M||I)*(Math.abs(I)-Math.abs(M));M+=L}}return an(an(an({},A),{},{x:E,y:O,width:M,height:T,value:d?k:k[1],payload:A,background:V},S&&S[P]&&S[P].props),{},{tooltipPayload:[P3(n,A)],tooltipPosition:{x:E+M/2,y:O+T/2}})});return an({data:C,layout:x},f)});function Sh(e){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sh(e)}function z0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,l5(s.key),s)}}function V0e(e,t,n){return t&&dT(e.prototype,t),n&&dT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(s){cj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cj(e,t,n){return t=l5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l5(e){var t=W0e(e,"string");return Sh(t)=="symbol"?t:t+""}function W0e(e,t){if(Sh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dj=function(t,n,s,a,o){var i=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(n),m={left:s.left,leftMirror:s.left,right:i-s.right,rightMirror:i-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},f=!!Un(d,rt);return u.reduce(function(h,x){var p=n[x],v=p.orientation,j=p.domain,g=p.padding,N=g===void 0?{}:g,_=p.mirror,b=p.reversed,w="".concat(v).concat(_?"Mirror":""),S,C,A,P,k;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var E=j[1]-j[0],O=1/0,M=p.categoricalDomain.sort(NZ);if(M.forEach(function(te,Y){Y>0&&(O=Math.min((te||0)-(M[Y-1]||0),O))}),Number.isFinite(O)){var T=O/E,V=p.layout==="vertical"?s.height:s.width;if(p.padding==="gap"&&(S=T*V/2),p.padding==="no-gap"){var I=is(t.barCategoryGap,T*V),F=T*V/2;S=F-I-(F-I)/V*I}}}a==="xAxis"?C=[s.left+(N.left||0)+(S||0),s.left+s.width-(N.right||0)-(S||0)]:a==="yAxis"?C=c==="horizontal"?[s.top+s.height-(N.bottom||0),s.top+(N.top||0)]:[s.top+(N.top||0)+(S||0),s.top+s.height-(N.bottom||0)-(S||0)]:C=p.range,b&&(C=[C[1],C[0]]);var D=w3(p,o,f),X=D.scale,W=D.realScaleType;X.domain(j).range(C),_3(X);var B=S3(X,Da(Da({},p),{},{realScaleType:W}));a==="xAxis"?(k=v==="top"&&!_||v==="bottom"&&_,A=s.left,P=m[w]-k*p.height):a==="yAxis"&&(k=v==="left"&&!_||v==="right"&&_,A=m[w]-k*p.width,P=s.top);var q=Da(Da(Da({},p),B),{},{realScaleType:W,x:A,y:P,scale:X,width:a==="xAxis"?s.width:p.width,height:a==="yAxis"?s.height:p.height});return q.bandSize=Xg(q,B),!p.hide&&a==="xAxis"?m[w]+=(k?-1:1)*q.height:p.hide||(m[w]+=(k?-1:1)*q.width),Da(Da({},h),{},cj({},x,q))},{})},c5=function(t,n){var s=t.x,a=t.y,o=n.x,i=n.y;return{x:Math.min(s,o),y:Math.min(a,i),width:Math.abs(o-s),height:Math.abs(i-a)}},q0e=function(t){var n=t.x1,s=t.y1,a=t.x2,o=t.y2;return c5({x:n,y:s},{x:a,y:o})},d5=function(){function e(t){z0e(this,e),this.scale=t}return V0e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),a=s[0],o=s[s.length-1];return a<=o?n>=a&&n<=o:n>=o&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();cj(d5,"EPS",1e-4);var C2=function(t){var n=Object.keys(t).reduce(function(s,a){return Da(Da({},s),{},cj({},a,d5.create(t[a])))},{});return Da(Da({},n),{},{apply:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.bandAware,l=o.position;return d0e(a,function(c,d){return n[d].apply(c,{bandAware:i,position:l})})},isInRange:function(a){return s5(a,function(o,i){return n[i].isInRange(o)})}})};function U0e(e){return(e%180+180)%180}var K0e=function(t){var n=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=U0e(a),i=o*Math.PI/180,l=Math.atan(s/n),c=i>l&&i<Math.PI-l?s/Math.sin(i):n/Math.cos(i);return Math.abs(c)},G0e=ko,H0e=im,X0e=lm;function Y0e(e){return function(t,n,s){var a=Object(t);if(!H0e(t)){var o=G0e(n);t=X0e(t),n=function(l){return o(a[l],l,a)}}var i=e(t,n,s);return i>-1?a[o?t[i]:i]:void 0}}var Q0e=Y0e,Z0e=e5;function J0e(e){var t=Z0e(e),n=t%1;return t===t?n?t-n:t:0}var eje=J0e,tje=rR,rje=ko,nje=eje,sje=Math.max;function aje(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:nje(n);return a<0&&(a=sje(s+a,0)),tje(e,rje(t),a)}var oje=aje,ije=Q0e,lje=oje,cje=ije(lje),dje=cje;const uje=or(dje);var mje=NQ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),P2=y.createContext(void 0),A2=y.createContext(void 0),u5=y.createContext(void 0),m5=y.createContext({}),f5=y.createContext(void 0),h5=y.createContext(0),p5=y.createContext(0),mT=function(t){var n=t.state,s=n.xAxisMap,a=n.yAxisMap,o=n.offset,i=t.clipPathId,l=t.children,c=t.width,d=t.height,u=mje(o);return K.createElement(P2.Provider,{value:s},K.createElement(A2.Provider,{value:a},K.createElement(m5.Provider,{value:o},K.createElement(u5.Provider,{value:u},K.createElement(f5.Provider,{value:i},K.createElement(h5.Provider,{value:d},K.createElement(p5.Provider,{value:c},l)))))))},fje=function(){return y.useContext(f5)},x5=function(t){var n=y.useContext(P2);n==null&&Oc();var s=n[t];return s==null&&Oc(),s},hje=function(){var t=y.useContext(P2);return $i(t)},pje=function(){var t=y.useContext(A2),n=uje(t,function(s){return s5(s.domain,Number.isFinite)});return n||$i(t)},g5=function(t){var n=y.useContext(A2);n==null&&Oc();var s=n[t];return s==null&&Oc(),s},xje=function(){var t=y.useContext(u5);return t},gje=function(){return y.useContext(m5)},E2=function(){return y.useContext(p5)},M2=function(){return y.useContext(h5)};function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function vje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jje(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,j5(s.key),s)}}function yje(e,t,n){return t&&jje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bje(e,t,n){return t=fv(t),Nje(e,v5()?Reflect.construct(t,n||[],fv(e).constructor):t.apply(e,n))}function Nje(e,t){if(t&&(Cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wje(e)}function wje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v5=function(){return!!e})()}function fv(e){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fv(e)}function _je(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h1(e,t)}function h1(e,t){return h1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},h1(e,t)}function fT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function hT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(n),!0).forEach(function(s){O2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function O2(e,t,n){return t=j5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j5(e){var t=Sje(e,"string");return Cu(t)=="symbol"?t:t+""}function Sje(e,t){if(Cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cje(e,t){return Mje(e)||Eje(e,t)||Aje(e,t)||Pje()}function Pje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aje(e,t){if(e){if(typeof e=="string")return pT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pT(e,t)}}function pT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Eje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function Mje(e){if(Array.isArray(e))return e}function p1(){return p1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p1.apply(this,arguments)}var Oje=function(t,n){var s;return K.isValidElement(t)?s=K.cloneElement(t,n):xt(t)?s=t(n):s=K.createElement("line",p1({},n,{className:"recharts-reference-line-line"})),s},Tje=function(t,n,s,a,o,i,l,c,d){var u=o.x,m=o.y,f=o.width,h=o.height;if(s){var x=d.y,p=t.y.apply(x,{position:i});if(So(d,"discard")&&!t.y.isInRange(p))return null;var v=[{x:u+f,y:p},{x:u,y:p}];return c==="left"?v.reverse():v}if(n){var j=d.x,g=t.x.apply(j,{position:i});if(So(d,"discard")&&!t.x.isInRange(g))return null;var N=[{x:g,y:m+h},{x:g,y:m}];return l==="top"?N.reverse():N}if(a){var _=d.segment,b=_.map(function(w){return t.apply(w,{position:i})});return So(d,"discard")&&n0e(b,function(w){return!t.isInRange(w)})?null:b}return null};function kje(e){var t=e.x,n=e.y,s=e.segment,a=e.xAxisId,o=e.yAxisId,i=e.shape,l=e.className,c=e.alwaysShow,d=fje(),u=x5(a),m=g5(o),f=xje();if(!d||!f)return null;Ka(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=C2({x:u.scale,y:m.scale}),x=bn(t),p=bn(n),v=s&&s.length===2,j=Tje(h,x,p,v,f,e.position,u.orientation,m.orientation,e);if(!j)return null;var g=Cje(j,2),N=g[0],_=N.x,b=N.y,w=g[1],S=w.x,C=w.y,A=So(e,"hidden")?"url(#".concat(d,")"):void 0,P=hT(hT({clipPath:A},ct(e,!0)),{},{x1:_,y1:b,x2:S,y2:C});return K.createElement(Dt,{className:Mt("recharts-reference-line",l)},Oje(i,P),Mn.renderCallByParent(e,q0e({x1:_,y1:b,x2:S,y2:C})))}var yl=function(e){function t(){return vje(this,t),bje(this,t,arguments)}return _je(t,e),yje(t,[{key:"render",value:function(){return K.createElement(kje,this.props)}}])}(K.Component);O2(yl,"displayName","ReferenceLine");O2(yl,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function x1(){return x1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},x1.apply(this,arguments)}function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function xT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function gT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(n),!0).forEach(function(s){uj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dje(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,b5(s.key),s)}}function Fje(e,t,n){return t&&Dje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ije(e,t,n){return t=hv(t),Rje(e,y5()?Reflect.construct(t,n||[],hv(e).constructor):t.apply(e,n))}function Rje(e,t){if(t&&(Pu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lje(e)}function Lje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y5=function(){return!!e})()}function hv(e){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hv(e)}function Bje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g1(e,t)}function g1(e,t){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},g1(e,t)}function uj(e,t,n){return t=b5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b5(e){var t=zje(e,"string");return Pu(t)=="symbol"?t:t+""}function zje(e,t){if(Pu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Pu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vje=function(t){var n=t.x,s=t.y,a=t.xAxis,o=t.yAxis,i=C2({x:a.scale,y:o.scale}),l=i.apply({x:n,y:s},{bandAware:!0});return So(t,"discard")&&!i.isInRange(l)?null:l},mj=function(e){function t(){return $je(this,t),Ije(this,t,arguments)}return Bje(t,e),Fje(t,[{key:"render",value:function(){var s=this.props,a=s.x,o=s.y,i=s.r,l=s.alwaysShow,c=s.clipPathId,d=bn(a),u=bn(o);if(Ka(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=Vje(this.props);if(!m)return null;var f=m.x,h=m.y,x=this.props,p=x.shape,v=x.className,j=So(this.props,"hidden")?"url(#".concat(c,")"):void 0,g=gT(gT({clipPath:j},ct(this.props,!0)),{},{cx:f,cy:h});return K.createElement(Dt,{className:Mt("recharts-reference-dot",v)},t.renderDot(p,g),Mn.renderCallByParent(this.props,{x:f-i,y:h-i,width:2*i,height:2*i}))}}])}(K.Component);uj(mj,"displayName","ReferenceDot");uj(mj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});uj(mj,"renderDot",function(e,t){var n;return K.isValidElement(e)?n=K.cloneElement(e,t):xt(e)?n=e(t):n=K.createElement(ap,x1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function v1(){return v1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},v1.apply(this,arguments)}function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function jT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(s){fj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Wje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qje(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,w5(s.key),s)}}function Uje(e,t,n){return t&&qje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kje(e,t,n){return t=pv(t),Gje(e,N5()?Reflect.construct(t,n||[],pv(e).constructor):t.apply(e,n))}function Gje(e,t){if(t&&(Au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hje(e)}function Hje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N5=function(){return!!e})()}function pv(e){return pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pv(e)}function Xje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j1(e,t)}function j1(e,t){return j1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},j1(e,t)}function fj(e,t,n){return t=w5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w5(e){var t=Yje(e,"string");return Au(t)=="symbol"?t:t+""}function Yje(e,t){if(Au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Au(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qje=function(t,n,s,a,o){var i=o.x1,l=o.x2,c=o.y1,d=o.y2,u=o.xAxis,m=o.yAxis;if(!u||!m)return null;var f=C2({x:u.scale,y:m.scale}),h={x:t?f.x.apply(i,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},x={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(d,{position:"end"}):f.y.rangeMax};return So(o,"discard")&&(!f.isInRange(h)||!f.isInRange(x))?null:c5(h,x)},hj=function(e){function t(){return Wje(this,t),Kje(this,t,arguments)}return Xje(t,e),Uje(t,[{key:"render",value:function(){var s=this.props,a=s.x1,o=s.x2,i=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;Ka(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=bn(a),f=bn(o),h=bn(i),x=bn(l),p=this.props.shape;if(!m&&!f&&!h&&!x&&!p)return null;var v=Qje(m,f,h,x,this.props);if(!v&&!p)return null;var j=So(this.props,"hidden")?"url(#".concat(u,")"):void 0;return K.createElement(Dt,{className:Mt("recharts-reference-area",c)},t.renderRect(p,jT(jT({clipPath:j},ct(this.props,!0)),v)),Mn.renderCallByParent(this.props,v))}}])}(K.Component);fj(hj,"displayName","ReferenceArea");fj(hj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});fj(hj,"renderRect",function(e,t){var n;return K.isValidElement(e)?n=K.cloneElement(e,t):xt(e)?n=e(t):n=K.createElement(rj,v1({},t,{className:"recharts-reference-area-rect"})),n});function _5(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function Zje(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return K0e(s,n)}function Jje(e,t,n){var s=n==="width",a=e.x,o=e.y,i=e.width,l=e.height;return t===1?{start:s?a:o,end:s?a+i:o+l}:{start:s?a+i:o+l,end:s?a:o}}function xv(e,t,n,s,a){if(e*t<e*s||e*t>e*a)return!1;var o=n();return e*(t-e*o/2-s)>=0&&e*(t+e*o/2-a)<=0}function eye(e,t){return _5(e,t+1)}function tye(e,t,n,s,a){for(var o=(s||[]).slice(),i=t.start,l=t.end,c=0,d=1,u=i,m=function(){var x=s==null?void 0:s[c];if(x===void 0)return{v:_5(s,d)};var p=c,v,j=function(){return v===void 0&&(v=n(x,p)),v},g=x.coordinate,N=c===0||xv(e,g,j,u,l);N||(c=0,u=i,d+=1),N&&(u=g+e*(j()/2+a),c+=d)},f;d<=o.length;)if(f=m(),f)return f.v;return[]}function Ch(e){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}function yT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(n),!0).forEach(function(s){rye(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rye(e,t,n){return t=nye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nye(e){var t=sye(e,"string");return Ch(t)=="symbol"?t:t+""}function sye(e,t){if(Ch(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ch(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aye(e,t,n,s,a){for(var o=(s||[]).slice(),i=o.length,l=t.start,c=t.end,d=function(f){var h=o[f],x,p=function(){return x===void 0&&(x=n(h,f)),x};if(f===i-1){var v=e*(h.coordinate+e*p()/2-c);o[f]=h=qn(qn({},h),{},{tickCoord:v>0?h.coordinate-v*e:h.coordinate})}else o[f]=h=qn(qn({},h),{},{tickCoord:h.coordinate});var j=xv(e,h.tickCoord,p,l,c);j&&(c=h.tickCoord-e*(p()/2+a),o[f]=qn(qn({},h),{},{isShow:!0}))},u=i-1;u>=0;u--)d(u);return o}function oye(e,t,n,s,a,o){var i=(s||[]).slice(),l=i.length,c=t.start,d=t.end;if(o){var u=s[l-1],m=n(u,l-1),f=e*(u.coordinate+e*m/2-d);i[l-1]=u=qn(qn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var h=xv(e,u.tickCoord,function(){return m},c,d);h&&(d=u.tickCoord-e*(m/2+a),i[l-1]=qn(qn({},u),{},{isShow:!0}))}for(var x=o?l-1:l,p=function(g){var N=i[g],_,b=function(){return _===void 0&&(_=n(N,g)),_};if(g===0){var w=e*(N.coordinate-e*b()/2-c);i[g]=N=qn(qn({},N),{},{tickCoord:w<0?N.coordinate-w*e:N.coordinate})}else i[g]=N=qn(qn({},N),{},{tickCoord:N.coordinate});var S=xv(e,N.tickCoord,b,c,d);S&&(c=N.tickCoord+e*(b()/2+a),i[g]=qn(qn({},N),{},{isShow:!0}))},v=0;v<x;v++)p(v);return i}function T2(e,t,n){var s=e.tick,a=e.ticks,o=e.viewBox,i=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,m=e.angle;if(!a||!a.length||!s)return[];if(qe(c)||$s.isSsr)return eye(a,typeof c=="number"&&qe(c)?c:0);var f=[],h=l==="top"||l==="bottom"?"width":"height",x=u&&h==="width"?Fd(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(N,_){var b=xt(d)?d(N.value,_):N.value;return h==="width"?Zje(Fd(b,{fontSize:t,letterSpacing:n}),x,m):Fd(b,{fontSize:t,letterSpacing:n})[h]},v=a.length>=2?os(a[1].coordinate-a[0].coordinate):1,j=Jje(o,v,h);return c==="equidistantPreserveStart"?tye(v,j,p,a,i):(c==="preserveStart"||c==="preserveStartEnd"?f=oye(v,j,p,a,i,c==="preserveStartEnd"):f=aye(v,j,p,a,i),f.filter(function(g){return g.isShow}))}var iye=["viewBox"],lye=["viewBox"],cye=["ticks"];function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sd.apply(this,arguments)}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(n),!0).forEach(function(s){k2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function lb(e,t){if(e==null)return{};var n=dye(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function dye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function uye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,C5(s.key),s)}}function mye(e,t,n){return t&&NT(e.prototype,t),n&&NT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fye(e,t,n){return t=gv(t),hye(e,S5()?Reflect.construct(t,n||[],gv(e).constructor):t.apply(e,n))}function hye(e,t){if(t&&(Eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pye(e)}function pye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S5=function(){return!!e})()}function gv(e){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gv(e)}function xye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y1(e,t)}function y1(e,t){return y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},y1(e,t)}function k2(e,t,n){return t=C5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C5(e){var t=gye(e,"string");return Eu(t)=="symbol"?t:t+""}function gye(e,t){if(Eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Eu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pm=function(e){function t(n){var s;return uye(this,t),s=fye(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return xye(t,e),mye(t,[{key:"shouldComponentUpdate",value:function(s,a){var o=s.viewBox,i=lb(s,iye),l=this.props,c=l.viewBox,d=lb(l,lye);return!Dd(o,c)||!Dd(i,d)||!Dd(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,o=a.x,i=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,m=a.mirror,f=a.tickMargin,h,x,p,v,j,g,N=m?-1:1,_=s.tickSize||u,b=qe(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":h=x=s.coordinate,v=i+ +!m*c,p=v-N*_,g=p-N*f,j=b;break;case"left":p=v=s.coordinate,x=o+ +!m*l,h=x-N*_,j=h-N*f,g=b;break;case"right":p=v=s.coordinate,x=o+ +m*l,h=x+N*_,j=h+N*f,g=b;break;default:h=x=s.coordinate,v=i+ +m*c,p=v+N*_,g=p+N*f,j=b;break}return{line:{x1:h,y1:p,x2:x,y2:v},tick:{x:j,y:g}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,o=s.mirror,i;switch(a){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,o=s.mirror,i="end";switch(a){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,o=s.y,i=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,m=xn(xn(xn({},ct(this.props,!1)),ct(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);m=xn(xn({},m),{},{x1:a,y1:o+f*l,x2:a+i,y2:o+f*l})}else{var h=+(c==="left"&&!d||c==="right"&&d);m=xn(xn({},m),{},{x1:a+h*i,y1:o,x2:a+h*i,y2:o+l})}return K.createElement("line",Sd({},m,{className:Mt("recharts-cartesian-axis-line",ks(u,"className"))}))}},{key:"renderTicks",value:function(s,a,o){var i=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,m=l.tickFormatter,f=l.unit,h=T2(xn(xn({},this.props),{},{ticks:s}),a,o),x=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=ct(this.props,!1),j=ct(u,!1),g=xn(xn({},v),{},{fill:"none"},ct(c,!1)),N=h.map(function(_,b){var w=i.getTickLineCoord(_),S=w.line,C=w.tick,A=xn(xn(xn(xn({textAnchor:x,verticalAnchor:p},v),{},{stroke:"none",fill:d},j),C),{},{index:b,payload:_,visibleTicksCount:h.length,tickFormatter:m});return K.createElement(Dt,Sd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},vl(i.props,_,b)),c&&K.createElement("line",Sd({},g,S,{className:Mt("recharts-cartesian-axis-tick-line",ks(c,"className"))})),u&&t.renderTickItem(u,A,"".concat(xt(m)?m(_.value,b):_.value).concat(f||"")))});return K.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var s=this,a=this.props,o=a.axisLine,i=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var m=this.props,f=m.ticks,h=lb(m,cye),x=f;return xt(c)&&(x=f&&f.length>0?c(this.props):c(h)),i<=0||l<=0||!x||!x.length?null:K.createElement(Dt,{className:Mt("recharts-cartesian-axis",d),ref:function(v){s.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Mn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,o){var i,l=Mt(a.className,"recharts-cartesian-axis-tick-value");return K.isValidElement(s)?i=K.cloneElement(s,xn(xn({},a),{},{className:l})):xt(s)?i=s(xn(xn({},a),{},{className:l})):i=K.createElement(Ec,Sd({},a,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(y.Component);k2(pm,"displayName","CartesianAxis");k2(pm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var vye=["x1","y1","x2","y2","key"],jye=["offset"];function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(n),!0).forEach(function(s){yye(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yye(e,t,n){return t=bye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bye(e){var t=Nye(e,"string");return Tc(t)=="symbol"?t:t+""}function Nye(e,t){if(Tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Tc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},rc.apply(this,arguments)}function _T(e,t){if(e==null)return{};var n=wye(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function wye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var _ye=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,a=t.x,o=t.y,i=t.width,l=t.height,c=t.ry;return K.createElement("rect",{x:a,y:o,ry:c,width:i,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function P5(e,t){var n;if(K.isValidElement(e))n=K.cloneElement(e,t);else if(xt(e))n=e(t);else{var s=t.x1,a=t.y1,o=t.x2,i=t.y2,l=t.key,c=_T(t,vye),d=ct(c,!1);d.offset;var u=_T(d,jye);n=K.createElement("line",rc({},u,{x1:s,y1:a,x2:o,y2:i,fill:"none",key:l}))}return n}function Sye(e){var t=e.x,n=e.width,s=e.horizontal,a=s===void 0?!0:s,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(l,c){var d=Gn(Gn({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return P5(a,d)});return K.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Cye(e){var t=e.y,n=e.height,s=e.vertical,a=s===void 0?!0:s,o=e.verticalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(l,c){var d=Gn(Gn({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return P5(a,d)});return K.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Pye(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,a=e.y,o=e.width,i=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,h){return f-h});a!==u[0]&&u.unshift(0);var m=u.map(function(f,h){var x=!u[h+1],p=x?a+i-f:u[h+1]-f;if(p<=0)return null;var v=h%t.length;return K.createElement("rect",{key:"react-".concat(h),y:f,x:s,height:p,width:o,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return K.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Aye(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,o=e.x,i=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var u=d.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==u[0]&&u.unshift(0);var m=u.map(function(f,h){var x=!u[h+1],p=x?o+l-f:u[h+1]-f;if(p<=0)return null;var v=h%s.length;return K.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:p,height:c,stroke:"none",fill:s[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return K.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Eye=function(t,n){var s=t.xAxis,a=t.width,o=t.height,i=t.offset;return N3(T2(Gn(Gn(Gn({},pm.defaultProps),s),{},{ticks:Yo(s,!0),viewBox:{x:0,y:0,width:a,height:o}})),i.left,i.left+i.width,n)},Mye=function(t,n){var s=t.yAxis,a=t.width,o=t.height,i=t.offset;return N3(T2(Gn(Gn(Gn({},pm.defaultProps),s),{},{ticks:Yo(s,!0),viewBox:{x:0,y:0,width:a,height:o}})),i.top,i.top+i.height,n)},td={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Lt(e){var t,n,s,a,o,i,l=E2(),c=M2(),d=gje(),u=Gn(Gn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:td.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:td.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:td.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:td.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:td.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:td.verticalFill,x:qe(e.x)?e.x:d.left,y:qe(e.y)?e.y:d.top,width:qe(e.width)?e.width:d.width,height:qe(e.height)?e.height:d.height}),m=u.x,f=u.y,h=u.width,x=u.height,p=u.syncWithTicks,v=u.horizontalValues,j=u.verticalValues,g=hje(),N=pje();if(!qe(h)||h<=0||!qe(x)||x<=0||!qe(m)||m!==+m||!qe(f)||f!==+f)return null;var _=u.verticalCoordinatesGenerator||Eye,b=u.horizontalCoordinatesGenerator||Mye,w=u.horizontalPoints,S=u.verticalPoints;if((!w||!w.length)&&xt(b)){var C=v&&v.length,A=b({yAxis:N?Gn(Gn({},N),{},{ticks:C?v:N.ticks}):void 0,width:l,height:c,offset:d},C?!0:p);Ka(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Tc(A),"]")),Array.isArray(A)&&(w=A)}if((!S||!S.length)&&xt(_)){var P=j&&j.length,k=_({xAxis:g?Gn(Gn({},g),{},{ticks:P?j:g.ticks}):void 0,width:l,height:c,offset:d},P?!0:p);Ka(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Tc(k),"]")),Array.isArray(k)&&(S=k)}return K.createElement("g",{className:"recharts-cartesian-grid"},K.createElement(_ye,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),K.createElement(Sye,rc({},u,{offset:d,horizontalPoints:w,xAxis:g,yAxis:N})),K.createElement(Cye,rc({},u,{offset:d,verticalPoints:S,xAxis:g,yAxis:N})),K.createElement(Pye,rc({},u,{horizontalPoints:w})),K.createElement(Aye,rc({},u,{verticalPoints:S})))}Lt.displayName="CartesianGrid";var Oye=["type","layout","connectNulls","ref"],Tye=["key"];function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function ST(e,t){if(e==null)return{};var n=kye(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function kye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function xf(){return xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xf.apply(this,arguments)}function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Bs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(s){Fa(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rd(e){return Iye(e)||Fye(e)||Dye(e)||$ye()}function $ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dye(e,t){if(e){if(typeof e=="string")return b1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b1(e,t)}}function Fye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iye(e){if(Array.isArray(e))return b1(e)}function b1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Rye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,E5(s.key),s)}}function Lye(e,t,n){return t&&PT(e.prototype,t),n&&PT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bye(e,t,n){return t=vv(t),zye(e,A5()?Reflect.construct(t,n||[],vv(e).constructor):t.apply(e,n))}function zye(e,t){if(t&&(Mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vye(e)}function Vye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A5=function(){return!!e})()}function vv(e){return vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vv(e)}function Wye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N1(e,t)}function N1(e,t){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},N1(e,t)}function Fa(e,t,n){return t=E5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E5(e){var t=qye(e,"string");return Mu(t)=="symbol"?t:t+""}function qye(e,t){if(Mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Mu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wt=function(e){function t(){var n;Rye(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=Bye(this,t,[].concat(a)),Fa(n,"state",{isAnimationFinished:!0,totalLength:0}),Fa(n,"generateSimpleStrokeDasharray",function(i,l){return"".concat(l,"px ").concat(i-l,"px")}),Fa(n,"getStrokeDasharray",function(i,l,c){var d=c.reduce(function(j,g){return j+g});if(!d)return n.generateSimpleStrokeDasharray(l,i);for(var u=Math.floor(i/d),m=i%d,f=l-i,h=[],x=0,p=0;x<c.length;p+=c[x],++x)if(p+c[x]>m){h=[].concat(rd(c.slice(0,x)),[m-p]);break}var v=h.length%2===0?[0,f]:[f];return[].concat(rd(t.repeat(c,u)),rd(h),v).map(function(j){return"".concat(j,"px")}).join(", ")}),Fa(n,"id",gi("recharts-line-")),Fa(n,"pathRef",function(i){n.mainCurve=i}),Fa(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Fa(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Wye(t,e),Lye(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,l=o.xAxis,c=o.yAxis,d=o.layout,u=o.children,m=us(u,hm);if(!m)return null;var f=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:yr(p.payload,v)}},h={clipPath:s?"url(#clipPath-".concat(a,")"):null};return K.createElement(Dt,h,m.map(function(x){return K.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:i,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,a,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,m=ct(this.props,!1),f=ct(c,!0),h=d.map(function(p,v){var j=Bs(Bs(Bs({key:"dot-".concat(v),r:3},m),f),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return t.renderDotItem(c,j)}),x={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return K.createElement(Dt,xf({className:"recharts-line-dots",key:"dots"},x),h)}},{key:"renderCurveStatically",value:function(s,a,o,i){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var m=ST(l,Oye),f=Bs(Bs(Bs({},ct(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(o,")"):null,points:s},i),{},{type:c,layout:d,connectNulls:u});return K.createElement(cl,xf({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var o=this,i=this.props,l=i.points,c=i.strokeDasharray,d=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,f=i.animationEasing,h=i.animationId,x=i.animateNewValues,p=i.width,v=i.height,j=this.state,g=j.prevPoints,N=j.totalLength;return K.createElement(Fs,{begin:u,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var b=_.t;if(g){var w=g.length/l.length,S=l.map(function(E,O){var M=Math.floor(O*w);if(g[M]){var T=g[M],V=zr(T.x,E.x),I=zr(T.y,E.y);return Bs(Bs({},E),{},{x:V(b),y:I(b)})}if(x){var F=zr(p*2,E.x),D=zr(v/2,E.y);return Bs(Bs({},E),{},{x:F(b),y:D(b)})}return Bs(Bs({},E),{},{x:E.x,y:E.y})});return o.renderCurveStatically(S,s,a)}var C=zr(0,N),A=C(b),P;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(E){return parseFloat(E)});P=o.getStrokeDasharray(A,N,k)}else P=o.generateSimpleStrokeDasharray(N,A);return o.renderCurveStatically(l,s,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(s,a){var o=this.props,i=o.points,l=o.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&i&&i.length&&(!d&&u>0||!jl(d,i))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(i,s,a)}},{key:"render",value:function(){var s,a=this.props,o=a.hide,i=a.dot,l=a.points,c=a.className,d=a.xAxis,u=a.yAxis,m=a.top,f=a.left,h=a.width,x=a.height,p=a.isAnimationActive,v=a.id;if(o||!l||!l.length)return null;var j=this.state.isAnimationFinished,g=l.length===1,N=Mt("recharts-line",c),_=d&&d.allowDataOverflow,b=u&&u.allowDataOverflow,w=_||b,S=bt(v)?this.id:v,C=(s=ct(i,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},A=C.r,P=A===void 0?3:A,k=C.strokeWidth,E=k===void 0?2:k,O=u4(i)?i:{},M=O.clipDot,T=M===void 0?!0:M,V=P*2+E;return K.createElement(Dt,{className:N},_||b?K.createElement("defs",null,K.createElement("clipPath",{id:"clipPath-".concat(S)},K.createElement("rect",{x:_?f:f-h/2,y:b?m:m-x/2,width:_?h:h*2,height:b?x:x*2})),!T&&K.createElement("clipPath",{id:"clipPath-dots-".concat(S)},K.createElement("rect",{x:f-V/2,y:m-V/2,width:h+V,height:x+V}))):null,!g&&this.renderCurve(w,S),this.renderErrorBar(w,S),(g||i)&&this.renderDots(w,T,S),(!p||j)&&Et.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var o=s.length%2!==0?[].concat(rd(s),[0]):s,i=[],l=0;l<a;++l)i=[].concat(rd(i),rd(o));return i}},{key:"renderDotItem",value:function(s,a){var o;if(K.isValidElement(s))o=K.cloneElement(s,a);else if(xt(s))o=s(a);else{var i=a.key,l=ST(a,Tye),c=Mt("recharts-line-dot",typeof s!="boolean"?s.className:"");o=K.createElement(ap,xf({key:i},l,{className:c}))}return o}}])}(y.PureComponent);Fa(Wt,"displayName","Line");Fa(Wt,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!$s.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Fa(Wt,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,m=c.map(function(f,h){var x=yr(f,i);return u==="horizontal"?{x:vu({axis:n,ticks:a,bandSize:l,entry:f,index:h}),y:bt(x)?null:s.scale(x),value:x,payload:f}:{x:bt(x)?null:n.scale(x),y:vu({axis:s,ticks:o,bandSize:l,entry:f,index:h}),value:x,payload:f}});return Bs({points:m,layout:u},d)});var Uye=["layout","type","stroke","connectNulls","isRange","ref"],Kye=["key"],M5;function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function O5(e,t){if(e==null)return{};var n=Gye(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Gye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function nc(){return nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nc.apply(this,arguments)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(s){jo(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Hye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ET(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,k5(s.key),s)}}function Xye(e,t,n){return t&&ET(e.prototype,t),n&&ET(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yye(e,t,n){return t=jv(t),Qye(e,T5()?Reflect.construct(t,n||[],jv(e).constructor):t.apply(e,n))}function Qye(e,t){if(t&&(Ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zye(e)}function Zye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T5=function(){return!!e})()}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(e)}function Jye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w1(e,t)}function w1(e,t){return w1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},w1(e,t)}function jo(e,t,n){return t=k5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k5(e){var t=ebe(e,"string");return Ou(t)=="symbol"?t:t+""}function ebe(e,t){if(Ou(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ou(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ji=function(e){function t(){var n;Hye(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=Yye(this,t,[].concat(a)),jo(n,"state",{isAnimationFinished:!0}),jo(n,"id",gi("recharts-area-")),jo(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xt(i)&&i()}),jo(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xt(i)&&i()}),n}return Jye(t,e),Xye(t,[{key:"renderDots",value:function(s,a,o){var i=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(i&&!l)return null;var c=this.props,d=c.dot,u=c.points,m=c.dataKey,f=ct(this.props,!1),h=ct(d,!0),x=u.map(function(v,j){var g=Pi(Pi(Pi({key:"dot-".concat(j),r:3},f),h),{},{index:j,cx:v.x,cy:v.y,dataKey:m,value:v.value,payload:v.payload,points:u});return t.renderDotItem(d,g)}),p={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return K.createElement(Dt,nc({className:"recharts-area-dots"},p),x)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,o=a.baseLine,i=a.points,l=a.strokeWidth,c=i[0].x,d=i[i.length-1].x,u=s*Math.abs(c-d),m=Xi(i.map(function(f){return f.y||0}));return qe(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(Xi(o.map(function(f){return f.y||0})),m)),qe(m)?K.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,o=a.baseLine,i=a.points,l=a.strokeWidth,c=i[0].y,d=i[i.length-1].y,u=s*Math.abs(c-d),m=Xi(i.map(function(f){return f.x||0}));return qe(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(Xi(o.map(function(f){return f.x||0})),m)),qe(m)?K.createElement("rect",{x:0,y:c<d?c:c-u,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,o,i){var l=this.props,c=l.layout,d=l.type,u=l.stroke,m=l.connectNulls,f=l.isRange;l.ref;var h=O5(l,Uye);return K.createElement(Dt,{clipPath:o?"url(#clipPath-".concat(i,")"):null},K.createElement(cl,nc({},ct(h,!0),{points:s,connectNulls:m,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&K.createElement(cl,nc({},ct(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})),u!=="none"&&f&&K.createElement(cl,nc({},ct(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var o=this,i=this.props,l=i.points,c=i.baseLine,d=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,f=i.animationEasing,h=i.animationId,x=this.state,p=x.prevPoints,v=x.prevBaseLine;return K.createElement(Fs,{begin:u,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var g=j.t;if(p){var N=p.length/l.length,_=l.map(function(C,A){var P=Math.floor(A*N);if(p[P]){var k=p[P],E=zr(k.x,C.x),O=zr(k.y,C.y);return Pi(Pi({},C),{},{x:E(g),y:O(g)})}return C}),b;if(qe(c)&&typeof c=="number"){var w=zr(v,c);b=w(g)}else if(bt(c)||El(c)){var S=zr(v,0);b=S(g)}else b=c.map(function(C,A){var P=Math.floor(A*N);if(v[P]){var k=v[P],E=zr(k.x,C.x),O=zr(k.y,C.y);return Pi(Pi({},C),{},{x:E(g),y:O(g)})}return C});return o.renderAreaStatically(_,b,s,a)}return K.createElement(Dt,null,K.createElement("defs",null,K.createElement("clipPath",{id:"animationClipPath-".concat(a)},o.renderClipRect(g))),K.createElement(Dt,{clipPath:"url(#animationClipPath-".concat(a,")")},o.renderAreaStatically(l,c,s,a)))})}},{key:"renderArea",value:function(s,a){var o=this.props,i=o.points,l=o.baseLine,c=o.isAnimationActive,d=this.state,u=d.prevPoints,m=d.prevBaseLine,f=d.totalLength;return c&&i&&i.length&&(!u&&f>0||!jl(u,i)||!jl(m,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(i,l,s,a)}},{key:"render",value:function(){var s,a=this.props,o=a.hide,i=a.dot,l=a.points,c=a.className,d=a.top,u=a.left,m=a.xAxis,f=a.yAxis,h=a.width,x=a.height,p=a.isAnimationActive,v=a.id;if(o||!l||!l.length)return null;var j=this.state.isAnimationFinished,g=l.length===1,N=Mt("recharts-area",c),_=m&&m.allowDataOverflow,b=f&&f.allowDataOverflow,w=_||b,S=bt(v)?this.id:v,C=(s=ct(i,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},A=C.r,P=A===void 0?3:A,k=C.strokeWidth,E=k===void 0?2:k,O=u4(i)?i:{},M=O.clipDot,T=M===void 0?!0:M,V=P*2+E;return K.createElement(Dt,{className:N},_||b?K.createElement("defs",null,K.createElement("clipPath",{id:"clipPath-".concat(S)},K.createElement("rect",{x:_?u:u-h/2,y:b?d:d-x/2,width:_?h:h*2,height:b?x:x*2})),!T&&K.createElement("clipPath",{id:"clipPath-dots-".concat(S)},K.createElement("rect",{x:u-V/2,y:d-V/2,width:h+V,height:x+V}))):null,g?null:this.renderArea(w,S),(i||g)&&this.renderDots(w,T,S),(!p||j)&&Et.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(y.PureComponent);M5=ji;jo(ji,"displayName","Area");jo(ji,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!$s.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});jo(ji,"getBaseValue",function(e,t,n,s){var a=e.layout,o=e.baseValue,i=t.props.baseValue,l=i??o;if(qe(l)&&typeof l=="number")return l;var c=a==="horizontal"?s:n,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});jo(ji,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,a=e.yAxis,o=e.xAxisTicks,i=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,f=e.offset,h=t.layout,x=d&&d.length,p=M5.getBaseValue(t,n,s,a),v=h==="horizontal",j=!1,g=m.map(function(_,b){var w;x?w=d[u+b]:(w=yr(_,c),Array.isArray(w)?j=!0:w=[p,w]);var S=w[1]==null||x&&yr(_,c)==null;return v?{x:vu({axis:s,ticks:o,bandSize:l,entry:_,index:b}),y:S?null:a.scale(w[1]),value:w,payload:_}:{x:S?null:s.scale(w[1]),y:vu({axis:a,ticks:i,bandSize:l,entry:_,index:b}),value:w,payload:_}}),N;return x||j?N=g.map(function(_){var b=Array.isArray(_.value)?_.value[0]:null;return v?{x:_.x,y:b!=null&&_.y!=null?a.scale(b):null}:{x:b!=null?s.scale(b):null,y:_.y}}):N=v?a.scale(p):s.scale(p),Pi({points:g,baseLine:N,layout:h,isRange:j},f)});jo(ji,"renderDotItem",function(e,t){var n;if(K.isValidElement(e))n=K.cloneElement(e,t);else if(xt(e))n=e(t);else{var s=Mt("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,o=O5(t,Kye);n=K.createElement(ap,nc({},o,{key:a,className:s}))}return n});function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function tbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rbe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,F5(s.key),s)}}function nbe(e,t,n){return t&&rbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sbe(e,t,n){return t=yv(t),abe(e,$5()?Reflect.construct(t,n||[],yv(e).constructor):t.apply(e,n))}function abe(e,t){if(t&&(Tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return obe(e)}function obe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($5=function(){return!!e})()}function yv(e){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yv(e)}function ibe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_1(e,t)}function _1(e,t){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_1(e,t)}function D5(e,t,n){return t=F5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F5(e){var t=lbe(e,"string");return Tu(t)=="symbol"?t:t+""}function lbe(e,t){if(Tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Tu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pj=function(e){function t(){return tbe(this,t),sbe(this,t,arguments)}return ibe(t,e),nbe(t,[{key:"render",value:function(){return null}}])}(y.Component);D5(pj,"displayName","ZAxis");D5(pj,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var cbe=["option","isActive"];function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gf.apply(this,arguments)}function dbe(e,t){if(e==null)return{};var n=ube(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ube(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function mbe(e){var t=e.option,n=e.isActive,s=dbe(e,cbe);return typeof t=="string"?y.createElement(ov,gf({option:y.createElement(z0,gf({type:t},s)),isActive:n,shapeType:"symbols"},s)):y.createElement(ov,gf({option:t,isActive:n,shapeType:"symbols"},s))}function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vf.apply(this,arguments)}function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(n),!0).forEach(function(s){Qi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function fbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,R5(s.key),s)}}function hbe(e,t,n){return t&&OT(e.prototype,t),n&&OT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pbe(e,t,n){return t=bv(t),xbe(e,I5()?Reflect.construct(t,n||[],bv(e).constructor):t.apply(e,n))}function xbe(e,t){if(t&&(ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gbe(e)}function gbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I5=function(){return!!e})()}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bv(e)}function vbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S1(e,t)}function S1(e,t){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},S1(e,t)}function Qi(e,t,n){return t=R5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R5(e){var t=jbe(e,"string");return ku(t)=="symbol"?t:t+""}function jbe(e,t){if(ku(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ku(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xj=function(e){function t(){var n;fbe(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=pbe(this,t,[].concat(a)),Qi(n,"state",{isAnimationFinished:!1}),Qi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Qi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Qi(n,"id",gi("recharts-scatter-")),n}return vbe(t,e),hbe(t,[{key:"renderSymbolsStatically",value:function(s){var a=this,o=this.props,i=o.shape,l=o.activeShape,c=o.activeIndex,d=ct(this.props,!1);return s.map(function(u,m){var f=c===m,h=f?l:i,x=ia(ia({},d),u);return K.createElement(Dt,vf({className:"recharts-scatter-symbol",key:"symbol-".concat(u==null?void 0:u.cx,"-").concat(u==null?void 0:u.cy,"-").concat(u==null?void 0:u.size,"-").concat(m)},vl(a.props,u,m),{role:"img"}),K.createElement(mbe,vf({option:h,isActive:f,key:"symbol-".concat(m)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var s=this,a=this.props,o=a.points,i=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state.prevPoints;return K.createElement(Fs,{begin:l,duration:c,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var h=f.t,x=o.map(function(p,v){var j=m&&m[v];if(j){var g=zr(j.cx,p.cx),N=zr(j.cy,p.cy),_=zr(j.size,p.size);return ia(ia({},p),{},{cx:g(h),cy:N(h),size:_(h)})}var b=zr(0,p.size);return ia(ia({},p),{},{size:b(h)})});return K.createElement(Dt,null,s.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var s=this.props,a=s.points,o=s.isAnimationActive,i=this.state.prevPoints;return o&&a&&a.length&&(!i||!jl(i,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,i=a.xAxis,l=a.yAxis,c=a.children,d=us(c,hm);return d?d.map(function(u,m){var f=u.props,h=f.direction,x=f.dataKey;return K.cloneElement(u,{key:"".concat(h,"-").concat(x,"-").concat(o[m]),data:o,xAxis:i,yAxis:l,layout:h==="x"?"vertical":"horizontal",dataPointFormatter:function(v,j){return{x:v.cx,y:v.cy,value:h==="x"?+v.node.x:+v.node.y,errorVal:yr(v,j)}}})}):null}},{key:"renderLine",value:function(){var s=this.props,a=s.points,o=s.line,i=s.lineType,l=s.lineJointType,c=ct(this.props,!1),d=ct(o,!1),u,m;if(i==="joint")u=a.map(function(N){return{x:N.cx,y:N.cy}});else if(i==="fitting"){var f=bZ(a),h=f.xmin,x=f.xmax,p=f.a,v=f.b,j=function(_){return p*_+v};u=[{x:h,y:j(h)},{x,y:j(x)}]}var g=ia(ia(ia({},c),{},{fill:"none",stroke:c&&c.fill},d),{},{points:u});return K.isValidElement(o)?m=K.cloneElement(o,g):xt(o)?m=o(g):m=K.createElement(cl,vf({},g,{type:l})),K.createElement(Dt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var s=this.props,a=s.hide,o=s.points,i=s.line,l=s.className,c=s.xAxis,d=s.yAxis,u=s.left,m=s.top,f=s.width,h=s.height,x=s.id,p=s.isAnimationActive;if(a||!o||!o.length)return null;var v=this.state.isAnimationFinished,j=Mt("recharts-scatter",l),g=c&&c.allowDataOverflow,N=d&&d.allowDataOverflow,_=g||N,b=bt(x)?this.id:x;return K.createElement(Dt,{className:j,clipPath:_?"url(#clipPath-".concat(b,")"):null},g||N?K.createElement("defs",null,K.createElement("clipPath",{id:"clipPath-".concat(b)},K.createElement("rect",{x:g?u:u-f/2,y:N?m:m-h/2,width:g?f:f*2,height:N?h:h*2}))):null,i&&this.renderLine(),this.renderErrorBar(),K.createElement(Dt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!p||v)&&Et.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}}])}(y.PureComponent);Qi(xj,"displayName","Scatter");Qi(xj,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!$s.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Qi(xj,"getComposedData",function(e){var t=e.xAxis,n=e.yAxis,s=e.zAxis,a=e.item,o=e.displayedData,i=e.xAxisTicks,l=e.yAxisTicks,c=e.offset,d=a.props.tooltipType,u=us(a.props.children,Kt),m=bt(t.dataKey)?a.props.dataKey:t.dataKey,f=bt(n.dataKey)?a.props.dataKey:n.dataKey,h=s&&s.dataKey,x=s?s.range:pj.defaultProps.range,p=x&&x[0],v=t.scale.bandwidth?t.scale.bandwidth():0,j=n.scale.bandwidth?n.scale.bandwidth():0,g=o.map(function(N,_){var b=yr(N,m),w=yr(N,f),S=!bt(h)&&yr(N,h)||"-",C=[{name:bt(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:b,payload:N,dataKey:m,type:d},{name:bt(n.dataKey)?a.props.name:n.name||n.dataKey,unit:n.unit||"",value:w,payload:N,dataKey:f,type:d}];S!=="-"&&C.push({name:s.name||s.dataKey,unit:s.unit||"",value:S,payload:N,dataKey:h,type:d});var A=vu({axis:t,ticks:i,bandSize:v,entry:N,index:_,dataKey:m}),P=vu({axis:n,ticks:l,bandSize:j,entry:N,index:_,dataKey:f}),k=S!=="-"?s.scale(S):p,E=Math.sqrt(Math.max(k,0)/Math.PI);return ia(ia({},N),{},{cx:A,cy:P,x:A-E,y:P-E,xAxis:t,yAxis:n,zAxis:s,width:2*E,height:2*E,size:k,node:{x:b,y:w,z:S},tooltipPayload:C,tooltipPosition:{x:A,y:P},payload:N},u&&u[_]&&u[_].props)});return ia({points:g},c)});function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function ybe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bbe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,z5(s.key),s)}}function Nbe(e,t,n){return t&&bbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wbe(e,t,n){return t=Nv(t),_be(e,L5()?Reflect.construct(t,n||[],Nv(e).constructor):t.apply(e,n))}function _be(e,t){if(t&&($u(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sbe(e)}function Sbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L5=function(){return!!e})()}function Nv(e){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(e)}function Cbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C1(e,t)}function C1(e,t){return C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},C1(e,t)}function B5(e,t,n){return t=z5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z5(e){var t=Pbe(e,"string");return $u(t)=="symbol"?t:t+""}function Pbe(e,t){if($u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if($u(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P1(){return P1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},P1.apply(this,arguments)}function Abe(e){var t=e.xAxisId,n=E2(),s=M2(),a=x5(t);return a==null?null:y.createElement(pm,P1({},a,{className:Mt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(i){return Yo(i,!0)}}))}var jt=function(e){function t(){return ybe(this,t),wbe(this,t,arguments)}return Cbe(t,e),Nbe(t,[{key:"render",value:function(){return y.createElement(Abe,this.props)}}])}(y.Component);B5(jt,"displayName","XAxis");B5(jt,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function Ebe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mbe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,q5(s.key),s)}}function Obe(e,t,n){return t&&Mbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tbe(e,t,n){return t=wv(t),kbe(e,V5()?Reflect.construct(t,n||[],wv(e).constructor):t.apply(e,n))}function kbe(e,t){if(t&&(Du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $be(e)}function $be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V5=function(){return!!e})()}function wv(e){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wv(e)}function Dbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A1(e,t)}function A1(e,t){return A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},A1(e,t)}function W5(e,t,n){return t=q5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q5(e){var t=Fbe(e,"string");return Du(t)=="symbol"?t:t+""}function Fbe(e,t){if(Du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Du(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},E1.apply(this,arguments)}var Ibe=function(t){var n=t.yAxisId,s=E2(),a=M2(),o=g5(n);return o==null?null:y.createElement(pm,E1({},o,{className:Mt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return Yo(l,!0)}}))},gt=function(e){function t(){return Ebe(this,t),Tbe(this,t,arguments)}return Dbe(t,e),Obe(t,[{key:"render",value:function(){return y.createElement(Ibe,this.props)}}])}(y.Component);W5(gt,"displayName","YAxis");W5(gt,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function TT(e){return zbe(e)||Bbe(e)||Lbe(e)||Rbe()}function Rbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lbe(e,t){if(e){if(typeof e=="string")return M1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M1(e,t)}}function Bbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zbe(e){if(Array.isArray(e))return M1(e)}function M1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var O1=function(t,n,s,a,o){var i=us(t,yl),l=us(t,mj),c=[].concat(TT(i),TT(l)),d=us(t,hj),u="".concat(a,"Id"),m=a[0],f=n;if(c.length&&(f=c.reduce(function(p,v){if(v.props[u]===s&&So(v.props,"extendDomain")&&qe(v.props[m])){var j=v.props[m];return[Math.min(p[0],j),Math.max(p[1],j)]}return p},f)),d.length){var h="".concat(m,"1"),x="".concat(m,"2");f=d.reduce(function(p,v){if(v.props[u]===s&&So(v.props,"extendDomain")&&qe(v.props[h])&&qe(v.props[x])){var j=v.props[h],g=v.props[x];return[Math.min(p[0],j,g),Math.max(p[1],j,g)]}return p},f)}return o&&o.length&&(f=o.reduce(function(p,v){return qe(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},f)),f},U5={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function o(c,d,u,m,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new a(u,m||c,f),x=n?n+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],h]:c._events[x].push(h):(c._events[x]=h,c._eventsCount++),c}function i(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)t.call(u,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var f=0,h=m.length,x=new Array(h);f<h;f++)x[f]=m[f].fn;return x},l.prototype.listenerCount=function(d){var u=n?n+d:d,m=this._events[u];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,u,m,f,h,x){var p=n?n+d:d;if(!this._events[p])return!1;var v=this._events[p],j=arguments.length,g,N;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,m),!0;case 4:return v.fn.call(v.context,u,m,f),!0;case 5:return v.fn.call(v.context,u,m,f,h),!0;case 6:return v.fn.call(v.context,u,m,f,h,x),!0}for(N=1,g=new Array(j-1);N<j;N++)g[N-1]=arguments[N];v.fn.apply(v.context,g)}else{var _=v.length,b;for(N=0;N<_;N++)switch(v[N].once&&this.removeListener(d,v[N].fn,void 0,!0),j){case 1:v[N].fn.call(v[N].context);break;case 2:v[N].fn.call(v[N].context,u);break;case 3:v[N].fn.call(v[N].context,u,m);break;case 4:v[N].fn.call(v[N].context,u,m,f);break;default:if(!g)for(b=1,g=new Array(j-1);b<j;b++)g[b-1]=arguments[b];v[N].fn.apply(v[N].context,g)}}return!0},l.prototype.on=function(d,u,m){return o(this,d,u,m,!1)},l.prototype.once=function(d,u,m){return o(this,d,u,m,!0)},l.prototype.removeListener=function(d,u,m,f){var h=n?n+d:d;if(!this._events[h])return this;if(!u)return i(this,h),this;var x=this._events[h];if(x.fn)x.fn===u&&(!f||x.once)&&(!m||x.context===m)&&i(this,h);else{for(var p=0,v=[],j=x.length;p<j;p++)(x[p].fn!==u||f&&!x[p].once||m&&x[p].context!==m)&&v.push(x[p]);v.length?this._events[h]=v.length===1?v[0]:v:i(this,h)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&i(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(U5);var Vbe=U5.exports;const Wbe=or(Vbe);var cb=new Wbe,db="recharts.syncMouseEvents";function Ph(e){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(e)}function qbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ube(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,K5(s.key),s)}}function Kbe(e,t,n){return t&&Ube(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ub(e,t,n){return t=K5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K5(e){var t=Gbe(e,"string");return Ph(t)=="symbol"?t:t+""}function Gbe(e,t){if(Ph(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ph(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hbe=function(){function e(){qbe(this,e),ub(this,"activeIndex",0),ub(this,"coordinateList",[]),ub(this,"layout","horizontal")}return Kbe(e,[{key:"setDetails",value:function(n){var s,a=n.coordinateList,o=a===void 0?null:a,i=n.container,l=i===void 0?null:i,c=n.layout,d=c===void 0?null:c,u=n.offset,m=u===void 0?null:u,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(s=o??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),o=a.x,i=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=o+c+d,f=i+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:m,pageY:f})}}}])}();function Xbe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&qe(s)&&qe(a))return!0}return!1}function Ybe(e,t,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function G5(e){var t=e.cx,n=e.cy,s=e.radius,a=e.startAngle,o=e.endAngle,i=Pr(t,n,s,a),l=Pr(t,n,s,o);return{points:[i,l],cx:t,cy:n,radius:s,startAngle:a,endAngle:o}}function Qbe(e,t,n){var s,a,o,i;if(e==="horizontal")s=t.x,o=s,a=n.top,i=n.top+n.height;else if(e==="vertical")a=t.y,i=a,s=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,m=t.angle,f=Pr(l,c,d,m),h=Pr(l,c,u,m);s=f.x,a=f.y,o=h.x,i=h.y}else return G5(t);return[{x:s,y:a},{x:o,y:i}]}function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function kT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ix(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(n),!0).forEach(function(s){Zbe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zbe(e,t,n){return t=Jbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jbe(e){var t=eNe(e,"string");return Ah(t)=="symbol"?t:t+""}function eNe(e,t){if(Ah(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ah(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tNe(e){var t,n,s=e.element,a=e.tooltipEventType,o=e.isActive,i=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,m=e.layout,f=e.chartName,h=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!h||!o||!i||f!=="ScatterChart"&&a!=="axis")return null;var x,p=cl;if(f==="ScatterChart")x=i,p=Gxe;else if(f==="BarChart")x=Ybe(m,i,c,u),p=rj;else if(m==="radial"){var v=G5(i),j=v.cx,g=v.cy,N=v.radius,_=v.startAngle,b=v.endAngle;x={cx:j,cy:g,startAngle:_,endAngle:b,innerRadius:N,outerRadius:N},p=$3}else x={points:Qbe(m,i,c)},p=cl;var w=ix(ix(ix(ix({stroke:"#ccc",pointerEvents:"none"},c),x),ct(h,!1)),{},{payload:l,payloadIndex:d,className:Mt("recharts-tooltip-cursor",h.className)});return y.isValidElement(h)?y.cloneElement(h,w):y.createElement(p,w)}var rNe=["item"],nNe=["children","className","width","height","style","compact","title","desc"];function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function Cd(){return Cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cd.apply(this,arguments)}function $T(e,t){return oNe(e)||aNe(e,t)||X5(e,t)||sNe()}function sNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,o,i,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(s=o.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}function oNe(e){if(Array.isArray(e))return e}function DT(e,t){if(e==null)return{};var n=iNe(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function iNe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function lNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cNe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Y5(s.key),s)}}function dNe(e,t,n){return t&&cNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uNe(e,t,n){return t=_v(t),mNe(e,H5()?Reflect.construct(t,n||[],_v(e).constructor):t.apply(e,n))}function mNe(e,t){if(t&&(Fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fNe(e)}function fNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H5=function(){return!!e})()}function _v(e){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_v(e)}function hNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T1(e,t)}function T1(e,t){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},T1(e,t)}function Iu(e){return gNe(e)||xNe(e)||X5(e)||pNe()}function pNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X5(e,t){if(e){if(typeof e=="string")return k1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k1(e,t)}}function xNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gNe(e){if(Array.isArray(e))return k1(e)}function k1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function FT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(n),!0).forEach(function(s){St(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function St(e,t,n){return t=Y5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y5(e){var t=vNe(e,"string");return Fu(t)=="symbol"?t:t+""}function vNe(e,t){if(Fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Fu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jNe={xAxis:["bottom","top"],yAxis:["left","right"]},yNe={width:"100%",height:"100%"},Q5={x:0,y:0};function lx(e){return e}var bNe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},NNe=function(t,n,s,a){var o=n.find(function(u){return u&&u.index===s});if(o){if(t==="horizontal")return{x:o.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:o.coordinate};if(t==="centric"){var i=o.coordinate,l=a.radius;return Ie(Ie(Ie({},a),Pr(a.cx,a.cy,l,i)),{},{angle:i,radius:l})}var c=o.coordinate,d=a.angle;return Ie(Ie(Ie({},a),Pr(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return Q5},gj=function(t,n){var s=n.graphicalItems,a=n.dataStartIndex,o=n.dataEndIndex,i=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Iu(l),Iu(d)):l},[]);return i.length>0?i:t&&t.length&&qe(a)&&qe(o)?t.slice(a,o+1):[]};function Z5(e){return e==="number"?[0,"auto"]:void 0}var $1=function(t,n,s,a){var o=t.graphicalItems,i=t.tooltipAxis,l=gj(n,t);return s<0||!o||!o.length||s>=l.length?null:o.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:n;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(i.dataKey&&!i.allowDuplicatedCategory){var h=m===void 0?l:m;f=yg(h,i.dataKey,a)}else f=m&&m[s]||l[s];return f?[].concat(Iu(c),[P3(d,f)]):c},[])},IT=function(t,n,s,a){var o=a||{x:t.chartX,y:t.chartY},i=bNe(o,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=jfe(i,l,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,f=$1(t,n,u,m),h=NNe(s,l,u,o);return{activeTooltipIndex:u,activeLabel:m,activePayload:f,activeCoordinate:h}}return null},wNe=function(t,n){var s=n.axes,a=n.graphicalItems,o=n.axisType,i=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,m=t.children,f=t.stackOffset,h=b3(u,o);return s.reduce(function(x,p){var v,j=p.type.defaultProps!==void 0?Ie(Ie({},p.type.defaultProps),p.props):p.props,g=j.type,N=j.dataKey,_=j.allowDataOverflow,b=j.allowDuplicatedCategory,w=j.scale,S=j.ticks,C=j.includeHidden,A=j[i];if(x[A])return x;var P=gj(t.data,{graphicalItems:a.filter(function(B){var q,te=i in B.props?B.props[i]:(q=B.type.defaultProps)===null||q===void 0?void 0:q[i];return te===A}),dataStartIndex:c,dataEndIndex:d}),k=P.length,E,O,M;Xbe(j.domain,_,g)&&(E=Uw(j.domain,null,_),h&&(g==="number"||w!=="auto")&&(M=mf(P,N,"category")));var T=Z5(g);if(!E||E.length===0){var V,I=(V=j.domain)!==null&&V!==void 0?V:T;if(N){if(E=mf(P,N,g),g==="category"&&h){var F=yZ(E);b&&F?(O=E,E=lv(0,k)):b||(E=tO(I,E,p).reduce(function(B,q){return B.indexOf(q)>=0?B:[].concat(Iu(B),[q])},[]))}else if(g==="category")b?E=E.filter(function(B){return B!==""&&!bt(B)}):E=tO(I,E,p).reduce(function(B,q){return B.indexOf(q)>=0||q===""||bt(q)?B:[].concat(Iu(B),[q])},[]);else if(g==="number"){var D=_fe(P,a.filter(function(B){var q,te,Y=i in B.props?B.props[i]:(q=B.type.defaultProps)===null||q===void 0?void 0:q[i],H="hide"in B.props?B.props.hide:(te=B.type.defaultProps)===null||te===void 0?void 0:te.hide;return Y===A&&(C||!H)}),N,o,u);D&&(E=D)}h&&(g==="number"||w!=="auto")&&(M=mf(P,N,"category"))}else h?E=lv(0,k):l&&l[A]&&l[A].hasStack&&g==="number"?E=f==="expand"?[0,1]:C3(l[A].stackGroups,c,d):E=y3(P,a.filter(function(B){var q=i in B.props?B.props[i]:B.type.defaultProps[i],te="hide"in B.props?B.props.hide:B.type.defaultProps.hide;return q===A&&(C||!te)}),g,u,!0);if(g==="number")E=O1(m,E,A,o,S),I&&(E=Uw(I,E,_));else if(g==="category"&&I){var X=I,W=E.every(function(B){return X.indexOf(B)>=0});W&&(E=X)}}return Ie(Ie({},x),{},St({},A,Ie(Ie({},j),{},{axisType:o,domain:E,categoricalDomain:M,duplicateDomain:O,originalDomain:(v=j.domain)!==null&&v!==void 0?v:T,isCategorical:h,layout:u})))},{})},_Ne=function(t,n){var s=n.graphicalItems,a=n.Axis,o=n.axisType,i=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,m=t.children,f=gj(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),h=f.length,x=b3(u,o),p=-1;return s.reduce(function(v,j){var g=j.type.defaultProps!==void 0?Ie(Ie({},j.type.defaultProps),j.props):j.props,N=g[i],_=Z5("number");if(!v[N]){p++;var b;return x?b=lv(0,h):l&&l[N]&&l[N].hasStack?(b=C3(l[N].stackGroups,c,d),b=O1(m,b,N,o)):(b=Uw(_,y3(f,s.filter(function(w){var S,C,A=i in w.props?w.props[i]:(S=w.type.defaultProps)===null||S===void 0?void 0:S[i],P="hide"in w.props?w.props.hide:(C=w.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===N&&!P}),"number",u),a.defaultProps.allowDataOverflow),b=O1(m,b,N,o)),Ie(Ie({},v),{},St({},N,Ie(Ie({axisType:o},a.defaultProps),{},{hide:!0,orientation:ks(jNe,"".concat(o,".").concat(p%2),null),domain:b,originalDomain:_,isCategorical:x,layout:u})))}return v},{})},SNe=function(t,n){var s=n.axisType,a=s===void 0?"xAxis":s,o=n.AxisComp,i=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,m="".concat(a,"Id"),f=us(u,o),h={};return f&&f.length?h=wNe(t,{axes:f,graphicalItems:i,axisType:a,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):i&&i.length&&(h=_Ne(t,{Axis:o,graphicalItems:i,axisType:a,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),h},CNe=function(t){var n=$i(t),s=Yo(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:QS(s,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Xg(n,s)}},RT=function(t){var n=t.children,s=t.defaultShowTooltip,a=Un(n,_u),o=0,i=0;return t.data&&t.data.length!==0&&(i=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(o=a.props.startIndex),a.props.endIndex>=0&&(i=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!s}},PNe=function(t){return!t||!t.length?!1:t.some(function(n){var s=Jo(n&&n.type);return s&&s.indexOf("Bar")>=0})},LT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ANe=function(t,n){var s=t.props,a=t.graphicalItems,o=t.xAxisMap,i=o===void 0?{}:o,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,m=s.children,f=s.margin||{},h=Un(m,_u),x=Un(m,jr),p=Object.keys(c).reduce(function(b,w){var S=c[w],C=S.orientation;return!S.mirror&&!S.hide?Ie(Ie({},b),{},St({},C,b[C]+S.width)):b},{left:f.left||0,right:f.right||0}),v=Object.keys(i).reduce(function(b,w){var S=i[w],C=S.orientation;return!S.mirror&&!S.hide?Ie(Ie({},b),{},St({},C,ks(b,"".concat(C))+S.height)):b},{top:f.top||0,bottom:f.bottom||0}),j=Ie(Ie({},v),p),g=j.bottom;h&&(j.bottom+=h.props.height||_u.defaultProps.height),x&&n&&(j=Nfe(j,a,s,n));var N=d-j.left-j.right,_=u-j.top-j.bottom;return Ie(Ie({brushBottom:g},j),{},{width:Math.max(N,0),height:Math.max(_,0)})},ENe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},op=function(t){var n=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,o=a===void 0?"axis":a,i=t.validateTooltipEventTypes,l=i===void 0?["axis"]:i,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,m=t.defaultProps,f=function(j,g){var N=g.graphicalItems,_=g.stackGroups,b=g.offset,w=g.updateId,S=g.dataStartIndex,C=g.dataEndIndex,A=j.barSize,P=j.layout,k=j.barGap,E=j.barCategoryGap,O=j.maxBarSize,M=LT(P),T=M.numericAxisName,V=M.cateAxisName,I=PNe(N),F=[];return N.forEach(function(D,X){var W=gj(j.data,{graphicalItems:[D],dataStartIndex:S,dataEndIndex:C}),B=D.type.defaultProps!==void 0?Ie(Ie({},D.type.defaultProps),D.props):D.props,q=B.dataKey,te=B.maxBarSize,Y=B["".concat(T,"Id")],H=B["".concat(V,"Id")],L={},ue=c.reduce(function(ie,J){var ge=g["".concat(J.axisType,"Map")],je=B["".concat(J.axisType,"Id")];ge&&ge[je]||J.axisType==="zAxis"||Oc();var ye=ge[je];return Ie(Ie({},ie),{},St(St({},J.axisType,ye),"".concat(J.axisType,"Ticks"),Yo(ye)))},L),pe=ue[V],we=ue["".concat(V,"Ticks")],re=_&&_[Y]&&_[Y].hasStack&&kfe(D,_[Y].stackGroups),de=Jo(D.type).indexOf("Bar")>=0,he=Xg(pe,we),ee=[],z=I&&yfe({barSize:A,stackGroups:_,totalSize:ENe(ue,V)});if(de){var U,oe,Se=bt(te)?O:te,Ne=(U=(oe=Xg(pe,we,!0))!==null&&oe!==void 0?oe:Se)!==null&&U!==void 0?U:0;ee=bfe({barGap:k,barCategoryGap:E,bandSize:Ne!==he?Ne:he,sizeList:z[H],maxBarSize:Se}),Ne!==he&&(ee=ee.map(function(ie){return Ie(Ie({},ie),{},{position:Ie(Ie({},ie.position),{},{offset:ie.position.offset-Ne/2})})}))}var $=D&&D.type&&D.type.getComposedData;$&&F.push({props:Ie(Ie({},$(Ie(Ie({},ue),{},{displayedData:W,props:j,dataKey:q,item:D,bandSize:he,barPosition:ee,offset:b,stackedData:re,layout:P,dataStartIndex:S,dataEndIndex:C}))),{},St(St(St({key:D.key||"item-".concat(X)},T,ue[T]),V,ue[V]),"animationId",w)),childIndex:kZ(D,j.children),item:D})}),F},h=function(j,g){var N=j.props,_=j.dataStartIndex,b=j.dataEndIndex,w=j.updateId;if(!ow({props:N}))return null;var S=N.children,C=N.layout,A=N.stackOffset,P=N.data,k=N.reverseStackOrder,E=LT(C),O=E.numericAxisName,M=E.cateAxisName,T=us(S,s),V=Ofe(P,T,"".concat(O,"Id"),"".concat(M,"Id"),A,k),I=c.reduce(function(B,q){var te="".concat(q.axisType,"Map");return Ie(Ie({},B),{},St({},te,SNe(N,Ie(Ie({},q),{},{graphicalItems:T,stackGroups:q.axisType===O&&V,dataStartIndex:_,dataEndIndex:b}))))},{}),F=ANe(Ie(Ie({},I),{},{props:N,graphicalItems:T}),g==null?void 0:g.legendBBox);Object.keys(I).forEach(function(B){I[B]=u(N,I[B],F,B.replace("Map",""),n)});var D=I["".concat(M,"Map")],X=CNe(D),W=f(N,Ie(Ie({},I),{},{dataStartIndex:_,dataEndIndex:b,updateId:w,graphicalItems:T,stackGroups:V,offset:F}));return Ie(Ie({formattedGraphicalItems:W,graphicalItems:T,offset:F,stackGroups:V},X),I)},x=function(v){function j(g){var N,_,b;return lNe(this,j),b=uNe(this,j,[g]),St(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),St(b,"accessibilityManager",new Hbe),St(b,"handleLegendBBoxUpdate",function(w){if(w){var S=b.state,C=S.dataStartIndex,A=S.dataEndIndex,P=S.updateId;b.setState(Ie({legendBBox:w},h({props:b.props,dataStartIndex:C,dataEndIndex:A,updateId:P},Ie(Ie({},b.state),{},{legendBBox:w}))))}}),St(b,"handleReceiveSyncEvent",function(w,S,C){if(b.props.syncId===w){if(C===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(S)}}),St(b,"handleBrushChange",function(w){var S=w.startIndex,C=w.endIndex;if(S!==b.state.dataStartIndex||C!==b.state.dataEndIndex){var A=b.state.updateId;b.setState(function(){return Ie({dataStartIndex:S,dataEndIndex:C},h({props:b.props,dataStartIndex:S,dataEndIndex:C,updateId:A},b.state))}),b.triggerSyncEvent({dataStartIndex:S,dataEndIndex:C})}}),St(b,"handleMouseEnter",function(w){var S=b.getMouseInfo(w);if(S){var C=Ie(Ie({},S),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var A=b.props.onMouseEnter;xt(A)&&A(C,w)}}),St(b,"triggeredAfterMouseMove",function(w){var S=b.getMouseInfo(w),C=S?Ie(Ie({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(C),b.triggerSyncEvent(C);var A=b.props.onMouseMove;xt(A)&&A(C,w)}),St(b,"handleItemMouseEnter",function(w){b.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),St(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),St(b,"handleMouseMove",function(w){w.persist(),b.throttleTriggeredAfterMouseMove(w)}),St(b,"handleMouseLeave",function(w){b.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};b.setState(S),b.triggerSyncEvent(S);var C=b.props.onMouseLeave;xt(C)&&C(S,w)}),St(b,"handleOuterEvent",function(w){var S=TZ(w),C=ks(b.props,"".concat(S));if(S&&xt(C)){var A,P;/.*touch.*/i.test(S)?P=b.getMouseInfo(w.changedTouches[0]):P=b.getMouseInfo(w),C((A=P)!==null&&A!==void 0?A:{},w)}}),St(b,"handleClick",function(w){var S=b.getMouseInfo(w);if(S){var C=Ie(Ie({},S),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var A=b.props.onClick;xt(A)&&A(C,w)}}),St(b,"handleMouseDown",function(w){var S=b.props.onMouseDown;if(xt(S)){var C=b.getMouseInfo(w);S(C,w)}}),St(b,"handleMouseUp",function(w){var S=b.props.onMouseUp;if(xt(S)){var C=b.getMouseInfo(w);S(C,w)}}),St(b,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),St(b,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&b.handleMouseDown(w.changedTouches[0])}),St(b,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&b.handleMouseUp(w.changedTouches[0])}),St(b,"handleDoubleClick",function(w){var S=b.props.onDoubleClick;if(xt(S)){var C=b.getMouseInfo(w);S(C,w)}}),St(b,"handleContextMenu",function(w){var S=b.props.onContextMenu;if(xt(S)){var C=b.getMouseInfo(w);S(C,w)}}),St(b,"triggerSyncEvent",function(w){b.props.syncId!==void 0&&cb.emit(db,b.props.syncId,w,b.eventEmitterSymbol)}),St(b,"applySyncEvent",function(w){var S=b.props,C=S.layout,A=S.syncMethod,P=b.state.updateId,k=w.dataStartIndex,E=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)b.setState(Ie({dataStartIndex:k,dataEndIndex:E},h({props:b.props,dataStartIndex:k,dataEndIndex:E,updateId:P},b.state)));else if(w.activeTooltipIndex!==void 0){var O=w.chartX,M=w.chartY,T=w.activeTooltipIndex,V=b.state,I=V.offset,F=V.tooltipTicks;if(!I)return;if(typeof A=="function")T=A(F,w);else if(A==="value"){T=-1;for(var D=0;D<F.length;D++)if(F[D].value===w.activeLabel){T=D;break}}var X=Ie(Ie({},I),{},{x:I.left,y:I.top}),W=Math.min(O,X.x+X.width),B=Math.min(M,X.y+X.height),q=F[T]&&F[T].value,te=$1(b.state,b.props.data,T),Y=F[T]?{x:C==="horizontal"?F[T].coordinate:W,y:C==="horizontal"?B:F[T].coordinate}:Q5;b.setState(Ie(Ie({},w),{},{activeLabel:q,activeCoordinate:Y,activePayload:te,activeTooltipIndex:T}))}else b.setState(w)}),St(b,"renderCursor",function(w){var S,C=b.state,A=C.isTooltipActive,P=C.activeCoordinate,k=C.activePayload,E=C.offset,O=C.activeTooltipIndex,M=C.tooltipAxisBandSize,T=b.getTooltipEventType(),V=(S=w.props.active)!==null&&S!==void 0?S:A,I=b.props.layout,F=w.key||"_recharts-cursor";return K.createElement(tNe,{key:F,activeCoordinate:P,activePayload:k,activeTooltipIndex:O,chartName:n,element:w,isActive:V,layout:I,offset:E,tooltipAxisBandSize:M,tooltipEventType:T})}),St(b,"renderPolarAxis",function(w,S,C){var A=ks(w,"type.axisType"),P=ks(b.state,"".concat(A,"Map")),k=w.type.defaultProps,E=k!==void 0?Ie(Ie({},k),w.props):w.props,O=P&&P[E["".concat(A,"Id")]];return y.cloneElement(w,Ie(Ie({},O),{},{className:Mt(A,O.className),key:w.key||"".concat(S,"-").concat(C),ticks:Yo(O,!0)}))}),St(b,"renderPolarGrid",function(w){var S=w.props,C=S.radialLines,A=S.polarAngles,P=S.polarRadius,k=b.state,E=k.radiusAxisMap,O=k.angleAxisMap,M=$i(E),T=$i(O),V=T.cx,I=T.cy,F=T.innerRadius,D=T.outerRadius;return y.cloneElement(w,{polarAngles:Array.isArray(A)?A:Yo(T,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(P)?P:Yo(M,!0).map(function(X){return X.coordinate}),cx:V,cy:I,innerRadius:F,outerRadius:D,key:w.key||"polar-grid",radialLines:C})}),St(b,"renderLegend",function(){var w=b.state.formattedGraphicalItems,S=b.props,C=S.children,A=S.width,P=S.height,k=b.props.margin||{},E=A-(k.left||0)-(k.right||0),O=v3({children:C,formattedGraphicalItems:w,legendWidth:E,legendContent:d});if(!O)return null;var M=O.item,T=DT(O,rNe);return y.cloneElement(M,Ie(Ie({},T),{},{chartWidth:A,chartHeight:P,margin:k,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),St(b,"renderTooltip",function(){var w,S=b.props,C=S.children,A=S.accessibilityLayer,P=Un(C,yt);if(!P)return null;var k=b.state,E=k.isTooltipActive,O=k.activeCoordinate,M=k.activePayload,T=k.activeLabel,V=k.offset,I=(w=P.props.active)!==null&&w!==void 0?w:E;return y.cloneElement(P,{viewBox:Ie(Ie({},V),{},{x:V.left,y:V.top}),active:I,label:T,payload:I?M:[],coordinate:O,accessibilityLayer:A})}),St(b,"renderBrush",function(w){var S=b.props,C=S.margin,A=S.data,P=b.state,k=P.offset,E=P.dataStartIndex,O=P.dataEndIndex,M=P.updateId;return y.cloneElement(w,{key:w.key||"_recharts-brush",onChange:nx(b.handleBrushChange,w.props.onChange),data:A,x:qe(w.props.x)?w.props.x:k.left,y:qe(w.props.y)?w.props.y:k.top+k.height+k.brushBottom-(C.bottom||0),width:qe(w.props.width)?w.props.width:k.width,startIndex:E,endIndex:O,updateId:"brush-".concat(M)})}),St(b,"renderReferenceElement",function(w,S,C){if(!w)return null;var A=b,P=A.clipPathId,k=b.state,E=k.xAxisMap,O=k.yAxisMap,M=k.offset,T=w.type.defaultProps||{},V=w.props,I=V.xAxisId,F=I===void 0?T.xAxisId:I,D=V.yAxisId,X=D===void 0?T.yAxisId:D;return y.cloneElement(w,{key:w.key||"".concat(S,"-").concat(C),xAxis:E[F],yAxis:O[X],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:P})}),St(b,"renderActivePoints",function(w){var S=w.item,C=w.activePoint,A=w.basePoint,P=w.childIndex,k=w.isRange,E=[],O=S.props.key,M=S.item.type.defaultProps!==void 0?Ie(Ie({},S.item.type.defaultProps),S.item.props):S.item.props,T=M.activeDot,V=M.dataKey,I=Ie(Ie({index:P,dataKey:V,cx:C.x,cy:C.y,r:4,fill:w2(S.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},ct(T,!1)),bg(T));return E.push(j.renderActiveDot(T,I,"".concat(O,"-activePoint-").concat(P))),A?E.push(j.renderActiveDot(T,Ie(Ie({},I),{},{cx:A.x,cy:A.y}),"".concat(O,"-basePoint-").concat(P))):k&&E.push(null),E}),St(b,"renderGraphicChild",function(w,S,C){var A=b.filterFormatItem(w,S,C);if(!A)return null;var P=b.getTooltipEventType(),k=b.state,E=k.isTooltipActive,O=k.tooltipAxis,M=k.activeTooltipIndex,T=k.activeLabel,V=b.props.children,I=Un(V,yt),F=A.props,D=F.points,X=F.isRange,W=F.baseLine,B=A.item.type.defaultProps!==void 0?Ie(Ie({},A.item.type.defaultProps),A.item.props):A.item.props,q=B.activeDot,te=B.hide,Y=B.activeBar,H=B.activeShape,L=!!(!te&&E&&I&&(q||Y||H)),ue={};P!=="axis"&&I&&I.props.trigger==="click"?ue={onClick:nx(b.handleItemMouseEnter,w.props.onClick)}:P!=="axis"&&(ue={onMouseLeave:nx(b.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:nx(b.handleItemMouseEnter,w.props.onMouseEnter)});var pe=y.cloneElement(w,Ie(Ie({},A.props),ue));function we(J){return typeof O.dataKey=="function"?O.dataKey(J.payload):null}if(L)if(M>=0){var re,de;if(O.dataKey&&!O.allowDuplicatedCategory){var he=typeof O.dataKey=="function"?we:"payload.".concat(O.dataKey.toString());re=yg(D,he,T),de=X&&W&&yg(W,he,T)}else re=D==null?void 0:D[M],de=X&&W&&W[M];if(H||Y){var ee=w.props.activeIndex!==void 0?w.props.activeIndex:M;return[y.cloneElement(w,Ie(Ie(Ie({},A.props),ue),{},{activeIndex:ee})),null,null]}if(!bt(re))return[pe].concat(Iu(b.renderActivePoints({item:A,activePoint:re,basePoint:de,childIndex:M,isRange:X})))}else{var z,U=(z=b.getItemByXY(b.state.activeCoordinate))!==null&&z!==void 0?z:{graphicalItem:pe},oe=U.graphicalItem,Se=oe.item,Ne=Se===void 0?w:Se,$=oe.childIndex,ie=Ie(Ie(Ie({},A.props),ue),{},{activeIndex:$});return[y.cloneElement(Ne,ie),null,null]}return X?[pe,null,null]:[pe,null]}),St(b,"renderCustomized",function(w,S,C){return y.cloneElement(w,Ie(Ie({key:"recharts-customized-".concat(C)},b.props),b.state))}),St(b,"renderMap",{CartesianGrid:{handler:lx,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:lx},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:lx},YAxis:{handler:lx},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((N=g.id)!==null&&N!==void 0?N:gi("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=gR(b.triggeredAfterMouseMove,(_=g.throttleDelay)!==null&&_!==void 0?_:1e3/60),b.state={},b}return hNe(j,v),dNe(j,[{key:"componentDidMount",value:function(){var N,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,_=N.children,b=N.data,w=N.height,S=N.layout,C=Un(_,yt);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,k=$1(this.state,b,A,P),E=this.state.tooltipTicks[A].coordinate,O=(this.state.offset.top+w)/2,M=S==="horizontal",T=M?{x:E,y:O}:{y:E,x:O},V=this.state.formattedGraphicalItems.find(function(F){var D=F.item;return D.type.name==="Scatter"});V&&(T=Ie(Ie({},T),V.props.points[A].tooltipPosition),k=V.props.points[A].tooltipPayload);var I={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:P,activePayload:k,activeCoordinate:T};this.setState(I),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var b,w;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(N){iw([Un(N.children,yt)],[Un(this.props.children,yt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=Un(this.props.children,yt);if(N&&typeof N.props.shared=="boolean"){var _=N.props.shared?"axis":"item";return l.indexOf(_)>=0?_:o}return o}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var _=this.container,b=_.getBoundingClientRect(),w=Gle(b),S={chartX:Math.round(N.pageX-w.left),chartY:Math.round(N.pageY-w.top)},C=b.width/_.offsetWidth||1,A=this.inRange(S.chartX,S.chartY,C);if(!A)return null;var P=this.state,k=P.xAxisMap,E=P.yAxisMap,O=this.getTooltipEventType(),M=IT(this.state,this.props.data,this.props.layout,A);if(O!=="axis"&&k&&E){var T=$i(k).scale,V=$i(E).scale,I=T&&T.invert?T.invert(S.chartX):null,F=V&&V.invert?V.invert(S.chartY):null;return Ie(Ie({},S),{},{xValue:I,yValue:F},M)}return M?Ie(Ie({},S),M):null}},{key:"inRange",value:function(N,_){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,S=N/b,C=_/b;if(w==="horizontal"||w==="vertical"){var A=this.state.offset,P=S>=A.left&&S<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return P?{x:S,y:C}:null}var k=this.state,E=k.angleAxisMap,O=k.radiusAxisMap;if(E&&O){var M=$i(E);return sO({x:S,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,_=this.getTooltipEventType(),b=Un(N,yt),w={};b&&_==="axis"&&(b.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=bg(this.props,this.handleOuterEvent);return Ie(Ie({},S),w)}},{key:"addListener",value:function(){cb.on(db,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cb.removeListener(db,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,_,b){for(var w=this.state.formattedGraphicalItems,S=0,C=w.length;S<C;S++){var A=w[S];if(A.item===N||A.props.key===N.key||_===Jo(A.item.type)&&b===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,_=this.state.offset,b=_.left,w=_.top,S=_.height,C=_.width;return K.createElement("defs",null,K.createElement("clipPath",{id:N},K.createElement("rect",{x:b,y:w,height:S,width:C})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(_,b){var w=$T(b,2),S=w[0],C=w[1];return Ie(Ie({},_),{},St({},S,C.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(_,b){var w=$T(b,2),S=w[0],C=w[1];return Ie(Ie({},_),{},St({},S,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[N])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(N){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[N])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(N){var _=this.state,b=_.formattedGraphicalItems,w=_.activeItem;if(b&&b.length)for(var S=0,C=b.length;S<C;S++){var A=b[S],P=A.props,k=A.item,E=k.type.defaultProps!==void 0?Ie(Ie({},k.type.defaultProps),k.props):k.props,O=Jo(k.type);if(O==="Bar"){var M=(P.data||[]).find(function(F){return Axe(N,F)});if(M)return{graphicalItem:A,payload:M}}else if(O==="RadialBar"){var T=(P.data||[]).find(function(F){return sO(N,F)});if(T)return{graphicalItem:A,payload:T}}else if(ij(A,w)||lj(A,w)||Nh(A,w)){var V=fve({graphicalItem:A,activeTooltipItem:w,itemData:E.data}),I=E.activeIndex===void 0?V:E.activeIndex;return{graphicalItem:Ie(Ie({},A),{},{childIndex:I}),payload:Nh(A,w)?E.data[V]:A.props.data[V]}}}return null}},{key:"render",value:function(){var N=this;if(!ow(this))return null;var _=this.props,b=_.children,w=_.className,S=_.width,C=_.height,A=_.style,P=_.compact,k=_.title,E=_.desc,O=DT(_,nNe),M=ct(O,!1);if(P)return K.createElement(mT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},K.createElement(Ng,Cd({},M,{width:S,height:C,title:k,desc:E}),this.renderClipPath(),QA(b,this.renderMap)));if(this.props.accessibilityLayer){var T,V;M.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,M.role=(V=this.props.role)!==null&&V!==void 0?V:"application",M.onKeyDown=function(F){N.accessibilityManager.keyboardEvent(F)},M.onFocus=function(){N.accessibilityManager.focus()}}var I=this.parseEventsOfWrapper();return K.createElement(mT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},K.createElement("div",Cd({className:Mt("recharts-wrapper",w),style:Ie({position:"relative",cursor:"default",width:S,height:C},A)},I,{ref:function(D){N.container=D}}),K.createElement(Ng,Cd({},M,{width:S,height:C,title:k,desc:E,style:yNe}),this.renderClipPath(),QA(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);St(x,"displayName",n),St(x,"defaultProps",Ie({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),St(x,"getDerivedStateFromProps",function(v,j){var g=v.dataKey,N=v.data,_=v.children,b=v.width,w=v.height,S=v.layout,C=v.stackOffset,A=v.margin,P=j.dataStartIndex,k=j.dataEndIndex;if(j.updateId===void 0){var E=RT(v);return Ie(Ie(Ie({},E),{},{updateId:0},h(Ie(Ie({props:v},E),{},{updateId:0}),j)),{},{prevDataKey:g,prevData:N,prevWidth:b,prevHeight:w,prevLayout:S,prevStackOffset:C,prevMargin:A,prevChildren:_})}if(g!==j.prevDataKey||N!==j.prevData||b!==j.prevWidth||w!==j.prevHeight||S!==j.prevLayout||C!==j.prevStackOffset||!Dd(A,j.prevMargin)){var O=RT(v),M={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},T=Ie(Ie({},IT(j,N,S)),{},{updateId:j.updateId+1}),V=Ie(Ie(Ie({},O),M),T);return Ie(Ie(Ie({},V),h(Ie({props:v},V),j)),{},{prevDataKey:g,prevData:N,prevWidth:b,prevHeight:w,prevLayout:S,prevStackOffset:C,prevMargin:A,prevChildren:_})}if(!iw(_,j.prevChildren)){var I,F,D,X,W=Un(_,_u),B=W&&(I=(F=W.props)===null||F===void 0?void 0:F.startIndex)!==null&&I!==void 0?I:P,q=W&&(D=(X=W.props)===null||X===void 0?void 0:X.endIndex)!==null&&D!==void 0?D:k,te=B!==P||q!==k,Y=!bt(N),H=Y&&!te?j.updateId:j.updateId+1;return Ie(Ie({updateId:H},h(Ie(Ie({props:v},j),{},{updateId:H,dataStartIndex:B,dataEndIndex:q}),j)),{},{prevChildren:_,dataStartIndex:B,dataEndIndex:q})}return null}),St(x,"renderActiveDot",function(v,j,g){var N;return y.isValidElement(v)?N=y.cloneElement(v,j):xt(v)?N=v(j):N=K.createElement(ap,j),K.createElement(Dt,{className:"recharts-active-dot",key:g},N)});var p=y.forwardRef(function(j,g){return K.createElement(x,Cd({},j,{ref:g}))});return p.displayName=x.displayName,p},bl=op({chartName:"LineChart",GraphicalChild:Wt,axisComponents:[{axisType:"xAxis",AxisComp:jt},{axisType:"yAxis",AxisComp:gt}],formatAxisMap:dj}),Gt=op({chartName:"BarChart",GraphicalChild:rt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:jt},{axisType:"yAxis",AxisComp:gt}],formatAxisMap:dj}),dl=op({chartName:"PieChart",GraphicalChild:Xn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:oj},{axisType:"radiusAxis",AxisComp:sj}],formatAxisMap:Wfe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function MNe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}var ONe=MNe,TNe=S2,kNe=j0,$Ne=Object.prototype,DNe=$Ne.hasOwnProperty;function FNe(e,t,n){var s=e[t];(!(DNe.call(e,t)&&kNe(s,n))||n===void 0&&!(t in e))&&TNe(e,t,n)}var J5=FNe,INe=J5,RNe=S2;function LNe(e,t,n,s){var a=!n;n||(n={});for(var o=-1,i=t.length;++o<i;){var l=t[o],c=s?s(n[l],e[l],l,n,e):void 0;c===void 0&&(c=e[l]),a?RNe(n,l,c):INe(n,l,c)}return n}var ip=LNe,BNe=ip,zNe=lm;function VNe(e,t){return e&&BNe(t,zNe(t),e)}var WNe=VNe;function qNe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var UNe=qNe,KNe=ro,GNe=GS,HNe=UNe,XNe=Object.prototype,YNe=XNe.hasOwnProperty;function QNe(e){if(!KNe(e))return HNe(e);var t=GNe(e),n=[];for(var s in e)s=="constructor"&&(t||!YNe.call(e,s))||n.push(s);return n}var ZNe=QNe,JNe=H4,ewe=ZNe,twe=im;function rwe(e){return twe(e)?JNe(e,!0):ewe(e)}var $2=rwe,nwe=ip,swe=$2;function awe(e,t){return e&&nwe(t,swe(t),e)}var owe=awe,Sv={exports:{}};Sv.exports;(function(e,t){var n=eo,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===s,i=o?n.Buffer:void 0,l=i?i.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,f=l?l(m):new d.constructor(m);return d.copy(f),f}e.exports=c})(Sv,Sv.exports);var iwe=Sv.exports;function lwe(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var cwe=lwe,dwe=ip,uwe=zS;function mwe(e,t){return dwe(e,uwe(e),t)}var fwe=mwe,hwe=BS,pwe=_2,xwe=zS,gwe=U4,vwe=Object.getOwnPropertySymbols,jwe=vwe?function(e){for(var t=[];e;)hwe(t,xwe(e)),e=pwe(e);return t}:gwe,eL=jwe,ywe=ip,bwe=eL;function Nwe(e,t){return ywe(e,bwe(e),t)}var wwe=Nwe,_we=q4,Swe=eL,Cwe=$2;function Pwe(e){return _we(e,Cwe,Swe)}var tL=Pwe,Awe=Object.prototype,Ewe=Awe.hasOwnProperty;function Mwe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ewe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Owe=Mwe,BT=W4;function Twe(e){var t=new e.constructor(e.byteLength);return new BT(t).set(new BT(e)),t}var D2=Twe,kwe=D2;function $we(e,t){var n=t?kwe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Dwe=$we,Fwe=/\w*$/;function Iwe(e){var t=new e.constructor(e.source,Fwe.exec(e));return t.lastIndex=e.lastIndex,t}var Rwe=Iwe,zT=em,VT=zT?zT.prototype:void 0,WT=VT?VT.valueOf:void 0;function Lwe(e){return WT?Object(WT.call(e)):{}}var Bwe=Lwe,zwe=D2;function Vwe(e,t){var n=t?zwe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Wwe=Vwe,qwe=D2,Uwe=Dwe,Kwe=Rwe,Gwe=Bwe,Hwe=Wwe,Xwe="[object Boolean]",Ywe="[object Date]",Qwe="[object Map]",Zwe="[object Number]",Jwe="[object RegExp]",e1e="[object Set]",t1e="[object String]",r1e="[object Symbol]",n1e="[object ArrayBuffer]",s1e="[object DataView]",a1e="[object Float32Array]",o1e="[object Float64Array]",i1e="[object Int8Array]",l1e="[object Int16Array]",c1e="[object Int32Array]",d1e="[object Uint8Array]",u1e="[object Uint8ClampedArray]",m1e="[object Uint16Array]",f1e="[object Uint32Array]";function h1e(e,t,n){var s=e.constructor;switch(t){case n1e:return qwe(e);case Xwe:case Ywe:return new s(+e);case s1e:return Uwe(e,n);case a1e:case o1e:case i1e:case l1e:case c1e:case d1e:case u1e:case m1e:case f1e:return Hwe(e,n);case Qwe:return new s;case Zwe:case t1e:return new s(e);case Jwe:return Kwe(e);case e1e:return new s;case r1e:return Gwe(e)}}var p1e=h1e,x1e=ro,qT=Object.create,g1e=function(){function e(){}return function(t){if(!x1e(t))return{};if(qT)return qT(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),v1e=g1e,j1e=v1e,y1e=_2,b1e=GS;function N1e(e){return typeof e.constructor=="function"&&!b1e(e)?j1e(y1e(e)):{}}var w1e=N1e,_1e=W0,S1e=to,C1e="[object Map]";function P1e(e){return S1e(e)&&_1e(e)==C1e}var A1e=P1e,E1e=A1e,M1e=V0,UT=KS,KT=UT&&UT.isMap,O1e=KT?M1e(KT):E1e,T1e=O1e,k1e=W0,$1e=to,D1e="[object Set]";function F1e(e){return $1e(e)&&k1e(e)==D1e}var I1e=F1e,R1e=I1e,L1e=V0,GT=KS,HT=GT&&GT.isSet,B1e=HT?L1e(HT):R1e,z1e=B1e,V1e=RS,W1e=ONe,q1e=J5,U1e=WNe,K1e=owe,G1e=iwe,H1e=cwe,X1e=fwe,Y1e=wwe,Q1e=Y4,Z1e=tL,J1e=W0,e_e=Owe,t_e=p1e,r_e=w1e,n_e=js,s_e=WS,a_e=T1e,o_e=ro,i_e=z1e,l_e=lm,c_e=$2,d_e=1,u_e=2,m_e=4,rL="[object Arguments]",f_e="[object Array]",h_e="[object Boolean]",p_e="[object Date]",x_e="[object Error]",nL="[object Function]",g_e="[object GeneratorFunction]",v_e="[object Map]",j_e="[object Number]",sL="[object Object]",y_e="[object RegExp]",b_e="[object Set]",N_e="[object String]",w_e="[object Symbol]",__e="[object WeakMap]",S_e="[object ArrayBuffer]",C_e="[object DataView]",P_e="[object Float32Array]",A_e="[object Float64Array]",E_e="[object Int8Array]",M_e="[object Int16Array]",O_e="[object Int32Array]",T_e="[object Uint8Array]",k_e="[object Uint8ClampedArray]",$_e="[object Uint16Array]",D_e="[object Uint32Array]",Nr={};Nr[rL]=Nr[f_e]=Nr[S_e]=Nr[C_e]=Nr[h_e]=Nr[p_e]=Nr[P_e]=Nr[A_e]=Nr[E_e]=Nr[M_e]=Nr[O_e]=Nr[v_e]=Nr[j_e]=Nr[sL]=Nr[y_e]=Nr[b_e]=Nr[N_e]=Nr[w_e]=Nr[T_e]=Nr[k_e]=Nr[$_e]=Nr[D_e]=!0;Nr[x_e]=Nr[nL]=Nr[__e]=!1;function kx(e,t,n,s,a,o){var i,l=t&d_e,c=t&u_e,d=t&m_e;if(n&&(i=a?n(e,s,a,o):n(e)),i!==void 0)return i;if(!o_e(e))return e;var u=n_e(e);if(u){if(i=e_e(e),!l)return H1e(e,i)}else{var m=J1e(e),f=m==nL||m==g_e;if(s_e(e))return G1e(e,l);if(m==sL||m==rL||f&&!a){if(i=c||f?{}:r_e(e),!l)return c?Y1e(e,K1e(i,e)):X1e(e,U1e(i,e))}else{if(!Nr[m])return a?e:{};i=t_e(e,m,l)}}o||(o=new V1e);var h=o.get(e);if(h)return h;o.set(e,i),i_e(e)?e.forEach(function(v){i.add(kx(v,t,n,v,e,o))}):a_e(e)&&e.forEach(function(v,j){i.set(j,kx(v,t,n,j,e,o))});var x=d?c?Z1e:Q1e:c?c_e:l_e,p=u?void 0:x(e);return W1e(p||e,function(v,j){p&&(j=v,v=e[j]),q1e(i,j,kx(v,t,n,j,e,o))}),i}var F_e=kx,I_e=S0,R_e=m4;function L_e(e,t){return t.length<2?e:I_e(e,R_e(t,0,-1))}var B_e=L_e,z_e=_0,V_e=T3,W_e=B_e,q_e=ep;function U_e(e,t){return t=z_e(t,e),e=W_e(e,t),e==null||delete e[q_e(V_e(t))]}var K_e=U_e,G_e=Q3;function H_e(e){return G_e(e)?void 0:e}var X_e=H_e,Y_e=XS;function Q_e(e){var t=e==null?0:e.length;return t?Y_e(e,1):[]}var Z_e=Q_e,J_e=Z_e,eSe=cR,tSe=uR;function rSe(e){return tSe(eSe(e,void 0,J_e),e+"")}var nSe=rSe,sSe=w0,aSe=F_e,oSe=K_e,iSe=_0,lSe=ip,cSe=X_e,dSe=nSe,uSe=tL,mSe=1,fSe=2,hSe=4,pSe=dSe(function(e,t){var n={};if(e==null)return n;var s=!1;t=sSe(t,function(o){return o=iSe(o,e),s||(s=o.length>1),o}),lSe(e,uSe(e),n),s&&(n=aSe(n,mSe|fSe|hSe,cSe));for(var a=t.length;a--;)oSe(n,t[a]);return n}),xSe=pSe;const gSe=or(xSe);var vSe=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],jSe=["width","height","className","style","children","type"];function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cv.apply(this,arguments)}function ySe(e,t){if(e==null)return{};var n=bSe(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function bSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function NSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,oL(s.key),s)}}function wSe(e,t,n){return t&&XT(e.prototype,t),n&&XT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Se(e,t,n){return t=Pv(t),SSe(e,aL()?Reflect.construct(t,n||[],Pv(e).constructor):t.apply(e,n))}function SSe(e,t){if(t&&(Ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CSe(e)}function CSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aL=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pv(e)}function PSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D1(e,t)}function D1(e,t){return D1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},D1(e,t)}function YT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YT(Object(n),!0).forEach(function(s){ti(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ti(e,t,n){return t=oL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oL(e){var t=ASe(e,"string");return Ru(t)=="symbol"?t:t+""}function ASe(e,t){if(Ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ru(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eh="value",mb=function e(t){var n=t.depth,s=t.node,a=t.index,o=t.valueKey,i=s.children,l=n+1,c=i&&i.length?i.map(function(u,m){return e({depth:l,node:u,index:m,valueKey:o})}):null,d;return i&&i.length?d=c.reduce(function(u,m){return u+m[Eh]},0):d=El(s[o])||s[o]<=0?0:s[o],wr(wr({},s),{},ti(ti(ti({children:c},Eh,d),"depth",n),"index",a))},ESe=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},MSe=function(t,n){var s=n<0?0:n;return t.map(function(a){var o=a[Eh]*s;return wr(wr({},a),{},{area:El(o)||o<=0?0:o})})},OSe=function(t,n,s){var a=n*n,o=t.area*t.area,i=t.reduce(function(d,u){return{min:Math.min(d.min,u.area),max:Math.max(d.max,u.area)}},{min:1/0,max:0}),l=i.min,c=i.max;return o?Math.max(a*c*s/o,o/(a*l*s)):1/0},TSe=function(t,n,s,a){var o=n?Math.round(t.area/n):0;(a||o>s.height)&&(o=s.height);for(var i=s.x,l,c=0,d=t.length;c<d;c++)l=t[c],l.x=i,l.y=s.y,l.height=o,l.width=Math.min(o?Math.round(l.area/o):0,s.x+s.width-i),i+=l.width;return l.width+=s.x+s.width-i,wr(wr({},s),{},{y:s.y+o,height:s.height-o})},kSe=function(t,n,s,a){var o=n?Math.round(t.area/n):0;(a||o>s.width)&&(o=s.width);for(var i=s.y,l,c=0,d=t.length;c<d;c++)l=t[c],l.x=s.x,l.y=i,l.width=o,l.height=Math.min(o?Math.round(l.area/o):0,s.y+s.height-i),i+=l.height;return l&&(l.height+=s.y+s.height-i),wr(wr({},s),{},{x:s.x+o,width:s.width-o})},QT=function(t,n,s,a){return n===s.width?TSe(t,n,s,a):kSe(t,n,s,a)},fb=function e(t,n){var s=t.children;if(s&&s.length){var a=ESe(t),o=[],i=1/0,l,c,d=Math.min(a.width,a.height),u=MSe(s,a.width*a.height/t[Eh]),m=u.slice();for(o.area=0;m.length>0;)o.push(l=m[0]),o.area+=l.area,c=OSe(o,d,n),c<=i?(m.shift(),i=c):(o.area-=o.pop().area,a=QT(o,d,a,!1),d=Math.min(a.width,a.height),o.length=o.area=0,i=1/0);return o.length&&(a=QT(o,d,a,!0),o.length=o.area=0),wr(wr({},t),{},{children:u.map(function(f){return e(f,n)})})}return t},$Se={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},vc=function(e){function t(){var n;NSe(this,t);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=_Se(this,t,[].concat(a)),ti(n,"state",wr({},$Se)),ti(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xt(i)&&i()}),ti(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xt(i)&&i()}),n}return PSe(t,e),wSe(t,[{key:"handleMouseEnter",value:function(s,a){a.persist();var o=this.props,i=o.onMouseEnter,l=o.children,c=Un(l,yt);c?this.setState({isTooltipActive:!0,activeNode:s},function(){i&&i(s,a)}):i&&i(s,a)}},{key:"handleMouseLeave",value:function(s,a){a.persist();var o=this.props,i=o.onMouseLeave,l=o.children,c=Un(l,yt);c?this.setState({isTooltipActive:!1,activeNode:null},function(){i&&i(s,a)}):i&&i(s,a)}},{key:"handleClick",value:function(s){var a=this.props,o=a.onClick,i=a.type;if(i==="nest"&&s.children){var l=this.props,c=l.width,d=l.height,u=l.dataKey,m=l.aspectRatio,f=mb({depth:0,node:wr(wr({},s),{},{x:0,y:0,width:c,height:d}),index:0,valueKey:u}),h=fb(f,m),x=this.state.nestIndex;x.push(s),this.setState({formatRoot:h,currentRoot:f,nestIndex:x})}o&&o(s)}},{key:"handleNestIndex",value:function(s,a){var o=this.state.nestIndex,i=this.props,l=i.width,c=i.height,d=i.dataKey,u=i.aspectRatio,m=mb({depth:0,node:wr(wr({},s),{},{x:0,y:0,width:l,height:c}),index:0,valueKey:d}),f=fb(m,u);o=o.slice(0,a+1),this.setState({formatRoot:f,currentRoot:s,nestIndex:o})}},{key:"renderItem",value:function(s,a,o){var i=this,l=this.props,c=l.isAnimationActive,d=l.animationBegin,u=l.animationDuration,m=l.animationEasing,f=l.isUpdateAnimationActive,h=l.type,x=l.animationId,p=l.colorPanel,v=this.state.isAnimationFinished,j=a.width,g=a.height,N=a.x,_=a.y,b=a.depth,w=parseInt("".concat((Math.random()*2-1)*j),10),S={};return(o||h==="nest")&&(S={onMouseEnter:this.handleMouseEnter.bind(this,a),onMouseLeave:this.handleMouseLeave.bind(this,a),onClick:this.handleClick.bind(this,a)}),c?K.createElement(Fs,{begin:d,duration:u,isActive:c,easing:m,key:"treemap-".concat(x),from:{x:N,y:_,width:j,height:g},to:{x:N,y:_,width:j,height:g},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(C){var A=C.x,P=C.y,k=C.width,E=C.height;return K.createElement(Fs,{from:"translate(".concat(w,"px, ").concat(w,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:d,easing:m,isActive:c,duration:u},K.createElement(Dt,S,function(){return b>2&&!v?null:i.constructor.renderContentItem(s,wr(wr({},a),{},{isAnimationActive:c,isUpdateAnimationActive:!f,width:k,height:E,x:A,y:P}),h,p)}()))}):K.createElement(Dt,S,this.constructor.renderContentItem(s,wr(wr({},a),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:j,height:g,x:N,y:_}),h,p))}},{key:"renderNode",value:function(s,a){var o=this,i=this.props,l=i.content,c=i.type,d=wr(wr(wr({},ct(this.props,!1)),a),{},{root:s}),u=!a.children||!a.children.length,m=this.state.currentRoot,f=(m.children||[]).filter(function(h){return h.depth===a.depth&&h.name===a.name});return!f.length&&s.depth&&c==="nest"?null:K.createElement(Dt,{key:"recharts-treemap-node-".concat(d.x,"-").concat(d.y,"-").concat(d.name),className:"recharts-treemap-depth-".concat(a.depth)},this.renderItem(l,d,u),a.children&&a.children.length?a.children.map(function(h){return o.renderNode(a,h)}):null)}},{key:"renderAllNodes",value:function(){var s=this.state.formatRoot;return s?this.renderNode(s,s):null}},{key:"renderTooltip",value:function(){var s=this.props,a=s.children,o=s.nameKey,i=Un(a,yt);if(!i)return null;var l=this.props,c=l.width,d=l.height,u=this.state,m=u.isTooltipActive,f=u.activeNode,h={x:0,y:0,width:c,height:d},x=f?{x:f.x+f.width/2,y:f.y+f.height/2}:null,p=m&&f?[{payload:f,name:yr(f,o,""),value:yr(f,Eh)}]:[];return K.cloneElement(i,{viewBox:h,active:m,coordinate:x,label:"",payload:p})}},{key:"renderNestIndex",value:function(){var s=this,a=this.props,o=a.nameKey,i=a.nestIndexContent,l=this.state.nestIndex;return K.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},l.map(function(c,d){var u=ks(c,o,"root"),m=null;return K.isValidElement(i)&&(m=K.cloneElement(i,c,d)),xt(i)?m=i(c,d):m=u,K.createElement("div",{onClick:s.handleNestIndex.bind(s,c,d),key:"nest-index-".concat(gi()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},m)}))}},{key:"render",value:function(){if(!ow(this))return null;var s=this.props,a=s.width,o=s.height,i=s.className,l=s.style,c=s.children,d=s.type,u=ySe(s,jSe),m=ct(u,!1);return K.createElement("div",{className:Mt("recharts-wrapper",i),style:wr(wr({},l),{},{position:"relative",cursor:"default",width:a,height:o}),role:"region"},K.createElement(Ng,Cv({},m,{width:a,height:d==="nest"?o-30:o}),this.renderAllNodes(),OZ(c)),this.renderTooltip(),d==="nest"&&this.renderNestIndex())}}],[{key:"getDerivedStateFromProps",value:function(s,a){if(s.data!==a.prevData||s.type!==a.prevType||s.width!==a.prevWidth||s.height!==a.prevHeight||s.dataKey!==a.prevDataKey||s.aspectRatio!==a.prevAspectRatio){var o=mb({depth:0,node:{children:s.data,x:0,y:0,width:s.width,height:s.height},index:0,valueKey:s.dataKey}),i=fb(o,s.aspectRatio);return wr(wr({},a),{},{formatRoot:i,currentRoot:o,nestIndex:[o],prevAspectRatio:s.aspectRatio,prevData:s.data,prevWidth:s.width,prevHeight:s.height,prevDataKey:s.dataKey,prevType:s.type})}return null}},{key:"renderContentItem",value:function(s,a,o,i){if(K.isValidElement(s))return K.cloneElement(s,a);if(xt(s))return s(a);var l=a.x,c=a.y,d=a.width,u=a.height,m=a.index,f=null;d>10&&u>10&&a.children&&o==="nest"&&(f=K.createElement(U3,{points:[{x:l+2,y:c+u/2},{x:l+6,y:c+u/2+3},{x:l+2,y:c+u/2+6}]}));var h=null,x=Fd(a.name);d>20&&u>20&&x.width<d&&x.height<u&&(h=K.createElement("text",{x:l+8,y:c+u/2+7,fontSize:14},a.name));var p=i||vSe;return K.createElement("g",null,K.createElement(rj,Cv({fill:a.depth<2?p[m%p.length]:"rgba(255,255,255,0)",stroke:"#fff"},gSe(a,"children"),{role:"img"})),f,h)}}])}(y.PureComponent);ti(vc,"displayName","Treemap");ti(vc,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!$s.isSsr,isUpdateAnimationActive:!$s.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});var DSe=op({chartName:"AreaChart",GraphicalChild:ji,axisComponents:[{axisType:"xAxis",AxisComp:jt},{axisType:"yAxis",AxisComp:gt}],formatAxisMap:dj}),$x=op({chartName:"ComposedChart",GraphicalChild:[Wt,ji,rt,xj],axisComponents:[{axisType:"xAxis",AxisComp:jt},{axisType:"yAxis",AxisComp:gt},{axisType:"zAxis",AxisComp:pj}],formatAxisMap:dj});const ce=new Proxy({},{get(){throw new Error("[MIGRACIN] Se intent usar Supabase. Reemplaza este acceso por apiFetch() hacia el backend.")}}),iL=()=>{const[e,t]=y.useState({ventasDelDia:0,ventasDelMes:0,ventasDelAno:0,otrosIngresosDelDia:0,otrosIngresosDelMes:0,otrosIngresosDelAno:0,descuentosDelDia:0,descuentosDelMes:0,descuentosDelAno:0,ingresoNetoDelDia:0,ingresoNetoDelMes:0,ingresoNetoDelAno:0,totalIngresosDelDia:0,totalIngresosDelMes:0,totalIngresosDelAno:0}),[n,s]=y.useState(!0),[a,o]=y.useState(null),i=async()=>{try{s(!0),o(null);const l=new Date,c=new Date(l.getFullYear(),l.getMonth(),l.getDate()).toISOString().split("T")[0],d=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],u=new Date(l.getFullYear(),0,1).toISOString().split("T")[0],{data:m,error:f}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha, user_id)").gte("asientos_contables.fecha",u).like("cuenta_codigo","4%");if(f)throw console.error("Error fetching detalles de ingresos:",f),f;if(!m||m.length===0){t({ventasDelDia:0,ventasDelMes:0,ventasDelAno:0,otrosIngresosDelDia:0,otrosIngresosDelMes:0,otrosIngresosDelAno:0,descuentosDelDia:0,descuentosDelMes:0,descuentosDelAno:0,ingresoNetoDelDia:0,ingresoNetoDelMes:0,ingresoNetoDelAno:0,totalIngresosDelDia:0,totalIngresosDelMes:0,totalIngresosDelAno:0});return}let h=0,x=0,p=0,v=0,j=0,g=0,N=0,_=0,b=0;m.forEach(A=>{const P=A.asientos_contables.fecha;if(A.cuenta_codigo==="4003"){const k=(A.debe||0)-(A.haber||0);P>=c&&(N+=k),P>=d&&(_+=k),P>=u&&(b+=k)}else if(A.cuenta_codigo==="4001"){const k=(A.haber||0)-(A.debe||0);P>=c&&(h+=k),P>=d&&(x+=k),P>=u&&(p+=k)}else{const k=(A.haber||0)-(A.debe||0);P>=c&&(v+=k),P>=d&&(j+=k),P>=u&&(g+=k)}});const w=Math.max(0,h-N),S=Math.max(0,x-_),C=Math.max(0,p-b);t({ventasDelDia:Math.max(0,h),ventasDelMes:Math.max(0,x),ventasDelAno:Math.max(0,p),otrosIngresosDelDia:Math.max(0,v),otrosIngresosDelMes:Math.max(0,j),otrosIngresosDelAno:Math.max(0,g),descuentosDelDia:N,descuentosDelMes:_,descuentosDelAno:b,ingresoNetoDelDia:w,ingresoNetoDelMes:S,ingresoNetoDelAno:C,totalIngresosDelDia:w+v,totalIngresosDelMes:S+j,totalIngresosDelAno:C+g})}catch(l){console.error("Error fetching ventas resumen:",l),o(l instanceof Error?l.message:"Error desconocido")}finally{s(!1)}};return y.useEffect(()=>{i();const l=ce.channel("asientos-changes-ventas").on("postgres_changes",{event:"*",schema:"public",table:"asientos_contables"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"detalle_asientos"},()=>{i()}).subscribe();return()=>{ce.removeChannel(l)}},[]),{ventasResumen:e,loading:n,error:a,refetch:i}},FSe=()=>{const{ventasResumen:e,loading:t,error:n}=iL();if(t)return r.jsx(G,{className:"col-span-2 border-0 shadow-lg",children:r.jsx(Q,{className:"flex items-center justify-center h-[400px]",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin text-primary"})})});if(n)return r.jsx(G,{className:"col-span-2 border-0 shadow-lg",children:r.jsx(Q,{className:"flex items-center justify-center h-[400px]",children:r.jsxs("p",{className:"text-destructive",children:["Error: ",n]})})});const s=[{periodo:"Da",ventas:e.ventasDelDia,descuentos:e.descuentosDelDia,ingresoNeto:e.ingresoNetoDelDia},{periodo:"Mes",ventas:e.ventasDelMes,descuentos:e.descuentosDelMes,ingresoNeto:e.ingresoNetoDelMes},{periodo:"Ao",ventas:e.ventasDelAno,descuentos:e.descuentosDelAno,ingresoNeto:e.ingresoNetoDelAno}],a=o=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(o);return r.jsxs(G,{className:"col-span-2 border-0 shadow-lg bg-gradient-to-br from-card to-secondary/20",children:[r.jsx(ne,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(tr,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-xl",children:"Anlisis de Ventas"}),r.jsx(Me,{children:"Ventas, descuentos e ingresos netos"})]})]})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:300,children:r.jsxs(Gt,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(jt,{dataKey:"periodo",axisLine:!1,tickLine:!1,className:"text-muted-foreground"}),r.jsx(gt,{tickFormatter:a,axisLine:!1,tickLine:!1,className:"text-muted-foreground"}),r.jsx(yt,{formatter:o=>a(o),contentStyle:{backgroundColor:"hsl(var(--card))",border:"none",borderRadius:"12px",boxShadow:"0 10px 40px -10px rgba(0,0,0,0.2)"}}),r.jsx(jr,{}),r.jsx(rt,{dataKey:"ventas",fill:"hsl(var(--primary))",name:"Ventas Brutas",radius:[4,4,0,0]}),r.jsx(rt,{dataKey:"descuentos",fill:"hsl(var(--destructive))",name:"Descuentos",radius:[4,4,0,0]}),r.jsx(rt,{dataKey:"ingresoNeto",fill:"hsl(var(--success))",name:"Ingreso Neto",radius:[4,4,0,0]})]})}),r.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-primary/5 rounded-xl border border-primary/10 hover:border-primary/30 transition-colors",children:[r.jsx("p",{className:"font-medium text-primary text-sm mb-1",children:"Da"}),r.jsx("p",{className:"text-lg font-bold text-foreground",children:a(e.ventasDelDia)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Desc: ",a(e.descuentosDelDia)]}),r.jsxs("p",{className:"text-sm font-semibold text-success mt-1",children:["Neto: ",a(e.ingresoNetoDelDia)]})]}),r.jsxs("div",{className:"text-center p-4 bg-accent/10 rounded-xl border border-accent/20 hover:border-accent/40 transition-colors",children:[r.jsx("p",{className:"font-medium text-accent text-sm mb-1",children:"Mes"}),r.jsx("p",{className:"text-lg font-bold text-foreground",children:a(e.ventasDelMes)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Desc: ",a(e.descuentosDelMes)]}),r.jsxs("p",{className:"text-sm font-semibold text-success mt-1",children:["Neto: ",a(e.ingresoNetoDelMes)]})]}),r.jsxs("div",{className:"text-center p-4 bg-success/10 rounded-xl border border-success/20 hover:border-success/40 transition-colors",children:[r.jsx("p",{className:"font-medium text-success text-sm mb-1",children:"Ao"}),r.jsx("p",{className:"text-lg font-bold text-foreground",children:a(e.ventasDelAno)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Desc: ",a(e.descuentosDelAno)]}),r.jsxs("p",{className:"text-sm font-semibold text-success mt-1",children:["Neto: ",a(e.ingresoNetoDelAno)]})]})]})]})]})},ISe=()=>{const{ventasResumen:e,loading:t}=iL(),n=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(a),s=e.ventasDelMes>0?(e.ingresoNetoDelMes/e.ventasDelMes*100).toFixed(1):"0";return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-secondary/30",children:r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-primary via-primary/90 to-accent p-8 text-primary-foreground shadow-xl",children:[r.jsx("div",{className:"absolute top-0 right-0 -mt-8 -mr-8 h-40 w-40 rounded-full bg-white/10 blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 -mb-8 -ml-8 h-32 w-32 rounded-full bg-white/5 blur-2xl"}),r.jsxs("div",{className:"relative",children:[r.jsx("h1",{className:"text-4xl font-bold mb-2 tracking-tight",children:"Dashboard Financiero"}),r.jsx("p",{className:"text-primary-foreground/80 text-lg",children:"Resumen completo de tu actividad financiera"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(G,{className:"group relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/80 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 h-24 w-24 bg-primary/10 rounded-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsx(ne,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Me,{className:"text-muted-foreground font-medium",children:"Ventas del Da"}),r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(er,{className:"h-5 w-5 text-primary"})})]})}),r.jsxs(Q,{children:[r.jsx("p",{className:"text-3xl font-bold text-foreground mb-1",children:t?"...":n(e.ventasDelDia)}),r.jsxs("p",{className:"text-sm text-accent",children:["Neto: ",t?"...":n(e.ingresoNetoDelDia)]})]})]}),r.jsxs(G,{className:"group relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/80 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 h-24 w-24 bg-accent/20 rounded-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsx(ne,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Me,{className:"text-muted-foreground font-medium",children:"Ventas del Mes"}),r.jsx("div",{className:"p-2 rounded-lg bg-accent/20",children:r.jsx(Ku,{className:"h-5 w-5 text-accent"})})]})}),r.jsxs(Q,{children:[r.jsx("p",{className:"text-3xl font-bold text-foreground mb-1",children:t?"...":n(e.ventasDelMes)}),r.jsxs("p",{className:"text-sm text-accent",children:["Neto: ",t?"...":n(e.ingresoNetoDelMes)]})]})]}),r.jsxs(G,{className:"group relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/80 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 h-24 w-24 bg-success/15 rounded-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsx(ne,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Me,{className:"text-muted-foreground font-medium",children:"Ventas del Ao"}),r.jsx("div",{className:"p-2 rounded-lg bg-success/15",children:r.jsx(tr,{className:"h-5 w-5 text-success"})})]})}),r.jsxs(Q,{children:[r.jsx("p",{className:"text-3xl font-bold text-foreground mb-1",children:t?"...":n(e.ventasDelAno)}),r.jsxs("p",{className:"text-sm text-success",children:["Neto: ",t?"...":n(e.ingresoNetoDelAno)]})]})]}),r.jsxs(G,{className:"group relative overflow-hidden border-0 bg-gradient-to-br from-primary to-primary/90 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 h-24 w-24 bg-white/10 rounded-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsx(ne,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Me,{className:"text-primary-foreground/80 font-medium",children:"Margen del Mes"}),r.jsx("div",{className:"p-2 rounded-lg bg-white/20",children:r.jsx(Hh,{className:"h-5 w-5 text-primary-foreground"})})]})}),r.jsxs(Q,{children:[r.jsx("p",{className:"text-3xl font-bold text-primary-foreground mb-1",children:t?"...":`${s}%`}),r.jsx("p",{className:"text-sm text-primary-foreground/70",children:"Ingreso neto vs ventas"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(FSe,{}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-0 shadow-lg bg-gradient-to-br from-card to-secondary/30",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:r.jsx(Rn,{className:"h-5 w-5 text-destructive"})}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-base",children:"Descuentos del Mes"}),r.jsx(Me,{children:"Porcentaje sobre ventas"})]})]})}),r.jsxs(Q,{children:[r.jsx("p",{className:"text-3xl font-bold text-foreground",children:t?"...":n(e.descuentosDelMes)}),r.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-2 rounded-full bg-muted overflow-hidden",children:r.jsx("div",{className:"h-full bg-destructive rounded-full transition-all duration-500",style:{width:`${e.ventasDelMes>0?Math.min(e.descuentosDelMes/e.ventasDelMes*100,100):0}%`}})}),r.jsxs("span",{className:"text-sm font-medium text-destructive",children:[e.ventasDelMes>0?(e.descuentosDelMes/e.ventasDelMes*100).toFixed(1):"0","%"]})]})]})]}),r.jsxs(G,{className:"border-0 shadow-lg bg-gradient-to-br from-card to-secondary/30",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:r.jsx(ps,{className:"h-5 w-5 text-success"})}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-base",children:"Balance del Mes"}),r.jsx(Me,{children:"Ingreso neto total"})]})]})}),r.jsxs(Q,{children:[r.jsx("p",{className:"text-3xl font-bold text-success",children:t?"...":n(e.ingresoNetoDelMes)}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Despus de descuentos aplicados"})]})]})]})]})]})})})},RSe=()=>{const e=Ju();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),r.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),r.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},LSe=Kh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _e({className:e,variant:t,...n}){return r.jsx("div",{className:Te(LSe({variant:t}),e),...n})}const Mh=Kh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Pe=y.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},o)=>{const i=s?tq:"button";return r.jsx(i,{className:Te(Mh({variant:t,size:n,className:e})),ref:o,...a})});Pe.displayName="Button";const Ae=y.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));Ae.displayName="Input";var BSe="Label",lL=y.forwardRef((e,t)=>r.jsx(Ze.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lL.displayName=BSe;var cL=lL;const zSe=Kh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),se=y.forwardRef(({className:e,...t},n)=>r.jsx(cL,{ref:n,className:Te(zSe(),e),...t}));se.displayName=cL.displayName;var vj="Collapsible",[VSe,dL]=hn(vj),[WSe,F2]=VSe(vj),uL=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:o,onOpenChange:i,...l}=e,[c,d]=hs({prop:s,defaultProp:a??!1,onChange:i,caller:vj});return r.jsx(WSe,{scope:n,disabled:o,contentId:cn(),open:c,onOpenToggle:y.useCallback(()=>d(u=>!u),[d]),children:r.jsx(Ze.div,{"data-state":B2(c),"data-disabled":o?"":void 0,...l,ref:t})})});uL.displayName=vj;var mL="CollapsibleTrigger",I2=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,a=F2(mL,n);return r.jsx(Ze.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":B2(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:Ge(e.onClick,a.onOpenToggle)})});I2.displayName=mL;var R2="CollapsibleContent",L2=y.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=F2(R2,e.__scopeCollapsible);return r.jsx(Qn,{present:n||a.open,children:({present:o})=>r.jsx(qSe,{...s,ref:t,present:o})})});L2.displayName=R2;var qSe=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:a,...o}=e,i=F2(R2,n),[l,c]=y.useState(s),d=y.useRef(null),u=Ft(t,d),m=y.useRef(0),f=m.current,h=y.useRef(0),x=h.current,p=i.open||l,v=y.useRef(p),j=y.useRef(void 0);return y.useEffect(()=>{const g=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(g)},[]),nn(()=>{const g=d.current;if(g){j.current=j.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const N=g.getBoundingClientRect();m.current=N.height,h.current=N.width,v.current||(g.style.transitionDuration=j.current.transitionDuration,g.style.animationName=j.current.animationName),c(s)}},[i.open,s]),r.jsx(Ze.div,{"data-state":B2(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!p,...o,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:p&&a})});function B2(e){return e?"open":"closed"}var fL=uL,USe=I2,KSe=L2,GSe=y.createContext(void 0);function xm(e){const t=y.useContext(GSe);return e||t||"ltr"}var so="Accordion",HSe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[z2,XSe,YSe]=qh(so),[jj,jFe]=hn(so,[YSe,dL]),V2=dL(),hL=K.forwardRef((e,t)=>{const{type:n,...s}=e,a=s,o=s;return r.jsx(z2.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?r.jsx(e2e,{...o,ref:t}):r.jsx(JSe,{...a,ref:t})})});hL.displayName=so;var[pL,QSe]=jj(so),[xL,ZSe]=jj(so,{collapsible:!1}),JSe=K.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},collapsible:o=!1,...i}=e,[l,c]=hs({prop:n,defaultProp:s??"",onChange:a,caller:so});return r.jsx(pL,{scope:e.__scopeAccordion,value:K.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:K.useCallback(()=>o&&c(""),[o,c]),children:r.jsx(xL,{scope:e.__scopeAccordion,collapsible:o,children:r.jsx(gL,{...i,ref:t})})})}),e2e=K.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},...o}=e,[i,l]=hs({prop:n,defaultProp:s??[],onChange:a,caller:so}),c=K.useCallback(u=>l((m=[])=>[...m,u]),[l]),d=K.useCallback(u=>l((m=[])=>m.filter(f=>f!==u)),[l]);return r.jsx(pL,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:d,children:r.jsx(xL,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(gL,{...o,ref:t})})})}),[t2e,yj]=jj(so),gL=K.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:a,orientation:o="vertical",...i}=e,l=K.useRef(null),c=Ft(l,t),d=XSe(n),m=xm(a)==="ltr",f=Ge(e.onKeyDown,h=>{var C;if(!HSe.includes(h.key))return;const x=h.target,p=d().filter(A=>{var P;return!((P=A.ref.current)!=null&&P.disabled)}),v=p.findIndex(A=>A.ref.current===x),j=p.length;if(v===-1)return;h.preventDefault();let g=v;const N=0,_=j-1,b=()=>{g=v+1,g>_&&(g=N)},w=()=>{g=v-1,g<N&&(g=_)};switch(h.key){case"Home":g=N;break;case"End":g=_;break;case"ArrowRight":o==="horizontal"&&(m?b():w());break;case"ArrowDown":o==="vertical"&&b();break;case"ArrowLeft":o==="horizontal"&&(m?w():b());break;case"ArrowUp":o==="vertical"&&w();break}const S=g%j;(C=p[S].ref.current)==null||C.focus()});return r.jsx(t2e,{scope:n,disabled:s,direction:a,orientation:o,children:r.jsx(z2.Slot,{scope:n,children:r.jsx(Ze.div,{...i,"data-orientation":o,ref:c,onKeyDown:s?void 0:f})})})}),Av="AccordionItem",[r2e,W2]=jj(Av),vL=K.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...a}=e,o=yj(Av,n),i=QSe(Av,n),l=V2(n),c=cn(),d=s&&i.value.includes(s)||!1,u=o.disabled||e.disabled;return r.jsx(r2e,{scope:n,open:d,disabled:u,triggerId:c,children:r.jsx(fL,{"data-orientation":o.orientation,"data-state":_L(d),...l,...a,ref:t,disabled:u,open:d,onOpenChange:m=>{m?i.onItemOpen(s):i.onItemClose(s)}})})});vL.displayName=Av;var jL="AccordionHeader",yL=K.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=yj(so,n),o=W2(jL,n);return r.jsx(Ze.h3,{"data-orientation":a.orientation,"data-state":_L(o.open),"data-disabled":o.disabled?"":void 0,...s,ref:t})});yL.displayName=jL;var F1="AccordionTrigger",bL=K.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=yj(so,n),o=W2(F1,n),i=ZSe(F1,n),l=V2(n);return r.jsx(z2.ItemSlot,{scope:n,children:r.jsx(USe,{"aria-disabled":o.open&&!i.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...l,...s,ref:t})})});bL.displayName=F1;var NL="AccordionContent",wL=K.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=yj(so,n),o=W2(NL,n),i=V2(n);return r.jsx(KSe,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...i,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});wL.displayName=NL;function _L(e){return e?"open":"closed"}var n2e=hL,s2e=vL,a2e=yL,SL=bL,CL=wL;const Co=n2e,Ga=y.forwardRef(({className:e,...t},n)=>r.jsx(s2e,{ref:n,className:Te("border-b",e),...t}));Ga.displayName="AccordionItem";const Ha=y.forwardRef(({className:e,children:t,...n},s)=>r.jsx(a2e,{className:"flex",children:r.jsxs(SL,{ref:s,className:Te("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,r.jsx(Po,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Ha.displayName=SL.displayName;const Xa=y.forwardRef(({className:e,children:t,...n},s)=>r.jsx(CL,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:r.jsx("div",{className:Te("pb-4 pt-0",e),children:t})}));Xa.displayName=CL.displayName;var hb="rovingFocusGroup.onEntryFocus",o2e={bubbles:!1,cancelable:!0},lp="RovingFocusGroup",[I1,PL,i2e]=qh(lp),[l2e,gm]=hn(lp,[i2e]),[c2e,d2e]=l2e(lp),AL=y.forwardRef((e,t)=>r.jsx(I1.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(I1.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(u2e,{...e,ref:t})})}));AL.displayName=lp;var u2e=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,f=y.useRef(null),h=Ft(t,f),x=xm(o),[p,v]=hs({prop:i,defaultProp:l??null,onChange:c,caller:lp}),[j,g]=y.useState(!1),N=fs(d),_=PL(n),b=y.useRef(!1),[w,S]=y.useState(0);return y.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(hb,N),()=>C.removeEventListener(hb,N)},[N]),r.jsx(c2e,{scope:n,orientation:s,dir:x,loop:a,currentTabStopId:p,onItemFocus:y.useCallback(C=>v(C),[v]),onItemShiftTab:y.useCallback(()=>g(!0),[]),onFocusableItemAdd:y.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:y.useCallback(()=>S(C=>C-1),[]),children:r.jsx(Ze.div,{tabIndex:j||w===0?-1:0,"data-orientation":s,...m,ref:h,style:{outline:"none",...e.style},onMouseDown:Ge(e.onMouseDown,()=>{b.current=!0}),onFocus:Ge(e.onFocus,C=>{const A=!b.current;if(C.target===C.currentTarget&&A&&!j){const P=new CustomEvent(hb,o2e);if(C.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=_().filter(V=>V.focusable),E=k.find(V=>V.active),O=k.find(V=>V.id===p),T=[E,O,...k].filter(Boolean).map(V=>V.ref.current);OL(T,u)}}b.current=!1}),onBlur:Ge(e.onBlur,()=>g(!1))})})}),EL="RovingFocusGroupItem",ML=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=cn(),d=o||c,u=d2e(EL,n),m=u.currentTabStopId===d,f=PL(n),{onFocusableItemAdd:h,onFocusableItemRemove:x,currentTabStopId:p}=u;return y.useEffect(()=>{if(s)return h(),()=>x()},[s,h,x]),r.jsx(I1.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:r.jsx(Ze.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Ge(e.onMouseDown,v=>{s?u.onItemFocus(d):v.preventDefault()}),onFocus:Ge(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Ge(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const j=h2e(v,u.orientation,u.dir);if(j!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let N=f().filter(_=>_.focusable).map(_=>_.ref.current);if(j==="last")N.reverse();else if(j==="prev"||j==="next"){j==="prev"&&N.reverse();const _=N.indexOf(v.currentTarget);N=u.loop?p2e(N,_+1):N.slice(_+1)}setTimeout(()=>OL(N))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:p!=null}):i})})});ML.displayName=EL;var m2e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function f2e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function h2e(e,t,n){const s=f2e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return m2e[s]}function OL(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function p2e(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var q2=AL,U2=ML,bj="Tabs",[x2e,yFe]=hn(bj,[gm]),TL=gm(),[g2e,K2]=x2e(bj),kL=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=xm(l),[m,f]=hs({prop:s,onChange:a,defaultProp:o??"",caller:bj});return r.jsx(g2e,{scope:n,baseId:cn(),value:m,onValueChange:f,orientation:i,dir:u,activationMode:c,children:r.jsx(Ze.div,{dir:u,"data-orientation":i,...d,ref:t})})});kL.displayName=bj;var $L="TabsList",DL=y.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,o=K2($L,n),i=TL(n);return r.jsx(q2,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(Ze.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});DL.displayName=$L;var FL="TabsTrigger",IL=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=e,i=K2(FL,n),l=TL(n),c=BL(i.baseId,s),d=zL(i.baseId,s),u=s===i.value;return r.jsx(U2,{asChild:!0,...l,focusable:!a,active:u,children:r.jsx(Ze.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:Ge(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?i.onValueChange(s):m.preventDefault()}),onKeyDown:Ge(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(s)}),onFocus:Ge(e.onFocus,()=>{const m=i.activationMode!=="manual";!u&&!a&&m&&i.onValueChange(s)})})})});IL.displayName=FL;var RL="TabsContent",LL=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...i}=e,l=K2(RL,n),c=BL(l.baseId,s),d=zL(l.baseId,s),u=s===l.value,m=y.useRef(u);return y.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(Qn,{present:a||u,children:({present:f})=>r.jsx(Ze.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:f&&o})})});LL.displayName=RL;function BL(e,t){return`${e}-trigger-${t}`}function zL(e,t){return`${e}-content-${t}`}var v2e=kL,VL=DL,WL=IL,qL=LL;const Lr=v2e,Dr=y.forwardRef(({className:e,...t},n)=>r.jsx(VL,{ref:n,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Dr.displayName=VL.displayName;const Qe=y.forwardRef(({className:e,...t},n)=>r.jsx(WL,{ref:n,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Qe.displayName=WL.displayName;const Je=y.forwardRef(({className:e,...t},n)=>r.jsx(qL,{ref:n,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Je.displayName=qL.displayName;const Ca=()=>it({queryKey:["cuentas"],queryFn:async()=>{const{data:e,error:t}=await ce.from("cuentas").select("*").order("codigo");if(t)throw t;const n={};return e==null||e.forEach(s=>{const{estado_financiero:a,grupo:o,subgrupo:i}=s;n[a]||(n[a]={}),n[a][o]||(n[a][o]={}),n[a][o][i]||(n[a][o][i]=[]),n[a][o][i].push(s)}),{estadosFinancieros:n,cuentasFlat:e||[]}}}),Nj=()=>it({queryKey:["subcuentas"],queryFn:async()=>{const{data:e,error:t}=await ce.from("subcuentas").select(`
          *,
          cuentas!subcuentas_cuenta_madre_codigo_fkey (nombre)
        `).order("created_at",{ascending:!1});if(t)throw t;return(e==null?void 0:e.map(s=>{var a;return{...s,nombreCuentaMadre:((a=s.cuentas)==null?void 0:a.nombre)||"Cuenta no encontrada"}}))||[]}}),j2e=()=>it({queryKey:["subcuentas-inventario"],queryFn:async()=>{const{data:e,error:t}=await ce.from("subcuentas").select(`
          *,
          cuentas!subcuentas_cuenta_madre_codigo_fkey (nombre)
        `).in("cuenta_madre_codigo",["1005","1006"]).order("created_at",{ascending:!1});if(t)throw t;return(e==null?void 0:e.map(s=>{var a;return{...s,nombreCuentaMadre:((a=s.cuentas)==null?void 0:a.nombre)||"Cuenta no encontrada"}}))||[]}}),y2e=()=>{const e=Gr(),{toast:t}=Rs();return Qt({mutationFn:async({nombre:n,cuentaMadreCodigo:s})=>{const{data:a,error:o}=await ce.from("subcuentas").insert({nombre:n,cuenta_madre_codigo:s}).select().single();if(o)throw o;return a},onSuccess:()=>{e.invalidateQueries({queryKey:["subcuentas"]}),t({title:"Subcuenta creada",description:"La subcuenta ha sido creada exitosamente"})},onError:n=>{t({title:"Error",description:"Error al crear la subcuenta: "+(n.message||"Error desconocido"),variant:"destructive"})}})},b2e=()=>{const e=Gr(),{toast:t}=Rs();return Qt({mutationFn:async n=>{const{error:s}=await ce.from("subcuentas").delete().eq("id",n);if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["subcuentas"]}),t({title:"Subcuenta eliminada",description:"La subcuenta ha sido eliminada exitosamente"})},onError:()=>{t({title:"Error",description:"Error al eliminar la subcuenta",variant:"destructive"})}})};function ZT(e,[t,n]){return Math.min(n,Math.max(t,e))}var pb=0;function wj(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??JT()),document.body.insertAdjacentElement("beforeend",e[1]??JT()),pb++,()=>{pb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),pb--}},[])}function JT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var xb="focusScope.autoFocusOnMount",gb="focusScope.autoFocusOnUnmount",ek={bubbles:!1,cancelable:!0},N2e="FocusScope",cp=y.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=y.useState(null),d=fs(a),u=fs(o),m=y.useRef(null),f=Ft(t,p=>c(p)),h=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(s){let p=function(N){if(h.paused||!l)return;const _=N.target;l.contains(_)?m.current=_:Ai(m.current,{select:!0})},v=function(N){if(h.paused||!l)return;const _=N.relatedTarget;_!==null&&(l.contains(_)||Ai(m.current,{select:!0}))},j=function(N){if(document.activeElement===document.body)for(const b of N)b.removedNodes.length>0&&Ai(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const g=new MutationObserver(j);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),g.disconnect()}}},[s,l,h.paused]),y.useEffect(()=>{if(l){rk.add(h);const p=document.activeElement;if(!l.contains(p)){const j=new CustomEvent(xb,ek);l.addEventListener(xb,d),l.dispatchEvent(j),j.defaultPrevented||(w2e(A2e(UL(l)),{select:!0}),document.activeElement===p&&Ai(l))}return()=>{l.removeEventListener(xb,d),setTimeout(()=>{const j=new CustomEvent(gb,ek);l.addEventListener(gb,u),l.dispatchEvent(j),j.defaultPrevented||Ai(p??document.body,{select:!0}),l.removeEventListener(gb,u),rk.remove(h)},0)}}},[l,d,u,h]);const x=y.useCallback(p=>{if(!n&&!s||h.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,j=document.activeElement;if(v&&j){const g=p.currentTarget,[N,_]=_2e(g);N&&_?!p.shiftKey&&j===_?(p.preventDefault(),n&&Ai(N,{select:!0})):p.shiftKey&&j===N&&(p.preventDefault(),n&&Ai(_,{select:!0})):j===g&&p.preventDefault()}},[n,s,h.paused]);return r.jsx(Ze.div,{tabIndex:-1,...i,ref:f,onKeyDown:x})});cp.displayName=N2e;function w2e(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Ai(s,{select:t}),document.activeElement!==n)return}function _2e(e){const t=UL(e),n=tk(t,e),s=tk(t.reverse(),e);return[n,s]}function UL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function tk(e,t){for(const n of e)if(!S2e(n,{upTo:t}))return n}function S2e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function C2e(e){return e instanceof HTMLInputElement&&"select"in e}function Ai(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&C2e(e)&&t&&e.select()}}var rk=P2e();function P2e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=nk(e,t),e.unshift(t)},remove(t){var n;e=nk(e,t),(n=e[0])==null||n.resume()}}}function nk(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function A2e(e){return e.filter(t=>t.tagName!=="A")}function _j(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var E2e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},nd=new WeakMap,cx=new WeakMap,dx={},vb=0,KL=function(e){return e&&(e.host||KL(e.parentNode))},M2e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=KL(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},O2e=function(e,t,n,s){var a=M2e(t,Array.isArray(e)?e:[e]);dx[n]||(dx[n]=new WeakMap);var o=dx[n],i=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))u(f);else try{var h=f.getAttribute(s),x=h!==null&&h!=="false",p=(nd.get(f)||0)+1,v=(o.get(f)||0)+1;nd.set(f,p),o.set(f,v),i.push(f),p===1&&x&&cx.set(f,!0),v===1&&f.setAttribute(n,"true"),x||f.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",f,j)}})};return u(t),l.clear(),vb++,function(){i.forEach(function(m){var f=nd.get(m)-1,h=o.get(m)-1;nd.set(m,f),o.set(m,h),f||(cx.has(m)||m.removeAttribute(s),cx.delete(m)),h||m.removeAttribute(n)}),vb--,vb||(nd=new WeakMap,nd=new WeakMap,cx=new WeakMap,dx={})}},Sj=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=E2e(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),O2e(s,a,n,"aria-hidden")):function(){return null}},ho=function(){return ho=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ho.apply(this,arguments)};function GL(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function T2e(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var Dx="right-scroll-bar-position",Fx="width-before-scroll-bar",k2e="with-scroll-bars-hidden",$2e="--removed-body-scroll-bar-size";function jb(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function D2e(e,t){var n=y.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var F2e=typeof window<"u"?y.useLayoutEffect:y.useEffect,sk=new WeakMap;function I2e(e,t){var n=D2e(null,function(s){return e.forEach(function(a){return jb(a,s)})});return F2e(function(){var s=sk.get(n);if(s){var a=new Set(s),o=new Set(e),i=n.current;a.forEach(function(l){o.has(l)||jb(l,null)}),o.forEach(function(l){a.has(l)||jb(l,i)})}sk.set(n,e)},[e]),n}function R2e(e){return e}function L2e(e,t){t===void 0&&(t=R2e);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),n}}}};return a}function B2e(e){e===void 0&&(e={});var t=L2e(null);return t.options=ho({async:!0,ssr:!1},e),t}var HL=function(e){var t=e.sideCar,n=GL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return y.createElement(s,ho({},n))};HL.isSideCarExport=!0;function z2e(e,t){return e.useMedium(t),HL}var XL=B2e(),yb=function(){},Cj=y.forwardRef(function(e,t){var n=y.useRef(null),s=y.useState({onScrollCapture:yb,onWheelCapture:yb,onTouchMoveCapture:yb}),a=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,f=e.sideCar,h=e.noRelative,x=e.noIsolation,p=e.inert,v=e.allowPinchZoom,j=e.as,g=j===void 0?"div":j,N=e.gapMode,_=GL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,w=I2e([n,t]),S=ho(ho({},_),a);return y.createElement(y.Fragment,null,u&&y.createElement(b,{sideCar:XL,removeScrollBar:d,shards:m,noRelative:h,noIsolation:x,inert:p,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:N}),i?y.cloneElement(y.Children.only(l),ho(ho({},S),{ref:w})):y.createElement(g,ho({},S,{className:c,ref:w}),l))});Cj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cj.classNames={fullWidth:Fx,zeroRight:Dx};var V2e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function W2e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=V2e();return t&&e.setAttribute("nonce",t),e}function q2e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function U2e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var K2e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=W2e())&&(q2e(t,n),U2e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},G2e=function(){var e=K2e();return function(t,n){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},YL=function(){var e=G2e(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},H2e={left:0,top:0,right:0,gap:0},bb=function(e){return parseInt(e||"",10)||0},X2e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[bb(n),bb(s),bb(a)]},Y2e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return H2e;var t=X2e(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Q2e=YL(),Ld="data-scroll-locked",Z2e=function(e,t,n,s){var a=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(k2e,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Ld,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dx,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Fx,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Dx," .").concat(Dx,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Fx," .").concat(Fx,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Ld,`] {
    `).concat($2e,": ").concat(l,`px;
  }
`)},ak=function(){var e=parseInt(document.body.getAttribute(Ld)||"0",10);return isFinite(e)?e:0},J2e=function(){y.useEffect(function(){return document.body.setAttribute(Ld,(ak()+1).toString()),function(){var e=ak()-1;e<=0?document.body.removeAttribute(Ld):document.body.setAttribute(Ld,e.toString())}},[])},eCe=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;J2e();var o=y.useMemo(function(){return Y2e(a)},[a]);return y.createElement(Q2e,{styles:Z2e(o,!t,a,n?"":"!important")})},R1=!1;if(typeof window<"u")try{var ux=Object.defineProperty({},"passive",{get:function(){return R1=!0,!0}});window.addEventListener("test",ux,ux),window.removeEventListener("test",ux,ux)}catch{R1=!1}var sd=R1?{passive:!1}:!1,tCe=function(e){return e.tagName==="TEXTAREA"},QL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!tCe(e)&&n[t]==="visible")},rCe=function(e){return QL(e,"overflowY")},nCe=function(e){return QL(e,"overflowX")},ok=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=ZL(e,s);if(a){var o=JL(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},sCe=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},aCe=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},ZL=function(e,t){return e==="v"?rCe(t):nCe(t)},JL=function(e,t){return e==="v"?sCe(t):aCe(t)},oCe=function(e,t){return e==="h"&&t==="rtl"?-1:1},iCe=function(e,t,n,s,a){var o=oCe(e,window.getComputedStyle(t).direction),i=o*s,l=n.target,c=t.contains(l),d=!1,u=i>0,m=0,f=0;do{if(!l)break;var h=JL(e,l),x=h[0],p=h[1],v=h[2],j=p-v-o*x;(x||j)&&ZL(e,l)&&(m+=j,f+=x);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(f)<1||!a))&&(d=!0),d},mx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ik=function(e){return[e.deltaX,e.deltaY]},lk=function(e){return e&&"current"in e?e.current:e},lCe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cCe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dCe=0,ad=[];function uCe(e){var t=y.useRef([]),n=y.useRef([0,0]),s=y.useRef(),a=y.useState(dCe++)[0],o=y.useState(YL)[0],i=y.useRef(e);y.useEffect(function(){i.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=T2e([e.lockRef.current],(e.shards||[]).map(lk),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=y.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!i.current.allowPinchZoom;var j=mx(p),g=n.current,N="deltaX"in p?p.deltaX:g[0]-j[0],_="deltaY"in p?p.deltaY:g[1]-j[1],b,w=p.target,S=Math.abs(N)>Math.abs(_)?"h":"v";if("touches"in p&&S==="h"&&w.type==="range")return!1;var C=ok(S,w);if(!C)return!0;if(C?b=S:(b=S==="v"?"h":"v",C=ok(S,w)),!C)return!1;if(!s.current&&"changedTouches"in p&&(N||_)&&(s.current=b),!b)return!0;var A=s.current||b;return iCe(A,v,p,A==="h"?N:_,!0)},[]),c=y.useCallback(function(p){var v=p;if(!(!ad.length||ad[ad.length-1]!==o)){var j="deltaY"in v?ik(v):mx(v),g=t.current.filter(function(b){return b.name===v.type&&(b.target===v.target||v.target===b.shadowParent)&&lCe(b.delta,j)})[0];if(g&&g.should){v.cancelable&&v.preventDefault();return}if(!g){var N=(i.current.shards||[]).map(lk).filter(Boolean).filter(function(b){return b.contains(v.target)}),_=N.length>0?l(v,N[0]):!i.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),d=y.useCallback(function(p,v,j,g){var N={name:p,delta:v,target:j,should:g,shadowParent:mCe(j)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(_){return _!==N})},1)},[]),u=y.useCallback(function(p){n.current=mx(p),s.current=void 0},[]),m=y.useCallback(function(p){d(p.type,ik(p),p.target,l(p,e.lockRef.current))},[]),f=y.useCallback(function(p){d(p.type,mx(p),p.target,l(p,e.lockRef.current))},[]);y.useEffect(function(){return ad.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",c,sd),document.addEventListener("touchmove",c,sd),document.addEventListener("touchstart",u,sd),function(){ad=ad.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,sd),document.removeEventListener("touchmove",c,sd),document.removeEventListener("touchstart",u,sd)}},[]);var h=e.removeScrollBar,x=e.inert;return y.createElement(y.Fragment,null,x?y.createElement(o,{styles:cCe(a)}):null,h?y.createElement(eCe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function mCe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const fCe=z2e(XL,uCe);var dp=y.forwardRef(function(e,t){return y.createElement(Cj,ho({},e,{ref:t,sideCar:fCe}))});dp.classNames=Cj.classNames;var hCe=[" ","Enter","ArrowUp","ArrowDown"],pCe=[" ","Enter"],kc="Select",[Pj,Aj,xCe]=qh(kc),[vm,bFe]=hn(kc,[xCe,Al]),Ej=Al(),[gCe,kl]=vm(kc),[vCe,jCe]=vm(kc),e6=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:f,required:h,form:x}=e,p=Ej(t),[v,j]=y.useState(null),[g,N]=y.useState(null),[_,b]=y.useState(!1),w=xm(d),[S,C]=hs({prop:s,defaultProp:a??!1,onChange:o,caller:kc}),[A,P]=hs({prop:i,defaultProp:l,onChange:c,caller:kc}),k=y.useRef(null),E=v?x||!!v.closest("form"):!0,[O,M]=y.useState(new Set),T=Array.from(O).map(V=>V.props.value).join(";");return r.jsx(u0,{...p,children:r.jsxs(gCe,{required:h,scope:t,trigger:v,onTriggerChange:j,valueNode:g,onValueNodeChange:N,valueNodeHasChildren:_,onValueNodeHasChildrenChange:b,contentId:cn(),value:A,onValueChange:P,open:S,onOpenChange:C,dir:w,triggerPointerDownPosRef:k,disabled:f,children:[r.jsx(Pj.Provider,{scope:t,children:r.jsx(vCe,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(V=>{M(I=>new Set(I).add(V))},[]),onNativeOptionRemove:y.useCallback(V=>{M(I=>{const F=new Set(I);return F.delete(V),F})},[]),children:n})}),E?r.jsxs(_6,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:m,value:A,onChange:V=>P(V.target.value),disabled:f,form:x,children:[A===void 0?r.jsx("option",{value:""}):null,Array.from(O)]},T):null]})})};e6.displayName=kc;var t6="SelectTrigger",r6=y.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,o=Ej(n),i=kl(t6,n),l=i.disabled||s,c=Ft(t,i.onTriggerChange),d=Aj(n),u=y.useRef("touch"),[m,f,h]=C6(p=>{const v=d().filter(N=>!N.disabled),j=v.find(N=>N.value===i.value),g=P6(v,p,j);g!==void 0&&i.onValueChange(g.value)}),x=p=>{l||(i.onOpenChange(!0),h()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return r.jsx(Zh,{asChild:!0,...o,children:r.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":S6(i.value)?"":void 0,...a,ref:c,onClick:Ge(a.onClick,p=>{p.currentTarget.focus(),u.current!=="mouse"&&x(p)}),onPointerDown:Ge(a.onPointerDown,p=>{u.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:Ge(a.onKeyDown,p=>{const v=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(v&&p.key===" ")&&hCe.includes(p.key)&&(x(),p.preventDefault())})})})});r6.displayName=t6;var n6="SelectValue",s6=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:o,placeholder:i="",...l}=e,c=kl(n6,n),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,m=Ft(t,c.onValueNodeChange);return nn(()=>{d(u)},[d,u]),r.jsx(Ze.span,{...l,ref:m,style:{pointerEvents:"none"},children:S6(c.value)?r.jsx(r.Fragment,{children:i}):o})});s6.displayName=n6;var yCe="SelectIcon",a6=y.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(Ze.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});a6.displayName=yCe;var bCe="SelectPortal",o6=e=>r.jsx(Uu,{asChild:!0,...e});o6.displayName=bCe;var $c="SelectContent",i6=y.forwardRef((e,t)=>{const n=kl($c,e.__scopeSelect),[s,a]=y.useState();if(nn(()=>{a(new DocumentFragment)},[]),!n.open){const o=s;return o?Bc.createPortal(r.jsx(l6,{scope:e.__scopeSelect,children:r.jsx(Pj.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(c6,{...e,ref:t})});i6.displayName=$c;var Ma=10,[l6,$l]=vm($c),NCe="SelectContentImpl",wCe=hl("SelectContent.RemoveScroll"),c6=y.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:h,sticky:x,hideWhenDetached:p,avoidCollisions:v,...j}=e,g=kl($c,n),[N,_]=y.useState(null),[b,w]=y.useState(null),S=Ft(t,L=>_(L)),[C,A]=y.useState(null),[P,k]=y.useState(null),E=Aj(n),[O,M]=y.useState(!1),T=y.useRef(!1);y.useEffect(()=>{if(N)return Sj(N)},[N]),wj();const V=y.useCallback(L=>{const[ue,...pe]=E().map(de=>de.ref.current),[we]=pe.slice(-1),re=document.activeElement;for(const de of L)if(de===re||(de==null||de.scrollIntoView({block:"nearest"}),de===ue&&b&&(b.scrollTop=0),de===we&&b&&(b.scrollTop=b.scrollHeight),de==null||de.focus(),document.activeElement!==re))return},[E,b]),I=y.useCallback(()=>V([C,N]),[V,C,N]);y.useEffect(()=>{O&&I()},[O,I]);const{onOpenChange:F,triggerPointerDownPosRef:D}=g;y.useEffect(()=>{if(N){let L={x:0,y:0};const ue=we=>{var re,de;L={x:Math.abs(Math.round(we.pageX)-(((re=D.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(we.pageY)-(((de=D.current)==null?void 0:de.y)??0))}},pe=we=>{L.x<=10&&L.y<=10?we.preventDefault():N.contains(we.target)||F(!1),document.removeEventListener("pointermove",ue),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",pe,{capture:!0})}}},[N,F,D]),y.useEffect(()=>{const L=()=>F(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[F]);const[X,W]=C6(L=>{const ue=E().filter(re=>!re.disabled),pe=ue.find(re=>re.ref.current===document.activeElement),we=P6(ue,L,pe);we&&setTimeout(()=>we.ref.current.focus())}),B=y.useCallback((L,ue,pe)=>{const we=!T.current&&!pe;(g.value!==void 0&&g.value===ue||we)&&(A(L),we&&(T.current=!0))},[g.value]),q=y.useCallback(()=>N==null?void 0:N.focus(),[N]),te=y.useCallback((L,ue,pe)=>{const we=!T.current&&!pe;(g.value!==void 0&&g.value===ue||we)&&k(L)},[g.value]),Y=s==="popper"?L1:d6,H=Y===L1?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:h,sticky:x,hideWhenDetached:p,avoidCollisions:v}:{};return r.jsx(l6,{scope:n,content:N,viewport:b,onViewportChange:w,itemRefCallback:B,selectedItem:C,onItemLeave:q,itemTextRefCallback:te,focusSelectedItem:I,selectedItemText:P,position:s,isPositioned:O,searchRef:X,children:r.jsx(dp,{as:wCe,allowPinchZoom:!0,children:r.jsx(cp,{asChild:!0,trapped:g.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:Ge(a,L=>{var ue;(ue=g.trigger)==null||ue.focus({preventScroll:!0}),L.preventDefault()}),children:r.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:r.jsx(Y,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:L=>L.preventDefault(),...j,...H,onPlaced:()=>M(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Ge(j.onKeyDown,L=>{const ue=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!ue&&L.key.length===1&&W(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let we=E().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(L.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const re=L.target,de=we.indexOf(re);we=we.slice(de+1)}setTimeout(()=>V(we)),L.preventDefault()}})})})})})})});c6.displayName=NCe;var _Ce="SelectItemAlignedPosition",d6=y.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,o=kl($c,n),i=$l($c,n),[l,c]=y.useState(null),[d,u]=y.useState(null),m=Ft(t,S=>u(S)),f=Aj(n),h=y.useRef(!1),x=y.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:j,focusSelectedItem:g}=i,N=y.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&p&&v&&j){const S=o.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),A=o.valueNode.getBoundingClientRect(),P=j.getBoundingClientRect();if(o.dir!=="rtl"){const re=P.left-C.left,de=A.left-re,he=S.left-de,ee=S.width+he,z=Math.max(ee,C.width),U=window.innerWidth-Ma,oe=ZT(de,[Ma,Math.max(Ma,U-z)]);l.style.minWidth=ee+"px",l.style.left=oe+"px"}else{const re=C.right-P.right,de=window.innerWidth-A.right-re,he=window.innerWidth-S.right-de,ee=S.width+he,z=Math.max(ee,C.width),U=window.innerWidth-Ma,oe=ZT(de,[Ma,Math.max(Ma,U-z)]);l.style.minWidth=ee+"px",l.style.right=oe+"px"}const k=f(),E=window.innerHeight-Ma*2,O=p.scrollHeight,M=window.getComputedStyle(d),T=parseInt(M.borderTopWidth,10),V=parseInt(M.paddingTop,10),I=parseInt(M.borderBottomWidth,10),F=parseInt(M.paddingBottom,10),D=T+V+O+F+I,X=Math.min(v.offsetHeight*5,D),W=window.getComputedStyle(p),B=parseInt(W.paddingTop,10),q=parseInt(W.paddingBottom,10),te=S.top+S.height/2-Ma,Y=E-te,H=v.offsetHeight/2,L=v.offsetTop+H,ue=T+V+L,pe=D-ue;if(ue<=te){const re=k.length>0&&v===k[k.length-1].ref.current;l.style.bottom="0px";const de=d.clientHeight-p.offsetTop-p.offsetHeight,he=Math.max(Y,H+(re?q:0)+de+I),ee=ue+he;l.style.height=ee+"px"}else{const re=k.length>0&&v===k[0].ref.current;l.style.top="0px";const he=Math.max(te,T+p.offsetTop+(re?B:0)+H)+pe;l.style.height=he+"px",p.scrollTop=ue-te+p.offsetTop}l.style.margin=`${Ma}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=E+"px",s==null||s(),requestAnimationFrame(()=>h.current=!0)}},[f,o.trigger,o.valueNode,l,d,p,v,j,o.dir,s]);nn(()=>N(),[N]);const[_,b]=y.useState();nn(()=>{d&&b(window.getComputedStyle(d).zIndex)},[d]);const w=y.useCallback(S=>{S&&x.current===!0&&(N(),g==null||g(),x.current=!1)},[N,g]);return r.jsx(CCe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:w,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:r.jsx(Ze.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});d6.displayName=_Ce;var SCe="SelectPopperPosition",L1=y.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=Ma,...o}=e,i=Ej(n);return r.jsx(m0,{...i,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});L1.displayName=SCe;var[CCe,G2]=vm($c,{}),B1="SelectViewport",u6=y.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,o=$l(B1,n),i=G2(B1,n),l=Ft(t,o.onViewportChange),c=y.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Pj.Slot,{scope:n,children:r.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ge(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&m){const h=Math.abs(c.current-u.scrollTop);if(h>0){const x=window.innerHeight-Ma*2,p=parseFloat(m.style.minHeight),v=parseFloat(m.style.height),j=Math.max(p,v);if(j<x){const g=j+h,N=Math.min(x,g),_=g-N;m.style.height=N+"px",m.style.bottom==="0px"&&(u.scrollTop=_>0?_:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});u6.displayName=B1;var m6="SelectGroup",[PCe,ACe]=vm(m6),ECe=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=cn();return r.jsx(PCe,{scope:n,id:a,children:r.jsx(Ze.div,{role:"group","aria-labelledby":a,...s,ref:t})})});ECe.displayName=m6;var f6="SelectLabel",h6=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=ACe(f6,n);return r.jsx(Ze.div,{id:a.id,...s,ref:t})});h6.displayName=f6;var Ev="SelectItem",[MCe,p6]=vm(Ev),x6=y.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:o,...i}=e,l=kl(Ev,n),c=$l(Ev,n),d=l.value===s,[u,m]=y.useState(o??""),[f,h]=y.useState(!1),x=Ft(t,g=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,g,s,a)}),p=cn(),v=y.useRef("touch"),j=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(MCe,{scope:n,value:s,disabled:a,textId:p,isSelected:d,onItemTextChange:y.useCallback(g=>{m(N=>N||((g==null?void 0:g.textContent)??"").trim())},[]),children:r.jsx(Pj.ItemSlot,{scope:n,value:s,disabled:a,textValue:u,children:r.jsx(Ze.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:x,onFocus:Ge(i.onFocus,()=>h(!0)),onBlur:Ge(i.onBlur,()=>h(!1)),onClick:Ge(i.onClick,()=>{v.current!=="mouse"&&j()}),onPointerUp:Ge(i.onPointerUp,()=>{v.current==="mouse"&&j()}),onPointerDown:Ge(i.onPointerDown,g=>{v.current=g.pointerType}),onPointerMove:Ge(i.onPointerMove,g=>{var N;v.current=g.pointerType,a?(N=c.onItemLeave)==null||N.call(c):v.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ge(i.onPointerLeave,g=>{var N;g.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Ge(i.onKeyDown,g=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&g.key===" "||(pCe.includes(g.key)&&j(),g.key===" "&&g.preventDefault())})})})})});x6.displayName=Ev;var Qm="SelectItemText",g6=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...o}=e,i=kl(Qm,n),l=$l(Qm,n),c=p6(Qm,n),d=jCe(Qm,n),[u,m]=y.useState(null),f=Ft(t,j=>m(j),c.onItemTextChange,j=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,j,c.value,c.disabled)}),h=u==null?void 0:u.textContent,x=y.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=d;return nn(()=>(p(x),()=>v(x)),[p,v,x]),r.jsxs(r.Fragment,{children:[r.jsx(Ze.span,{id:c.textId,...o,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Bc.createPortal(o.children,i.valueNode):null]})});g6.displayName=Qm;var v6="SelectItemIndicator",j6=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return p6(v6,n).isSelected?r.jsx(Ze.span,{"aria-hidden":!0,...s,ref:t}):null});j6.displayName=v6;var z1="SelectScrollUpButton",y6=y.forwardRef((e,t)=>{const n=$l(z1,e.__scopeSelect),s=G2(z1,e.__scopeSelect),[a,o]=y.useState(!1),i=Ft(t,s.onScrollButtonChange);return nn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(N6,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});y6.displayName=z1;var V1="SelectScrollDownButton",b6=y.forwardRef((e,t)=>{const n=$l(V1,e.__scopeSelect),s=G2(V1,e.__scopeSelect),[a,o]=y.useState(!1),i=Ft(t,s.onScrollButtonChange);return nn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(N6,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});b6.displayName=V1;var N6=y.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,o=$l("SelectScrollButton",n),i=y.useRef(null),l=Aj(n),c=y.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),nn(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),r.jsx(Ze.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ge(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:Ge(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:Ge(a.onPointerLeave,()=>{c()})})}),OCe="SelectSeparator",w6=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Ze.div,{"aria-hidden":!0,...s,ref:t})});w6.displayName=OCe;var W1="SelectArrow",TCe=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Ej(n),o=kl(W1,n),i=$l(W1,n);return o.open&&i.position==="popper"?r.jsx(f0,{...a,...s,ref:t}):null});TCe.displayName=W1;var kCe="SelectBubbleInput",_6=y.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=y.useRef(null),o=Ft(s,a),i=_j(t);return y.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&u){const m=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(m)}},[i,t]),r.jsx(Ze.select,{...n,style:{...jF,...n.style},ref:o,defaultValue:t})});_6.displayName=kCe;function S6(e){return e===""||e===void 0}function C6(e){const t=fs(e),n=y.useRef(""),s=y.useRef(0),a=y.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=y.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,o]}function P6(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=$Ce(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function $Ce(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var DCe=e6,A6=r6,FCe=s6,ICe=a6,RCe=o6,E6=i6,LCe=u6,M6=h6,O6=x6,BCe=g6,zCe=j6,T6=y6,k6=b6,$6=w6;const De=DCe,Fe=FCe,ke=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(A6,{ref:s,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(ICe,{asChild:!0,children:r.jsx(Po,{className:"h-4 w-4 opacity-50"})})]}));ke.displayName=A6.displayName;const D6=y.forwardRef(({className:e,...t},n)=>r.jsx(T6,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Hq,{className:"h-4 w-4"})}));D6.displayName=T6.displayName;const F6=y.forwardRef(({className:e,...t},n)=>r.jsx(k6,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Po,{className:"h-4 w-4"})}));F6.displayName=k6.displayName;const $e=y.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(RCe,{children:r.jsxs(E6,{ref:a,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(D6,{}),r.jsx(LCe,{className:Te("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(F6,{})]})}));$e.displayName=E6.displayName;const VCe=y.forwardRef(({className:e,...t},n)=>r.jsx(M6,{ref:n,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));VCe.displayName=M6.displayName;const le=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(O6,{ref:s,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(zCe,{children:r.jsx(Gh,{className:"h-4 w-4"})})}),r.jsx(BCe,{children:t})]}));le.displayName=O6.displayName;const WCe=y.forwardRef(({className:e,...t},n)=>r.jsx($6,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));WCe.displayName=$6.displayName;const qCe=({value:e,onValueChange:t,estadosFinancieros:n,className:s=""})=>{const[a,o]=y.useState(""),[i,l]=y.useState(""),[c,d]=y.useState(""),u=()=>Object.keys(n),m=()=>!a||!n[a]?[]:Object.keys(n[a]),f=()=>{var j;return!a||!i||!((j=n[a])!=null&&j[i])?[]:Object.keys(n[a][i])},h=()=>{var j,g;return!a||!i||!c?[]:((g=(j=n[a])==null?void 0:j[i])==null?void 0:g[c])||[]},x=j=>{j<=1&&l(""),j<=2&&d(""),j<=3&&t("")},p=j=>{switch(j){case 1:return a?"completed":"pending";case 2:return i?"completed":a?"active":"disabled";case 3:return c?"completed":i?"active":"disabled";case 4:return e?"completed":c?"active":"disabled";default:return"disabled"}},v=({step:j,title:g,status:N})=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${N==="completed"?"bg-green-500 text-white":N==="active"?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:N==="completed"?r.jsx(Hl,{className:"w-3 h-3"}):j}),r.jsx("span",{className:`text-sm ${N==="completed"||N==="active"?"text-foreground":"text-muted-foreground"}`,children:g}),j<4&&r.jsx(Ua,{className:"w-4 h-4 text-muted-foreground"})]});return r.jsxs(G,{className:s,children:[r.jsxs(ne,{children:[r.jsx(ae,{className:"text-lg",children:"Seleccionar Cuenta Madre"}),r.jsx(Me,{children:"Sigue estos pasos para elegir a qu cuenta pertenecer la nueva subcuenta"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-3 bg-muted/30 rounded-lg",children:[r.jsx(v,{step:1,title:"Reporte",status:p(1)}),r.jsx(v,{step:2,title:"Categora",status:p(2)}),r.jsx(v,{step:3,title:"Tipo",status:p(3)}),r.jsx(v,{step:4,title:"Cuenta",status:p(4)})]})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"1. En qu tipo de reporte aparecer?"}),r.jsxs(De,{value:a,onValueChange:j=>{o(j),x(1)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el tipo de reporte financiero"})}),r.jsx($e,{children:u().map(j=>r.jsx(le,{value:j,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:j}),j==="Balance General"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Lo que tienes"}),j==="Estado de Resultados"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Ingresos y gastos"})]})},j))})]})]}),a&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"2. Qu tipo de movimiento es?"}),r.jsxs(De,{value:i,onValueChange:j=>{l(j),x(2)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la categora principal"})}),r.jsx($e,{children:m().map(j=>r.jsx(le,{value:j,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:j}),j==="Activos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Lo que posees"}),j==="Pasivos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Lo que debes"}),j==="Ingresos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Dinero que entra"}),j==="Egresos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Dinero que sale"}),j==="Capital Contable"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Patrimonio"})]})},j))})]})]}),i&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"3. Qu tipo especfico?"}),r.jsxs(De,{value:c,onValueChange:j=>{d(j),x(3)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el tipo especfico"})}),r.jsx($e,{children:f().map(j=>r.jsx(le,{value:j,children:j},j))})]})]}),c&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"4. Cul cuenta especfica?"}),r.jsxs(De,{value:e,onValueChange:t,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la cuenta contable"})}),r.jsx($e,{children:h().map(j=>r.jsx(le,{value:j.codigo,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{variant:"outline",className:"font-mono text-xs",children:j.codigo}),r.jsx("span",{children:j.nombre})]})},j.codigo))})]})]})]})]})},UCe=()=>{const e={"Registro de Ingresos":{color:"bg-green-500",casos:[{descripcion:"Venta de contado (Efectivo)",debe:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}],haber:[{cuenta:"4001",nombre:"Ventas",tipo:"Ingreso"}]},{descripcion:"Venta de contado (Banco)",debe:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}],haber:[{cuenta:"4001",nombre:"Ventas",tipo:"Ingreso"}]},{descripcion:"Venta a crdito",debe:[{cuenta:"1101",nombre:"Clientes",tipo:"Activo"}],haber:[{cuenta:"4001",nombre:"Ventas",tipo:"Ingreso"}]},{descripcion:"Cobro de venta a crdito (Efectivo)",debe:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}],haber:[{cuenta:"1101",nombre:"Clientes",tipo:"Activo"}]},{descripcion:"Cobro de venta a crdito (Banco)",debe:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}],haber:[{cuenta:"1101",nombre:"Clientes",tipo:"Activo"}]}]},"Registro de Egresos":{color:"bg-orange-500",casos:[{descripcion:"Compra de inventario de contado (Efectivo)",debe:[{cuenta:"1201",nombre:"Inventarios",tipo:"Activo"}],haber:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}]},{descripcion:"Compra de inventario de contado (Banco)",debe:[{cuenta:"1201",nombre:"Inventarios",tipo:"Activo"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]},{descripcion:"Compra de inventario a crdito",debe:[{cuenta:"1201",nombre:"Inventarios",tipo:"Activo"}],haber:[{cuenta:"2001",nombre:"Proveedores",tipo:"Pasivo"}]},{descripcion:"Pago a proveedores (Efectivo)",debe:[{cuenta:"2001",nombre:"Proveedores",tipo:"Pasivo"}],haber:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}]},{descripcion:"Pago a proveedores (Banco)",debe:[{cuenta:"2001",nombre:"Proveedores",tipo:"Pasivo"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]},{descripcion:"Gasto operativo de contado (Efectivo)",debe:[{cuenta:"5XXX",nombre:"Gastos operativos",tipo:"Egreso"}],haber:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}]},{descripcion:"Gasto operativo de contado (Banco)",debe:[{cuenta:"5XXX",nombre:"Gastos operativos",tipo:"Egreso"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]},{descripcion:"Gasto operativo con tarjeta de crdito",debe:[{cuenta:"5XXX",nombre:"Gastos operativos",tipo:"Egreso"}],haber:[{cuenta:"2104",nombre:"Tarjeta de crdito corporativa",tipo:"Pasivo"}]}]},"Registro de Capital":{color:"bg-yellow-500",casos:[{descripcion:"Aportacin de capital (Efectivo)",debe:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}],haber:[{cuenta:"3001",nombre:"Capital social",tipo:"Capital"}]},{descripcion:"Aportacin de capital (Banco)",debe:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}],haber:[{cuenta:"3001",nombre:"Capital social",tipo:"Capital"}]},{descripcion:"Retiro de capital (Efectivo)",debe:[{cuenta:"3001",nombre:"Capital social",tipo:"Capital"}],haber:[{cuenta:"1001",nombre:"Caja",tipo:"Activo"}]},{descripcion:"Retiro de capital (Banco)",debe:[{cuenta:"3001",nombre:"Capital social",tipo:"Capital"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]}]},"Registro de Financiamientos":{color:"bg-blue-500",casos:[{descripcion:"Disposicin de crdito",debe:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}],haber:[{cuenta:"2101/2102/2103",nombre:"Crdito bancario",tipo:"Pasivo"}]},{descripcion:"Pago de amortizacin (Capital)",debe:[{cuenta:"2101/2102/2103",nombre:"Crdito bancario",tipo:"Pasivo"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]},{descripcion:"Pago de intereses",debe:[{cuenta:"5301",nombre:"Gastos financieros",tipo:"Egreso"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]},{descripcin:"Cargo de intereses (sin pago)",debe:[{cuenta:"5301",nombre:"Gastos financieros",tipo:"Egreso"}],haber:[{cuenta:"2101/2102/2103",nombre:"Crdito bancario",tipo:"Pasivo"}]}]},"Registro de Inversiones (CapEx)":{color:"bg-purple-500",casos:[{descripcion:"Compra de activo fijo de contado",debe:[{cuenta:"1301/1302/1303",nombre:"Activos fijos",tipo:"Activo"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]},{descripcion:"Compra de activo fijo a crdito",debe:[{cuenta:"1301/1302/1303",nombre:"Activos fijos",tipo:"Activo"}],haber:[{cuenta:"2001",nombre:"Proveedores",tipo:"Pasivo"}]},{descripcion:"Depreciacin mensual",debe:[{cuenta:"5201",nombre:"Depreciaciones",tipo:"Egreso"}],haber:[{cuenta:"1304",nombre:"Depreciacin acumulada",tipo:"Activo (contra)"}]},{descripcion:"Venta de activo fijo",debe:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"},{cuenta:"1304",nombre:"Depreciacin acumulada",tipo:"Activo (contra)"}],haber:[{cuenta:"1301/1302/1303",nombre:"Activos fijos",tipo:"Activo"},{cuenta:"4002",nombre:"Otros ingresos (ganancia)",tipo:"Ingreso"}]}]},"Registro de Impuestos":{color:"bg-red-500",casos:[{descripcion:"Provisin de ISR",debe:[{cuenta:"6001",nombre:"ISR",tipo:"Impuesto"}],haber:[{cuenta:"2002",nombre:"Impuestos por pagar",tipo:"Pasivo"}]},{descripcion:"Pago de ISR",debe:[{cuenta:"2002",nombre:"Impuestos por pagar",tipo:"Pasivo"}],haber:[{cuenta:"1002",nombre:"Bancos",tipo:"Activo"}]}]}},t=n=>{switch(n.toLowerCase()){case"activo":return"bg-blue-100 text-blue-800 border-blue-300";case"activo (contra)":return"bg-blue-100 text-blue-800 border-blue-300";case"pasivo":return"bg-red-100 text-red-800 border-red-300";case"capital":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"ingreso":return"bg-green-100 text-green-800 border-green-300";case"egreso":return"bg-orange-100 text-orange-800 border-orange-300";case"impuesto":return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(_c,{className:"h-5 w-5 text-green-600"}),"Matriz de Afectaciones Contables"]}),r.jsx(Me,{children:"Visualiza cmo cada tipo de transaccin afecta las cuentas contables del sistema. Esta matriz te ayuda a verificar que todas las transacciones estn correctamente amarradas contablemente."})]}),r.jsx(Q,{children:r.jsx(Co,{type:"multiple",className:"w-full",children:Object.entries(e).map(([n,s])=>r.jsxs(Ga,{value:n,children:[r.jsx(Ha,{className:"hover:no-underline",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${s.color}`}),r.jsx("span",{className:"font-semibold",children:n}),r.jsxs(_e,{variant:"outline",className:"ml-2",children:[s.casos.length," casos"]})]})}),r.jsx(Xa,{children:r.jsx("div",{className:"space-y-4 pt-4",children:s.casos.map((a,o)=>r.jsxs(G,{className:"border-l-4",style:{borderLeftColor:s.color.replace("bg-","#")},children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:a.descripcion})}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"Debe (Cargo)"}),a.debe.map((i,l)=>r.jsxs("div",{className:"p-2 rounded-lg bg-blue-50 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"text-xs font-mono bg-blue-100 px-2 py-0.5 rounded",children:i.cuenta}),r.jsx("span",{className:"text-sm font-medium",children:i.nombre})]}),r.jsx(_e,{variant:"outline",className:`mt-1 text-xs ${t(i.tipo)}`,children:i.tipo})]},l))]}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Kq,{className:"h-6 w-6 text-muted-foreground"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"Haber (Abono)"}),a.haber.map((i,l)=>r.jsxs("div",{className:"p-2 rounded-lg bg-green-50 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"text-xs font-mono bg-green-100 px-2 py-0.5 rounded",children:i.cuenta}),r.jsx("span",{className:"text-sm font-medium",children:i.nombre})]}),r.jsx(_e,{variant:"outline",className:`mt-1 text-xs ${t(i.tipo)}`,children:i.tipo})]},l))]})]})})]},o))})})]},n))})})]}),r.jsxs(G,{className:"border-blue-200 bg-blue-50/50",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-sm",children:" Notas Importantes"})}),r.jsxs(Q,{className:"text-sm space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Debe (Cargo):"})," Aumenta los activos y gastos, disminuye los pasivos, capital e ingresos."]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Haber (Abono):"})," Disminuye los activos y gastos, aumenta los pasivos, capital e ingresos."]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Esta matriz refleja las afectaciones contables automticas que genera el sistema. Todas las transacciones estn diseadas para mantener el equilibrio contable (Debe = Haber)."})]})]})]})},KCe=()=>{const{data:e,isLoading:t,error:n}=Ca(),{data:s=[],isLoading:a}=Nj(),o=y2e(),i=b2e(),[l,c]=y.useState(""),[d,u]=y.useState(""),[m,f]=y.useState(new Set),h=(e==null?void 0:e.estadosFinancieros)||{};e!=null&&e.cuentasFlat;const x=()=>{!l.trim()||!d||o.mutate({nombre:l.trim(),cuentaMadreCodigo:d},{onSuccess:()=>{c(""),u("")}})},p=g=>{i.mutate(g)},v=g=>{const N=new Set(m);N.has(g)?N.delete(g):N.add(g),f(N)};if(t)return r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});if(n)return r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive",children:"Error al cargar las cuentas"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Por favor, intenta recargar la pgina"})]})});const j=g=>{switch(g){case"Activos":return"bg-blue-500";case"Pasivos":return"bg-red-500";case"Capital Contable":return"bg-yellow-500";case"Ingresos":return"bg-green-500";case"Egresos":return"bg-orange-500";case"Impuestos":return"bg-purple-500";default:return"bg-gray-500"}};return r.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Plan de Cuentas"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Sistema de clasificacin y codificacin de cuentas contables"})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs(Lr,{defaultValue:"catalogo",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-3",children:[r.jsx(Qe,{value:"catalogo",children:"Catlogo de Cuentas"}),r.jsx(Qe,{value:"subcuentas",children:"Gestin de Subcuentas"}),r.jsx(Qe,{value:"matriz",children:"Matriz Contable"})]}),r.jsx(Je,{value:"catalogo",className:"mt-6",children:r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Catlogo de Cuentas"}),r.jsx(Me,{children:"Estructura jerrquica del plan contable de la empresa"})]}),r.jsx(Q,{children:r.jsx(Co,{type:"multiple",className:"w-full",children:Object.entries(h).map(([g,N])=>r.jsxs(Ga,{value:g,children:[r.jsx(Ha,{className:"text-lg font-semibold",children:g}),r.jsx(Xa,{children:r.jsx(Co,{type:"multiple",className:"w-full pl-4",children:Object.entries(N).map(([_,b])=>r.jsxs(Ga,{value:_,children:[r.jsx(Ha,{className:"text-base font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:_}),r.jsx(_e,{className:`${j(_)} text-white text-xs`,variant:"secondary",children:_})]})}),r.jsx(Xa,{children:r.jsx(Co,{type:"multiple",className:"w-full pl-4",children:Object.entries(b).map(([w,S])=>r.jsxs(Ga,{value:w,children:[r.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:w}),r.jsx(Xa,{children:r.jsx("div",{className:"space-y-2 pl-4",children:S.map(C=>{const A=s.filter(E=>E.cuenta_madre_codigo===C.codigo),P=A.length>0,k=m.has(C.codigo);return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border bg-muted/30 hover:bg-muted/50 ${P?"cursor-pointer":""}`,onClick:()=>P&&v(C.codigo),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[P&&r.jsx("div",{className:"flex-shrink-0",children:k?r.jsx(Po,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})}),r.jsx("code",{className:"bg-primary/10 text-primary px-2 py-1 rounded text-xs font-mono",children:C.codigo}),r.jsx("span",{className:"text-sm",children:C.nombre})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:P&&r.jsxs(_e,{variant:"outline",className:"text-xs",children:[A.length," subcuentas"]})})]}),P&&k&&r.jsx("div",{className:"ml-8 space-y-1 border-l-2 border-primary/20 pl-4",children:A.map(E=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded border bg-muted/20 hover:bg-muted/40",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:E.nombre})]}),r.jsx(Pe,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),p(E.id)},className:"h-6 w-6 p-0 text-destructive hover:text-destructive opacity-70 hover:opacity-100",children:r.jsx(xs,{className:"h-3 w-3"})})]},E.id))})]},C.codigo)})})})]},w))})})]},_))})})]},g))})})]})}),r.jsxs(Je,{value:"subcuentas",className:"mt-6 space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Agregar Nueva Subcuenta"}),r.jsx(Me,{children:"Crea subcuentas y asgnalas a una cuenta madre"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre-subcuenta",children:"Nombre de la Subcuenta"}),r.jsx(Ae,{id:"nombre-subcuenta",placeholder:"Ej: Banco Santander",value:l,onChange:g=>c(g.target.value)})]}),r.jsx(qCe,{value:d,onValueChange:g=>u(g),estadosFinancieros:h})]}),r.jsxs(Pe,{onClick:x,disabled:!l.trim()||!d||o.isPending,className:"w-full md:w-auto",children:[o.isPending?r.jsx(Vr,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(as,{className:"mr-2 h-4 w-4"}),"Agregar Subcuenta"]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Subcuentas Registradas"}),r.jsx(Me,{children:"Lista de todas las subcuentas creadas"})]}),r.jsx(Q,{children:a?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(Vr,{className:"h-6 w-6 animate-spin"})}):s.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay subcuentas registradas"}):r.jsx("div",{className:"space-y-2",children:s.map(g=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"font-medium",children:g.nombre}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Cuenta madre: ",g.cuenta_madre_codigo," - ",g.nombreCuentaMadre]})]}),r.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>p(g.id),disabled:i.isPending,className:"text-destructive hover:text-destructive",children:i.isPending?r.jsx(Vr,{className:"h-4 w-4 animate-spin"}):r.jsx(xs,{className:"h-4 w-4"})})]},g.id))})})]})]}),r.jsx(Je,{value:"matriz",className:"mt-6",children:r.jsx(UCe,{})})]})})]})},Kr=y.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Kr.displayName="Textarea";var up=e=>e.type==="checkbox",sc=e=>e instanceof Date,ns=e=>e==null;const I6=e=>typeof e=="object";var rn=e=>!ns(e)&&!Array.isArray(e)&&I6(e)&&!sc(e),GCe=e=>rn(e)&&e.target?up(e.target)?e.target.checked:e.target.value:e,HCe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,XCe=(e,t)=>e.has(HCe(t)),YCe=e=>{const t=e.constructor&&e.constructor.prototype;return rn(t)&&t.hasOwnProperty("isPrototypeOf")},H2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Pn(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(H2&&(e instanceof Blob||s))&&(n||rn(e)))if(t=n?[]:{},!n&&!YCe(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Pn(e[a]));else return e;return t}var Mj=e=>/^\w*$/.test(e),on=e=>e===void 0,X2=e=>Array.isArray(e)?e.filter(Boolean):[],Y2=e=>X2(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ut=(e,t,n)=>{if(!t||!rn(e))return n;const s=(Mj(t)?[t]:Y2(t)).reduce((a,o)=>ns(a)?a:a[o],e);return on(s)||s===e?on(e[t])?n:e[t]:s},lo=e=>typeof e=="boolean",Fr=(e,t,n)=>{let s=-1;const a=Mj(t)?[t]:Y2(t),o=a.length,i=o-1;for(;++s<o;){const l=a[s];let c=n;if(s!==i){const d=e[l];c=rn(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const ck={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},La={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},QCe=K.createContext(null);QCe.displayName="HookFormContext";var ZCe=(e,t,n,s=!0)=>{const a={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(a,o,{get:()=>{const i=o;return t._proxyFormState[i]!==La.all&&(t._proxyFormState[i]=!s||La.all),e[i]}});return a};const JCe=typeof window<"u"?K.useLayoutEffect:K.useEffect;var yo=e=>typeof e=="string",ePe=(e,t,n,s,a)=>yo(e)?(s&&t.watch.add(e),ut(n,e,a)):Array.isArray(e)?e.map(o=>(s&&t.watch.add(o),ut(n,o))):(s&&(t.watchAll=!0),n),q1=e=>ns(e)||!I6(e);function Di(e,t,n=new WeakSet){if(q1(e)||q1(t))return e===t;if(sc(e)&&sc(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of s){const i=e[o];if(!a.includes(o))return!1;if(o!=="ref"){const l=t[o];if(sc(i)&&sc(l)||rn(i)&&rn(l)||Array.isArray(i)&&Array.isArray(l)?!Di(i,l,n):i!==l)return!1}}return!0}var tPe=(e,t,n,s,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:a||!0}}:{},jf=e=>Array.isArray(e)?e:[e],dk=()=>{let e=[];return{get observers(){return e},next:a=>{for(const o of e)o.next&&o.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(o=>o!==a)}}),unsubscribe:()=>{e=[]}}},_s=e=>rn(e)&&!Object.keys(e).length,Q2=e=>e.type==="file",Ba=e=>typeof e=="function",Mv=e=>{if(!H2)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},R6=e=>e.type==="select-multiple",Z2=e=>e.type==="radio",rPe=e=>Z2(e)||up(e),Nb=e=>Mv(e)&&e.isConnected;function nPe(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=on(e)?s++:e[t[s++]];return e}function sPe(e){for(const t in e)if(e.hasOwnProperty(t)&&!on(e[t]))return!1;return!0}function sn(e,t){const n=Array.isArray(t)?t:Mj(t)?[t]:Y2(t),s=n.length===1?e:nPe(e,n),a=n.length-1,o=n[a];return s&&delete s[o],a!==0&&(rn(s)&&_s(s)||Array.isArray(s)&&sPe(s))&&sn(e,n.slice(0,-1)),e}var L6=e=>{for(const t in e)if(Ba(e[t]))return!0;return!1};function Ov(e,t={}){const n=Array.isArray(e);if(rn(e)||n)for(const s in e)Array.isArray(e[s])||rn(e[s])&&!L6(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Ov(e[s],t[s])):ns(e[s])||(t[s]=!0);return t}function B6(e,t,n){const s=Array.isArray(e);if(rn(e)||s)for(const a in e)Array.isArray(e[a])||rn(e[a])&&!L6(e[a])?on(t)||q1(n[a])?n[a]=Array.isArray(e[a])?Ov(e[a],[]):{...Ov(e[a])}:B6(e[a],ns(t)?{}:t[a],n[a]):n[a]=!Di(e[a],t[a]);return n}var Bm=(e,t)=>B6(e,t,Ov(t));const uk={value:!1,isValid:!1},mk={value:!0,isValid:!0};var z6=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!on(e[0].attributes.value)?on(e[0].value)||e[0].value===""?mk:{value:e[0].value,isValid:!0}:mk:uk}return uk},V6=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>on(e)?e:t?e===""?NaN:e&&+e:n&&yo(e)?new Date(e):s?s(e):e;const fk={isValid:!1,value:null};var W6=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,fk):fk;function hk(e){const t=e.ref;return Q2(t)?t.files:Z2(t)?W6(e.refs).value:R6(t)?[...t.selectedOptions].map(({value:n})=>n):up(t)?z6(e.refs).value:V6(on(t.value)?e.ref.value:t.value,e)}var aPe=(e,t,n,s)=>{const a={};for(const o of e){const i=ut(t,o);i&&Fr(a,o,i._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:s}},Tv=e=>e instanceof RegExp,zm=e=>on(e)?e:Tv(e)?e.source:rn(e)?Tv(e.value)?e.value.source:e.value:e,pk=e=>({isOnSubmit:!e||e===La.onSubmit,isOnBlur:e===La.onBlur,isOnChange:e===La.onChange,isOnAll:e===La.all,isOnTouch:e===La.onTouched});const xk="AsyncFunction";var oPe=e=>!!e&&!!e.validate&&!!(Ba(e.validate)&&e.validate.constructor.name===xk||rn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xk)),iPe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),gk=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const yf=(e,t,n,s)=>{for(const a of n||Object.keys(e)){const o=ut(e,a);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!s)return!0;if(i.ref&&t(i.ref,i.name)&&!s)return!0;if(yf(l,t))break}else if(rn(l)&&yf(l,t))break}}};function vk(e,t,n){const s=ut(e,n);if(s||Mj(n))return{error:s,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),i=ut(t,o),l=ut(e,o);if(i&&!Array.isArray(i)&&n!==o)return{name:n};if(l&&l.type)return{name:o,error:l};if(l&&l.root&&l.root.type)return{name:`${o}.root`,error:l.root};a.pop()}return{name:n}}var lPe=(e,t,n,s)=>{n(e);const{name:a,...o}=e;return _s(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!s||La.all))},cPe=(e,t,n)=>!e||!t||e===t||jf(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),dPe=(e,t,n,s,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?s.isOnBlur:a.isOnBlur)?!e:(n?s.isOnChange:a.isOnChange)?e:!0,uPe=(e,t)=>!X2(ut(e,t)).length&&sn(e,t),mPe=(e,t,n)=>{const s=jf(ut(e,n));return Fr(s,"root",t[n]),Fr(e,n,s),e},Ix=e=>yo(e);function jk(e,t,n="validate"){if(Ix(e)||Array.isArray(e)&&e.every(Ix)||lo(e)&&!e)return{type:n,message:Ix(e)?e:"",ref:t}}var od=e=>rn(e)&&!Tv(e)?e:{value:e,message:""},yk=async(e,t,n,s,a,o)=>{const{ref:i,refs:l,required:c,maxLength:d,minLength:u,min:m,max:f,pattern:h,validate:x,name:p,valueAsNumber:v,mount:j}=e._f,g=ut(n,p);if(!j||t.has(p))return{};const N=l?l[0]:i,_=E=>{a&&N.reportValidity&&(N.setCustomValidity(lo(E)?"":E||""),N.reportValidity())},b={},w=Z2(i),S=up(i),C=w||S,A=(v||Q2(i))&&on(i.value)&&on(g)||Mv(i)&&i.value===""||g===""||Array.isArray(g)&&!g.length,P=tPe.bind(null,p,s,b),k=(E,O,M,T=Fo.maxLength,V=Fo.minLength)=>{const I=E?O:M;b[p]={type:E?T:V,message:I,ref:i,...P(E?T:V,I)}};if(o?!Array.isArray(g)||!g.length:c&&(!C&&(A||ns(g))||lo(g)&&!g||S&&!z6(l).isValid||w&&!W6(l).isValid)){const{value:E,message:O}=Ix(c)?{value:!!c,message:c}:od(c);if(E&&(b[p]={type:Fo.required,message:O,ref:N,...P(Fo.required,O)},!s))return _(O),b}if(!A&&(!ns(m)||!ns(f))){let E,O;const M=od(f),T=od(m);if(!ns(g)&&!isNaN(g)){const V=i.valueAsNumber||g&&+g;ns(M.value)||(E=V>M.value),ns(T.value)||(O=V<T.value)}else{const V=i.valueAsDate||new Date(g),I=X=>new Date(new Date().toDateString()+" "+X),F=i.type=="time",D=i.type=="week";yo(M.value)&&g&&(E=F?I(g)>I(M.value):D?g>M.value:V>new Date(M.value)),yo(T.value)&&g&&(O=F?I(g)<I(T.value):D?g<T.value:V<new Date(T.value))}if((E||O)&&(k(!!E,M.message,T.message,Fo.max,Fo.min),!s))return _(b[p].message),b}if((d||u)&&!A&&(yo(g)||o&&Array.isArray(g))){const E=od(d),O=od(u),M=!ns(E.value)&&g.length>+E.value,T=!ns(O.value)&&g.length<+O.value;if((M||T)&&(k(M,E.message,O.message),!s))return _(b[p].message),b}if(h&&!A&&yo(g)){const{value:E,message:O}=od(h);if(Tv(E)&&!g.match(E)&&(b[p]={type:Fo.pattern,message:O,ref:i,...P(Fo.pattern,O)},!s))return _(O),b}if(x){if(Ba(x)){const E=await x(g,n),O=jk(E,N);if(O&&(b[p]={...O,...P(Fo.validate,O.message)},!s))return _(O.message),b}else if(rn(x)){let E={};for(const O in x){if(!_s(E)&&!s)break;const M=jk(await x[O](g,n),N,O);M&&(E={...M,...P(O,M.message)},_(M.message),s&&(b[p]=E))}if(!_s(E)&&(b[p]={ref:N,...E},!s))return b}}return _(!0),b};const fPe={mode:La.onSubmit,reValidateMode:La.onChange,shouldFocusError:!0};function hPe(e={}){let t={...fPe,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ba(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=rn(t.defaultValues)||rn(t.values)?Pn(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:Pn(a),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const f={array:dk(),state:dk()},h=t.criteriaMode===La.all,x=$=>ie=>{clearTimeout(d),d=setTimeout($,ie)},p=async $=>{if(!t.disabled&&(u.isValid||m.isValid||$)){const ie=t.resolver?_s((await S()).errors):await A(s,!0);ie!==n.isValid&&f.state.next({isValid:ie})}},v=($,ie)=>{!t.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&(($||Array.from(l.mount)).forEach(J=>{J&&(ie?Fr(n.validatingFields,J,ie):sn(n.validatingFields,J))}),f.state.next({validatingFields:n.validatingFields,isValidating:!_s(n.validatingFields)}))},j=($,ie=[],J,ge,je=!0,ye=!0)=>{if(ge&&J&&!t.disabled){if(i.action=!0,ye&&Array.isArray(ut(s,$))){const Ce=J(ut(s,$),ge.argA,ge.argB);je&&Fr(s,$,Ce)}if(ye&&Array.isArray(ut(n.errors,$))){const Ce=J(ut(n.errors,$),ge.argA,ge.argB);je&&Fr(n.errors,$,Ce),uPe(n.errors,$)}if((u.touchedFields||m.touchedFields)&&ye&&Array.isArray(ut(n.touchedFields,$))){const Ce=J(ut(n.touchedFields,$),ge.argA,ge.argB);je&&Fr(n.touchedFields,$,Ce)}(u.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Bm(a,o)),f.state.next({name:$,isDirty:k($,ie),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Fr(o,$,ie)},g=($,ie)=>{Fr(n.errors,$,ie),f.state.next({errors:n.errors})},N=$=>{n.errors=$,f.state.next({errors:n.errors,isValid:!1})},_=($,ie,J,ge)=>{const je=ut(s,$);if(je){const ye=ut(o,$,on(J)?ut(a,$):J);on(ye)||ge&&ge.defaultChecked||ie?Fr(o,$,ie?ye:hk(je._f)):M($,ye),i.mount&&p()}},b=($,ie,J,ge,je)=>{let ye=!1,Ce=!1;const We={name:$};if(!t.disabled){if(!J||ge){(u.isDirty||m.isDirty)&&(Ce=n.isDirty,n.isDirty=We.isDirty=k(),ye=Ce!==We.isDirty);const $t=Di(ut(a,$),ie);Ce=!!ut(n.dirtyFields,$),$t?sn(n.dirtyFields,$):Fr(n.dirtyFields,$,!0),We.dirtyFields=n.dirtyFields,ye=ye||(u.dirtyFields||m.dirtyFields)&&Ce!==!$t}if(J){const $t=ut(n.touchedFields,$);$t||(Fr(n.touchedFields,$,J),We.touchedFields=n.touchedFields,ye=ye||(u.touchedFields||m.touchedFields)&&$t!==J)}ye&&je&&f.state.next(We)}return ye?We:{}},w=($,ie,J,ge)=>{const je=ut(n.errors,$),ye=(u.isValid||m.isValid)&&lo(ie)&&n.isValid!==ie;if(t.delayError&&J?(c=x(()=>g($,J)),c(t.delayError)):(clearTimeout(d),c=null,J?Fr(n.errors,$,J):sn(n.errors,$)),(J?!Di(je,J):je)||!_s(ge)||ye){const Ce={...ge,...ye&&lo(ie)?{isValid:ie}:{},errors:n.errors,name:$};n={...n,...Ce},f.state.next(Ce)}},S=async $=>{v($,!0);const ie=await t.resolver(o,t.context,aPe($||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return v($),ie},C=async $=>{const{errors:ie}=await S($);if($)for(const J of $){const ge=ut(ie,J);ge?Fr(n.errors,J,ge):sn(n.errors,J)}else n.errors=ie;return ie},A=async($,ie,J={valid:!0})=>{for(const ge in $){const je=$[ge];if(je){const{_f:ye,...Ce}=je;if(ye){const We=l.array.has(ye.name),$t=je._f&&oPe(je._f);$t&&u.validatingFields&&v([ge],!0);const nr=await yk(je,l.disabled,o,h,t.shouldUseNativeValidation&&!ie,We);if($t&&u.validatingFields&&v([ge]),nr[ye.name]&&(J.valid=!1,ie))break;!ie&&(ut(nr,ye.name)?We?mPe(n.errors,nr,ye.name):Fr(n.errors,ye.name,nr[ye.name]):sn(n.errors,ye.name))}!_s(Ce)&&await A(Ce,ie,J)}}return J.valid},P=()=>{for(const $ of l.unMount){const ie=ut(s,$);ie&&(ie._f.refs?ie._f.refs.every(J=>!Nb(J)):!Nb(ie._f.ref))&&L($)}l.unMount=new Set},k=($,ie)=>!t.disabled&&($&&ie&&Fr(o,$,ie),!Di(X(),a)),E=($,ie,J)=>ePe($,l,{...i.mount?o:on(ie)?a:yo($)?{[$]:ie}:ie},J,ie),O=$=>X2(ut(i.mount?o:a,$,t.shouldUnregister?ut(a,$,[]):[])),M=($,ie,J={})=>{const ge=ut(s,$);let je=ie;if(ge){const ye=ge._f;ye&&(!ye.disabled&&Fr(o,$,V6(ie,ye)),je=Mv(ye.ref)&&ns(ie)?"":ie,R6(ye.ref)?[...ye.ref.options].forEach(Ce=>Ce.selected=je.includes(Ce.value)):ye.refs?up(ye.ref)?ye.refs.forEach(Ce=>{(!Ce.defaultChecked||!Ce.disabled)&&(Array.isArray(je)?Ce.checked=!!je.find(We=>We===Ce.value):Ce.checked=je===Ce.value||!!je)}):ye.refs.forEach(Ce=>Ce.checked=Ce.value===je):Q2(ye.ref)?ye.ref.value="":(ye.ref.value=je,ye.ref.type||f.state.next({name:$,values:Pn(o)})))}(J.shouldDirty||J.shouldTouch)&&b($,je,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&D($)},T=($,ie,J)=>{for(const ge in ie){if(!ie.hasOwnProperty(ge))return;const je=ie[ge],ye=$+"."+ge,Ce=ut(s,ye);(l.array.has($)||rn(je)||Ce&&!Ce._f)&&!sc(je)?T(ye,je,J):M(ye,je,J)}},V=($,ie,J={})=>{const ge=ut(s,$),je=l.array.has($),ye=Pn(ie);Fr(o,$,ye),je?(f.array.next({name:$,values:Pn(o)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&J.shouldDirty&&f.state.next({name:$,dirtyFields:Bm(a,o),isDirty:k($,ye)})):ge&&!ge._f&&!ns(ye)?T($,ye,J):M($,ye,J),gk($,l)&&f.state.next({...n,name:$}),f.state.next({name:i.mount?$:void 0,values:Pn(o)})},I=async $=>{i.mount=!0;const ie=$.target;let J=ie.name,ge=!0;const je=ut(s,J),ye=$t=>{ge=Number.isNaN($t)||sc($t)&&isNaN($t.getTime())||Di($t,ut(o,J,$t))},Ce=pk(t.mode),We=pk(t.reValidateMode);if(je){let $t,nr;const en=ie.type?hk(je._f):GCe($),Ee=$.type===ck.BLUR||$.type===ck.FOCUS_OUT,He=!iPe(je._f)&&!t.resolver&&!ut(n.errors,J)&&!je._f.deps||dPe(Ee,ut(n.touchedFields,J),n.isSubmitted,We,Ce),Vt=gk(J,l,Ee);Fr(o,J,en),Ee?(je._f.onBlur&&je._f.onBlur($),c&&c(0)):je._f.onChange&&je._f.onChange($);const At=b(J,en,Ee),R=!_s(At)||Vt;if(!Ee&&f.state.next({name:J,type:$.type,values:Pn(o)}),He)return(u.isValid||m.isValid)&&(t.mode==="onBlur"?Ee&&p():Ee||p()),R&&f.state.next({name:J,...Vt?{}:At});if(!Ee&&Vt&&f.state.next({...n}),t.resolver){const{errors:xe}=await S([J]);if(ye(en),ge){const Re=vk(n.errors,s,J),Ve=vk(xe,s,Re.name||J);$t=Ve.error,J=Ve.name,nr=_s(xe)}}else v([J],!0),$t=(await yk(je,l.disabled,o,h,t.shouldUseNativeValidation))[J],v([J]),ye(en),ge&&($t?nr=!1:(u.isValid||m.isValid)&&(nr=await A(s,!0)));ge&&(je._f.deps&&D(je._f.deps),w(J,nr,$t,At))}},F=($,ie)=>{if(ut(n.errors,ie)&&$.focus)return $.focus(),1},D=async($,ie={})=>{let J,ge;const je=jf($);if(t.resolver){const ye=await C(on($)?$:je);J=_s(ye),ge=$?!je.some(Ce=>ut(ye,Ce)):J}else $?(ge=(await Promise.all(je.map(async ye=>{const Ce=ut(s,ye);return await A(Ce&&Ce._f?{[ye]:Ce}:Ce)}))).every(Boolean),!(!ge&&!n.isValid)&&p()):ge=J=await A(s);return f.state.next({...!yo($)||(u.isValid||m.isValid)&&J!==n.isValid?{}:{name:$},...t.resolver||!$?{isValid:J}:{},errors:n.errors}),ie.shouldFocus&&!ge&&yf(s,F,$?je:l.mount),ge},X=$=>{const ie={...i.mount?o:a};return on($)?ie:yo($)?ut(ie,$):$.map(J=>ut(ie,J))},W=($,ie)=>({invalid:!!ut((ie||n).errors,$),isDirty:!!ut((ie||n).dirtyFields,$),error:ut((ie||n).errors,$),isValidating:!!ut(n.validatingFields,$),isTouched:!!ut((ie||n).touchedFields,$)}),B=$=>{$&&jf($).forEach(ie=>sn(n.errors,ie)),f.state.next({errors:$?n.errors:{}})},q=($,ie,J)=>{const ge=(ut(s,$,{_f:{}})._f||{}).ref,je=ut(n.errors,$)||{},{ref:ye,message:Ce,type:We,...$t}=je;Fr(n.errors,$,{...$t,...ie,ref:ge}),f.state.next({name:$,errors:n.errors,isValid:!1}),J&&J.shouldFocus&&ge&&ge.focus&&ge.focus()},te=($,ie)=>Ba($)?f.state.subscribe({next:J=>"values"in J&&$(E(void 0,ie),J)}):E($,ie,!0),Y=$=>f.state.subscribe({next:ie=>{cPe($.name,ie.name,$.exact)&&lPe(ie,$.formState||u,oe,$.reRenderRoot)&&$.callback({values:{...o},...n,...ie,defaultValues:a})}}).unsubscribe,H=$=>(i.mount=!0,m={...m,...$.formState},Y({...$,formState:m})),L=($,ie={})=>{for(const J of $?jf($):l.mount)l.mount.delete(J),l.array.delete(J),ie.keepValue||(sn(s,J),sn(o,J)),!ie.keepError&&sn(n.errors,J),!ie.keepDirty&&sn(n.dirtyFields,J),!ie.keepTouched&&sn(n.touchedFields,J),!ie.keepIsValidating&&sn(n.validatingFields,J),!t.shouldUnregister&&!ie.keepDefaultValue&&sn(a,J);f.state.next({values:Pn(o)}),f.state.next({...n,...ie.keepDirty?{isDirty:k()}:{}}),!ie.keepIsValid&&p()},ue=({disabled:$,name:ie})=>{(lo($)&&i.mount||$||l.disabled.has(ie))&&($?l.disabled.add(ie):l.disabled.delete(ie))},pe=($,ie={})=>{let J=ut(s,$);const ge=lo(ie.disabled)||lo(t.disabled);return Fr(s,$,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:$}},name:$,mount:!0,...ie}}),l.mount.add($),J?ue({disabled:lo(ie.disabled)?ie.disabled:t.disabled,name:$}):_($,!0,ie.value),{...ge?{disabled:ie.disabled||t.disabled}:{},...t.progressive?{required:!!ie.required,min:zm(ie.min),max:zm(ie.max),minLength:zm(ie.minLength),maxLength:zm(ie.maxLength),pattern:zm(ie.pattern)}:{},name:$,onChange:I,onBlur:I,ref:je=>{if(je){pe($,ie),J=ut(s,$);const ye=on(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Ce=rPe(ye),We=J._f.refs||[];if(Ce?We.find($t=>$t===ye):ye===J._f.ref)return;Fr(s,$,{_f:{...J._f,...Ce?{refs:[...We.filter(Nb),ye,...Array.isArray(ut(a,$))?[{}]:[]],ref:{type:ye.type,name:$}}:{ref:ye}}}),_($,!1,void 0,ye)}else J=ut(s,$,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||ie.shouldUnregister)&&!(XCe(l.array,$)&&i.action)&&l.unMount.add($)}}},we=()=>t.shouldFocusError&&yf(s,F,l.mount),re=$=>{lo($)&&(f.state.next({disabled:$}),yf(s,(ie,J)=>{const ge=ut(s,J);ge&&(ie.disabled=ge._f.disabled||$,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(je=>{je.disabled=ge._f.disabled||$}))},0,!1))},de=($,ie)=>async J=>{let ge;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let je=Pn(o);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ye,values:Ce}=await S();n.errors=ye,je=Pn(Ce)}else await A(s);if(l.disabled.size)for(const ye of l.disabled)sn(je,ye);if(sn(n.errors,"root"),_s(n.errors)){f.state.next({errors:{}});try{await $(je,J)}catch(ye){ge=ye}}else ie&&await ie({...n.errors},J),we(),setTimeout(we);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_s(n.errors)&&!ge,submitCount:n.submitCount+1,errors:n.errors}),ge)throw ge},he=($,ie={})=>{ut(s,$)&&(on(ie.defaultValue)?V($,Pn(ut(a,$))):(V($,ie.defaultValue),Fr(a,$,Pn(ie.defaultValue))),ie.keepTouched||sn(n.touchedFields,$),ie.keepDirty||(sn(n.dirtyFields,$),n.isDirty=ie.defaultValue?k($,Pn(ut(a,$))):k()),ie.keepError||(sn(n.errors,$),u.isValid&&p()),f.state.next({...n}))},ee=($,ie={})=>{const J=$?Pn($):a,ge=Pn(J),je=_s($),ye=je?a:ge;if(ie.keepDefaultValues||(a=J),!ie.keepValues){if(ie.keepDirtyValues){const Ce=new Set([...l.mount,...Object.keys(Bm(a,o))]);for(const We of Array.from(Ce))ut(n.dirtyFields,We)?Fr(ye,We,ut(o,We)):V(We,ut(ye,We))}else{if(H2&&on($))for(const Ce of l.mount){const We=ut(s,Ce);if(We&&We._f){const $t=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(Mv($t)){const nr=$t.closest("form");if(nr){nr.reset();break}}}}if(ie.keepFieldsRef)for(const Ce of l.mount)V(Ce,ut(ye,Ce));else s={}}o=t.shouldUnregister?ie.keepDefaultValues?Pn(a):{}:Pn(ye),f.array.next({values:{...ye}}),f.state.next({values:{...ye}})}l={mount:ie.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,i.watch=!!t.shouldUnregister,f.state.next({submitCount:ie.keepSubmitCount?n.submitCount:0,isDirty:je?!1:ie.keepDirty?n.isDirty:!!(ie.keepDefaultValues&&!Di($,a)),isSubmitted:ie.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:je?{}:ie.keepDirtyValues?ie.keepDefaultValues&&o?Bm(a,o):n.dirtyFields:ie.keepDefaultValues&&$?Bm(a,$):ie.keepDirty?n.dirtyFields:{},touchedFields:ie.keepTouched?n.touchedFields:{},errors:ie.keepErrors?n.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},z=($,ie)=>ee(Ba($)?$(o):$,ie),U=($,ie={})=>{const J=ut(s,$),ge=J&&J._f;if(ge){const je=ge.refs?ge.refs[0]:ge.ref;je.focus&&(je.focus(),ie.shouldSelect&&Ba(je.select)&&je.select())}},oe=$=>{n={...n,...$}},Ne={control:{register:pe,unregister:L,getFieldState:W,handleSubmit:de,setError:q,_subscribe:Y,_runSchema:S,_focusError:we,_getWatch:E,_getDirty:k,_setValid:p,_setFieldArray:j,_setDisabledField:ue,_setErrors:N,_getFieldArray:O,_reset:ee,_resetDefaultValues:()=>Ba(t.defaultValues)&&t.defaultValues().then($=>{z($,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:re,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return o},get _state(){return i},set _state($){i=$},get _defaultValues(){return a},get _names(){return l},set _names($){l=$},get _formState(){return n},get _options(){return t},set _options($){t={...t,...$}}},subscribe:H,trigger:D,register:pe,handleSubmit:de,watch:te,setValue:V,getValues:X,reset:z,resetField:he,clearErrors:B,unregister:L,setError:q,setFocus:U,getFieldState:W};return{...Ne,formControl:Ne}}function pPe(e={}){const t=K.useRef(void 0),n=K.useRef(void 0),[s,a]=K.useState({isDirty:!1,isValidating:!1,isLoading:Ba(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ba(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ba(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...l}=hPe(e);t.current={...l,formState:s}}const o=t.current.control;return o._options=e,JCe(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),o._formState.isReady=!0,i},[o]),K.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),K.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),K.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),K.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),K.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==s.isDirty&&o._subjects.state.next({isDirty:i})}},[o,s.isDirty]),K.useEffect(()=>{e.values&&!Di(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=e.values,a(i=>({...i}))):o._resetDefaultValues()},[o,e.values]),K.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=ZCe(s,o),t.current}const xPe=()=>it({queryKey:["productos"],queryFn:async()=>{const{data:e,error:t}=await ce.from("productos").select(`
          *,
          subcuentas (nombre)
        `).eq("activo",!0).order("created_at",{ascending:!1});if(t)throw t;return(e==null?void 0:e.map(s=>{var a;return{...s,subcuenta_nombre:((a=s.subcuentas)==null?void 0:a.nombre)||null}}))||[]}}),NFe=()=>it({queryKey:["productos-servicios"],queryFn:async()=>{const{data:e,error:t}=await ce.from("productos").select(`
          *,
          subcuentas (nombre)
        `).eq("activo",!0).eq("cuenta_codigo","4001").order("created_at",{ascending:!1});if(t)throw t;return(e==null?void 0:e.map(s=>{var a;return{...s,subcuenta_nombre:((a=s.subcuentas)==null?void 0:a.nombre)||null}}))||[]}}),gPe=()=>{const e=Gr(),{toast:t}=Rs();return Qt({mutationFn:async({nombre:n,precio:s,precioVenta:a,cantidad:o,descripcion:i,subcuentaId:l,imagen:c})=>{const d=o!==void 0,u=d?"1005":"4001";if(d){const{data:m,error:f}=await ce.from("productos").select("*").eq("nombre",n).eq("activo",!0).single();if(f&&f.code!=="PGRST116")throw new Error(`Error al buscar producto: ${f.message}`);let h=null;if(c){const v=c.name.split(".").pop(),g=`productos/${`${Math.random()}.${v}`}`,{error:N}=await ce.storage.from("product-images").upload(g,c);if(N)throw new Error(`Error al subir imagen: ${N.message}`);const{data:{publicUrl:_}}=ce.storage.from("product-images").getPublicUrl(g);h=_}const x=s*o,{data:{user:p}}=await ce.auth.getUser();if(!p)throw new Error("Usuario no autenticado");if(m){if(h||i||a!==void 0){const{error:j}=await ce.from("productos").update({descripcion:i||m.descripcion,imagen_url:h||m.imagen_url,subcuenta_id:l||m.subcuenta_id,precio_venta:a!==void 0?a:m.precio_venta,updated_at:new Date().toISOString()}).eq("id",m.id);if(j)throw j}const{error:v}=await ce.from("movimientos_inventario").insert({producto_id:m.id,user_id:p.id,tipo_movimiento:"compra",cantidad:o,costo_unitario:s,costo_total:x,descripcion:"Compra adicional de inventario"});if(v)throw v;return{id:m.id,esActualizacion:!0}}else{const{data:v,error:j}=await ce.from("productos").insert({nombre:n,precio:s,precio_venta:a||0,descripcion:i||null,subcuenta_id:l||null,imagen_url:h,cuenta_codigo:u,user_id:null}).select().single();if(j)throw j;const{error:g}=await ce.from("movimientos_inventario").insert({producto_id:v.id,user_id:p.id,tipo_movimiento:"compra",cantidad:o,costo_unitario:s,costo_total:x,descripcion:"Compra inicial - Nuevo producto en inventario"});if(g)throw g;return{...v,esActualizacion:!1}}}else{let m=null;if(c){const x=c.name.split(".").pop(),v=`productos/${`${Math.random()}.${x}`}`,{error:j}=await ce.storage.from("product-images").upload(v,c);if(j)throw new Error(`Error al subir imagen: ${j.message}`);const{data:{publicUrl:g}}=ce.storage.from("product-images").getPublicUrl(v);m=g}const{data:f,error:h}=await ce.from("productos").insert({nombre:n,precio:s,descripcion:i||null,subcuenta_id:l||null,imagen_url:m,cuenta_codigo:u,user_id:null}).select().single();if(h)throw h;return f}},onSuccess:n=>{e.invalidateQueries({queryKey:["productos"]}),n.esActualizacion?t({title:"Inventario actualizado",description:"Se agreg nueva compra al producto existente"}):t({title:"Producto agregado al inventario",description:"Se cre un nuevo producto en el inventario"})},onError:n=>{t({title:"Error",description:"Error al registrar compra: "+(n.message||"Error desconocido"),variant:"destructive"})}})},vPe=()=>{const e=Gr(),{toast:t}=Rs();return Qt({mutationFn:async({id:n,nombre:s,descripcion:a,precio:o,imagen:i,subcuentaId:l})=>{let c;if(i){const f=i.name.split(".").pop(),x=`productos/${`${Math.random()}.${f}`}`,{error:p}=await ce.storage.from("product-images").upload(x,i);if(p)throw new Error(`Error al subir imagen: ${p.message}`);const{data:{publicUrl:v}}=ce.storage.from("product-images").getPublicUrl(x);c=v}const d={updated_at:new Date().toISOString()};s!==void 0&&(d.nombre=s),a!==void 0&&(d.descripcion=a),o!==void 0&&(d.precio=o,d.precio_venta=o),c!==void 0&&(d.imagen_url=c),l!==void 0&&(d.subcuenta_id=l||null);const{data:u,error:m}=await ce.from("productos").update(d).eq("id",n).select().single();if(m)throw m;return u},onSuccess:()=>{e.invalidateQueries({queryKey:["productos"]}),t({title:"Producto actualizado",description:"El producto se ha actualizado correctamente"})},onError:n=>{t({title:"Error",description:n.message||"No se pudo actualizar el producto",variant:"destructive"})}})},wFe=()=>{const e=Gr(),{toast:t}=Rs();return Qt({mutationFn:async n=>{const{error:s}=await ce.from("productos").update({activo:!1}).eq("id",n);if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["productos"]}),t({title:"Producto eliminado",description:"El producto ha sido desactivado exitosamente"})},onError:()=>{t({title:"Error",description:"Error al eliminar el producto",variant:"destructive"})}})},mp=()=>it({queryKey:["inventario-con-movimientos"],queryFn:async()=>{const{data:e,error:t}=await ce.from("productos").select(`
          *,
          subcuentas (
            nombre
          )
        `).eq("cuenta_codigo","1005").eq("activo",!0);if(t)throw t;const{data:n,error:s}=await ce.from("movimientos_inventario").select("*").eq("estado","activo").order("fecha",{ascending:!1});if(s)throw s;return(e||[]).map(o=>{var w,S;const i=(n==null?void 0:n.filter(C=>C.producto_id===o.id))||[],l=i.filter(C=>C.tipo_movimiento==="compra"),c=l.reduce((C,A)=>C+Number(A.cantidad),0),d=l.reduce((C,A)=>C+Number(A.costo_total),0),u=i.filter(C=>C.tipo_movimiento==="venta"),m=u.reduce((C,A)=>C+Number(A.cantidad),0),h=i.filter(C=>C.tipo_movimiento==="ajuste").reduce((C,A)=>C+Number(A.cantidad),0),x=c-m+h,p=c>0?d/c:0,v=x*p,j=((w=i[0])==null?void 0:w.fecha)||null,g=l.length>0?l[l.length-1].fecha:null,N=u.length>0?u[0].fecha:null;let _,b;if(g&&m>0){const C=Math.floor((new Date().getTime()-new Date(g).getTime())/864e5),A=(c+x)/2,P=A>0?m/A:0;P>0?(_=C/P,_<30?b="alta":_<60?b="media":_<90?b="baja":b="muy_baja"):b="sin_movimiento"}else b="sin_movimiento";return{id:o.id,nombre:o.nombre,descripcion:o.descripcion,imagen_url:o.imagen_url,precio_venta:Number(o.precio_venta||0),cuenta_codigo:o.cuenta_codigo,user_id:o.user_id,subcuenta_id:o.subcuenta_id,subcuenta_nombre:(S=o.subcuentas)==null?void 0:S.nombre,cantidad_comprada:c,cantidad_vendida:m,cantidad_stock:x,costo_unitario:p,valor_total_inventario:v,ultimo_movimiento:j,fecha_primera_compra:g,fecha_ultima_venta:N,dias_promedio_rotacion:_,estado_rotacion:b}})}}),Oj=()=>{const[e,t]=y.useState([]),[n,s]=y.useState(!0),[a,o]=y.useState(null),i=async()=>{try{s(!0),o(null);const{data:u,error:m}=await ce.from("proveedores").select("*").eq("activo",!0).order("nombre",{ascending:!0});if(m)throw m;t(u||[])}catch(u){console.error("Error fetching proveedores:",u),o(u instanceof Error?u.message:"Error desconocido")}finally{s(!1)}};return y.useEffect(()=>{i();const u=ce.channel("proveedores-changes").on("postgres_changes",{event:"*",schema:"public",table:"proveedores"},()=>{i()}).subscribe();return()=>{ce.removeChannel(u)}},[]),{proveedores:e,loading:n,error:a,refetch:i,createProveedor:async u=>{try{const{data:{user:m},error:f}=await ce.auth.getUser();if(f||!m)return{data:null,error:"Usuario no autenticado"};const{data:h,error:x}=await ce.from("proveedores").insert({nombre:u.nombre,telefono:u.telefono,email:u.email,rfc:u.rfc,direccion:u.direccion,ciudad:u.ciudad,estado:u.estado,codigo_postal:u.codigo_postal,user_id:m.id,activo:!0}).select().single();if(x)throw x;return{data:h,error:null}}catch(m){if(console.error("Error creating proveedor:",m),m.code==="23505"){if(m.message.includes("unique_rfc_per_user_idx"))return{data:null,error:"Ya existe un proveedor con este RFC"};if(m.message.includes("unique_email_per_user_idx"))return{data:null,error:"Ya existe un proveedor con este correo electrnico"};if(m.message.includes("unique_telefono_per_user_idx"))return{data:null,error:"Ya existe un proveedor con este telfono"}}return m.code==="42501"?{data:null,error:"No tienes permisos para crear proveedores. Por favor inicia sesin."}:{data:null,error:m.message||"Error al crear proveedor"}}},updateProveedor:async(u,m)=>{try{const{data:{user:f},error:h}=await ce.auth.getUser();if(h||!f)return{data:null,error:"Usuario no autenticado"};const{data:x,error:p}=await ce.from("proveedores").update({nombre:m.nombre,telefono:m.telefono,email:m.email,rfc:m.rfc,direccion:m.direccion,ciudad:m.ciudad,estado:m.estado,codigo_postal:m.codigo_postal}).eq("id",u).eq("user_id",f.id).select().single();if(p)throw p;return{data:x,error:null}}catch(f){if(console.error("Error updating proveedor:",f),f.code==="23505"){if(f.message.includes("unique_rfc_per_user_idx"))return{data:null,error:"Ya existe un proveedor con este RFC"};if(f.message.includes("unique_email_per_user_idx"))return{data:null,error:"Ya existe un proveedor con este correo electrnico"};if(f.message.includes("unique_telefono_per_user_idx"))return{data:null,error:"Ya existe un proveedor con este telfono"}}return{data:null,error:f.message||"Error al actualizar proveedor"}}},deleteProveedor:async u=>{try{const{data:{user:m},error:f}=await ce.auth.getUser();if(f||!m)return{error:"Usuario no autenticado"};const{error:h}=await ce.from("proveedores").update({activo:!1}).eq("id",u).eq("user_id",m.id);if(h)throw h;return{error:null}}catch(m){return console.error("Error deleting proveedor:",m),{error:m.message||"Error al eliminar proveedor"}}}}},Dl=()=>it({queryKey:["saldos-disponibles"],queryFn:async()=>{const{data:{user:e}}=await ce.auth.getUser();if(!e)throw new Error("Usuario no autenticado");const{data:t}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(user_id)").in("cuenta_codigo",["1001","1002"]).eq("asientos_contables.user_id",e.id);let n=0,s=0;return t==null||t.forEach(o=>{const i=(o.debe||0)-(o.haber||0);o.cuenta_codigo==="1001"?n+=i:o.cuenta_codigo==="1002"&&(s+=i)}),{efectivo:Math.max(0,n),bancos:Math.max(0,s),total:Math.max(0,n+s)}}}),fp=()=>it({queryKey:["tarjetas-credito"],queryFn:async()=>{const{data:e,error:t}=await ce.from("financiamientos").select("*").eq("tipo_credito","tarjeta_corporativa").eq("estado","activo").order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(s=>({id:s.id,nombre:s.nombre,institucion_financiera:s.institucion_financiera,monto_total:s.monto_total,saldo_actual:s.saldo_actual,limite_disponible:s.monto_total-s.saldo_actual}))}}),hp=(e,t,n)=>{const s=n.find(a=>a.id===e);return s?t>s.limite_disponible?{valido:!1,mensaje:`Lmite de crdito excedido. Disponible: $${s.limite_disponible.toFixed(2)} / Solicitado: $${t.toFixed(2)}`}:{valido:!0,mensaje:"Lmite de crdito vlido"}:{valido:!1,mensaje:"Tarjeta de crdito no encontrada"}},U1=async(e,t,n)=>{try{const{data:{user:s}}=await ce.auth.getUser();if(!s)throw new Error("Usuario no autenticado");const{data:a,error:o}=await ce.from("financiamientos").select("saldo_actual, monto_total, nombre, institucion_financiera").eq("id",e).single();if(o)throw o;if(!a)throw new Error("Tarjeta no encontrada");const i=a.saldo_actual+t,{error:l}=await ce.from("financiamientos").update({saldo_actual:i}).eq("id",e);if(l)throw l;const{data:c}=await ce.rpc("generate_asiento_number",{p_user_id:s.id});if(c){const{data:d}=await ce.from("asientos_contables").insert([{user_id:s.id,numero_asiento:c,fecha:new Date().toISOString().split("T")[0],descripcion:n||`Cargo a tarjeta: ${a.nombre} - ${a.institucion_financiera}`}]).select().single();d&&await ce.from("detalle_asientos").insert([{asiento_id:d.id,cuenta_codigo:"2101",debe:0,haber:t,descripcion:`Cargo tarjeta ${a.nombre}`}])}return{success:!0,nuevoSaldo:i}}catch(s){return console.error("Error al actualizar saldo de tarjeta:",s),Le({title:"Error",description:"No se pudo actualizar el saldo de la tarjeta de crdito",variant:"destructive"}),{success:!1,error:s.message}}},K1=e=>e!=null&&e.startsWith("tarjeta_credito_")?e.replace("tarjeta_credito_",""):null;var J2="Radio",[jPe,q6]=hn(J2),[yPe,bPe]=jPe(J2),U6=y.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...u}=e,[m,f]=y.useState(null),h=Ft(t,v=>f(v)),x=y.useRef(!1),p=m?d||!!m.closest("form"):!0;return r.jsxs(yPe,{scope:n,checked:a,disabled:i,children:[r.jsx(Ze.button,{type:"button",role:"radio","aria-checked":a,"data-state":X6(a),"data-disabled":i?"":void 0,disabled:i,value:l,...u,ref:h,onClick:Ge(e.onClick,v=>{a||c==null||c(),p&&(x.current=v.isPropagationStopped(),x.current||v.stopPropagation())})}),p&&r.jsx(H6,{control:m,bubbles:!x.current,name:s,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});U6.displayName=J2;var K6="RadioIndicator",G6=y.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...a}=e,o=bPe(K6,n);return r.jsx(Qn,{present:s||o.checked,children:r.jsx(Ze.span,{"data-state":X6(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});G6.displayName=K6;var NPe="RadioBubbleInput",H6=y.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:s=!0,...a},o)=>{const i=y.useRef(null),l=Ft(i,o),c=_j(n),d=d0(t);return y.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const x=new Event("click",{bubbles:s});h.call(u,n),u.dispatchEvent(x)}},[c,n,s]),r.jsx(Ze.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});H6.displayName=NPe;function X6(e){return e?"checked":"unchecked"}var wPe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Tj="RadioGroup",[_Pe,_Fe]=hn(Tj,[gm,q6]),Y6=gm(),Q6=q6(),[SPe,CPe]=_Pe(Tj),Z6=y.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...f}=e,h=Y6(n),x=xm(d),[p,v]=hs({prop:o,defaultProp:a??null,onChange:m,caller:Tj});return r.jsx(SPe,{scope:n,name:s,required:i,disabled:l,value:p,onValueChange:v,children:r.jsx(q2,{asChild:!0,...h,orientation:c,dir:x,loop:u,children:r.jsx(Ze.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...f,ref:t})})})});Z6.displayName=Tj;var J6="RadioGroupItem",eB=y.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...a}=e,o=CPe(J6,n),i=o.disabled||s,l=Y6(n),c=Q6(n),d=y.useRef(null),u=Ft(t,d),m=o.value===a.value,f=y.useRef(!1);return y.useEffect(()=>{const h=p=>{wPe.includes(p.key)&&(f.current=!0)},x=()=>f.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",x)}},[]),r.jsx(U2,{asChild:!0,...l,focusable:!i,active:m,children:r.jsx(U6,{disabled:i,required:o.required,checked:m,...c,...a,name:o.name,ref:u,onCheck:()=>o.onValueChange(a.value),onKeyDown:Ge(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Ge(a.onFocus,()=>{var h;f.current&&((h=d.current)==null||h.click())})})})});eB.displayName=J6;var PPe="RadioGroupIndicator",tB=y.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,a=Q6(n);return r.jsx(G6,{...a,...s,ref:t})});tB.displayName=PPe;var rB=Z6,nB=eB,APe=tB;const Hn=y.forwardRef(({className:e,...t},n)=>r.jsx(rB,{className:Te("grid gap-2",e),...t,ref:n}));Hn.displayName=rB.displayName;const It=y.forwardRef(({className:e,...t},n)=>r.jsx(nB,{ref:n,className:Te("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(APe,{className:"flex items-center justify-center",children:r.jsx(WF,{className:"h-2.5 w-2.5 fill-current text-current"})})}));It.displayName=nB.displayName;var EPe="Separator",bk="horizontal",MPe=["horizontal","vertical"],sB=y.forwardRef((e,t)=>{const{decorative:n,orientation:s=bk,...a}=e,o=OPe(s)?s:bk,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return r.jsx(Ze.div,{"data-orientation":o,...l,...a,ref:t})});sB.displayName=EPe;function OPe(e){return MPe.includes(e)}var aB=sB;const Jr=y.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(aB,{ref:a,decorative:n,orientation:t,className:Te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Jr.displayName=aB.displayName;const TPe=Kh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sr=y.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Te(TPe({variant:t}),e),...n}));sr.displayName="Alert";const kv=y.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Te("mb-1 font-medium leading-none tracking-tight",e),...t}));kv.displayName="AlertTitle";const ar=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Te("text-sm [&_p]:leading-relaxed",e),...t}));ar.displayName="AlertDescription";const kPe=()=>{const[e,t]=y.useState("select_type"),[n,s]=y.useState(null),[a,o]=y.useState(""),[i,l]=y.useState(null),[c,d]=y.useState(null),[u,m]=y.useState(""),[f,h]=y.useState(""),[x,p]=y.useState(""),[v,j]=y.useState(""),[g,N]=y.useState(""),{data:_,isLoading:b}=xPe(),{data:w,isLoading:S}=mp(),{data:C}=j2e(),{proveedores:A,createProveedor:P}=Oj(),k=gPe(),{data:E,isLoading:O}=Dl(),{data:M}=fp(),T=(w==null?void 0:w.filter(U=>U.cantidad_comprada>0||U.cantidad_vendida>0))||[],V=b||S,I=T.filter(U=>U.nombre.toLowerCase().includes(a.toLowerCase())),{register:F,handleSubmit:D,reset:X,setValue:W,watch:B}=pPe({defaultValues:{tipoPago:"contado",metodoPago:"efectivo"}}),q=B("tipoPago"),te=B("precio")||0,Y=B("cantidad")||0,H=B("montoPagado")||0,L=te*Y,ue=L-H;K.useEffect(()=>{q==="contado"?W("montoPagado",L):q==="pendiente"&&W("montoPagado",0)},[q,L,W]);const pe=U=>{var Se;const oe=(Se=U.target.files)==null?void 0:Se[0];if(oe){l(oe);const Ne=new FileReader;Ne.onload=$=>{var ie;d((ie=$.target)==null?void 0:ie.result)},Ne.readAsDataURL(oe)}},we=()=>{l(null),d(null)},re=U=>{s(U),W("nombre",U.nombre),W("descripcion",U.descripcion||""),W("subcuentaId",U.subcuenta_id||""),W("precioVenta",U.precio_venta||0),U.imagen_url&&d(U.imagen_url),t("form")},de=()=>{s(null),X(),we(),t("form")},he=()=>{e==="form"?t(n?"select_existing":"select_type"):e==="select_existing"&&t("select_type"),e==="select_existing"&&o("")},ee=async U=>{var Ne;if(q==="parcial"||q==="pendiente"){if(!u){Le({title:" Tipo de proveedor requerido",description:"Selecciona si es un proveedor nuevo o existente",variant:"destructive"});return}if(u==="nuevo"&&!U.proveedor){Le({title:" Nombre del proveedor requerido",description:"Ingresa el nombre del proveedor",variant:"destructive"});return}if(u==="existente"&&!f){Le({title:" Proveedor no seleccionado",description:"Selecciona un proveedor de la lista",variant:"destructive"});return}}if(q==="contado"||q==="parcial"){const $=U.montoPagado,{data:{user:ie}}=await ce.auth.getUser();if(!ie){Le({title:" Error de autenticacin",description:"Usuario no autenticado",variant:"destructive"});return}if(U.metodoPago==="efectivo"){const{data:J}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(user_id)").eq("cuenta_codigo","1001").eq("asientos_contables.user_id",ie.id);let ge=0;if(J==null||J.forEach(je=>{ge+=(je.debe||0)-(je.haber||0)}),$>ge){Le({title:" Saldo insuficiente en efectivo",description:`Disponible: $${Ke(ge)} | Necesitas: $${Ke($)}`,variant:"destructive"});return}}if(U.metodoPago==="bancos"){const{data:J}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(user_id)").eq("cuenta_codigo","1002").eq("asientos_contables.user_id",ie.id);let ge=0;if(J==null||J.forEach(je=>{ge+=(je.debe||0)-(je.haber||0)}),$>ge){Le({title:" Saldo insuficiente en bancos",description:`Disponible: $${Ke(ge)} | Necesitas: $${Ke($)}`,variant:"destructive"});return}}if((Ne=U.metodoPago)!=null&&Ne.startsWith("tarjeta_credito_")&&M){const J=U.metodoPago.replace("tarjeta_credito_",""),ge=hp(J,$,M);if(!ge.valido){Le({title:" Lmite de crdito excedido",description:ge.mensaje,variant:"destructive"});return}}}let oe=null,Se=U.proveedor||"";if(u&&u!=="ninguno"){if(u==="nuevo"){if(!U.proveedor||U.proveedor.trim()===""){Le({title:" Datos incompletos",description:"Debes proporcionar al menos el nombre del proveedor",variant:"destructive"});return}const $={nombre:U.proveedor||"",telefono:x||null,email:v||null,rfc:g||null,direccion:null,ciudad:null,estado:null,codigo_postal:null},{data:ie,error:J}=await P($);if(J){Le({title:" Error al crear proveedor",description:J,variant:"destructive"});return}oe=ie==null?void 0:ie.id}else if(u==="existente"){if(!f){Le({title:" Proveedor no seleccionado",description:"Debes seleccionar un proveedor de la lista",variant:"destructive"});return}oe=f;const $=A==null?void 0:A.find(ie=>ie.id===f);Se=($==null?void 0:$.nombre)||""}}if((q==="parcial"||q==="pendiente")&&!oe){Le({title:" Proveedor requerido",description:"Debes seleccionar o crear un proveedor para pagos parciales o pendientes",variant:"destructive"});return}if(await k.mutateAsync({nombre:U.nombre,precio:U.precio,precioVenta:U.precioVenta,cantidad:U.cantidad,descripcion:U.descripcion,subcuentaId:U.subcuentaId,imagen:i||void 0}),(q==="contado"||q==="parcial")&&H>0){const $=K1(U.metodoPago);$&&await U1($,H,`Compra de inventario: ${U.cantidad} unidades de ${U.nombre}`)}if((q==="parcial"||q==="pendiente")&&ue>0){const{data:{user:$}}=await ce.auth.getUser();if(!$){Le({title:"Error",description:"Usuario no autenticado",variant:"destructive"});return}const{error:ie}=await ce.from("transacciones_egresos").insert({user_id:$.id,tipo_egreso:"compra_inventario",descripcion:`Compra de ${U.cantidad} unidades de ${U.nombre}`,monto_total:L,monto_pagado:H,monto_pendiente:ue,tipo_pago:q,metodo_pago:q==="parcial"?U.metodoPago:null,proveedor_id:oe,proveedor_nombre:Se,proveedor_telefono:x||null,proveedor_email:v||null,proveedor_rfc:g||null,fecha_vencimiento:U.fechaVencimiento||null,subcuenta_id:U.subcuentaId||null,cuenta_codigo:"1005",cantidad:U.cantidad,precio_unitario:U.precio});ie?(console.error("Error al crear cuenta por pagar:",ie),Le({title:" Advertencia",description:"Producto registrado pero hubo un error al crear la cuenta por pagar",variant:"destructive"})):Le({title:" Cuenta por pagar creada",description:`Se registr la cuenta por pagar de ${z(ue)} al proveedor ${Se}`})}X(),we(),s(null),t("select_type"),m(""),h(""),p(""),j(""),N("")},z=U=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(U);return e==="select_type"?r.jsx("div",{className:"space-y-6",children:r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Zr,{className:"h-5 w-5 text-primary"}),"Tipo de Registro de Compra"]}),r.jsx(Me,{children:"Selecciona si vas a registrar un producto nuevo o una compra adicional de un producto existente"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(G,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/20",onClick:()=>t("select_existing"),children:r.jsxs(Q,{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center",children:r.jsx(Ts,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Producto Existente"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Compra adicional de un producto que ya tienes en inventario. Se calcular automticamente el costo promedio ponderado."}),r.jsx("div",{className:"mt-4",children:r.jsx(_e,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Recomendado para restock"})})]})}),r.jsx(G,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/20",onClick:de,children:r.jsxs(Q,{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center",children:r.jsx(as,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Producto Nuevo"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Registrar un producto completamente nuevo en tu inventario. Necesitars proporcionar toda la informacin del producto."}),r.jsx("div",{className:"mt-4",children:r.jsx(_e,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Primera vez"})})]})})]})})]})}):e==="select_existing"?r.jsx("div",{className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"sm",onClick:he,className:"mr-2",children:r.jsx(Rf,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"h-5 w-5 text-primary"}),"Seleccionar Producto Existente"]}),r.jsx(Me,{children:"Busca y selecciona el producto al que quieres agregar stock"})]})]})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar productos en inventario...",value:a,onChange:U=>o(U.target.value),className:"pl-9"})]}),V?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando productos..."}):I.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(U=>r.jsx(G,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/20",onClick:()=>re(U),children:r.jsx(Q,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[U.imagen_url?r.jsx("img",{src:U.imagen_url,alt:U.nombre,className:"w-16 h-16 object-cover rounded"}):r.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:r.jsx(Zr,{className:"h-8 w-8 text-muted-foreground"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-sm mb-1 truncate",children:U.nombre}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:U.descripcion||"Sin descripcin"}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-muted-foreground",children:["Stock: ",U.cantidad_stock||0]}),r.jsx("span",{className:"font-medium text-primary",children:z(U.costo_unitario||0)})]})]})]})})},U.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),r.jsx("p",{className:"text-muted-foreground mb-2",children:a?"No se encontraron productos":"No hay productos en inventario"}),r.jsxs(Pe,{variant:"outline",onClick:de,children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Registrar Producto Nuevo"]})]})]})})]})}):r.jsx("div",{className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"sm",onClick:he,className:"mr-2",children:r.jsx(Rf,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(as,{className:"h-5 w-5 text-primary"}),n?`Agregar Stock: ${n.nombre}`:"Registrar Producto Nuevo"]}),r.jsx(Me,{children:n?"Registra la compra adicional de este producto. Se calcular automticamente el costo promedio ponderado.":"Registra un producto completamente nuevo para control de inventario"})]})]})}),r.jsx(Q,{children:r.jsxs("form",{onSubmit:D(ee),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-foreground border-b pb-2",children:"Informacin del Producto"}),n&&r.jsx("div",{className:"bg-primary/5 p-3 rounded-lg border border-primary/20",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Zr,{className:"h-4 w-4 text-primary mt-0.5"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-primary",children:"Producto Existente"}),r.jsxs("p",{className:"text-muted-foreground mt-1",children:["Stock actual: ",n.cantidad_stock||0," unidades | Costo actual: ",z(n.costo_unitario||0)]})]})]})}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre del Producto *"}),r.jsx(Ae,{id:"nombre",...F("nombre",{required:!0}),placeholder:"Ej: Camiseta para inventario",readOnly:!!n,className:n?"bg-muted":""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(se,{htmlFor:"precio",children:"Precio Unitario de Compra *"}),r.jsx(Ae,{id:"precio",type:"number",step:"0.01",...F("precio",{required:!0,valueAsNumber:!0}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"precioVenta",children:"Precio de Venta Sugerido"}),r.jsx(Ae,{id:"precioVenta",type:"number",step:"0.01",...F("precioVenta",{valueAsNumber:!0}),placeholder:"0.00"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Este precio se usar por defecto al vender el producto"})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"cantidad",children:"Cantidad a Comprar *"}),r.jsx(Ae,{id:"cantidad",type:"number",min:"1",...F("cantidad",{required:!0,valueAsNumber:!0}),placeholder:"1"})]}),L>0&&r.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Monto Total: ",z(L)]}),(q==="contado"||q==="parcial")&&!O&&B("metodoPago")&&r.jsx("div",{className:"pt-2 border-t",children:B("metodoPago")==="efectivo"?r.jsx(_e,{variant:(q==="contado"?L:H)<=((E==null?void 0:E.efectivo)||0)?"default":"destructive",children:(q==="contado"?L:H)<=((E==null?void 0:E.efectivo)||0)?" Fondos suficientes en efectivo":" Fondos insuficientes en efectivo"}):B("metodoPago")==="bancos"?r.jsx(_e,{variant:(q==="contado"?L:H)<=((E==null?void 0:E.bancos)||0)?"default":"destructive",children:(q==="contado"?L:H)<=((E==null?void 0:E.bancos)||0)?" Fondos suficientes en bancos":" Fondos insuficientes en bancos"}):null})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"subcuenta",children:"Subcuenta de Inventario (Opcional)"}),r.jsxs(De,{onValueChange:U=>W("subcuentaId",U),defaultValue:n==null?void 0:n.subcuenta_id,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:C&&C.length>0?"Seleccionar subcuenta de inventario":"No hay subcuentas - se asignar a Inventario General"})}),r.jsx($e,{children:C==null?void 0:C.map(U=>r.jsxs(le,{value:U.id,children:[U.nombre," (",U.nombreCuentaMadre,")"]},U.id))})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Se registrar automticamente en cuentas de Inventario (1005/1006)"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-foreground border-b pb-2",children:"Informacin de Pago"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(se,{className:"font-medium",children:"Estado del Pago *"}),r.jsxs(Hn,{value:q,onValueChange:U=>W("tipoPago",U),defaultValue:"contado",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(It,{value:"contado",id:"contado-inv"}),r.jsx(se,{htmlFor:"contado-inv",className:"cursor-pointer",children:"Pago total"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(It,{value:"parcial",id:"parcial-inv"}),r.jsx(se,{htmlFor:"parcial-inv",className:"cursor-pointer",children:"Pago parcial"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(It,{value:"pendiente",id:"pendiente-inv"}),r.jsx(se,{htmlFor:"pendiente-inv",className:"cursor-pointer",children:"Qued pendiente en su totalidad"})]})]})]}),(q==="contado"||q==="parcial")&&r.jsxs(r.Fragment,{children:[r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(se,{className:"font-medium",children:"Mtodo de Pago *"}),r.jsxs(Hn,{value:B("metodoPago"),onValueChange:U=>W("metodoPago",U),defaultValue:"efectivo",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(It,{value:"efectivo",id:"efectivo-inv",disabled:L>0&&((E==null?void 0:E.efectivo)||0)<(q==="contado"?L:H)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xh,{className:"h-4 w-4 text-primary"}),r.jsxs(se,{htmlFor:"efectivo-inv",className:"cursor-pointer",children:["Efectivo ",r.jsx("span",{className:"text-sm text-muted-foreground",children:"(se registra en Caja)"})]})]}),r.jsx("div",{className:"text-sm",children:O?r.jsx("span",{className:"text-muted-foreground",children:"Cargando..."}):r.jsxs("span",{className:q==="contado"&&L>((E==null?void 0:E.efectivo)||0)||q==="parcial"&&H>((E==null?void 0:E.efectivo)||0)?"text-destructive font-medium":"text-green-600 font-medium",children:["Disponible: ",Ke((E==null?void 0:E.efectivo)||0)]})})]}),L>0&&(q==="contado"&&L>((E==null?void 0:E.efectivo)||0)||q==="parcial"&&H>((E==null?void 0:E.efectivo)||0))&&r.jsxs(sr,{className:"mt-2 border-destructive/50 bg-destructive/5",children:[r.jsx(Ht,{className:"h-4 w-4 text-destructive"}),r.jsxs(ar,{className:"text-xs text-destructive",children:["Saldo insuficiente. Necesitas: ",Ke(q==="contado"?L:H)]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(It,{value:"bancos",id:"bancos-inv",disabled:L>0&&((E==null?void 0:E.bancos)||0)<(q==="contado"?L:H)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(li,{className:"h-4 w-4 text-primary"}),r.jsxs(se,{htmlFor:"bancos-inv",className:"cursor-pointer",children:["Transferencia/Tarjeta Bancaria ",r.jsx("span",{className:"text-sm text-muted-foreground",children:"(se registra en Bancos)"})]})]}),r.jsx("div",{className:"text-sm",children:O?r.jsx("span",{className:"text-muted-foreground",children:"Cargando..."}):r.jsxs("span",{className:q==="contado"&&L>((E==null?void 0:E.bancos)||0)||q==="parcial"&&H>((E==null?void 0:E.bancos)||0)?"text-destructive font-medium":"text-green-600 font-medium",children:["Disponible: ",Ke((E==null?void 0:E.bancos)||0)]})})]}),L>0&&(q==="contado"&&L>((E==null?void 0:E.bancos)||0)||q==="parcial"&&H>((E==null?void 0:E.bancos)||0))&&r.jsxs(sr,{className:"mt-2 border-destructive/50 bg-destructive/5",children:[r.jsx(Ht,{className:"h-4 w-4 text-destructive"}),r.jsxs(ar,{className:"text-xs text-destructive",children:["Saldo insuficiente. Necesitas: ",Ke(q==="contado"?L:H)]})]})]})]}),M&&M.length>0&&M.map(U=>r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(It,{value:`tarjeta_credito_${U.id}`,id:`tarjeta-inv-${U.id}`,disabled:L>0&&U.limite_disponible<(q==="contado"?L:H)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(li,{className:"h-4 w-4 text-purple-600"}),r.jsx(se,{htmlFor:`tarjeta-inv-${U.id}`,className:"cursor-pointer",children:U.nombre})]}),r.jsxs(_e,{variant:U.limite_disponible>=(q==="contado"?L:H)?"outline":"destructive",children:["Disponible: $",U.limite_disponible.toLocaleString("es-CO",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),U.limite_disponible<(q==="contado"?L:H)&&r.jsx("p",{className:"text-xs text-destructive mt-1",children:"Lmite insuficiente"})]})]},U.id))]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"montoPagado",children:"Monto Pagado *"}),r.jsx(Ae,{id:"montoPagado",type:"number",step:"0.01",...F("montoPagado",{required:!0,valueAsNumber:!0}),placeholder:"0.00",readOnly:q==="contado"||q==="pendiente",className:q==="contado"||q==="pendiente"?"bg-muted":""}),q==="contado"&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Se completa automticamente con el monto total"}),q==="pendiente"&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Se establece en 0 automticamente"}),q==="parcial"&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Introduce el monto pagado parcialmente"})]}),r.jsxs("div",{className:"space-y-4 ml-6 p-4 border rounded-lg bg-muted/50",children:[q==="parcial"||q==="pendiente"?r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Se registrar como cuenta por pagar al proveedor (obligatorio)"})]}):r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Informacin del proveedor (opcional pero recomendado para seguimiento)"})]}),(q==="parcial"||q==="pendiente")&&ue>0&&r.jsx("div",{className:"p-3 bg-muted border rounded-lg",children:r.jsxs("p",{className:"text-sm font-medium",children:["Monto Pendiente: ",z(ue)]})}),(q==="parcial"||q==="pendiente")&&r.jsxs("div",{children:[r.jsx(se,{htmlFor:"fechaVencimiento",children:"Fecha de Vencimiento"}),r.jsx(Ae,{id:"fechaVencimiento",type:"date",...F("fechaVencimiento")})]}),(q==="parcial"||q==="pendiente")&&r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-primary",children:["Informacin del Proveedor ",q==="parcial"||q==="pendiente"?"*":"(Opcional)"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{children:["Es un proveedor nuevo o existente? ",q==="parcial"||q==="pendiente"?"*":""]}),r.jsxs(Hn,{value:u,onValueChange:U=>{m(U),U==="nuevo"?h(""):U==="existente"?(W("proveedor",""),p(""),j(""),N("")):U==="ninguno"&&(h(""),W("proveedor",""),p(""),j(""),N(""))},children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"nuevo",id:"proveedor-nuevo"}),r.jsx(se,{htmlFor:"proveedor-nuevo",children:"Proveedor Nuevo"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"existente",id:"proveedor-existente"}),r.jsx(se,{htmlFor:"proveedor-existente",children:"Proveedor Existente"})]}),q==="contado"&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"ninguno",id:"proveedor-ninguno"}),r.jsx(se,{htmlFor:"proveedor-ninguno",children:"Sin Proveedor"})]})]})]}),u==="nuevo"&&r.jsxs("div",{className:"space-y-4 p-3 bg-background rounded-lg border",children:[r.jsx("h4",{className:"text-sm font-semibold",children:"Datos del Nuevo Proveedor"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(se,{htmlFor:"proveedor-nombre",children:"Nombre del Proveedor *"}),r.jsx(Ae,{id:"proveedor-nombre",...F("proveedor"),placeholder:"Nombre completo o razn social"})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"proveedor-telefono",children:"Telfono"}),r.jsx(Ae,{id:"proveedor-telefono",value:x,onChange:U=>p(U.target.value),placeholder:"Nmero de telfono"})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"proveedor-email",children:"Email"}),r.jsx(Ae,{id:"proveedor-email",type:"email",value:v,onChange:U=>j(U.target.value),placeholder:"correo@ejemplo.com"})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"proveedor-rfc",children:"RFC"}),r.jsx(Ae,{id:"proveedor-rfc",value:g,onChange:U=>N(U.target.value),placeholder:"RFC del proveedor"})]})]})]}),u==="existente"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-select",children:"Seleccionar Proveedor *"}),r.jsxs(De,{value:f,onValueChange:h,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar proveedor de la base de datos"})}),r.jsx($e,{children:A&&A.length>0?A.map(U=>r.jsxs(le,{value:U.id,children:[U.nombre,U.telefono&&` - ${U.telefono}`]},U.id)):r.jsx(le,{value:"no-proveedores",disabled:!0,children:"No hay proveedores registrados"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Proveedores desde el men de Cobros y Pagos"})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"ubicacion",children:"Ubicacin en Almacn"}),r.jsx(Ae,{id:"ubicacion",...F("ubicacion"),placeholder:"Ej: Estante A-1, Pasillo 2"})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin del Producto"}),r.jsx(Kr,{id:"descripcion",...F("descripcion"),placeholder:"Descripcin, caractersticas, marca, modelo...",className:"min-h-16"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx(se,{htmlFor:"imagen",children:"Imagen del Producto (Opcional)"}),r.jsx("div",{className:"mt-2",children:c?r.jsxs("div",{className:"relative w-full max-w-xs",children:[r.jsx("img",{src:c,alt:"Preview",className:"w-full h-32 object-cover rounded-md border"}),!n&&r.jsx(Pe,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:we,children:r.jsx(xs,{className:"h-4 w-4"})})]}):r.jsxs("label",{className:"flex flex-col items-center justify-center w-full max-w-xs h-32 border-2 border-dashed border-muted-foreground/25 rounded-lg cursor-pointer hover:border-muted-foreground/50",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(ug,{className:"h-6 w-6 mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:r.jsx("span",{className:"font-semibold",children:"Click para subir"})})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:pe})]})})]}),r.jsx("div",{className:"flex justify-end pt-6",children:r.jsxs(Pe,{type:"submit",disabled:k.isPending,className:"flex items-center gap-2",children:[r.jsx(as,{className:"h-4 w-4"}),k.isPending?"Registrando...":n?"Agregar Stock":"Registrar Producto"]})})]})})]})})},Ot=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Te("w-full caption-bottom text-sm",e),...t})}));Ot.displayName="Table";const Tt=y.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Te("[&_tr]:border-b",e),...t}));Tt.displayName="TableHeader";const kt=y.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Te("[&_tr:last-child]:border-0",e),...t}));kt.displayName="TableBody";const $Pe=y.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));$Pe.displayName="TableFooter";const Oe=y.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Oe.displayName="TableRow";const me=y.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));me.displayName="TableHead";const Z=y.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Te("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Z.displayName="TableCell";const DPe=y.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Te("mt-4 text-sm text-muted-foreground",e),...t}));DPe.displayName="TableCaption";const FPe=()=>{const[e,t]=y.useState(""),[n,s]=y.useState("todos"),[a,o]=y.useState(null),[i,l]=y.useState(0),{data:c,isLoading:d}=mp(),u=vPe(),m=(c||[]).map(w=>({...w,stock_actual:w.cantidad_stock,stock_minimo:10,stock_maximo:100,costo_promedio:w.costo_unitario,valor_total:w.valor_total_inventario,entradas_mes:w.cantidad_comprada,salidas_mes:w.cantidad_vendida,precio_venta:w.precio_venta,subcuenta_nombre:w.subcuenta_nombre})),f=w=>w>0?"disponible":w<0?"negativo":"agotado",h=(w,S,C)=>w<=S?"bajo":w>=C*.7?"alto":"medio",x=w=>{switch(w){case"disponible":return r.jsx(_e,{className:"bg-green-100 text-green-800",children:"Disponible"});case"negativo":return r.jsx(_e,{className:"bg-red-100 text-red-800",children:"Vendido sin Stock"});case"agotado":return r.jsx(_e,{className:"bg-orange-100 text-orange-800",children:"Agotado"})}},p=w=>{switch(w){case"alto":return r.jsx(_e,{className:"bg-blue-100 text-blue-800",children:"Alto Stock"});case"medio":return r.jsx(_e,{className:"bg-yellow-100 text-yellow-800",children:"Medio Stock"});case"bajo":return r.jsx(_e,{className:"bg-orange-100 text-orange-800",children:"Bajo Stock"})}},v=m.filter(w=>{const S=w.nombre.toLowerCase().includes(e.toLowerCase()),C=f(w.stock_actual),A=h(w.stock_actual,w.stock_minimo,w.stock_maximo);return S&&(n==="todos"||C===n||A===n)}),j={total:m.length,disponible:m.filter(w=>f(w.stock_actual)==="disponible").length,agotado:m.filter(w=>f(w.stock_actual)==="agotado").length,bajo_stock:m.filter(w=>h(w.stock_actual,w.stock_minimo,w.stock_maximo)==="bajo").length,medio_stock:m.filter(w=>h(w.stock_actual,w.stock_minimo,w.stock_maximo)==="medio").length,alto_stock:m.filter(w=>h(w.stock_actual,w.stock_minimo,w.stock_maximo)==="alto").length},g=(w,S)=>{o(w),l(S)},N=async w=>{try{await u.mutateAsync({id:w,precio:i}),o(null),l(0)}catch(S){console.error("Error updating price:",S)}},_=()=>{o(null),l(0)},b=w=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(w);return d?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando control de inventario..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Productos"}),r.jsx("p",{className:"text-2xl font-bold",children:j.total})]}),r.jsx(Zr,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Disponibles"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.disponible})]}),r.jsx(tr,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Alto Stock"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.alto_stock})]}),r.jsx(tr,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bajo Stock"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:j.bajo_stock})]}),r.jsx(Wr,{className:"h-8 w-8 text-orange-600"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Agotados"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:j.agotado})]}),r.jsx(Rn,{className:"h-8 w-8 text-red-600"})]})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Control de Inventario"}),r.jsx(Me,{children:"Monitorea el stock y movimientos de tus productos"})]}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar productos...",value:e,onChange:w=>t(w.target.value),className:"pl-9"})]}),r.jsxs(De,{value:n,onValueChange:w=>s(w),children:[r.jsx(ke,{className:"w-full sm:w-48",children:r.jsx(Fe,{placeholder:"Filtrar por estado"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los estados"}),r.jsx(le,{value:"disponible",children:"Disponible"}),r.jsx(le,{value:"negativo",children:"Vendido sin Stock"}),r.jsx(le,{value:"agotado",children:"Agotado"}),r.jsx(le,{value:"alto",children:"Alto Stock"}),r.jsx(le,{value:"medio",children:"Medio Stock"}),r.jsx(le,{value:"bajo",children:"Bajo Stock"})]})]})]}),m.length>0?r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Producto"}),r.jsx(me,{children:"Stock Actual"}),r.jsx(me,{children:"Stock Mnimo"}),r.jsx(me,{children:"Disponibilidad"}),r.jsx(me,{children:"Nivel de Stock"}),r.jsx(me,{children:"Costo Unitario"}),r.jsx(me,{children:"Precio de Venta"}),r.jsx(me,{children:"Valor Total"}),r.jsx(me,{children:"Total Comprado"}),r.jsx(me,{children:"Total Usado/Vendido"})]})}),r.jsx(kt,{children:v.map(w=>{const S=f(w.stock_actual),C=h(w.stock_actual,w.stock_minimo,w.stock_maximo);return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[S==="negativo"&&r.jsx("div",{className:"flex-shrink-0",title:"Atencin! Debes comprar para compensar el inventario negativo",children:r.jsx(Wr,{className:"h-5 w-5 text-red-600"})}),w.imagen_url?r.jsx("img",{src:w.imagen_url,alt:w.nombre,className:"w-10 h-10 object-cover rounded"}):r.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:r.jsx(Zr,{className:"h-5 w-5 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:w.nombre}),r.jsx("p",{className:"text-sm text-muted-foreground",children:w.subcuenta_nombre||"Sin subcuenta"})]})]})}),r.jsx(Z,{children:r.jsx("span",{className:`font-semibold ${S==="agotado"?"text-red-600":C==="bajo"?"text-orange-600":C==="medio"?"text-yellow-600":"text-green-600"}`,children:w.stock_actual})}),r.jsx(Z,{children:w.stock_minimo}),r.jsx(Z,{children:x(S)}),r.jsx(Z,{children:p(C)}),r.jsx(Z,{className:"font-semibold",children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(w.costo_promedio)}),r.jsx(Z,{children:a===w.id?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ae,{type:"number",step:"0.01",value:i,onChange:A=>l(Number(A.target.value)),className:"w-24 h-8",onKeyDown:A=>{A.key==="Enter"?N(w.id):A.key==="Escape"&&_()}}),r.jsx(Pe,{size:"sm",onClick:()=>N(w.id),disabled:u.isPending,className:"h-8 w-8 p-0",children:r.jsx(Gh,{className:"h-4 w-4"})}),r.jsx(Pe,{size:"sm",variant:"outline",onClick:_,className:"h-8 w-8 p-0",children:r.jsx(Yh,{className:"h-4 w-4"})})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-green-600",children:b(w.precio_venta||0)}),r.jsx(Pe,{size:"sm",variant:"ghost",onClick:()=>g(w.id,w.precio_venta||0),className:"h-8 w-8 p-0",children:r.jsx(Ao,{className:"h-4 w-4"})})]})}),r.jsx(Z,{className:`font-semibold ${w.valor_total<0?"text-red-600":""}`,children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(w.valor_total)}),r.jsx(Z,{children:r.jsx("span",{className:"text-blue-600 font-medium",children:w.entradas_mes})}),r.jsx(Z,{children:r.jsx("span",{className:"text-orange-600 font-medium",children:w.salidas_mes})})]},w.id)})})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:m.length===0?"No hay productos de inventario registrados. Registra tu primera compra en la pestaa 'Registro de Productos'.":"No se encontraron productos con los filtros seleccionados"})]})]})]})};function Ct(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Is(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ss(e,t){const n=Ct(e);return isNaN(t)?Is(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ms(e,t){const n=Ct(e);if(isNaN(t))return Is(e,NaN);if(!t)return n;const s=n.getDate(),a=Is(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}const eC=6048e5,IPe=864e5,oB=6e4,iB=36e5;let RPe={};function pp(){return RPe}function Oo(e,t){var l,c,d,u;const n=pp(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ct(e),o=a.getDay(),i=(o<s?7:0)+o-s;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Dc(e){return Oo(e,{weekStartsOn:1})}function lB(e){const t=Ct(e),n=t.getFullYear(),s=Is(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=Dc(s),o=Is(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Dc(o);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function Nl(e){const t=Ct(e);return t.setHours(0,0,0,0),t}function $v(e){const t=Ct(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function za(e,t){const n=Nl(e),s=Nl(t),a=+n-$v(n),o=+s-$v(s);return Math.round((a-o)/IPe)}function LPe(e){const t=lB(e),n=Is(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Dc(n)}function G1(e,t){const n=t*7;return ss(e,n)}function BPe(e,t){return ms(e,t*12)}function zPe(e){let t;return e.forEach(function(n){const s=Ct(n);(t===void 0||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}function VPe(e){let t;return e.forEach(n=>{const s=Ct(n);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}function wb(e,t){const n=Ct(e),s=Ct(t),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}function tC(e){return Is(e,Date.now())}function cs(e,t){const n=Nl(e),s=Nl(t);return+n==+s}function rC(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function WPe(e){if(!rC(e)&&typeof e!="number")return!1;const t=Ct(e);return!isNaN(Number(t))}function Lu(e,t){const n=Ct(e),s=Ct(t),a=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return a*12+o}function qPe(e,t,n){const s=Oo(e,n),a=Oo(t,n),o=+s-$v(s),i=+a-$v(a);return Math.round((o-i)/eC)}function UPe(e,t){const n=Ct(e),s=Ct(t),a=Nk(n,s),o=Math.abs(za(n,s));n.setDate(n.getDate()-a*o);const i=+(Nk(n,s)===-a),l=a*(o-i);return l===0?0:l}function Nk(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function nC(e){const t=Ct(e);return t.setHours(23,59,59,999),t}function Ds(e){const t=Ct(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function KPe(e){const t=Ct(e);return+nC(t)==+Ds(t)}function GPe(e,t){const n=Ct(e),s=Ct(t),a=wb(n,s),o=Math.abs(Lu(n,s));let i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*o);let l=wb(n,s)===-a;KPe(Ct(e))&&o===1&&wb(e,s)===1&&(l=!1),i=a*(o-Number(l))}return i===0?0:i}function sC(e,t){const n=Ct(e.start),s=Ct(e.end);let a=+n>+s;const o=a?+n:+s,i=a?s:n;i.setHours(0,0,0,0);let l=1;const c=[];for(;+i<=o;)c.push(Ct(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return a?c.reverse():c}function aC(e,t){const n=Ct(e.start),s=Ct(e.end);let a=+n>+s;const o=a?+n:+s,i=a?s:n;i.setHours(0,0,0,0),i.setDate(1);let l=1;const c=[];for(;+i<=o;)c.push(Ct(i)),i.setMonth(i.getMonth()+l);return a?c.reverse():c}function dr(e){const t=Ct(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Oh(e){const t=Ct(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Va(e){const t=Ct(e),n=Is(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function oC(e,t){var l,c,d,u;const n=pp(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ct(e),o=a.getDay(),i=(o<s?-7:0)+6-(o-s);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function cB(e){return oC(e,{weekStartsOn:1})}const HPe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},XPe=(e,t,n)=>{let s;const a=HPe[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Bd(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const YPe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QPe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ZPe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JPe={date:Bd({formats:YPe,defaultWidth:"full"}),time:Bd({formats:QPe,defaultWidth:"full"}),dateTime:Bd({formats:ZPe,defaultWidth:"full"})},eAe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tAe=(e,t,n,s)=>eAe[e];function po(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const rAe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nAe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aAe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lAe=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},cAe={ordinalNumber:lAe,era:po({values:rAe,defaultWidth:"wide"}),quarter:po({values:nAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:po({values:sAe,defaultWidth:"wide"}),day:po({values:aAe,defaultWidth:"wide"}),dayPeriod:po({values:oAe,defaultWidth:"wide",formattingValues:iAe,defaultFormattingWidth:"wide"})};function xo(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?uAe(l,m=>m.test(i)):dAe(l,m=>m.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function dAe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function uAe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function dB(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const mAe=/^(\d+)(th|st|nd|rd)?/i,fAe=/\d+/i,hAe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pAe={any:[/^b/i,/^(a|c)/i]},xAe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gAe={any:[/1/i,/2/i,/3/i,/4/i]},vAe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jAe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yAe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bAe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NAe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wAe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_Ae={ordinalNumber:dB({matchPattern:mAe,parsePattern:fAe,valueCallback:e=>parseInt(e,10)}),era:xo({matchPatterns:hAe,defaultMatchWidth:"wide",parsePatterns:pAe,defaultParseWidth:"any"}),quarter:xo({matchPatterns:xAe,defaultMatchWidth:"wide",parsePatterns:gAe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xo({matchPatterns:vAe,defaultMatchWidth:"wide",parsePatterns:jAe,defaultParseWidth:"any"}),day:xo({matchPatterns:yAe,defaultMatchWidth:"wide",parsePatterns:bAe,defaultParseWidth:"any"}),dayPeriod:xo({matchPatterns:NAe,defaultMatchWidth:"any",parsePatterns:wAe,defaultParseWidth:"any"})},uB={code:"en-US",formatDistance:XPe,formatLong:JPe,formatRelative:tAe,localize:cAe,match:_Ae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SAe(e){const t=Ct(e);return za(t,Va(t))+1}function mB(e){const t=Ct(e),n=+Dc(t)-+LPe(t);return Math.round(n/eC)+1}function fB(e,t){var u,m,f,h;const n=Ct(e),s=n.getFullYear(),a=pp(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(f=a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=Is(e,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=Oo(i,t),c=Is(e,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const d=Oo(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function CAe(e,t){var l,c,d,u;const n=pp(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=fB(e,t),o=Is(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),Oo(o,t)}function hB(e,t){const n=Ct(e),s=+Oo(n,t)-+CAe(n,t);return Math.round(s/eC)+1}function cr(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const _i={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return cr(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return cr(a,t.length)}},id={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wk={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return _i.y(e,t)},Y:function(e,t,n,s){const a=fB(e,s),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return cr(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):cr(o,t.length)},R:function(e,t){const n=lB(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return cr(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return cr(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return _i.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return cr(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=hB(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const s=mB(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):cr(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):_i.d(e,t)},D:function(e,t,n){const s=SAe(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):cr(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return cr(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return cr(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=id.noon:s===0?a=id.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=id.evening:s>=12?a=id.afternoon:s>=4?a=id.morning:a=id.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return _i.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):_i.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):cr(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):cr(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):_i.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):_i.s(e,t)},S:function(e,t){return _i.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Sk(s);case"XXXX":case"XX":return Gl(s);case"XXXXX":case"XXX":default:return Gl(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return Sk(s);case"xxxx":case"xx":return Gl(s);case"xxxxx":case"xxx":default:return Gl(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_k(s,":");case"OOOO":default:return"GMT"+Gl(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_k(s,":");case"zzzz":default:return"GMT"+Gl(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return cr(s,t.length)},T:function(e,t,n){const s=e.getTime();return cr(s,t.length)}};function _k(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?n+String(a):n+String(a)+t+cr(o,2)}function Sk(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):Gl(e,t)}function Gl(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=cr(Math.trunc(s/60),2),o=cr(s%60,2);return n+a+t+o}const Ck=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},PAe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return Ck(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Ck(s,t)).replace("{{time}}",pB(a,t))},AAe={p:pB,P:PAe},EAe=/^D+$/,MAe=/^Y+$/,OAe=["D","DD","YY","YYYY"];function TAe(e){return EAe.test(e)}function kAe(e){return MAe.test(e)}function $Ae(e,t,n){const s=DAe(e,t,n);if(console.warn(s),OAe.includes(e))throw new RangeError(s)}function DAe(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RAe=/^'([^]*?)'?$/,LAe=/''/g,BAe=/[a-zA-Z]/;function ze(e,t,n){var u,m,f,h,x,p,v,j;const s=pp(),a=(n==null?void 0:n.locale)??s.locale??uB,o=(n==null?void 0:n.firstWeekContainsDate)??((m=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((h=(f=s.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((p=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:p.weekStartsOn)??s.weekStartsOn??((j=(v=s.locale)==null?void 0:v.options)==null?void 0:j.weekStartsOn)??0,l=Ct(e);if(!WPe(l))throw new RangeError("Invalid time value");let c=t.match(IAe).map(g=>{const N=g[0];if(N==="p"||N==="P"){const _=AAe[N];return _(g,a.formatLong)}return g}).join("").match(FAe).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const N=g[0];if(N==="'")return{isToken:!1,value:zAe(g)};if(wk[N])return{isToken:!0,value:g};if(N.match(BAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(g=>{if(!g.isToken)return g.value;const N=g.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&kAe(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&TAe(N))&&$Ae(N,t,String(e));const _=wk[N[0]];return _(l,N,a.localize,d)}).join("")}function zAe(e){const t=e.match(RAe);return t?t[1].replace(LAe,"'"):e}function VAe(e){const t=Ct(e),n=t.getFullYear(),s=t.getMonth(),a=Is(e,0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function WAe(e){return Math.trunc(+Ct(e)/1e3)}function H1(e){const t=Ct(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function qAe(e,t){return qPe(H1(e),dr(e),t)+1}function X1(e,t){const n=Ct(e),s=Ct(t);return n.getTime()>s.getTime()}function xB(e,t){const n=Ct(e),s=Ct(t);return+n<+s}function kj(e,t){const n=Ct(e),s=Ct(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function gB(e,t){const n=Ct(e),s=Ct(t);return n.getFullYear()===s.getFullYear()}function Y1(e){return kj(e,tC(e))}function vB(e){return gB(e,tC(e))}function jB(e){return cs(e,tC(e))}function _b(e,t){return ss(e,-t)}function UAe(e,t){const s=XAe(e);let a;if(s.date){const c=YAe(s.date,2);a=QAe(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const o=a.getTime();let i=0,l;if(s.time&&(i=ZAe(s.time),isNaN(i)))return new Date(NaN);if(s.timezone){if(l=JAe(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(o+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+i+l)}const fx={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},KAe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,GAe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,HAe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function XAe(e){const t={},n=e.split(fx.dateTimeDelimiter);let s;if(n.length>2)return t;if(/:/.test(n[0])?s=n[0]:(t.date=n[0],s=n[1],fx.timeZoneDelimiter.test(t.date)&&(t.date=e.split(fx.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=fx.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function YAe(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((s[1]||s[2]).length)}}function QAe(e,t){if(t===null)return new Date(NaN);const n=e.match(KAe);if(!n)return new Date(NaN);const s=!!n[4],a=Vm(n[1]),o=Vm(n[2])-1,i=Vm(n[3]),l=Vm(n[4]),c=Vm(n[5])-1;if(s)return sEe(t,l,c)?eEe(t,l,c):new Date(NaN);{const d=new Date(0);return!rEe(t,o,i)||!nEe(t,a)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(a,i)),d)}}function Vm(e){return e?parseInt(e):1}function ZAe(e){const t=e.match(GAe);if(!t)return NaN;const n=Sb(t[1]),s=Sb(t[2]),a=Sb(t[3]);return aEe(n,s,a)?n*iB+s*oB+a*1e3:NaN}function Sb(e){return e&&parseFloat(e.replace(",","."))||0}function JAe(e){if(e==="Z")return 0;const t=e.match(HAe);if(!t)return 0;const n=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return oEe(s,a)?n*(s*iB+a*oB):NaN}function eEe(e,t,n){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,o=(t-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+o),s}const tEe=[31,null,31,30,31,30,31,31,30,31,30,31];function yB(e){return e%400===0||e%4===0&&e%100!==0}function rEe(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(tEe[t]||(yB(e)?29:28))}function nEe(e,t){return t>=1&&t<=(yB(e)?366:365)}function sEe(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function aEe(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function oEe(e,t){return t>=0&&t<=59}function Cb(e,t){const n=Ct(e),s=n.getFullYear(),a=n.getDate(),o=Is(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const i=VAe(o);return n.setMonth(t,Math.min(a,i)),n}function Pk(e,t){const n=Ct(e);return isNaN(+n)?Is(e,NaN):(n.setFullYear(t),n)}const iEe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},lEe=(e,t,n)=>{let s;const a=iEe[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+s:"hace "+s:s},cEe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},dEe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},uEe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mEe={date:Bd({formats:cEe,defaultWidth:"full"}),time:Bd({formats:dEe,defaultWidth:"full"}),dateTime:Bd({formats:uEe,defaultWidth:"full"})},fEe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},hEe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},pEe=(e,t,n,s)=>t.getHours()!==1?hEe[e]:fEe[e],xEe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},gEe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},vEe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},jEe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},yEe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},bEe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},NEe=(e,t)=>Number(e)+"",wEe={ordinalNumber:NEe,era:po({values:xEe,defaultWidth:"wide"}),quarter:po({values:gEe,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:po({values:vEe,defaultWidth:"wide"}),day:po({values:jEe,defaultWidth:"wide"}),dayPeriod:po({values:yEe,defaultWidth:"wide",formattingValues:bEe,defaultFormattingWidth:"wide"})},_Ee=/^(\d+)()?/i,SEe=/\d+/i,CEe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},PEe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},AEe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},EEe={any:[/1/i,/2/i,/3/i,/4/i]},MEe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},OEe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},TEe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},kEe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},$Ee={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},DEe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},FEe={ordinalNumber:dB({matchPattern:_Ee,parsePattern:SEe,valueCallback:function(e){return parseInt(e,10)}}),era:xo({matchPatterns:CEe,defaultMatchWidth:"wide",parsePatterns:PEe,defaultParseWidth:"any"}),quarter:xo({matchPatterns:AEe,defaultMatchWidth:"wide",parsePatterns:EEe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xo({matchPatterns:MEe,defaultMatchWidth:"wide",parsePatterns:OEe,defaultParseWidth:"any"}),day:xo({matchPatterns:TEe,defaultMatchWidth:"wide",parsePatterns:kEe,defaultParseWidth:"any"}),dayPeriod:xo({matchPatterns:$Ee,defaultMatchWidth:"any",parsePatterns:DEe,defaultParseWidth:"any"})},ht={code:"es",formatDistance:lEe,formatLong:mEe,formatRelative:pEe,localize:wEe,match:FEe,options:{weekStartsOn:1,firstWeekContainsDate:1}},IEe=(e,t="anual")=>it({queryKey:["historico-inventario",e,t],queryFn:async()=>{const n=t==="mensual"?dr(new Date):Va(new Date);let s=ce.from("movimientos_inventario").select("*").eq("estado","activo").gte("fecha",ze(n,"yyyy-MM-dd")).order("fecha",{ascending:!0});e&&e!=="total"&&(s=s.eq("producto_id",e));const{data:a,error:o}=await s;if(o)throw o;let i;t==="mensual"?i=sC({start:dr(new Date),end:Ds(new Date)}).map(f=>({mes:ze(f,"dd MMM",{locale:ht}),stock:0,compras:0,ventas:0,stock_valor:0,compras_valor:0,ventas_valor:0})):i=aC({start:Va(new Date),end:Oh(new Date)}).map(f=>({mes:ze(f,"MMM yyyy",{locale:ht}),stock:0,compras:0,ventas:0,stock_valor:0,compras_valor:0,ventas_valor:0}));const l={};a==null||a.forEach(m=>{const f=UAe(m.fecha),h=t==="mensual"?ze(f,"dd MMM",{locale:ht}):ze(dr(f),"MMM yyyy",{locale:ht});l[h]||(l[h]={mes:h,stock:0,compras:0,ventas:0,stock_valor:0,compras_valor:0,ventas_valor:0});const x=Number(m.cantidad),p=Number(m.costo_total),v=Number(m.costo_unitario);m.tipo_movimiento==="compra"?(l[h].compras+=x,l[h].compras_valor+=p):m.tipo_movimiento==="venta"?(l[h].ventas+=x,l[h].ventas_valor+=x*v):m.tipo_movimiento==="ajuste"&&(x>0?(l[h].compras+=x,l[h].compras_valor+=p):(l[h].ventas+=Math.abs(x),l[h].ventas_valor+=Math.abs(x)*v))});const c=i.map(m=>l[m.mes]||m);let d=0,u=0;return c.forEach(m=>{d+=m.compras-m.ventas,u+=m.compras_valor-m.ventas_valor,m.stock=d,m.stock_valor=u}),c},enabled:!0}),REe=()=>{var g;const[e,t]=y.useState("total"),[n,s]=y.useState("anual"),[a,o]=y.useState("unidades"),[i,l]=y.useState("general"),{data:c}=mp(),{data:d,isLoading:u}=IEe(e,n),m=N=>i==="miles"?N/1e3:i==="millones"?N/1e6:N,f=(d==null?void 0:d.map(N=>{const _=a==="dinero";return{mes:N.mes,stock:m(_?N.stock_valor:N.stock),compras:m(_?N.compras_valor:N.compras),ventas:m(_?N.ventas_valor:N.ventas)}}))||[],x=(()=>{if(!f||f.length===0)return 100;const N=Math.max(...f.map(S=>S.stock||0)),_=Math.max(...f.map(S=>S.compras||0)),b=Math.max(...f.map(S=>S.ventas||0));return Math.max(N,_,b)*1.2})(),p=a==="dinero"?"$":"unidades",v=i==="miles"?"K":i==="millones"?"M":"",j=`${p}${v}`;return r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(tr,{className:"h-5 w-5"}),r.jsx(ae,{children:"Historial de Inventario"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Producto"}),r.jsxs(De,{value:e,onValueChange:t,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"total",children:" Total (Todos)"}),c.map(N=>r.jsx(le,{value:N.id,children:N.nombre},N.id))]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Perodo"}),r.jsxs(De,{value:n,onValueChange:N=>s(N),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:" Mes actual"}),r.jsx(le,{value:"anual",children:" ltimos 12 meses"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Mostrar en"}),r.jsxs(De,{value:a,onValueChange:N=>o(N),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"unidades",children:" Unidades"}),r.jsx(le,{value:"dinero",children:" Dinero"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Formato"}),r.jsxs(De,{value:i,onValueChange:N=>l(N),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"general",children:"General"}),r.jsx(le,{value:"miles",children:"Miles (K)"}),r.jsx(le,{value:"millones",children:"Millones (M)"})]})]})]})]}),r.jsx(Me,{className:"mt-3",children:e==="total"?`Evolucin ${n==="mensual"?"del mes actual":"de los ltimos 12 meses"} - Todos los productos`:`Evolucin ${n==="mensual"?"del mes actual":"de los ltimos 12 meses"} - ${((g=c.find(N=>N.id===e))==null?void 0:g.nombre)||""}`})]}),r.jsx(Q,{children:u?r.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"Cargando datos histricos..."}):f&&f.length>0?r.jsx(mt,{width:"100%",height:400,children:r.jsxs(bl,{data:f,children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"mes",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),r.jsx(gt,{className:"text-xs",domain:[0,x],tick:{fill:"hsl(var(--muted-foreground))"},label:{value:j,angle:-90,position:"insideLeft",style:{fill:"hsl(var(--muted-foreground))"}}}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)"},formatter:N=>[`${a==="dinero"?"$":""}${N.toLocaleString("es-MX",{minimumFractionDigits:0,maximumFractionDigits:2})}${v}`,""]}),r.jsx(jr,{formatter:N=>({stock:"Stock Actual",compras:"Compras",ventas:"Ventas"})[N]||N}),r.jsx(Wt,{type:"monotone",dataKey:"stock",stroke:"hsl(var(--primary))",strokeWidth:2,name:"stock",dot:{fill:"hsl(var(--primary))"},label:{position:"top",fill:"hsl(var(--primary))",fontSize:n==="anual"?12:10,formatter:N=>N>0?N.toFixed(0):""}}),r.jsx(Wt,{type:"monotone",dataKey:"compras",stroke:"hsl(142, 76%, 36%)",strokeWidth:2,name:"compras",dot:{fill:"hsl(142, 76%, 36%)"},label:{position:"top",fill:"hsl(142, 76%, 36%)",fontSize:n==="anual"?12:10,formatter:N=>N>0?N.toFixed(0):""}}),r.jsx(Wt,{type:"monotone",dataKey:"ventas",stroke:"hsl(346, 77%, 50%)",strokeWidth:2,name:"ventas",dot:{fill:"hsl(346, 77%, 50%)"},label:{position:"bottom",fill:"hsl(346, 77%, 50%)",fontSize:n==="anual"?12:10,formatter:N=>N>0?N.toFixed(0):""}})]})}):r.jsxs("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:["No hay datos histricos ",n==="mensual"?"para el mes actual":""]})})]})};var bB={exports:{}},NB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=y;function LEe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var BEe=typeof Object.is=="function"?Object.is:LEe,zEe=Bu.useState,VEe=Bu.useEffect,WEe=Bu.useLayoutEffect,qEe=Bu.useDebugValue;function UEe(e,t){var n=t(),s=zEe({inst:{value:n,getSnapshot:t}}),a=s[0].inst,o=s[1];return WEe(function(){a.value=n,a.getSnapshot=t,Pb(a)&&o({inst:a})},[e,n,t]),VEe(function(){return Pb(a)&&o({inst:a}),e(function(){Pb(a)&&o({inst:a})})},[e]),qEe(n),n}function Pb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!BEe(e,n)}catch{return!0}}function KEe(e,t){return t()}var GEe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?KEe:UEe;NB.useSyncExternalStore=Bu.useSyncExternalStore!==void 0?Bu.useSyncExternalStore:GEe;bB.exports=NB;var HEe=bB.exports;function XEe(){return HEe.useSyncExternalStore(YEe,()=>!0,()=>!1)}function YEe(){return()=>{}}var iC="Avatar",[QEe,SFe]=hn(iC),[ZEe,wB]=QEe(iC),_B=y.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,o]=y.useState("idle");return r.jsx(ZEe,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:r.jsx(Ze.span,{...s,ref:t})})});_B.displayName=iC;var SB="AvatarImage",CB=y.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...o}=e,i=wB(SB,n),l=JEe(s,o),c=fs(d=>{a(d),i.onImageLoadingStatusChange(d)});return nn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(Ze.img,{...o,ref:t,src:s}):null});CB.displayName=SB;var PB="AvatarFallback",AB=y.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,o=wB(PB,n),[i,l]=y.useState(s===void 0);return y.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),i&&o.imageLoadingStatus!=="loaded"?r.jsx(Ze.span,{...a,ref:t}):null});AB.displayName=PB;function Ak(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function JEe(e,{referrerPolicy:t,crossOrigin:n}){const s=XEe(),a=y.useRef(null),o=s?(a.current||(a.current=new window.Image),a.current):null,[i,l]=y.useState(()=>Ak(o,e));return nn(()=>{l(Ak(o,e))},[o,e]),nn(()=>{const c=m=>()=>{l(m)};if(!o)return;const d=c("loaded"),u=c("error");return o.addEventListener("load",d),o.addEventListener("error",u),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",d),o.removeEventListener("error",u)}},[o,n,t]),i}var EB=_B,MB=CB,OB=AB;const ya=y.forwardRef(({className:e,...t},n)=>r.jsx(EB,{ref:n,className:Te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ya.displayName=EB.displayName;const ba=y.forwardRef(({className:e,...t},n)=>r.jsx(MB,{ref:n,className:Te("aspect-square h-full w-full",e),...t}));ba.displayName=MB.displayName;const Na=y.forwardRef(({className:e,...t},n)=>r.jsx(OB,{ref:n,className:Te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Na.displayName=OB.displayName;const eMe=()=>{const{data:e,isLoading:t}=mp(),n=[...e||[]].sort((o,i)=>o.dias_promedio_rotacion?i.dias_promedio_rotacion?i.dias_promedio_rotacion-o.dias_promedio_rotacion:-1:1),s=(o,i)=>!o||i===void 0?r.jsx(_e,{variant:"secondary",children:"Sin movimiento"}):o==="alta"?r.jsx(_e,{className:"bg-success text-success-foreground",children:"Alta"}):o==="media"?r.jsx(_e,{className:"bg-muted text-muted-foreground",children:"Media"}):o==="baja"?r.jsx(_e,{variant:"secondary",children:"Baja"}):o==="muy_baja"?r.jsx(_e,{variant:"destructive",children:"Muy Baja"}):r.jsx(_e,{variant:"secondary",children:"Sin movimiento"}),a=o=>!o||o===0?"Sin datos":`${o.toFixed(0)} das`;return t?r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Cargando datos de rotacin..."})})}):r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sS,{className:"h-5 w-5"}),r.jsx(ae,{children:"Rotacin de Inventario"})]}),r.jsx(Me,{children:"Promedio de das que tarda cada producto en salir del inventario"})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Imagen"}),r.jsx(me,{children:"Producto"}),r.jsx(me,{className:"text-right",children:"Stock Actual"}),r.jsx(me,{className:"text-right",children:"Das Promedio"}),r.jsx(me,{className:"text-center",children:"Estado Rotacin"})]})}),r.jsx(kt,{children:n.length>0?n.map(o=>r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:o.imagen_url||"",alt:o.nombre}),r.jsx(Na,{children:r.jsx(Zr,{className:"h-5 w-5"})})]})}),r.jsx(Z,{className:"font-medium",children:o.nombre}),r.jsxs(Z,{className:"text-right",children:[o.cantidad_stock.toLocaleString()," unidades"]}),r.jsx(Z,{className:"text-right",children:a(o.dias_promedio_rotacion)}),r.jsx(Z,{className:"text-center",children:s(o.estado_rotacion,o.dias_promedio_rotacion)})]},o.id)):r.jsx(Oe,{children:r.jsx(Z,{colSpan:5,className:"text-center text-muted-foreground",children:"No hay productos de inventario"})})})]})})]})},tMe=()=>{const{data:e,isLoading:t}=mp();if(t)return r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando analtica de inventario..."});const n=(e==null?void 0:e.reduce((c,d)=>c+(d.valor_total_inventario||0),0))||0,s=(e==null?void 0:e.reduce((c,d)=>c+(d.cantidad_stock||0),0))||0,a=n>0&&s>0?n/s:0,o=(e==null?void 0:e.filter(c=>(c.cantidad_comprada||0)>(c.cantidad_stock||0)).length)||0,i=((e==null?void 0:e.length)||0)>0?o/((e==null?void 0:e.length)||1)*100:0,l=c=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(c);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valor Total Inventario"}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:l(n)})]}),r.jsx(ps,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Unidades"}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:s.toLocaleString()})]}),r.jsx(Zr,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Costo Promedio"}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:l(a)})]}),r.jsx(Hh,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rotacin"}),r.jsxs("p",{className:"text-2xl font-bold text-primary",children:[i.toFixed(1),"%"]})]}),r.jsx(sS,{className:"h-8 w-8 text-primary"})]})})})]}),r.jsx(REe,{}),r.jsx(eMe,{}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(Ht,{className:"h-5 w-5"}),"Alertas de Inventario"]})}),r.jsxs(Q,{className:"space-y-4",children:[((e==null?void 0:e.filter(c=>(c.cantidad_stock||0)<=10).length)||0)>0?r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-muted-foreground mb-2",children:"Productos con Stock Bajo:"}),r.jsx("div",{className:"space-y-2",children:(e||[]).filter(c=>(c.cantidad_stock||0)<=10&&(c.cantidad_stock||0)>0).slice(0,5).map(c=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded border",children:[r.jsx("span",{className:"text-sm",children:c.nombre}),r.jsxs(_e,{variant:"secondary",className:"bg-muted text-muted-foreground",children:[c.cantidad_stock," unidades"]})]},c.id))})]}):null,((e==null?void 0:e.filter(c=>(c.cantidad_stock||0)===0).length)||0)>0?r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-muted-foreground mb-2",children:"Productos Agotados:"}),r.jsx("div",{className:"space-y-2",children:(e||[]).filter(c=>(c.cantidad_stock||0)===0).slice(0,3).map(c=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded border",children:[r.jsx("span",{className:"text-sm",children:c.nombre}),r.jsx(_e,{variant:"destructive",children:"Agotado"})]},c.id))})]}):null,((e==null?void 0:e.filter(c=>(c.cantidad_stock||0)<=10||(c.cantidad_stock||0)===0).length)||0)===0&&r.jsxs("div",{className:"text-center py-4 text-primary",children:[r.jsx(iU,{className:"h-8 w-8 mx-auto mb-2"}),r.jsx("p",{className:"font-medium",children:"Todo est bien!"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay alertas de inventario en este momento."})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{className:"flex items-center gap-2 text-primary",children:[r.jsx(tr,{className:"h-5 w-5"}),"Recomendaciones"]})}),r.jsx(Q,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[r.jsx("h4",{className:"font-medium text-primary mb-1",children:"Control de Costos"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"El sistema calcula automticamente el costo promedio ponderado para optimizar tu control de inventario."})]}),r.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[r.jsx("h4",{className:"font-medium text-primary mb-1",children:"Productos Rentables"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Revisa la tabla de rotacin para identificar productos de rpida o lenta salida."})]}),r.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[r.jsx("h4",{className:"font-medium text-primary mb-1",children:"Rotacin de Inventario"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Tu rotacin actual es ",i.toFixed(1),"%. Una rotacin alta indica buena gestin de inventario."]})]})]})})]})]})]})};var $j="Dialog",[TB,kB]=hn($j),[rMe,ao]=TB($j),$B=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=y.useRef(null),c=y.useRef(null),[d,u]=hs({prop:s,defaultProp:a??!1,onChange:o,caller:$j});return r.jsx(rMe,{scope:t,triggerRef:l,contentRef:c,contentId:cn(),titleId:cn(),descriptionId:cn(),open:d,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(m=>!m),[u]),modal:i,children:n})};$B.displayName=$j;var DB="DialogTrigger",FB=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ao(DB,n),o=Ft(t,a.triggerRef);return r.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":dC(a.open),...s,ref:o,onClick:Ge(e.onClick,a.onOpenToggle)})});FB.displayName=DB;var lC="DialogPortal",[nMe,IB]=TB(lC,{forceMount:void 0}),RB=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=ao(lC,t);return r.jsx(nMe,{scope:t,forceMount:n,children:y.Children.map(s,i=>r.jsx(Qn,{present:n||o.open,children:r.jsx(Uu,{asChild:!0,container:a,children:i})}))})};RB.displayName=lC;var Dv="DialogOverlay",LB=y.forwardRef((e,t)=>{const n=IB(Dv,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=ao(Dv,e.__scopeDialog);return o.modal?r.jsx(Qn,{present:s||o.open,children:r.jsx(aMe,{...a,ref:t})}):null});LB.displayName=Dv;var sMe=hl("DialogOverlay.RemoveScroll"),aMe=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ao(Dv,n);return r.jsx(dp,{as:sMe,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Ze.div,{"data-state":dC(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Fc="DialogContent",BB=y.forwardRef((e,t)=>{const n=IB(Fc,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=ao(Fc,e.__scopeDialog);return r.jsx(Qn,{present:s||o.open,children:o.modal?r.jsx(oMe,{...a,ref:t}):r.jsx(iMe,{...a,ref:t})})});BB.displayName=Fc;var oMe=y.forwardRef((e,t)=>{const n=ao(Fc,e.__scopeDialog),s=y.useRef(null),a=Ft(t,n.contentRef,s);return y.useEffect(()=>{const o=s.current;if(o)return Sj(o)},[]),r.jsx(zB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Ge(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:Ge(e.onFocusOutside,o=>o.preventDefault())})}),iMe=y.forwardRef((e,t)=>{const n=ao(Fc,e.__scopeDialog),s=y.useRef(!1),a=y.useRef(!1);return r.jsx(zB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),zB=y.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=ao(Fc,n),c=y.useRef(null),d=Ft(t,c);return wj(),r.jsxs(r.Fragment,{children:[r.jsx(cp,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(zc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":dC(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(cMe,{titleId:l.titleId}),r.jsx(uMe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),cC="DialogTitle",VB=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ao(cC,n);return r.jsx(Ze.h2,{id:a.titleId,...s,ref:t})});VB.displayName=cC;var WB="DialogDescription",qB=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ao(WB,n);return r.jsx(Ze.p,{id:a.descriptionId,...s,ref:t})});qB.displayName=WB;var UB="DialogClose",KB=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ao(UB,n);return r.jsx(Ze.button,{type:"button",...s,ref:t,onClick:Ge(e.onClick,()=>a.onOpenChange(!1))})});KB.displayName=UB;function dC(e){return e?"open":"closed"}var GB="DialogTitleWarning",[lMe,HB]=JW(GB,{contentName:Fc,titleName:cC,docsSlug:"dialog"}),cMe=({titleId:e})=>{const t=HB(GB),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},dMe="DialogDescriptionWarning",uMe=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HB(dMe).contentName}}.`;return y.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},uC=$B,XB=FB,mC=RB,Dj=LB,Fj=BB,fC=VB,hC=qB,pC=KB;const vr=uC,Hc=XB,mMe=mC,YB=y.forwardRef(({className:e,...t},n)=>r.jsx(Dj,{ref:n,className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));YB.displayName=Dj.displayName;const mr=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(mMe,{children:[r.jsx(YB,{}),r.jsxs(Fj,{ref:s,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(pC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Yh,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mr.displayName=Fj.displayName;const fr=({className:e,...t})=>r.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});fr.displayName="DialogHeader";const Th=({className:e,...t})=>r.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Th.displayName="DialogFooter";const hr=y.forwardRef(({className:e,...t},n)=>r.jsx(fC,{ref:n,className:Te("text-lg font-semibold leading-none tracking-tight",e),...t}));hr.displayName=fC.displayName;const mn=y.forwardRef(({className:e,...t},n)=>r.jsx(hC,{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));mn.displayName=hC.displayName;function gr({className:e,...t}){return r.jsx("div",{className:Te("animate-pulse rounded-md bg-muted",e),...t})}var QB="AlertDialog",[fMe,CFe]=hn(QB,[kB]),yi=kB(),ZB=e=>{const{__scopeAlertDialog:t,...n}=e,s=yi(t);return r.jsx(uC,{...s,...n,modal:!0})};ZB.displayName=QB;var hMe="AlertDialogTrigger",JB=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=yi(n);return r.jsx(XB,{...a,...s,ref:t})});JB.displayName=hMe;var pMe="AlertDialogPortal",e8=e=>{const{__scopeAlertDialog:t,...n}=e,s=yi(t);return r.jsx(mC,{...s,...n})};e8.displayName=pMe;var xMe="AlertDialogOverlay",t8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=yi(n);return r.jsx(Dj,{...a,...s,ref:t})});t8.displayName=xMe;var zd="AlertDialogContent",[gMe,vMe]=fMe(zd),jMe=pF("AlertDialogContent"),r8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,o=yi(n),i=y.useRef(null),l=Ft(t,i),c=y.useRef(null);return r.jsx(lMe,{contentName:zd,titleName:n8,docsSlug:"alert-dialog",children:r.jsx(gMe,{scope:n,cancelRef:c,children:r.jsxs(Fj,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:Ge(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(jMe,{children:s}),r.jsx(bMe,{contentRef:i})]})})})});r8.displayName=zd;var n8="AlertDialogTitle",s8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=yi(n);return r.jsx(fC,{...a,...s,ref:t})});s8.displayName=n8;var a8="AlertDialogDescription",o8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=yi(n);return r.jsx(hC,{...a,...s,ref:t})});o8.displayName=a8;var yMe="AlertDialogAction",i8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=yi(n);return r.jsx(pC,{...a,...s,ref:t})});i8.displayName=yMe;var l8="AlertDialogCancel",c8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=vMe(l8,n),o=yi(n),i=Ft(t,a);return r.jsx(pC,{...o,...s,ref:i})});c8.displayName=l8;var bMe=({contentRef:e})=>{const t=`\`${zd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${zd}\` by passing a \`${a8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${zd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},NMe=ZB,wMe=JB,_Me=e8,d8=t8,u8=r8,m8=i8,f8=c8,h8=s8,p8=o8;const wa=NMe,Fv=wMe,SMe=_Me,x8=y.forwardRef(({className:e,...t},n)=>r.jsx(d8,{className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));x8.displayName=d8.displayName;const Xs=y.forwardRef(({className:e,...t},n)=>r.jsxs(SMe,{children:[r.jsx(x8,{}),r.jsx(u8,{ref:n,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Xs.displayName=u8.displayName;const Ys=({className:e,...t})=>r.jsx("div",{className:Te("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ys.displayName="AlertDialogHeader";const Qs=({className:e,...t})=>r.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Qs.displayName="AlertDialogFooter";const Zs=y.forwardRef(({className:e,...t},n)=>r.jsx(h8,{ref:n,className:Te("text-lg font-semibold",e),...t}));Zs.displayName=h8.displayName;const Js=y.forwardRef(({className:e,...t},n)=>r.jsx(p8,{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));Js.displayName=p8.displayName;const ea=y.forwardRef(({className:e,...t},n)=>r.jsx(m8,{ref:n,className:Te(Mh(),e),...t}));ea.displayName=m8.displayName;const ta=y.forwardRef(({className:e,...t},n)=>r.jsx(f8,{ref:n,className:Te(Mh({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ta.displayName=f8.displayName;const CMe=()=>{var O,M;const[e,t]=y.useState(""),[n,s]=y.useState(""),[a,o]=y.useState("todos"),[i,l]=y.useState("todos"),[c,d]=y.useState(null),[u,m]=y.useState(null),[f,h]=y.useState(!1),[x,p]=y.useState(""),[v,j]=y.useState(!1),{data:g=[],isLoading:N,refetch:_}=it({queryKey:["movimientos-inventario",e,n],queryFn:async()=>{let T=ce.from("movimientos_inventario").select(`
          *,
          productos (
            nombre,
            imagen_url
          )
        `).order("created_at",{ascending:!1});e&&(T=T.gte("fecha",e)),n&&(T=T.lte("fecha",n));const{data:V,error:I}=await T;if(I)throw I;return V}}),{data:b}=it({queryKey:["asiento-movimiento",c==null?void 0:c.id],queryFn:async()=>{var T,V;if(!c)return null;if(c.tipo_movimiento==="venta"){const{data:I,error:F}=await ce.from("transacciones_ingresos").select("id").ilike("descripcion",`%${((T=c.productos)==null?void 0:T.nombre)||""}%`).gte("created_at",`${c.fecha}T00:00:00`).lte("created_at",`${c.fecha}T23:59:59`).limit(1).maybeSingle();if(F||!I)return console.error("Error fetching transaccion ingreso:",F),null;const{data:D,error:X}=await ce.from("asientos_contables").select(`
            id,
            numero_asiento,
            descripcion,
            fecha,
            detalle_asientos (
              id,
              cuenta_codigo,
              debe,
              haber,
              descripcion,
              cuentas (
                nombre
              )
            )
          `).eq("transaccion_ingreso_id",I.id).maybeSingle();return X?(console.error("Error fetching asiento:",X),null):D}if(c.tipo_movimiento==="compra"){const{data:I,error:F}=await ce.from("asientos_contables").select(`
            id,
            numero_asiento,
            descripcion,
            fecha,
            detalle_asientos (
              id,
              cuenta_codigo,
              debe,
              haber,
              descripcion,
              cuentas (
                nombre
              )
            )
          `).ilike("descripcion",`%${((V=c.productos)==null?void 0:V.nombre)||""}%`).eq("fecha",c.fecha).order("created_at",{ascending:!1}).limit(1).maybeSingle();return F?(console.error("Error fetching asiento compra:",F),null):I}return null},enabled:!!c}),w=async()=>{if(!u||!x.trim()){Le({title:"Error",description:"Debes ingresar un motivo de cancelacin",variant:"destructive"});return}j(!0);try{const{data:T,error:V}=await ce.functions.invoke("cancelar-compra-inventario",{body:{movimientoId:u.id,motivoCancelacion:x}});if(V)throw V;h(!1),p(""),m(null),await _(),Le({title:" Compra cancelada",description:"La compra ha sido cancelada y se gener el asiento de reversin"})}catch(T){console.error("Error al cancelar:",T),Le({title:"Error al cancelar",description:T.message||"No se pudo cancelar la compra",variant:"destructive"})}finally{j(!1)}},S=Array.from(new Set(g.map(T=>{var V;return(V=T.productos)==null?void 0:V.nombre}).filter(Boolean))),C=g.filter(T=>{var V;if(a!=="todos"){const I=T.tipo_movimiento==="entrada"||T.tipo_movimiento==="compra",F=T.tipo_movimiento==="salida"||T.tipo_movimiento==="venta";if(a==="entrada"&&!I||a==="salida"&&!F)return!1}return!(i!=="todos"&&((V=T.productos)==null?void 0:V.nombre)!==i)}),A=C.filter(T=>T.tipo_movimiento==="entrada"||T.tipo_movimiento==="compra").reduce((T,V)=>T+Math.abs(V.costo_total),0),P=C.filter(T=>T.tipo_movimiento==="salida"||T.tipo_movimiento==="venta").reduce((T,V)=>T+Math.abs(V.costo_total),0),k=C.filter(T=>T.tipo_movimiento==="entrada"||T.tipo_movimiento==="compra").length,E=C.filter(T=>T.tipo_movimiento==="salida"||T.tipo_movimiento==="venta").length;return N?r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(gr,{className:"h-8 w-3/4"})}),r.jsx(Q,{children:r.jsx(gr,{className:"h-96 w-full"})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Filtros de Bsqueda"}),r.jsx(Me,{children:"Filtra las transacciones de inventario por fecha, tipo y producto"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Fecha Inicio"}),r.jsx(Ae,{type:"date",value:e,onChange:T=>t(T.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Fecha Fin"}),r.jsx(Ae,{type:"date",value:n,onChange:T=>s(T.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Tipo Movimiento"}),r.jsxs(De,{value:a,onValueChange:o,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los Movimientos"}),r.jsx(le,{value:"entrada",children:"Entradas"}),r.jsx(le,{value:"salida",children:"Salidas"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Producto"}),r.jsxs(De,{value:i,onValueChange:l,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),S.map(T=>r.jsx(le,{value:T||"",children:T},T))]})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4 text-green-600"}),"Total Entradas"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",A.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k," transacciones"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4 text-red-600"}),"Total Salidas"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",P.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[E," transacciones"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Diferencia"})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",(A-P).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Entradas - Salidas"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Transacciones"})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:C.length}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Movimientos registrados"})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Transacciones de Inventario"}),r.jsx(Me,{children:"Historial completo de entradas y salidas de inventario"})]}),r.jsxs(Q,{children:[r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Producto"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{className:"text-right",children:"Cantidad"}),r.jsx(me,{className:"text-right",children:"Costo Unitario"}),r.jsx(me,{className:"text-right",children:"Costo Total"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-center",children:"Acciones"})]})}),r.jsx(kt,{children:C.map(T=>{var I,F,D,X,W,B,q,te;const V=T.estado==="cancelado"||((I=T.descripcion)==null?void 0:I.includes("CANCELACIN"));return r.jsxs(Oe,{className:V?"opacity-60 bg-muted/50":"",children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),ze(new Date(T.fecha),"dd/MM/yyyy")]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[(F=T.productos)!=null&&F.imagen_url?r.jsx("img",{src:T.productos.imagen_url,alt:T.productos.nombre,className:"w-10 h-10 rounded-md object-cover"}):r.jsx("div",{className:"w-10 h-10 rounded-md bg-muted flex items-center justify-center",children:r.jsx(Zr,{className:"w-5 h-5 text-muted-foreground"})}),r.jsx("span",{className:"font-medium",children:((D=T.productos)==null?void 0:D.nombre)||"Producto eliminado"})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs(_e,{variant:T.tipo_movimiento==="entrada"||T.tipo_movimiento==="compra"?"default":"destructive",children:[T.tipo_movimiento==="entrada"||T.tipo_movimiento==="compra"?r.jsx(tr,{className:"h-3 w-3 mr-1"}):r.jsx(Rn,{className:"h-3 w-3 mr-1"}),T.tipo_movimiento==="entrada"||T.tipo_movimiento==="compra"?"Entrada":"Salida"]}),T.estado==="cancelado"&&r.jsx(_e,{variant:"destructive",className:"text-xs",children:"Cancelado"})]})}),r.jsx(Z,{className:"text-right",children:T.cantidad.toLocaleString("es-MX")}),r.jsxs(Z,{className:"text-right",children:["$",T.costo_unitario.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{className:"text-right font-medium",children:["$",T.costo_total.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx(Z,{className:"max-w-xs",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[V&&r.jsxs(_e,{variant:"destructive",className:"w-fit",children:[r.jsx(My,{className:"h-3 w-3 mr-1"}),"Cancelado"]}),r.jsx("span",{className:V?"text-xs line-through":"",children:T.descripcion||"-"})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs(vr,{children:[r.jsx(Hc,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>d(T),children:r.jsx(pi,{className:"h-4 w-4"})})}),r.jsxs(mr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(fr,{children:r.jsx(hr,{children:"Detalle de Transaccin"})}),c&&r.jsxs("div",{className:"space-y-6",children:[c.estado==="cancelado"&&r.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(My,{className:"h-4 w-4 text-red-600 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-red-700 dark:text-red-300 text-sm",children:"Movimiento Cancelado"}),c.motivo_cancelacion&&r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:c.motivo_cancelacion}),c.fecha_cancelacion&&r.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Cancelado el: ",ze(new Date(c.fecha_cancelacion),"dd/MM/yyyy HH:mm")]})]})]})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Informacin del Movimiento"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Producto"}),r.jsx("p",{className:"font-medium",children:(X=c.productos)==null?void 0:X.nombre})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Tipo"}),r.jsx(_e,{variant:c.tipo_movimiento==="entrada"||c.tipo_movimiento==="compra"?"default":"destructive",children:c.tipo_movimiento==="entrada"||c.tipo_movimiento==="compra"?"Entrada":"Salida"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"font-medium",children:ze(new Date(c.fecha),"dd/MM/yyyy")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Cantidad"}),r.jsx("p",{className:"font-medium",children:c.cantidad.toLocaleString("es-MX")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Costo Unitario"}),r.jsxs("p",{className:"font-medium",children:["$",c.costo_unitario.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Costo Total"}),r.jsxs("p",{className:"font-medium text-lg",children:["$",c.costo_total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}),c.descripcion&&r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Descripcin"}),r.jsx("p",{children:c.descripcion})]})]}),r.jsx(Jr,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Asientos en Balanza de Comprobacin"}),b?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-muted rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Nmero de Asiento:"})," ",b.numero_asiento]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Fecha:"})," ",ze(new Date(b.fecha),"dd/MM/yyyy")]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"font-medium",children:"Descripcin:"})," ",b.descripcion]})]})}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{className:"w-[200px]",children:"Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right w-[150px]",children:"Debe"}),r.jsx(me,{className:"text-right w-[150px]",children:"Haber"})]})}),r.jsxs(kt,{children:[(W=b.detalle_asientos)==null?void 0:W.map((Y,H)=>{var L;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:Y.cuenta_codigo}),r.jsx("div",{className:"text-xs text-muted-foreground",children:(L=Y.cuentas)==null?void 0:L.nombre})]})}),r.jsx(Z,{className:"text-sm",children:Y.descripcion}),r.jsx(Z,{className:"text-right font-medium",children:Y.debe>0?`$${Number(Y.debe).toLocaleString("es-MX",{minimumFractionDigits:2})}`:"-"}),r.jsx(Z,{className:"text-right font-medium",children:Y.haber>0?`$${Number(Y.haber).toLocaleString("es-MX",{minimumFractionDigits:2})}`:"-"})]},H)}),r.jsxs(Oe,{className:"border-t-2 bg-muted/50 font-bold",children:[r.jsx(Z,{colSpan:2,children:"TOTALES"}),r.jsxs(Z,{className:"text-right",children:["$",(B=b.detalle_asientos)==null?void 0:B.reduce((Y,H)=>Y+Number(H.debe),0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{className:"text-right",children:["$",(q=b.detalle_asientos)==null?void 0:q.reduce((Y,H)=>Y+Number(H.haber),0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]})}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-md text-sm",children:[r.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300 mb-1",children:" Trazabilidad Contable"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-400",children:"Este asiento contable refleja cmo esta transaccin de inventario afecta a las diferentes cuentas en la balanza de comprobacin y posteriormente en los estados financieros."})]})]}):r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg text-sm text-muted-foreground text-center space-y-2",children:[r.jsx("p",{children:"No se encontraron asientos contables para esta transaccin"}),r.jsx("p",{className:"text-xs",children:"Las entradas (compras) y salidas (ventas) de inventario generan asientos automticamente que afectan tus cuentas de inventario, efectivo/bancos y cuentas por pagar."})]})]})]})]})]}),T.tipo_movimiento==="compra"&&T.estado!=="cancelado"&&!((te=T.descripcion)!=null&&te.includes("CANCELACIN"))&&r.jsxs(Pe,{variant:"outline",size:"sm",className:"text-xs border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{m(T),h(!0)},children:[r.jsx(My,{className:"h-3 w-3 mr-1"}),"Cancelar"]})]})})]},T.id)})})]}),C.length===0&&r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:r.jsx("p",{children:"No se encontraron transacciones con los filtros seleccionados"})})]})]}),r.jsx(wa,{open:f,onOpenChange:h,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Cancelar esta compra de inventario?"}),r.jsx(Js,{children:"Esta accin crear un asiento de reversin automtico y ajustar el inventario. No se puede deshacer esta operacin."})]}),u&&r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"p-4 bg-muted rounded-md space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[(O=u.productos)!=null&&O.imagen_url?r.jsx("img",{src:u.productos.imagen_url,alt:u.productos.nombre,className:"w-12 h-12 rounded-md object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded-md bg-background flex items-center justify-center",children:r.jsx(Zr,{className:"w-6 h-6 text-muted-foreground"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:(M=u.productos)==null?void 0:M.nombre}),r.jsx("p",{className:"text-sm text-muted-foreground",children:u.descripcion})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Cantidad:"}),r.jsx("span",{className:"ml-2 font-medium",children:u.cantidad})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Costo Total:"}),r.jsxs("span",{className:"ml-2 font-medium",children:["$",u.costo_total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"motivo",children:"Motivo de cancelacin *"}),r.jsx(Kr,{id:"motivo",value:x,onChange:T=>p(T.target.value),placeholder:"Describe por qu se cancela esta compra...",rows:3,className:"mt-2"})]})]}),r.jsxs(Qs,{children:[r.jsx(ta,{disabled:v,children:"Cancelar"}),r.jsx(ea,{onClick:w,disabled:v||!x.trim(),className:"bg-destructive hover:bg-destructive/90",children:v?"Cancelando...":"Confirmar Cancelacin"})]})]})})]})},PMe=()=>r.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gestin de Inventario"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Registra productos y controla el inventario de tu negocio"})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs(Lr,{defaultValue:"registro",className:"h-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-4 mb-6",children:[r.jsxs(Qe,{value:"registro",className:"flex items-center gap-2",children:[r.jsx(Zr,{className:"h-4 w-4"}),"Registro de Productos"]}),r.jsxs(Qe,{value:"control",className:"flex items-center gap-2",children:[r.jsx(Yq,{className:"h-4 w-4"}),"Control de Inventario"]}),r.jsxs(Qe,{value:"transacciones",className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-4 w-4"}),"Resumen de Transacciones"]}),r.jsxs(Qe,{value:"analitica",className:"flex items-center gap-2",children:[r.jsx(Ku,{className:"h-4 w-4"}),"Analtica"]})]}),r.jsx(Je,{value:"registro",className:"h-full",children:r.jsx(kPe,{})}),r.jsx(Je,{value:"control",className:"h-full",children:r.jsx(FPe,{})}),r.jsx(Je,{value:"transacciones",className:"h-full",children:r.jsx(CMe,{})}),r.jsx(Je,{value:"analitica",className:"h-full",children:r.jsx(tMe,{})})]})})]});var Pt=function(){return Pt=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Pt.apply(this,arguments)};function AMe(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function g8(e,t,n){for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function xp(e){return e.mode==="multiple"}function gp(e){return e.mode==="range"}function Ij(e){return e.mode==="single"}var EMe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function MMe(e,t){return ze(e,"LLLL y",t)}function OMe(e,t){return ze(e,"d",t)}function TMe(e,t){return ze(e,"LLLL",t)}function kMe(e){return"".concat(e)}function $Me(e,t){return ze(e,"cccccc",t)}function DMe(e,t){return ze(e,"yyyy",t)}var FMe=Object.freeze({__proto__:null,formatCaption:MMe,formatDay:OMe,formatMonthCaption:TMe,formatWeekNumber:kMe,formatWeekdayName:$Me,formatYearCaption:DMe}),IMe=function(e,t,n){return ze(e,"do MMMM (EEEE)",n)},RMe=function(){return"Month: "},LMe=function(){return"Go to next month"},BMe=function(){return"Go to previous month"},zMe=function(e,t){return ze(e,"cccc",t)},VMe=function(e){return"Week n. ".concat(e)},WMe=function(){return"Year: "},qMe=Object.freeze({__proto__:null,labelDay:IMe,labelMonthDropdown:RMe,labelNext:LMe,labelPrevious:BMe,labelWeekNumber:VMe,labelWeekday:zMe,labelYearDropdown:WMe});function UMe(){var e="buttons",t=EMe,n=uB,s={},a={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:FMe,labels:qMe,locale:n,modifiersClassNames:s,modifiers:a,numberOfMonths:o,styles:i,today:l,mode:"default"}}function KMe(e){var t=e.fromYear,n=e.toYear,s=e.fromMonth,a=e.toMonth,o=e.fromDate,i=e.toDate;return s?o=dr(s):t&&(o=new Date(t,0,1)),a?i=Ds(a):n&&(i=new Date(n,11,31)),{fromDate:o?Nl(o):void 0,toDate:i?Nl(i):void 0}}var v8=y.createContext(void 0);function GMe(e){var t,n=e.initialProps,s=UMe(),a=KMe(n),o=a.fromDate,i=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:s.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Ij(n)||xp(n)||gp(n))&&(c=n.onSelect);var d=Pt(Pt(Pt({},s),n),{captionLayout:l,classNames:Pt(Pt({},s.classNames),n.classNames),components:Pt({},n.components),formatters:Pt(Pt({},s.formatters),n.formatters),fromDate:o,labels:Pt(Pt({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:Pt(Pt({},s.modifiers),n.modifiers),modifiersClassNames:Pt(Pt({},s.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Pt(Pt({},s.styles),n.styles),toDate:i});return r.jsx(v8.Provider,{value:d,children:e.children})}function Ar(){var e=y.useContext(v8);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function j8(e){var t=Ar(),n=t.locale,s=t.classNames,a=t.styles,o=t.formatters.formatCaption;return r.jsx("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:n})})}function HMe(e){return r.jsx("svg",Pt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:r.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function y8(e){var t,n,s=e.onChange,a=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,d=Ar(),u=(n=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:HMe;return r.jsxs("div",{className:l,style:c,children:[r.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),r.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:o}),r.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,r.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function XMe(e){var t,n=Ar(),s=n.fromDate,a=n.toDate,o=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!s)return r.jsx(r.Fragment,{});if(!a)return r.jsx(r.Fragment,{});var m=[];if(gB(s,a))for(var f=dr(s),h=s.getMonth();h<=a.getMonth();h++)m.push(Cb(f,h));else for(var f=dr(new Date),h=0;h<=11;h++)m.push(Cb(f,h));var x=function(v){var j=Number(v.target.value),g=Cb(dr(e.displayMonth),j);e.onChange(g)},p=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:y8;return r.jsx(p,{name:"months","aria-label":u(),className:c.dropdown_month,style:o.dropdown_month,onChange:x,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:m.map(function(v){return r.jsx("option",{value:v.getMonth(),children:l(v,{locale:i})},v.getMonth())})})}function YMe(e){var t,n=e.displayMonth,s=Ar(),a=s.fromDate,o=s.toDate,i=s.locale,l=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,m=s.labels.labelYearDropdown,f=[];if(!a)return r.jsx(r.Fragment,{});if(!o)return r.jsx(r.Fragment,{});for(var h=a.getFullYear(),x=o.getFullYear(),p=h;p<=x;p++)f.push(Pk(Va(new Date),p));var v=function(g){var N=Pk(dr(n),Number(g.target.value));e.onChange(N)},j=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:y8;return r.jsx(j,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:u(n,{locale:i}),children:f.map(function(g){return r.jsx("option",{value:g.getFullYear(),children:u(g,{locale:i})},g.getFullYear())})})}function QMe(e,t){var n=y.useState(e),s=n[0],a=n[1],o=t===void 0?s:t;return[o,a]}function ZMe(e){var t=e.month,n=e.defaultMonth,s=e.today,a=t||n||s||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&Lu(o,a)<0){var d=-1*(c-1);a=ms(o,d)}return i&&Lu(a,i)<0&&(a=i),dr(a)}function JMe(){var e=Ar(),t=ZMe(e),n=QMe(t,e.month),s=n[0],a=n[1],o=function(i){var l;if(!e.disableNavigation){var c=dr(i);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[s,o]}function eOe(e,t){for(var n=t.reverseMonths,s=t.numberOfMonths,a=dr(e),o=dr(ms(a,s)),i=Lu(o,a),l=[],c=0;c<i;c++){var d=ms(a,c);l.push(d)}return n&&(l=l.reverse()),l}function tOe(e,t){if(!t.disableNavigation){var n=t.toDate,s=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=s?o:1,l=dr(e);if(!n)return ms(l,i);var c=Lu(n,e);if(!(c<o))return ms(l,i)}}function rOe(e,t){if(!t.disableNavigation){var n=t.fromDate,s=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=s?o:1,l=dr(e);if(!n)return ms(l,-i);var c=Lu(l,n);if(!(c<=0))return ms(l,-i)}}var b8=y.createContext(void 0);function nOe(e){var t=Ar(),n=JMe(),s=n[0],a=n[1],o=eOe(s,t),i=tOe(s,t),l=rOe(s,t),c=function(m){return o.some(function(f){return kj(m,f)})},d=function(m,f){c(m)||(f&&xB(m,f)?a(ms(m,1+t.numberOfMonths*-1)):a(m))},u={currentMonth:s,displayMonths:o,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:i,isDateDisplayed:c};return r.jsx(b8.Provider,{value:u,children:e.children})}function vp(){var e=y.useContext(b8);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Ek(e){var t,n=Ar(),s=n.classNames,a=n.styles,o=n.components,i=vp().goToMonth,l=function(u){i(ms(u,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:j8,d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth});return r.jsxs("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[r.jsx("div",{className:s.vhidden,children:d}),r.jsx(XMe,{onChange:l,displayMonth:e.displayMonth}),r.jsx(YMe,{onChange:l,displayMonth:e.displayMonth})]})}function sOe(e){return r.jsx("svg",Pt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aOe(e){return r.jsx("svg",Pt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Iv=y.forwardRef(function(e,t){var n=Ar(),s=n.classNames,a=n.styles,o=[s.button_reset,s.button];e.className&&o.push(e.className);var i=o.join(" "),l=Pt(Pt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),r.jsx("button",Pt({},e,{ref:t,type:"button",className:i,style:l}))});function oOe(e){var t,n,s=Ar(),a=s.dir,o=s.locale,i=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,m=s.components;if(!e.nextMonth&&!e.previousMonth)return r.jsx(r.Fragment,{});var f=d(e.previousMonth,{locale:o}),h=[i.nav_button,i.nav_button_previous].join(" "),x=u(e.nextMonth,{locale:o}),p=[i.nav_button,i.nav_button_next].join(" "),v=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:aOe,j=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:sOe;return r.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&r.jsx(Iv,{name:"previous-month","aria-label":f,className:h,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?r.jsx(v,{className:i.nav_icon,style:l.nav_icon}):r.jsx(j,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&r.jsx(Iv,{name:"next-month","aria-label":x,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?r.jsx(j,{className:i.nav_icon,style:l.nav_icon}):r.jsx(v,{className:i.nav_icon,style:l.nav_icon})})]})}function Mk(e){var t=Ar().numberOfMonths,n=vp(),s=n.previousMonth,a=n.nextMonth,o=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(x){return kj(e.displayMonth,x)}),c=l===0,d=l===i.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c),f=function(){s&&o(s)},h=function(){a&&o(a)};return r.jsx(oOe,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:s,onPreviousClick:f,onNextClick:h})}function iOe(e){var t,n=Ar(),s=n.classNames,a=n.disableNavigation,o=n.styles,i=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:j8,d;return a?d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=r.jsx(Ek,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=r.jsxs(r.Fragment,{children:[r.jsx(Ek,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),r.jsx(Mk,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=r.jsxs(r.Fragment,{children:[r.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(Mk,{displayMonth:e.displayMonth,id:e.id})]}),r.jsx("div",{className:s.caption,style:o.caption,children:d})}function lOe(e){var t=Ar(),n=t.footer,s=t.styles,a=t.classNames.tfoot;return n?r.jsx("tfoot",{className:a,style:s.tfoot,children:r.jsx("tr",{children:r.jsx("td",{colSpan:8,children:n})})}):r.jsx(r.Fragment,{})}function cOe(e,t,n){for(var s=n?Dc(new Date):Oo(new Date,{locale:e,weekStartsOn:t}),a=[],o=0;o<7;o++){var i=ss(s,o);a.push(i)}return a}function dOe(){var e=Ar(),t=e.classNames,n=e.styles,s=e.showWeekNumber,a=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=cOe(a,o,i);return r.jsxs("tr",{style:n.head_row,className:t.head_row,children:[s&&r.jsx("td",{style:n.head_cell,className:t.head_cell}),d.map(function(u,m){return r.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},m)})]})}function uOe(){var e,t=Ar(),n=t.classNames,s=t.styles,a=t.components,o=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:dOe;return r.jsx("thead",{style:s.head,className:n.head,children:r.jsx(o,{})})}function mOe(e){var t=Ar(),n=t.locale,s=t.formatters.formatDay;return r.jsx(r.Fragment,{children:s(e.date,{locale:n})})}var xC=y.createContext(void 0);function fOe(e){if(!xp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return r.jsx(xC.Provider,{value:t,children:e.children})}return r.jsx(hOe,{initialProps:e.initialProps,children:e.children})}function hOe(e){var t=e.initialProps,n=e.children,s=t.selected,a=t.min,o=t.max,i=function(d,u,m){var f,h;(f=t.onDayClick)===null||f===void 0||f.call(t,d,u,m);var x=!!(u.selected&&a&&(s==null?void 0:s.length)===a);if(!x){var p=!!(!u.selected&&o&&(s==null?void 0:s.length)===o);if(!p){var v=s?g8([],s):[];if(u.selected){var j=v.findIndex(function(g){return cs(d,g)});v.splice(j,1)}else v.push(d);(h=t.onSelect)===null||h===void 0||h.call(t,v,d,u,m)}}},l={disabled:[]};s&&l.disabled.push(function(d){var u=o&&s.length>o-1,m=s.some(function(f){return cs(f,d)});return!!(u&&!m)});var c={selected:s,onDayClick:i,modifiers:l};return r.jsx(xC.Provider,{value:c,children:n})}function gC(){var e=y.useContext(xC);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function pOe(e,t){var n=t||{},s=n.from,a=n.to;return s&&a?cs(a,e)&&cs(s,e)?void 0:cs(a,e)?{from:a,to:void 0}:cs(s,e)?void 0:X1(s,e)?{from:e,to:a}:{from:s,to:e}:a?X1(e,a)?{from:a,to:e}:{from:e,to:a}:s?xB(e,s)?{from:e,to:s}:{from:s,to:e}:{from:e,to:void 0}}var vC=y.createContext(void 0);function xOe(e){if(!gp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return r.jsx(vC.Provider,{value:t,children:e.children})}return r.jsx(gOe,{initialProps:e.initialProps,children:e.children})}function gOe(e){var t=e.initialProps,n=e.children,s=t.selected,a=s||{},o=a.from,i=a.to,l=t.min,c=t.max,d=function(h,x,p){var v,j;(v=t.onDayClick)===null||v===void 0||v.call(t,h,x,p);var g=pOe(h,s);(j=t.onSelect)===null||j===void 0||j.call(t,g,h,x,p)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],cs(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),l&&(o&&!i&&u.disabled.push({after:_b(o,l-1),before:ss(o,l-1)}),o&&i&&u.disabled.push({after:o,before:ss(o,l-1)}),!o&&i&&u.disabled.push({after:_b(i,l-1),before:ss(i,l-1)})),c){if(o&&!i&&(u.disabled.push({before:ss(o,-c+1)}),u.disabled.push({after:ss(o,c-1)})),o&&i){var m=za(i,o)+1,f=c-m;u.disabled.push({before:_b(o,f)}),u.disabled.push({after:ss(i,f)})}!o&&i&&(u.disabled.push({before:ss(i,-c+1)}),u.disabled.push({after:ss(i,c-1)}))}return r.jsx(vC.Provider,{value:{selected:s,onDayClick:d,modifiers:u},children:n})}function jC(){var e=y.useContext(vC);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Rx(e){return Array.isArray(e)?g8([],e):e!==void 0?[e]:[]}function vOe(e){var t={};return Object.entries(e).forEach(function(n){var s=n[0],a=n[1];t[s]=Rx(a)}),t}var Ja;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ja||(Ja={}));var jOe=Ja.Selected,Io=Ja.Disabled,yOe=Ja.Hidden,bOe=Ja.Today,Ab=Ja.RangeEnd,Eb=Ja.RangeMiddle,Mb=Ja.RangeStart,NOe=Ja.Outside;function wOe(e,t,n){var s,a=(s={},s[jOe]=Rx(e.selected),s[Io]=Rx(e.disabled),s[yOe]=Rx(e.hidden),s[bOe]=[e.today],s[Ab]=[],s[Eb]=[],s[Mb]=[],s[NOe]=[],s);return e.fromDate&&a[Io].push({before:e.fromDate}),e.toDate&&a[Io].push({after:e.toDate}),xp(e)?a[Io]=a[Io].concat(t.modifiers[Io]):gp(e)&&(a[Io]=a[Io].concat(n.modifiers[Io]),a[Mb]=n.modifiers[Mb],a[Eb]=n.modifiers[Eb],a[Ab]=n.modifiers[Ab]),a}var N8=y.createContext(void 0);function _Oe(e){var t=Ar(),n=gC(),s=jC(),a=wOe(t,n,s),o=vOe(t.modifiers),i=Pt(Pt({},a),o);return r.jsx(N8.Provider,{value:i,children:e.children})}function w8(){var e=y.useContext(N8);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function SOe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function COe(e){return!!(e&&typeof e=="object"&&"from"in e)}function POe(e){return!!(e&&typeof e=="object"&&"after"in e)}function AOe(e){return!!(e&&typeof e=="object"&&"before"in e)}function EOe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function MOe(e,t){var n,s=t.from,a=t.to;if(s&&a){var o=za(a,s)<0;o&&(n=[a,s],s=n[0],a=n[1]);var i=za(e,s)>=0&&za(a,e)>=0;return i}return a?cs(a,e):s?cs(s,e):!1}function OOe(e){return rC(e)}function TOe(e){return Array.isArray(e)&&e.every(rC)}function kOe(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(OOe(n))return cs(e,n);if(TOe(n))return n.includes(e);if(COe(n))return MOe(e,n);if(EOe(n))return n.dayOfWeek.includes(e.getDay());if(SOe(n)){var s=za(n.before,e),a=za(n.after,e),o=s>0,i=a<0,l=X1(n.before,n.after);return l?i&&o:o||i}return POe(n)?za(e,n.after)>0:AOe(n)?za(n.before,e)>0:typeof n=="function"?n(e):!1})}function yC(e,t,n){var s=Object.keys(t).reduce(function(o,i){var l=t[i];return kOe(e,l)&&o.push(i),o},[]),a={};return s.forEach(function(o){return a[o]=!0}),n&&!kj(e,n)&&(a.outside=!0),a}function $Oe(e,t){for(var n=dr(e[0]),s=Ds(e[e.length-1]),a,o,i=n;i<=s;){var l=yC(i,t),c=!l.disabled&&!l.hidden;if(!c){i=ss(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),a||(a=i),i=ss(i,1)}return o||a}var DOe=365;function _8(e,t){var n=t.moveBy,s=t.direction,a=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,f={day:ss,week:G1,month:ms,year:BPe,startOfWeek:function(v){return a.ISOWeek?Dc(v):Oo(v,{locale:m,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?cB(v):oC(v,{locale:m,weekStartsOn:c})}},h=f[n](e,s==="after"?1:-1);s==="before"&&d?h=zPe([d,h]):s==="after"&&u&&(h=VPe([u,h]));var x=!0;if(o){var p=yC(h,o);x=!p.disabled&&!p.hidden}return x?h:l.count>DOe?l.lastFocused:_8(h,{moveBy:n,direction:s,context:a,modifiers:o,retry:Pt(Pt({},l),{count:l.count+1})})}var S8=y.createContext(void 0);function FOe(e){var t=vp(),n=w8(),s=y.useState(),a=s[0],o=s[1],i=y.useState(),l=i[0],c=i[1],d=$Oe(t.displayMonths,n),u=a??(l&&t.isDateDisplayed(l))?l:d,m=function(){c(a),o(void 0)},f=function(v){o(v)},h=Ar(),x=function(v,j){if(a){var g=_8(a,{moveBy:v,direction:j,context:h,modifiers:n});cs(a,g)||(t.goToDate(g,a),f(g))}},p={focusedDay:a,focusTarget:u,blur:m,focus:f,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return r.jsx(S8.Provider,{value:p,children:e.children})}function bC(){var e=y.useContext(S8);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function IOe(e,t){var n=w8(),s=yC(e,n,t);return s}var NC=y.createContext(void 0);function ROe(e){if(!Ij(e.initialProps)){var t={selected:void 0};return r.jsx(NC.Provider,{value:t,children:e.children})}return r.jsx(LOe,{initialProps:e.initialProps,children:e.children})}function LOe(e){var t=e.initialProps,n=e.children,s=function(o,i,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,o,i,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,o,o,i,l)},a={selected:t.selected,onDayClick:s};return r.jsx(NC.Provider,{value:a,children:n})}function C8(){var e=y.useContext(NC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function BOe(e,t){var n=Ar(),s=C8(),a=gC(),o=jC(),i=bC(),l=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,m=i.blur,f=i.focus,h=i.focusMonthBefore,x=i.focusMonthAfter,p=i.focusYearBefore,v=i.focusYearAfter,j=i.focusStartOfWeek,g=i.focusEndOfWeek,N=function(I){var F,D,X,W;Ij(n)?(F=s.onDayClick)===null||F===void 0||F.call(s,e,t,I):xp(n)?(D=a.onDayClick)===null||D===void 0||D.call(a,e,t,I):gp(n)?(X=o.onDayClick)===null||X===void 0||X.call(o,e,t,I):(W=n.onDayClick)===null||W===void 0||W.call(n,e,t,I)},_=function(I){var F;f(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,I)},b=function(I){var F;m(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,I)},w=function(I){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,I)},S=function(I){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,I)},C=function(I){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,I)},A=function(I){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,I)},P=function(I){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,I)},k=function(I){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,I)},E=function(I){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,I)},O=function(I){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,I)},M=function(I){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,I)},T=function(I){var F;switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":I.preventDefault(),I.stopPropagation(),d();break;case"ArrowUp":I.preventDefault(),I.stopPropagation(),u();break;case"PageUp":I.preventDefault(),I.stopPropagation(),I.shiftKey?p():h();break;case"PageDown":I.preventDefault(),I.stopPropagation(),I.shiftKey?v():x();break;case"Home":I.preventDefault(),I.stopPropagation(),j();break;case"End":I.preventDefault(),I.stopPropagation(),g();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,I)},V={onClick:N,onFocus:_,onBlur:b,onKeyDown:T,onKeyUp:M,onMouseEnter:w,onMouseLeave:S,onPointerEnter:C,onPointerLeave:A,onTouchCancel:P,onTouchEnd:k,onTouchMove:E,onTouchStart:O};return V}function zOe(){var e=Ar(),t=C8(),n=gC(),s=jC(),a=Ij(e)?t.selected:xp(e)?n.selected:gp(e)?s.selected:void 0;return a}function VOe(e){return Object.values(Ja).includes(e)}function WOe(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(s){var a=e.modifiersClassNames[s];if(a)n.push(a);else if(VOe(s)){var o=e.classNames["day_".concat(s)];o&&n.push(o)}}),n}function qOe(e,t){var n=Pt({},e.styles.day);return Object.keys(t).forEach(function(s){var a;n=Pt(Pt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[s])}),n}function UOe(e,t,n){var s,a,o,i=Ar(),l=bC(),c=IOe(e,t),d=BOe(e,c),u=zOe(),m=!!(i.onDayClick||i.mode!=="default");y.useEffect(function(){var w;c.outside||l.focusedDay&&m&&cs(l.focusedDay,e)&&((w=n.current)===null||w===void 0||w.focus())},[l.focusedDay,e,n,m,c.outside]);var f=WOe(i,c).join(" "),h=qOe(i,c),x=!!(c.outside&&!i.showOutsideDays||c.hidden),p=(o=(a=i.components)===null||a===void 0?void 0:a.DayContent)!==null&&o!==void 0?o:mOe,v=r.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),j={style:h,className:f,children:v,role:"gridcell"},g=l.focusTarget&&cs(l.focusTarget,e)&&!c.outside,N=l.focusedDay&&cs(l.focusedDay,e),_=Pt(Pt(Pt({},j),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=N||g?0:-1,s)),d),b={isButton:m,isHidden:x,activeModifiers:c,selectedDays:u,buttonProps:_,divProps:j};return b}function KOe(e){var t=y.useRef(null),n=UOe(e.date,e.displayMonth,t);return n.isHidden?r.jsx("div",{role:"gridcell"}):n.isButton?r.jsx(Iv,Pt({name:"day",ref:t},n.buttonProps)):r.jsx("div",Pt({},n.divProps))}function GOe(e){var t=e.number,n=e.dates,s=Ar(),a=s.onWeekNumberClick,o=s.styles,i=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return r.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var m=c(Number(t),{locale:l}),f=function(h){a(t,n,h)};return r.jsx(Iv,{name:"week-number","aria-label":m,className:i.weeknumber,style:o.weeknumber,onClick:f,children:u})}function HOe(e){var t,n,s=Ar(),a=s.styles,o=s.classNames,i=s.showWeekNumber,l=s.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:KOe,d=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:GOe,u;return i&&(u=r.jsx("td",{className:o.cell,style:a.cell,children:r.jsx(d,{number:e.weekNumber,dates:e.dates})})),r.jsxs("tr",{className:o.row,style:a.row,children:[u,e.dates.map(function(m){return r.jsx("td",{className:o.cell,style:a.cell,role:"presentation",children:r.jsx(c,{displayMonth:e.displayMonth,date:m})},WAe(m))})]})}function Ok(e,t,n){for(var s=n!=null&&n.ISOWeek?cB(t):oC(t,n),a=n!=null&&n.ISOWeek?Dc(e):Oo(e,n),o=za(s,a),i=[],l=0;l<=o;l++)i.push(ss(a,l));var c=i.reduce(function(d,u){var m=n!=null&&n.ISOWeek?mB(u):hB(u,n),f=d.find(function(h){return h.weekNumber===m});return f?(f.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function XOe(e,t){var n=Ok(dr(e),Ds(e),t);if(t!=null&&t.useFixedWeeks){var s=qAe(e,t);if(s<6){var a=n[n.length-1],o=a.dates[a.dates.length-1],i=G1(o,6-s),l=Ok(G1(o,1),i,t);n.push.apply(n,l)}}return n}function YOe(e){var t,n,s,a=Ar(),o=a.locale,i=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,f=a.firstWeekContainsDate,h=a.ISOWeek,x=XOe(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:h,locale:o,weekStartsOn:m,firstWeekContainsDate:f}),p=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:uOe,v=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:HOe,j=(s=u==null?void 0:u.Footer)!==null&&s!==void 0?s:lOe;return r.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&r.jsx(p,{}),r.jsx("tbody",{className:i.tbody,style:l.tbody,children:x.map(function(g){return r.jsx(v,{displayMonth:e.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),r.jsx(j,{displayMonth:e.displayMonth})]})}function QOe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var ZOe=QOe()?y.useLayoutEffect:y.useEffect,Ob=!1,JOe=0;function Tk(){return"react-day-picker-".concat(++JOe)}function eTe(e){var t,n=e??(Ob?Tk():null),s=y.useState(n),a=s[0],o=s[1];return ZOe(function(){a===null&&o(Tk())},[]),y.useEffect(function(){Ob===!1&&(Ob=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function tTe(e){var t,n,s=Ar(),a=s.dir,o=s.classNames,i=s.styles,l=s.components,c=vp().displayMonths,d=eTe(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,m=[o.month],f=i.month,h=e.displayIndex===0,x=e.displayIndex===c.length-1,p=!h&&!x;a==="rtl"&&(t=[h,x],x=t[0],h=t[1]),h&&(m.push(o.caption_start),f=Pt(Pt({},f),i.caption_start)),x&&(m.push(o.caption_end),f=Pt(Pt({},f),i.caption_end)),p&&(m.push(o.caption_between),f=Pt(Pt({},f),i.caption_between));var v=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:iOe;return r.jsxs("div",{className:m.join(" "),style:f,children:[r.jsx(v,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(YOe,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function rTe(e){var t=Ar(),n=t.classNames,s=t.styles;return r.jsx("div",{className:n.months,style:s.months,children:e.children})}function nTe(e){var t,n,s=e.initialProps,a=Ar(),o=bC(),i=vp(),l=y.useState(!1),c=l[0],d=l[1];y.useEffect(function(){a.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),d(!0)))},[a.initialFocus,c,o.focus,o.focusTarget,o]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=Pt(Pt({},a.styles.root),a.style),f=Object.keys(s).filter(function(x){return x.startsWith("data-")}).reduce(function(x,p){var v;return Pt(Pt({},x),(v={},v[p]=s[p],v))},{}),h=(n=(t=s.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:rTe;return r.jsx("div",Pt({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},f,{children:r.jsx(h,{children:i.displayMonths.map(function(x,p){return r.jsx(tTe,{displayIndex:p,displayMonth:x},p)})})}))}function sTe(e){var t=e.children,n=AMe(e,["children"]);return r.jsx(GMe,{initialProps:n,children:r.jsx(nOe,{children:r.jsx(ROe,{initialProps:n,children:r.jsx(fOe,{initialProps:n,children:r.jsx(xOe,{initialProps:n,children:r.jsx(_Oe,{children:r.jsx(FOe,{children:t})})})})})})})}function aTe(e){return r.jsx(sTe,Pt({},e,{children:r.jsx(nTe,{initialProps:e})}))}function Nn({className:e,classNames:t,showOutsideDays:n=!0,...s}){return r.jsx(aTe,{showOutsideDays:n,className:Te("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Te(Mh({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Te(Mh({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>r.jsx(Gq,{className:"h-4 w-4"}),IconRight:({...a})=>r.jsx(Ua,{className:"h-4 w-4"})},...s})}Nn.displayName="Calendar";var Rj="Popover",[P8,PFe]=hn(Rj,[Al]),jp=Al(),[oTe,Fl]=P8(Rj),A8=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=jp(t),c=y.useRef(null),[d,u]=y.useState(!1),[m,f]=hs({prop:s,defaultProp:a??!1,onChange:o,caller:Rj});return r.jsx(u0,{...l,children:r.jsx(oTe,{scope:t,contentId:cn(),triggerRef:c,open:m,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:d,onCustomAnchorAdd:y.useCallback(()=>u(!0),[]),onCustomAnchorRemove:y.useCallback(()=>u(!1),[]),modal:i,children:n})})};A8.displayName=Rj;var E8="PopoverAnchor",iTe=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=Fl(E8,n),o=jp(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return y.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(Zh,{...o,...s,ref:t})});iTe.displayName=E8;var M8="PopoverTrigger",O8=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=Fl(M8,n),o=jp(n),i=Ft(t,a.triggerRef),l=r.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":F8(a.open),...s,ref:i,onClick:Ge(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:r.jsx(Zh,{asChild:!0,...o,children:l})});O8.displayName=M8;var wC="PopoverPortal",[lTe,cTe]=P8(wC,{forceMount:void 0}),T8=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,o=Fl(wC,t);return r.jsx(lTe,{scope:t,forceMount:n,children:r.jsx(Qn,{present:n||o.open,children:r.jsx(Uu,{asChild:!0,container:a,children:s})})})};T8.displayName=wC;var zu="PopoverContent",k8=y.forwardRef((e,t)=>{const n=cTe(zu,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,o=Fl(zu,e.__scopePopover);return r.jsx(Qn,{present:s||o.open,children:o.modal?r.jsx(uTe,{...a,ref:t}):r.jsx(mTe,{...a,ref:t})})});k8.displayName=zu;var dTe=hl("PopoverContent.RemoveScroll"),uTe=y.forwardRef((e,t)=>{const n=Fl(zu,e.__scopePopover),s=y.useRef(null),a=Ft(t,s),o=y.useRef(!1);return y.useEffect(()=>{const i=s.current;if(i)return Sj(i)},[]),r.jsx(dp,{as:dTe,allowPinchZoom:!0,children:r.jsx($8,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ge(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Ge(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),mTe=y.forwardRef((e,t)=>{const n=Fl(zu,e.__scopePopover),s=y.useRef(!1),a=y.useRef(!1);return r.jsx($8,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),$8=y.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,f=Fl(zu,n),h=jp(n);return wj(),r.jsx(cp,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(zc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(m0,{"data-state":F8(f.open),role:"dialog",id:f.contentId,...h,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),D8="PopoverClose",fTe=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=Fl(D8,n);return r.jsx(Ze.button,{type:"button",...s,ref:t,onClick:Ge(e.onClick,()=>a.onOpenChange(!1))})});fTe.displayName=D8;var hTe="PopoverArrow",pTe=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=jp(n);return r.jsx(f0,{...a,...s,ref:t})});pTe.displayName=hTe;function F8(e){return e?"open":"closed"}var xTe=A8,gTe=O8,vTe=T8,I8=k8;const wn=xTe,_n=gTe,fn=y.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>r.jsx(vTe,{children:r.jsx(I8,{ref:a,align:t,sideOffset:n,className:Te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));fn.displayName=I8.displayName;const Il=(e,t)=>it({queryKey:["asientos-balanza",e,t],queryFn:async()=>{const n=t,{data:s,error:a}=await ce.from("detalle_asientos").select(`
          *,
          asientos_contables!inner(
            fecha,
            descripcion,
            numero_asiento
          )
        `).gte("asientos_contables.fecha",e.toISOString().split("T")[0]).lte("asientos_contables.fecha",n.toISOString().split("T")[0]);if(a)throw console.error("Error fetching detalle_asientos:",a),a;const{data:o}=await ce.from("cuentas").select("codigo, nombre"),i=new Map((o==null?void 0:o.map(d=>[d.codigo,d.nombre]))||[]),l=(s||[]).map(d=>{const u=d.asientos_contables,m=(u==null?void 0:u.numero_asiento)||"";let f="Otro";m.startsWith("ING-")?f="Ingreso":m.startsWith("EGR-")?f="Egreso":m.startsWith("INV-")?f="Inversin":m.startsWith("CAP-")?f="Capital":m.startsWith("FIN-")?f="Financiamiento":m.startsWith("IMP-")||m.startsWith("ISR-")?f="Impuesto":m.startsWith("COB-")?f="Cobro":m.startsWith("PAG-CXP-")?f="Pago CxP":m.startsWith("PAG-")?f="Pago":m.startsWith("DEP-")&&(f="Depreciacin");const h=(u==null?void 0:u.descripcion)||d.descripcion||"";let x="";if(u!=null&&u.fecha){const p=u.fecha.split("-"),v=new Date(parseInt(p[0]),parseInt(p[1])-1,parseInt(p[2]));x=ze(v,"dd/MM/yyyy")}return{fecha:x,tipo:f,descripcion:h,cuenta_codigo:d.cuenta_codigo,cuenta_nombre:i.get(d.cuenta_codigo)||d.cuenta_codigo,debe:Number(d.debe)||0,haber:Number(d.haber)||0,referencia:m}}),c={};return l.forEach(d=>{const u=d.cuenta_codigo;c[u]||(c[u]={cuenta_codigo:u,debe_total:0,haber_total:0,saldo:0}),c[u].debe_total+=d.debe,c[u].haber_total+=d.haber}),Object.values(c).forEach(d=>{const u=d.cuenta_codigo.charAt(0);["1","5","6"].includes(u)?d.saldo=d.debe_total-d.haber_total:["2","3","4"].includes(u)&&(d.saldo=d.haber_total-d.debe_total)}),{movimientos:l,saldosPorCuenta:c}}}),jTe=({startDate:e,endDate:t,periodType:n})=>{const{data:s,isLoading:a}=Ca(),{data:o,isLoading:i}=Il(e,t),l=(H,L)=>{const ue=re=>re.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),pe=ue(H),we=ue(L);return H.toDateString()===L.toDateString()?`Estado de Resultados del ${pe}`:`Estado de Resultados del ${pe} al ${we}`};if(a||i)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});const c=(s==null?void 0:s.cuentasFlat)||[],d=(o==null?void 0:o.saldosPorCuenta)||{};if(!((o==null?void 0:o.movimientos)&&o.movimientos.length>0))return r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay datos financieros registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver el estado de resultados"})]})})});const m=H=>{var L;return((L=d[H])==null?void 0:L.saldo)||0},f=c.filter(H=>H.subgrupo==="Ingresos por Ventas"&&H.estado_financiero==="Estado de Resultados"),h=c.filter(H=>H.subgrupo==="Otros Ingresos"&&H.estado_financiero==="Estado de Resultados"),x=c.filter(H=>{const L=parseInt(H.codigo);return L>=5001&&L<=5099&&H.estado_financiero==="Estado de Resultados"}),p=c.filter(H=>{const L=parseInt(H.codigo);return H.subgrupo==="Gastos de Operacin"&&H.estado_financiero==="Estado de Resultados"&&L!==5109&&L!==5110}),v=c.filter(H=>H.subgrupo==="Otros Gastos"&&H.estado_financiero==="Estado de Resultados"),j=c.filter(H=>{const L=parseInt(H.codigo);return(L===5109||L===5110)&&H.estado_financiero==="Estado de Resultados"}),g=c.filter(H=>{const L=parseInt(H.codigo);return(L>=5111&&L<=5199||L===5201)&&H.estado_financiero==="Estado de Resultados"}),N=c.filter(H=>H.codigo.startsWith("6")&&H.estado_financiero==="Estado de Resultados"),_=()=>f.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),b=()=>h.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),w=()=>x.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),S=()=>p.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),C=()=>v.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),A=()=>j.reduce((H,L)=>{const ue=m(L.codigo);return console.log(`[DEBUG] Depreciacin ${L.codigo}: ${ue}`),H+ue},0);console.log("[DEBUG Estado Resultados]",{cuentasDepreciacionesEncontradas:j.length,codigosCuentas:j.map(H=>H.codigo),totalDepreciaciones:A(),saldosPorCuentaKeys:Object.keys(d),saldo5109:d[5109],startDate:e.toISOString(),endDate:t.toISOString()});const P=()=>g.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),k=()=>N.reduce((H,L)=>{const ue=m(L.codigo);return H+ue},0),E=_(),O=b(),M=E+O,T=w(),V=S(),I=C(),F=A(),D=P(),X=k(),W=M-T,B=W-V-I,q=B-F,te=q-D,Y=te-X;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(G,{className:"border-2 border-primary/20",children:r.jsxs(ne,{className:"bg-primary/5",children:[r.jsx(ae,{className:"text-2xl text-center",children:"Estado de Resultados - Formato Operativo"}),r.jsx("p",{className:"text-sm text-muted-foreground text-center font-medium mt-2",children:l(e,t)})]})}),r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Este Estado de Resultados refleja automticamente todas las transacciones registradas: ventas, costos de ventas, gastos operativos y otros gastos."})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-green-600",children:"Ventas"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),f.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-green-600",children:[r.jsx("span",{children:"Total Ventas"}),r.jsxs("span",{className:"text-right",children:["$",E.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(E/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-emerald-600",children:"Otros Ingresos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),h.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),h.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground col-span-3",children:"No hay otros ingresos registrados"}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-emerald-600",children:[r.jsx("span",{children:"Total Otros Ingresos"}),r.jsxs("span",{className:"text-right",children:["$",O.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(O/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-orange-600",children:"Costos de Ventas"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),x.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-orange-600",children:[r.jsx("span",{children:"Total Costos"}),r.jsxs("span",{className:"text-right",children:["$",T.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(T/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:W>=0?"text-blue-600":"text-red-600",children:"Utilidad Bruta"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"Ingresos"}),r.jsxs("span",{className:"text-right",children:["$",M.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:"100.00%"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"(-) Costos de Ventas"}),r.jsxs("span",{className:"text-right",children:["($",T.toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsx("span",{className:"text-right",children:M!==0?`(${(T/M*100).toFixed(2)}%)`:"0.00%"})]}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center font-bold ${W>=0?"text-blue-600":"text-red-600"}`,children:[r.jsx("span",{children:"Utilidad Bruta"}),r.jsxs("span",{className:"text-right",children:["$",W.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(W/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-red-600",children:"Gastos Operativos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),p.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-red-600",children:[r.jsx("span",{children:"Total Gastos Operativos"}),r.jsxs("span",{className:"text-right",children:["$",V.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(V/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-red-600",children:"Otros Gastos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),v.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),v.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground col-span-3",children:"No hay otros gastos registrados"}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-red-600",children:[r.jsx("span",{children:"Total Otros Gastos"}),r.jsxs("span",{className:"text-right",children:["$",I.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(I/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:B>=0?"text-blue-600":"text-red-600",children:"EBITDA"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"Utilidad Bruta"}),r.jsxs("span",{className:"text-right",children:["$",W.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(W/M*100).toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"(-) Gastos Operativos"}),r.jsxs("span",{className:"text-right",children:["($",V.toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsx("span",{className:"text-right",children:M!==0?`(${(V/M*100).toFixed(2)}%)`:"0.00%"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"(-) Otros Gastos"}),r.jsxs("span",{className:"text-right",children:["($",I.toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsx("span",{className:"text-right",children:M!==0?`(${(I/M*100).toFixed(2)}%)`:"0.00%"})]}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center font-bold ${B>=0?"text-blue-600":"text-red-600"}`,children:[r.jsx("span",{children:"EBITDA"}),r.jsxs("span",{className:"text-right",children:["$",B.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(B/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-purple-600",children:"Depreciaciones y Amortizaciones"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),j.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),j.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground col-span-3",children:"No hay depreciaciones registradas"}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-purple-600",children:[r.jsx("span",{children:"Total Depreciaciones"}),r.jsxs("span",{className:"text-right",children:["$",F.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(F/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:q>=0?"text-blue-600":"text-red-600",children:"EBIT (Utilidad Operativa)"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"EBITDA"}),r.jsxs("span",{className:"text-right",children:["$",B.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(B/M*100).toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"(-) Depreciaciones"}),r.jsxs("span",{className:"text-right",children:["($",F.toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsx("span",{className:"text-right",children:M!==0?`(${(F/M*100).toFixed(2)}%)`:"0.00%"})]}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center font-bold ${q>=0?"text-blue-600":"text-red-600"}`,children:[r.jsx("span",{children:"EBIT"}),r.jsxs("span",{className:"text-right",children:["$",q.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(q/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-amber-600",children:"Costo Financiero"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),g.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),g.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground col-span-3",children:"No hay costos financieros registrados"}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-amber-600",children:[r.jsx("span",{children:"Total Costo Financiero"}),r.jsxs("span",{className:"text-right",children:["$",D.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(D/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:te>=0?"text-blue-600":"text-red-600",children:"Utilidad Antes de Impuestos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"EBIT"}),r.jsxs("span",{className:"text-right",children:["$",q.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(q/M*100).toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"(-) Costo Financiero"}),r.jsxs("span",{className:"text-right",children:["($",D.toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsx("span",{className:"text-right",children:M!==0?`(${(D/M*100).toFixed(2)}%)`:"0.00%"})]}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center font-bold ${te>=0?"text-blue-600":"text-red-600"}`,children:[r.jsx("span",{children:"Utilidad Antes de Impuestos"}),r.jsxs("span",{className:"text-right",children:["$",te.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(te/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-rose-600",children:"Impuestos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),N.map(H=>{const L=m(H.codigo);return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsxs("span",{className:"text-sm",children:[H.codigo," - ",H.nombre]}),r.jsxs("span",{className:"font-medium text-right",children:["$",L.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(L/M*100).toFixed(2)}%`:"0.00%"})]},H.codigo)}),N.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground col-span-3",children:"No hay impuestos registrados"}),r.jsx("div",{className:"border-t pt-2 mt-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-rose-600",children:[r.jsx("span",{children:"Total Impuestos"}),r.jsxs("span",{className:"text-right",children:["$",X.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(X/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]}),r.jsxs(G,{className:"border-2 border-primary",children:[r.jsx(ne,{children:r.jsx(ae,{className:Y>=0?"text-green-600":"text-red-600",children:"Utilidad Neta del Perodo"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"Utilidad Antes de Impuestos"}),r.jsxs("span",{className:"text-right",children:["$",te.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(te/M*100).toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[r.jsx("span",{children:"(-) Impuestos"}),r.jsxs("span",{className:"text-right",children:["($",X.toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsx("span",{className:"text-right",children:M!==0?`(${(X/M*100).toFixed(2)}%)`:"0.00%"})]}),r.jsx("div",{className:"border-t-2 pt-3 mt-4",children:r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center font-bold text-xl ${Y>=0?"text-green-600":"text-red-600"}`,children:[r.jsx("span",{children:Y>=0?"Utilidad Neta":"Prdida Neta"}),r.jsxs("span",{className:"text-right",children:["$",Y.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:M!==0?`${(Y/M*100).toFixed(2)}%`:"0.00%"})]})})]})})]})]})]})},yTe=({startDate:e,endDate:t,periodType:n})=>{const{data:s,isLoading:a}=Ca(),{data:o,isLoading:i}=Il(e,t),l=(X,W)=>{const B=Y=>Y.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),q=B(X),te=B(W);return X.toDateString()===W.toDateString()?`Estado de Resultados del ${q}`:`Estado de Resultados del ${q} al ${te}`};if(a||i)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});const c=(s==null?void 0:s.cuentasFlat)||[],d=(o==null?void 0:o.saldosPorCuenta)||{};if(!((o==null?void 0:o.movimientos)&&o.movimientos.length>0))return r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay datos financieros registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver el estado de resultados"})]})})});const m=X=>{var q;const W=((q=d[X])==null?void 0:q.saldo)||0,B=X.charAt(0);return X==="4003"?-Math.abs(W):["2","3","4"].includes(B)?Math.abs(W):W},f=c.filter(X=>X.subgrupo==="Ingresos por Ventas"&&X.estado_financiero==="Estado de Resultados"),h=c.filter(X=>X.subgrupo==="Otros Ingresos"&&X.estado_financiero==="Estado de Resultados"),x=c.filter(X=>{const W=parseInt(X.codigo);return W>=5001&&W<=5099&&X.estado_financiero==="Estado de Resultados"}),p=c.filter(X=>{const W=parseInt(X.codigo);return X.subgrupo==="Gastos de Operacin"&&X.estado_financiero==="Estado de Resultados"&&W!==5109&&W!==5110}),v=c.filter(X=>X.subgrupo==="Otros Gastos"&&X.estado_financiero==="Estado de Resultados"),j=c.filter(X=>{const W=parseInt(X.codigo);return(W===5109||W===5110)&&X.estado_financiero==="Estado de Resultados"}),g=c.filter(X=>{const W=parseInt(X.codigo);return(W>=5111&&W<=5199||W===5201)&&X.estado_financiero==="Estado de Resultados"}),N=c.filter(X=>X.codigo.startsWith("6")&&X.estado_financiero==="Estado de Resultados"),_=f.reduce((X,W)=>X+m(W.codigo),0),b=h.reduce((X,W)=>X+m(W.codigo),0),w=_+b,S=x.reduce((X,W)=>X+m(W.codigo),0),C=p.reduce((X,W)=>X+m(W.codigo),0),A=v.reduce((X,W)=>X+m(W.codigo),0),P=w-S,k=P-C-A,E=j.reduce((X,W)=>X+m(W.codigo),0),O=k-E,M=g.reduce((X,W)=>X+m(W.codigo),0),T=O-M,V=N.reduce((X,W)=>X+m(W.codigo),0),I=T-V,F=X=>{const B=Math.abs(X).toLocaleString("es-CO",{minimumFractionDigits:2});return X<0?`-$${B}`:`$${B}`},D=({label:X,value:W,isHeader:B=!1,isSubtotal:q=!1,isTotal:te=!1,isNegative:Y=!1,indent:H=0})=>{const L=()=>te?W>=0?"text-emerald-700 dark:text-emerald-400":"text-rose-700 dark:text-rose-400":q?W>=0?"text-blue-700 dark:text-blue-400":"text-rose-700 dark:text-rose-400":Y?"text-slate-600 dark:text-slate-400":"text-slate-700 dark:text-slate-300",ue=()=>te?"font-bold text-xl":q?"font-semibold text-lg":B?"font-medium":"",pe=w>0?(W/w*100).toFixed(2):"0.00";return r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center py-3 ${q||te?"border-t-2 border-slate-300 dark:border-slate-600 pt-4":""}`,style:{marginLeft:H>0?`${H*1}rem`:"0"},children:[r.jsx("span",{className:`${ue()} ${L()}`,children:X}),r.jsx("span",{className:`${ue()} ${L()} text-right`,children:F(W)}),r.jsx("span",{className:`${ue()} ${L()} text-right`,children:Y&&W!==0?`(${pe}%)`:`${pe}%`})]})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[I>=0?r.jsx(tr,{className:"h-8 w-8 text-green-600"}):r.jsx(Rn,{className:"h-8 w-8 text-red-600"}),r.jsx("p",{className:"text-muted-foreground",children:"Vista ejecutiva consolidada del perodo"})]}),r.jsxs(G,{className:"border-2",children:[r.jsxs(ne,{className:"bg-muted/50",children:[r.jsx(ae,{className:"text-2xl",children:"Resumen Financiero"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2 font-medium",children:l(e,t)})]}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"% Ingresos"})]}),r.jsx(D,{label:"Ventas",value:_,isHeader:!0}),r.jsx(D,{label:"(+) Otros Ingresos",value:b,isHeader:!0}),r.jsx(D,{label:"Total Ingresos",value:w,isSubtotal:!0}),r.jsx(D,{label:"(-) Costo de Ventas",value:S,isNegative:!0}),r.jsx(D,{label:"Utilidad Bruta",value:P,isSubtotal:!0}),r.jsx(D,{label:"(-) Gastos Operativos",value:C,isNegative:!0}),r.jsx(D,{label:"(-) Otros Gastos",value:A,isNegative:!0}),r.jsx(D,{label:"EBITDA",value:k,isSubtotal:!0}),r.jsx(D,{label:"(-) Depreciaciones y Amortizaciones",value:E,isNegative:!0}),r.jsx(D,{label:"EBIT (Utilidad Operativa)",value:O,isSubtotal:!0}),r.jsx(D,{label:"(-) Costo Financiero",value:M,isNegative:!0}),r.jsx(D,{label:"Utilidad Antes de Impuestos",value:T,isSubtotal:!0}),r.jsx(D,{label:"(-) Impuestos",value:V,isNegative:!0}),r.jsx(D,{label:I>=0?"Utilidad Neta":"Prdida Neta",value:I,isTotal:!0})]})})]})]})};var Lj="Switch",[bTe,AFe]=hn(Lj),[NTe,wTe]=bTe(Lj),R8=y.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[f,h]=y.useState(null),x=Ft(t,N=>h(N)),p=y.useRef(!1),v=f?u||!!f.closest("form"):!0,[j,g]=hs({prop:a,defaultProp:o??!1,onChange:d,caller:Lj});return r.jsxs(NTe,{scope:n,checked:j,disabled:l,children:[r.jsx(Ze.button,{type:"button",role:"switch","aria-checked":j,"aria-required":i,"data-state":V8(j),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:x,onClick:Ge(e.onClick,N=>{g(_=>!_),v&&(p.current=N.isPropagationStopped(),p.current||N.stopPropagation())})}),v&&r.jsx(z8,{control:f,bubbles:!p.current,name:s,value:c,checked:j,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});R8.displayName=Lj;var L8="SwitchThumb",B8=y.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=wTe(L8,n);return r.jsx(Ze.span,{"data-state":V8(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});B8.displayName=L8;var _Te="SwitchBubbleInput",z8=y.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},o)=>{const i=y.useRef(null),l=Ft(i,o),c=_j(n),d=d0(t);return y.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const x=new Event("click",{bubbles:s});h.call(u,n),u.dispatchEvent(x)}},[c,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});z8.displayName=_Te;function V8(e){return e?"checked":"unchecked"}var W8=R8,STe=B8;const Bj=y.forwardRef(({className:e,...t},n)=>r.jsx(W8,{className:Te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(STe,{className:Te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Bj.displayName=W8.displayName;const CTe=({startDate:e,endDate:t,periodType:n})=>{const{data:s,isLoading:a}=Ca(),{data:o,isLoading:i}=Il(e,t),[l,c]=y.useState(!0),[d,u]=y.useState(""),m=(re,de)=>{const he=U=>U.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),ee=he(re),z=he(de);return re.toDateString()===de.toDateString()?`Estado de Resultados del ${ee}`:`Estado de Resultados del ${ee} al ${z}`};if(a||i)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});const f=(s==null?void 0:s.cuentasFlat)||[],h=(o==null?void 0:o.saldosPorCuenta)||{};if(!((o==null?void 0:o.movimientos)&&o.movimientos.length>0))return r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay datos financieros registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver el estado de resultados"})]})})});const p=re=>{var de;return((de=h[re])==null?void 0:de.saldo)||0},v=f.filter(re=>re.subgrupo==="Ingresos por Ventas"&&re.estado_financiero==="Estado de Resultados"),j=f.filter(re=>re.subgrupo==="Otros Ingresos"&&re.estado_financiero==="Estado de Resultados"),g=f.filter(re=>{const de=parseInt(re.codigo);return de>=5001&&de<=5099&&re.estado_financiero==="Estado de Resultados"}),N=f.filter(re=>re.subgrupo==="Gastos de Operacin"&&re.estado_financiero==="Estado de Resultados"),_=f.filter(re=>re.subgrupo==="Otros Gastos"&&re.estado_financiero==="Estado de Resultados"),b=f.filter(re=>{const de=parseInt(re.codigo);return(de===5109||de===5110)&&re.estado_financiero==="Estado de Resultados"}),w=f.filter(re=>{const de=parseInt(re.codigo);return(de>=5111&&de<=5199||de===5201)&&re.estado_financiero==="Estado de Resultados"}),S=f.filter(re=>re.codigo.startsWith("6")&&re.estado_financiero==="Estado de Resultados"),C=v.reduce((re,de)=>re+p(de.codigo),0),A=j.reduce((re,de)=>re+p(de.codigo),0),P=C+A,k=g.reduce((re,de)=>re+p(de.codigo),0),E=N.reduce((re,de)=>re+p(de.codigo),0),O=_.reduce((re,de)=>re+p(de.codigo),0),M=b.reduce((re,de)=>re+p(de.codigo),0),T=w.reduce((re,de)=>re+p(de.codigo),0),V=S.reduce((re,de)=>re+p(de.codigo),0),I=P-k,F=I-E-O,D=F-M,X=D-T,W=X-V,B=[{id:"ventas",nombre:"Ventas",total:C,cuentas:v.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"otros_ingresos",nombre:"Otros Ingresos",total:A,cuentas:j.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"costo_ventas",nombre:"Costo de Ventas",total:k,cuentas:g.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"gastos_operativos",nombre:"Gastos Operativos",total:E,cuentas:N.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"otros_gastos",nombre:"Otros Gastos",total:O,cuentas:_.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"depreciaciones",nombre:"Depreciaciones",total:M,cuentas:b.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"costo_financiero",nombre:"Costo Financiero",total:T,cuentas:w.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)},{id:"impuestos",nombre:"Impuestos",total:V,cuentas:S.map(re=>({codigo:re.codigo,nombre:re.nombre,saldo:p(re.codigo)})).filter(re=>re.saldo!==0)}].filter(re=>re.total!==0);!d&&B.length>0&&u(B[0].id);const q=[];if(l){q.push({name:"Ventas",value:0,start:C,fill:"#10b981",isTotal:!1}),q.push({name:"(+) Otros Ingr.",value:C,start:A,fill:"#34d399",isTotal:!1}),q.push({name:"= Total Ingresos",value:0,start:P,fill:"#3b82f6",isTotal:!0});const re=P-k;q.push({name:"(-) Costo Ventas",value:re,start:k,fill:"#ef4444",isTotal:!1}),q.push({name:"= Utilidad Bruta",value:0,start:I,fill:"#3b82f6",isTotal:!0});const de=re-E;q.push({name:"(-) Gastos Op.",value:de,start:E,fill:"#ef4444",isTotal:!1});const he=de-O;q.push({name:"(-) Otros Gastos",value:he,start:O,fill:"#ef4444",isTotal:!1}),q.push({name:"= EBITDA",value:0,start:F,fill:"#3b82f6",isTotal:!0});const ee=he-M;q.push({name:"(-) Deprec.",value:ee,start:M,fill:"#ef4444",isTotal:!1}),q.push({name:"= EBIT",value:0,start:D,fill:"#3b82f6",isTotal:!0});const z=ee-T;q.push({name:"(-) Costo Fin.",value:z,start:T,fill:"#ef4444",isTotal:!1}),q.push({name:"= Util. A. Imp.",value:0,start:X,fill:"#3b82f6",isTotal:!0});const U=z-V;q.push({name:"(-) Impuestos",value:U,start:V,fill:"#ef4444",isTotal:!1}),q.push({name:"= UTILIDAD NETA",value:0,start:W,fill:W>=0?"#059669":"#dc2626",isTotal:!0})}else{q.push({name:"Ventas",value:0,start:C,fill:"#10b981",isTotal:!1}),q.push({name:"(+) Otros Ingr.",value:C,start:A,fill:"#34d399",isTotal:!1});const re=P-k;q.push({name:"(-) Costo Ventas",value:re,start:k,fill:"#ef4444",isTotal:!1});const de=re-E;q.push({name:"(-) Gastos Op.",value:de,start:E,fill:"#ef4444",isTotal:!1});const he=de-O;q.push({name:"(-) Otros Gastos",value:he,start:O,fill:"#ef4444",isTotal:!1});const ee=he-M;q.push({name:"(-) Deprec.",value:ee,start:M,fill:"#ef4444",isTotal:!1});const z=ee-T;q.push({name:"(-) Costo Fin.",value:z,start:T,fill:"#ef4444",isTotal:!1});const U=z-V;q.push({name:"(-) Impuestos",value:U,start:V,fill:"#ef4444",isTotal:!1}),q.push({name:"= UTILIDAD NETA",value:0,start:W,fill:W>=0?"#059669":"#dc2626",isTotal:!0})}const te=P>0?I/P*100:0,Y=P>0?F/P*100:0,H=P>0?D/P*100:0,L=P>0?X/P*100:0,ue=P>0?W/P*100:0,pe=re=>{const he=Math.abs(re).toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0});return re<0?`-$${he}`:`$${he}`},we=({active:re,payload:de})=>{if(re&&de&&de.length){const he=de[0].payload,ee=he.isTotal?he.start:he.name.includes("(-)")?-he.start:he.start;return r.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-foreground mb-1",children:he.name}),r.jsx("p",{className:`text-sm ${ee>=0?"text-green-600":"text-red-600"}`,children:pe(ee)})]})}return null};return r.jsxs("div",{className:"space-y-8",children:[r.jsx(G,{className:"border-2 border-primary/20",children:r.jsxs(ne,{className:"bg-primary/5",children:[r.jsx(ae,{className:"text-2xl text-center",children:"Estado de Resultados - Formato Analtico"}),r.jsx("p",{className:"text-sm text-muted-foreground text-center font-medium mt-2",children:m(e,t)})]})}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-muted/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{className:"text-2xl",children:"1. Grfico de Cascada (Waterfall Chart)"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualizacin del flujo de ingresos a utilidad neta"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Mostrar subtotales"}),r.jsx(Bj,{checked:l,onCheckedChange:c})]})]})}),r.jsxs(Q,{className:"p-6",children:[(()=>{const de=q.some(he=>he.value+he.start<0||he.value<0)?210:120;return r.jsx(mt,{width:"100%",height:850,children:r.jsxs(Gt,{data:q,margin:{top:20,right:20,left:75,bottom:de},barGap:8,children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(jt,{dataKey:"name",angle:-45,textAnchor:"end",height:120,tick:{fill:"hsl(var(--foreground))",fontSize:11,fontWeight:500},interval:0}),r.jsx(gt,{tickFormatter:he=>pe(he),tick:{fill:"hsl(var(--foreground))",fontSize:11},width:80}),r.jsx(yt,{content:r.jsx(we,{})}),r.jsx(yl,{y:0,stroke:"#374151",strokeWidth:2}),r.jsx(rt,{dataKey:"value",stackId:"stack",isAnimationActive:!1,legendType:"none",children:q.map((he,ee)=>r.jsx(Kt,{fill:"transparent",style:{pointerEvents:"none"}},`cell-value-${ee}`))}),r.jsx(rt,{dataKey:"start",stackId:"stack",radius:[6,6,6,6],label:{position:"top",content:({x:he,y:ee,width:z,value:U,index:oe,height:Se})=>{const Ne=q[oe];if(!Ne)return null;const $=Ne.isTotal?Ne.start<0:Ne.name.includes("(-)"),ie=Ne.isTotal?Ne.start:Ne.name.includes("(-)")?-Ne.start:Ne.start,J=$?Ne.isTotal?Number(ee)+15:Number(ee)+Number(Se)+15:Number(ee)-5,ge=$?"top":"bottom";return r.jsx("text",{x:Number(he)+Number(z)/2,y:J,fill:"hsl(var(--foreground))",textAnchor:"middle",dominantBaseline:ge,fontSize:10,fontWeight:"bold",children:pe(ie)})}},children:q.map((he,ee)=>r.jsx(Kt,{fill:he.fill,stroke:"transparent",strokeWidth:0},`cell-start-${ee}`))})]})})})(),r.jsxs("div",{className:"mt-4 flex justify-center gap-6 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded bg-green-500"}),r.jsx("span",{className:"text-muted-foreground",children:"Ingresos"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),r.jsx("span",{className:"text-muted-foreground",children:"Egresos"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded border-2 border-blue-500 bg-blue-500"}),r.jsx("span",{className:"text-muted-foreground",children:"Subtotales"})]})]}),r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-center",children:"Mtricas Clave y Mrgenes"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-1 p-3 bg-muted/30 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs",children:"Ventas"}),r.jsx("p",{className:"font-semibold text-lg",children:pe(C)})]}),r.jsxs("div",{className:"space-y-1 p-3 bg-muted/30 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs",children:"Otros Ingresos"}),r.jsx("p",{className:"font-semibold text-lg",children:pe(A)})]}),r.jsxs("div",{className:"space-y-1 p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs font-semibold",children:"Total Ingresos"}),r.jsx("p",{className:"font-semibold text-lg text-blue-600",children:pe(P)})]}),r.jsxs("div",{className:"space-y-1 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs",children:"Utilidad Bruta"}),r.jsx("p",{className:"font-semibold text-lg text-green-600",children:pe(I)}),r.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Margen: ",te.toFixed(1),"%"]})]}),r.jsxs("div",{className:"space-y-1 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs",children:"EBITDA"}),r.jsx("p",{className:"font-semibold text-lg text-green-600",children:pe(F)}),r.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Margen: ",Y.toFixed(1),"%"]})]}),r.jsxs("div",{className:"space-y-1 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs",children:"EBIT"}),r.jsx("p",{className:"font-semibold text-lg text-green-600",children:pe(D)}),r.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Margen: ",H.toFixed(1),"%"]})]}),r.jsxs("div",{className:"space-y-1 p-3 bg-muted/30 rounded-lg",children:[r.jsx("p",{className:"text-muted-foreground text-xs",children:"Util. A. Impuestos"}),r.jsx("p",{className:`font-semibold text-lg ${X>=0?"text-green-600":"text-red-600"}`,children:pe(X)}),r.jsxs("p",{className:`text-xs font-medium ${X>=0?"text-green-600":"text-red-600"}`,children:["Margen: ",L.toFixed(1),"%"]})]}),r.jsxs("div",{className:`space-y-1 p-3 border-2 rounded-lg ${W>=0?"bg-green-50 dark:bg-green-950/20 border-green-300 dark:border-green-700":"bg-red-50 dark:bg-red-950/20 border-red-300 dark:border-red-700"}`,children:[r.jsx("p",{className:"text-muted-foreground text-xs font-semibold",children:"UTILIDAD NETA"}),r.jsx("p",{className:`font-bold text-xl ${W>=0?"text-green-600":"text-red-600"}`,children:pe(W)}),r.jsxs("p",{className:`text-xs font-bold ${W>=0?"text-green-600":"text-red-600"}`,children:["Margen: ",ue.toFixed(1),"%"]})]})]})]})]})]}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-muted/50",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx(ae,{className:"text-2xl",children:"2. Desglose de Cuentas por Agrupador"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Anlisis detallado de las cuentas que componen cada agrupador"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Seleccionar agrupador:"}),r.jsxs(De,{value:d,onValueChange:u,children:[r.jsx(ke,{className:"w-[280px]",children:r.jsx(Fe,{placeholder:"Selecciona un agrupador"})}),r.jsx($e,{children:B.map(re=>r.jsxs(le,{value:re.id,children:[re.nombre," - ",pe(re.total)]},re.id))})]})]})]})}),r.jsx(Q,{className:"p-4",children:(()=>{const re=B.find(oe=>oe.id===d);if(!re||re.cuentas.length===0)return r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No hay cuentas con movimientos en este agrupador"});const de=re.cuentas.sort((oe,Se)=>Math.abs(Se.saldo)-Math.abs(oe.saldo)).map(oe=>({nombre:`${oe.codigo} - ${oe.nombre}`,valor:oe.saldo})),he=Math.max(...de.map(oe=>Math.abs(oe.valor))),ee=Math.min(...de.map(oe=>oe.valor)),z=he*1.2,U=ee<0?ee*1.2:0;return r.jsxs(r.Fragment,{children:[r.jsx(mt,{width:"100%",height:Math.max(350,de.length*60),children:r.jsxs(Gt,{data:de,layout:"vertical",margin:{top:20,right:40,left:20,bottom:20},children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(jt,{type:"number",domain:[U,z],tickFormatter:oe=>pe(oe),tick:{fill:"hsl(var(--foreground))",fontSize:12}}),r.jsx(gt,{type:"category",dataKey:"nombre",tick:{fill:"hsl(var(--foreground))",fontSize:12},width:380}),r.jsx(yt,{formatter:oe=>pe(oe),contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),r.jsx(yl,{x:0,stroke:"#374151",strokeWidth:2}),r.jsx(rt,{dataKey:"valor",radius:[0,4,4,0],label:{position:"right",formatter:oe=>pe(oe),fill:"hsl(var(--foreground))",fontSize:12,fontWeight:"bold"},children:de.map((oe,Se)=>r.jsx(Kt,{fill:oe.valor>=0?"#10b981":"#ef4444"},`cell-${Se}`))})]})}),r.jsx("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Agrupador"}),r.jsx("p",{className:"text-lg font-bold",children:pe(re.total)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Nmero de Cuentas"}),r.jsx("p",{className:"text-lg font-bold",children:re.cuentas.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Cuenta Mayor"}),r.jsx("p",{className:"text-lg font-bold",children:pe(Math.max(...re.cuentas.map(oe=>Math.abs(oe.saldo))))})]})]})})]})})()})]})]})},PTe=()=>{const[e,t]=y.useState("mensual"),[n,s]=y.useState(new Date),a=Gr(),o=()=>{a.invalidateQueries({queryKey:["asientos-balanza"]}),a.invalidateQueries({queryKey:["cuentas"]})},l=(()=>{switch(e){case"diario":return{startDate:Nl(n),endDate:nC(n)};case"mensual":return{startDate:dr(n),endDate:Ds(n)};case"anual":return{startDate:Va(n),endDate:Oh(n)};default:return{startDate:dr(n),endDate:Ds(n)}}})();return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Estado de Resultados"}),r.jsx("p",{className:"text-muted-foreground",children:"Anlisis de ingresos y gastos del perodo"})]}),r.jsxs(Pe,{variant:"outline",size:"sm",onClick:o,children:[r.jsx(nU,{className:"h-4 w-4 mr-2"}),"Refrescar"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tipo de Perodo"}),r.jsxs(De,{value:e,onValueChange:c=>t(c),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"diario",children:"Diario"}),r.jsx(le,{value:"mensual",children:"Mensual (Acumulado)"}),r.jsx(le,{value:"anual",children:"Anual (Acumulado)"})]})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fecha"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),n?ze(n,"PPP",{locale:ht}):"Seleccionar fecha"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:n,onSelect:c=>c&&s(c),initialFocus:!0,className:"pointer-events-auto",locale:ht})})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Rango de Consulta"}),r.jsxs("div",{className:"text-sm text-muted-foreground bg-background p-3 rounded-md border",children:[ze(l.startDate,"dd/MM/yyyy",{locale:ht})," - ",ze(l.endDate,"dd/MM/yyyy",{locale:ht})]})]})]}),r.jsxs(Lr,{defaultValue:"ejecutivo",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-3 max-w-2xl",children:[r.jsx(Qe,{value:"ejecutivo",children:"Formato Ejecutivo"}),r.jsx(Qe,{value:"operativo",children:"Formato Operativo"}),r.jsx(Qe,{value:"analitico",children:"Formato Analtico"})]}),r.jsx(Je,{value:"ejecutivo",className:"mt-6",children:r.jsx(yTe,{startDate:l.startDate,endDate:l.endDate,periodType:e})}),r.jsx(Je,{value:"operativo",className:"mt-6",children:r.jsx(jTe,{startDate:l.startDate,endDate:l.endDate,periodType:e})}),r.jsx(Je,{value:"analitico",className:"mt-6",children:r.jsx(CTe,{startDate:l.startDate,endDate:l.endDate,periodType:e})})]})]})},ATe=({cutoffDate:e})=>{const{data:t,isLoading:n}=Ca(),s=new Date(0),{data:a,isLoading:o}=Il(s,e);if(n||o)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});const i=(t==null?void 0:t.cuentasFlat)||[],l=(a==null?void 0:a.saldosPorCuenta)||{};if(!((a==null?void 0:a.movimientos)&&a.movimientos.length>0))return r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay datos financieros registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver el balance general"})]})})});const d=q=>{var te;return((te=l[q])==null?void 0:te.saldo)||0},m=Object.keys(l).filter(q=>q.startsWith("1")).reduce((q,te)=>{var H;const Y=((H=l[te])==null?void 0:H.saldo)||0;return q+Y},0),h=Object.keys(l).filter(q=>q.startsWith("2")).reduce((q,te)=>{var H;const Y=((H=l[te])==null?void 0:H.saldo)||0;return q+Y},0),p=Object.keys(l).filter(q=>q.startsWith("3")).reduce((q,te)=>{var H;const Y=((H=l[te])==null?void 0:H.saldo)||0;return q+Y},0),v=Object.keys(l).filter(q=>q.startsWith("4")),j=Object.keys(l).filter(q=>q.startsWith("5")),g=Object.keys(l).filter(q=>q.startsWith("6")),N=v.reduce((q,te)=>{var Y;return q+(((Y=l[te])==null?void 0:Y.saldo)||0)},0),_=j.reduce((q,te)=>{var Y;return q+(((Y=l[te])==null?void 0:Y.saldo)||0)},0),b=g.reduce((q,te)=>{var Y;return q+(((Y=l[te])==null?void 0:Y.saldo)||0)},0),w=N-_-b,S=i.filter(q=>q.subgrupo==="Activo Circulante"&&q.estado_financiero==="Balance General"),C=i.filter(q=>q.subgrupo==="Activo No Circulante"&&q.estado_financiero==="Balance General"),A=i.filter(q=>q.subgrupo==="Activo Diferido"&&q.estado_financiero==="Balance General"),P=i.filter(q=>q.subgrupo==="Pasivo Circulante"&&q.estado_financiero==="Balance General"),k=i.filter(q=>q.subgrupo==="Pasivo No Circulante"&&q.estado_financiero==="Balance General"),E=i.filter(q=>q.codigo.startsWith("3")&&q.estado_financiero==="Balance General"),O=S.reduce((q,te)=>q+d(te.codigo),0),M=C.reduce((q,te)=>q+d(te.codigo),0),T=A.reduce((q,te)=>q+d(te.codigo),0),V=P.reduce((q,te)=>q+d(te.codigo),0),I=k.reduce((q,te)=>q+d(te.codigo),0),F=p+w,D=h+F,X=Math.abs(m-D)<.01,W=q=>{const Y=Math.abs(q).toLocaleString("es-CO",{minimumFractionDigits:2});return q<0?`-$${Y}`:`$${Y}`},B=({label:q,value:te,isSubtotal:Y=!1,isTotal:H=!1})=>{const L=()=>H?"text-emerald-700 dark:text-emerald-400":Y?"text-blue-700 dark:text-blue-400":"text-slate-700 dark:text-slate-300",ue=()=>H?"font-bold text-xl":Y?"font-semibold text-lg":"",pe=m>0?(te/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:`grid grid-cols-3 gap-4 items-center py-3 ${Y||H?"border-t-2 border-slate-300 dark:border-slate-600 pt-4":""}`,children:[r.jsx("span",{className:`${ue()} ${L()}`,children:q}),r.jsx("span",{className:`${ue()} ${L()} text-right`,children:W(te)}),r.jsxs("span",{className:`${ue()} ${L()} text-right`,children:[pe,"%"]})]})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[X?r.jsx(sU,{className:"h-8 w-8 text-green-600"}):r.jsx(tr,{className:"h-8 w-8 text-amber-600"}),r.jsxs("p",{className:"text-muted-foreground",children:["Vista ejecutiva del balance al ",e.toLocaleDateString("es-CO")]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-blue-50 dark:bg-blue-950",children:r.jsx(ae,{className:"text-2xl text-blue-700",children:"Activos"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"%"})]}),r.jsx(B,{label:"Activo Circulante",value:O}),r.jsx(B,{label:"Activo Fijo",value:M}),r.jsx(B,{label:"Activo Diferido / Largo Plazo",value:T}),r.jsx(B,{label:"Total Activo",value:m,isTotal:!0})]})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-red-50 dark:bg-red-950",children:r.jsx(ae,{className:"text-2xl text-red-700",children:"Pasivo"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"%"})]}),r.jsx(B,{label:"Pasivo Corto Plazo",value:V}),r.jsx(B,{label:"Pasivo Largo Plazo",value:I}),r.jsx(B,{label:"Total Pasivo",value:h,isSubtotal:!0})]})})]}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-green-50 dark:bg-green-950",children:r.jsx(ae,{className:"text-2xl text-green-700",children:"Capital Contable"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Monto"}),r.jsx("span",{className:"text-right",children:"%"})]}),E.map(q=>r.jsx(B,{label:q.nombre,value:d(q.codigo)},q.codigo)),r.jsx(B,{label:"Utilidad del Ejercicio",value:w}),r.jsx(B,{label:"Total Capital Contable",value:F,isSubtotal:!0})]})})]}),r.jsxs(G,{className:"border-2 border-slate-400 dark:border-slate-500",children:[r.jsx(ne,{className:"bg-slate-100 dark:bg-slate-800",children:r.jsx(ae,{className:"text-xl",children:"Total Pasivo + Capital Contable"})}),r.jsx(Q,{className:"p-6",children:r.jsx("div",{className:"space-y-1",children:r.jsx(B,{label:"Total Pasivo + Capital Contable",value:D,isTotal:!0})})})]})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t-2 border-slate-300 dark:border-slate-600",children:r.jsx("div",{className:`text-center font-semibold text-lg ${X?"text-green-600":"text-amber-600"}`,children:X?" Balance Cuadrado":` Diferencia: ${W(m-D)}`})})]})},ETe=({cutoffDate:e})=>{const{data:t,isLoading:n}=Ca(),s=new Date(0),{data:a,isLoading:o}=Il(s,e);if(n||o)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});const i=(t==null?void 0:t.cuentasFlat)||[],l=(a==null?void 0:a.saldosPorCuenta)||{};if(!((a==null?void 0:a.movimientos)&&a.movimientos.length>0))return r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay datos financieros registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver el balance general"})]})})});const d=Y=>{var H;return((H=l[Y])==null?void 0:H.saldo)||0},m=Object.keys(l).filter(Y=>Y.startsWith("1")).reduce((Y,H)=>{var ue;const L=((ue=l[H])==null?void 0:ue.saldo)||0;return Y+L},0),h=Object.keys(l).filter(Y=>Y.startsWith("2")).reduce((Y,H)=>{var ue;const L=((ue=l[H])==null?void 0:ue.saldo)||0;return Y+L},0),p=Object.keys(l).filter(Y=>Y.startsWith("3")).reduce((Y,H)=>{var ue;const L=((ue=l[H])==null?void 0:ue.saldo)||0;return Y+L},0),v=Object.keys(l).filter(Y=>Y.startsWith("4")),j=Object.keys(l).filter(Y=>Y.startsWith("5")),g=Object.keys(l).filter(Y=>Y.startsWith("6")),N=v.reduce((Y,H)=>{var L;return Y+(((L=l[H])==null?void 0:L.saldo)||0)},0),_=j.reduce((Y,H)=>{var L;return Y+(((L=l[H])==null?void 0:L.saldo)||0)},0),b=g.reduce((Y,H)=>{var L;return Y+(((L=l[H])==null?void 0:L.saldo)||0)},0),w=N-_-b,S=i.filter(Y=>Y.subgrupo==="Activo Circulante"&&Y.estado_financiero==="Balance General"),C=i.filter(Y=>Y.subgrupo==="Activo No Circulante"&&Y.estado_financiero==="Balance General"),A=C.filter(Y=>{const H=parseInt(Y.codigo);return H>=1201&&H<=1206||H===1212}),P=C.filter(Y=>{const H=parseInt(Y.codigo);return H>=1207&&H<=1213}),k=i.filter(Y=>Y.subgrupo==="Activo Diferido"&&Y.estado_financiero==="Balance General"),E=i.filter(Y=>Y.subgrupo==="Pasivo Circulante"&&Y.estado_financiero==="Balance General"),O=i.filter(Y=>Y.subgrupo==="Pasivo No Circulante"&&Y.estado_financiero==="Balance General"),M=i.filter(Y=>Y.codigo.startsWith("3")&&Y.estado_financiero==="Balance General"),T=S.reduce((Y,H)=>Y+d(H.codigo),0),V=A.reduce((Y,H)=>Y+d(H.codigo),0),I=P.reduce((Y,H)=>Y+d(H.codigo),0),F=V+I,D=k.reduce((Y,H)=>Y+d(H.codigo),0),X=E.reduce((Y,H)=>Y+d(H.codigo),0),W=O.reduce((Y,H)=>Y+d(H.codigo),0),B=p+w,q=h+B,te=Math.abs(m-q)<.01;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsxs(ar,{children:["Balance General al ",e.toLocaleDateString("es-CO")," - Los saldos reflejan la situacin financiera a esta fecha especfica."]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-blue-50 dark:bg-blue-950",children:r.jsx(ae,{className:"text-blue-700",children:"Activo Circulante"})}),r.jsxs(Q,{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Saldo"}),r.jsx("span",{className:"text-right",children:"% Activos"})]}),r.jsxs("div",{className:"space-y-1",children:[S.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right",children:["$",H.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[L,"%"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-t-2 border-slate-300 dark:border-slate-600 pt-4 font-semibold text-blue-600 text-base",children:[r.jsx("span",{children:"Total Activo Circulante"}),r.jsxs("span",{className:"text-right",children:["$",T.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(T/m*100).toFixed(2):"0.00","%"]})]})]})]})]}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-indigo-50 dark:bg-indigo-950",children:r.jsx(ae,{className:"text-indigo-700",children:"Activo Fijo"})}),r.jsxs(Q,{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Saldo"}),r.jsx("span",{className:"text-right",children:"% Activos"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"space-y-1 border-b border-slate-200 dark:border-slate-700 pb-2",children:[r.jsx("div",{className:"font-medium text-sm text-slate-600 dark:text-slate-400 py-2",children:"Activo Fijo Bruto"}),A.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300 pl-4",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right",children:["$",H.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[L,"%"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 font-medium text-indigo-600 pl-4",children:[r.jsx("span",{className:"text-sm",children:"Subtotal Activo Fijo Bruto"}),r.jsxs("span",{className:"text-right",children:["$",V.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(V/m*100).toFixed(2):"0.00","%"]})]})]}),r.jsxs("div",{className:"space-y-1 border-b border-slate-200 dark:border-slate-700 pb-2",children:[r.jsx("div",{className:"font-medium text-sm text-slate-600 dark:text-slate-400 py-2",children:"Depreciacin Acumulada"}),P.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300 pl-4",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right text-rose-600",children:["(",Math.abs(H).toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsxs("span",{className:"text-right text-rose-600",children:["(",Math.abs(parseFloat(L)).toFixed(2),"%)"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 font-medium text-rose-600 pl-4",children:[r.jsx("span",{className:"text-sm",children:"Subtotal Depreciacin Acum."}),r.jsxs("span",{className:"text-right",children:["(",Math.abs(I).toLocaleString("es-CO",{minimumFractionDigits:2}),")"]}),r.jsxs("span",{className:"text-right",children:["(",Math.abs(m>0?I/m*100:0).toFixed(2),"%)"]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-t-2 border-slate-300 dark:border-slate-600 pt-4 font-semibold text-indigo-600 text-base",children:[r.jsx("span",{children:"= Activo Fijo Neto"}),r.jsxs("span",{className:"text-right",children:["$",F.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(F/m*100).toFixed(2):"0.00","%"]})]})]})]})]}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-cyan-50 dark:bg-cyan-950",children:r.jsx(ae,{className:"text-cyan-700",children:"Activo Diferido / Largo Plazo"})}),r.jsxs(Q,{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Saldo"}),r.jsx("span",{className:"text-right",children:"% Activos"})]}),r.jsxs("div",{className:"space-y-1",children:[k.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right",children:["$",H.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[L,"%"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-t-2 border-slate-300 dark:border-slate-600 pt-4 font-semibold text-cyan-600 text-base",children:[r.jsx("span",{children:"Total Activo Diferido"}),r.jsxs("span",{className:"text-right",children:["$",D.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(D/m*100).toFixed(2):"0.00","%"]})]})]})]})]}),r.jsxs(G,{className:"border-2 border-blue-400 dark:border-blue-500",children:[r.jsx(ne,{className:"bg-blue-100 dark:bg-blue-900",children:r.jsx(ae,{className:"text-blue-800",children:"Total Activo"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-xl text-blue-800",children:[r.jsx("span",{children:"Total Activos"}),r.jsxs("span",{className:"text-right",children:["$",m.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-right",children:"100.00%"})]})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-red-50 dark:bg-red-950",children:r.jsx(ae,{className:"text-xl text-red-700",children:"Pasivo"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-red-50 dark:bg-red-950",children:r.jsx(ae,{className:"text-red-700",children:"Pasivo Corto Plazo"})}),r.jsxs(Q,{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Saldo"}),r.jsx("span",{className:"text-right",children:"% Activos"})]}),r.jsxs("div",{className:"space-y-1",children:[E.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right",children:["$",H.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[L,"%"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-t-2 border-slate-300 dark:border-slate-600 pt-4 font-semibold text-red-600 text-base",children:[r.jsx("span",{children:"Total Pasivo Corto Plazo"}),r.jsxs("span",{className:"text-right",children:["$",X.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(X/m*100).toFixed(2):"0.00","%"]})]})]})]})]}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-orange-50 dark:bg-orange-950",children:r.jsx(ae,{className:"text-orange-700",children:"Pasivo Largo Plazo"})}),r.jsxs(Q,{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Saldo"}),r.jsx("span",{className:"text-right",children:"% Activos"})]}),r.jsxs("div",{className:"space-y-1",children:[O.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right",children:["$",H.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[L,"%"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-t-2 border-slate-300 dark:border-slate-600 pt-4 font-semibold text-orange-600 text-base",children:[r.jsx("span",{children:"Total Pasivo Largo Plazo"}),r.jsxs("span",{className:"text-right",children:["$",W.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(W/m*100).toFixed(2):"0.00","%"]})]})]})]})]}),r.jsxs(G,{className:"border-2 border-red-400 dark:border-red-500",children:[r.jsx(ne,{className:"bg-red-100 dark:bg-red-900",children:r.jsx(ae,{className:"text-red-800",children:"Total Pasivo"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-xl text-red-800",children:[r.jsx("span",{children:"Total Pasivo"}),r.jsxs("span",{className:"text-right",children:["$",h.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(h/m*100).toFixed(2):"0.00","%"]})]})})]})]})})]}),r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-green-50 dark:bg-green-950",children:r.jsx(ae,{className:"text-xl text-green-700",children:"Capital Contable"})}),r.jsx(Q,{className:"p-6",children:r.jsx("div",{className:"space-y-6",children:r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{className:"bg-green-50 dark:bg-green-950",children:r.jsx(ae,{className:"text-green-700",children:"Capital Contable"})}),r.jsxs(Q,{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-3 border-b-2 border-slate-300 dark:border-slate-600 mb-2 font-semibold text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("span",{children:"Cuenta"}),r.jsx("span",{className:"text-right",children:"Saldo"}),r.jsx("span",{className:"text-right",children:"% Activos"})]}),r.jsxs("div",{className:"space-y-1",children:[M.map(Y=>{const H=d(Y.codigo),L=m>0?(H/m*100).toFixed(2):"0.00";return r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsxs("span",{className:"text-sm",children:[Y.codigo," - ",Y.nombre]}),r.jsxs("span",{className:"text-right",children:["$",H.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[L,"%"]})]},Y.codigo)}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsx("span",{className:"text-sm font-medium",children:"Capital Social (3001)"}),r.jsxs("span",{className:"text-right",children:["$",d("3001").toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(d("3001")/m*100).toFixed(2):"0.00","%"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsx("span",{className:"text-sm font-medium",children:"Utilidades Retenidas (3002)"}),r.jsxs("span",{className:"text-right",children:["$",d("3002").toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(d("3002")/m*100).toFixed(2):"0.00","%"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 text-slate-700 dark:text-slate-300",children:[r.jsx("span",{className:"text-sm font-medium",children:"Utilidad del Ejercicio"}),r.jsxs("span",{className:"text-right",children:["$",w.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(w/m*100).toFixed(2):"0.00","%"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-t-2 border-slate-300 dark:border-slate-600 pt-4 font-bold text-green-600 text-lg",children:[r.jsx("span",{children:"Total Capital Contable"}),r.jsxs("span",{className:"text-right",children:["$",B.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(B/m*100).toFixed(2):"0.00","%"]})]})]})]})]})})})]}),r.jsxs(G,{className:"border-2 border-slate-400 dark:border-slate-500",children:[r.jsx(ne,{className:"bg-slate-100 dark:bg-slate-800",children:r.jsx(ae,{children:"Total Pasivo + Capital Contable"})}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center font-bold text-xl",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"text-right",children:["$",q.toLocaleString("es-CO",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right",children:[m>0?(q/m*100).toFixed(2):"0.00","%"]})]})})]})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("div",{className:`font-semibold text-lg ${te?"text-green-600":"text-amber-600"}`,children:te?" Balance Cuadrado":` Diferencia: $${Math.abs(m-q).toLocaleString("es-CO",{minimumFractionDigits:2})}`})})]})},MTe=({cutoffDate:e})=>{const{data:t,isLoading:n}=Ca(),s=new Date(0),{data:a,isLoading:o}=Il(s,e),[i,l]=y.useState("activos");if(n||o)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin text-primary"})});if(!a||!t)return null;const c=t.cuentasFlat||[],d=a.saldosPorCuenta||{};if(!((a==null?void 0:a.movimientos)&&a.movimientos.length>0))return r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay datos financieros registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver el balance general"})]})})});const m=ee=>{var z;return((z=d[ee])==null?void 0:z.saldo)||0},h=Object.keys(d).filter(ee=>ee.startsWith("1")).reduce((ee,z)=>{var oe;const U=((oe=d[z])==null?void 0:oe.saldo)||0;return ee+U},0),x=c.filter(ee=>ee.subgrupo==="Activo Circulante"&&ee.estado_financiero==="Balance General"),p=c.filter(ee=>ee.subgrupo==="Activo No Circulante"&&ee.estado_financiero==="Balance General"),v=c.filter(ee=>ee.subgrupo==="Activo Diferido"&&ee.estado_financiero==="Balance General"),j=x.reduce((ee,z)=>ee+m(z.codigo),0),g=p.reduce((ee,z)=>ee+m(z.codigo),0),N=v.reduce((ee,z)=>ee+m(z.codigo),0),b=Object.keys(d).filter(ee=>ee.startsWith("2")).reduce((ee,z)=>{var oe;const U=((oe=d[z])==null?void 0:oe.saldo)||0;return ee+U},0),w=c.filter(ee=>ee.subgrupo==="Pasivo Circulante"&&ee.estado_financiero==="Balance General"),S=c.filter(ee=>ee.subgrupo==="Pasivo No Circulante"&&ee.estado_financiero==="Balance General"),C=w.reduce((ee,z)=>ee+m(z.codigo),0),A=S.reduce((ee,z)=>ee+m(z.codigo),0),k=Object.keys(d).filter(ee=>ee.startsWith("3")).reduce((ee,z)=>{var oe;const U=((oe=d[z])==null?void 0:oe.saldo)||0;return ee+U},0),E=Object.keys(d).filter(ee=>ee.startsWith("4")),O=Object.keys(d).filter(ee=>ee.startsWith("5")),M=Object.keys(d).filter(ee=>ee.startsWith("6")),T=E.reduce((ee,z)=>{var U;return ee+(((U=d[z])==null?void 0:U.saldo)||0)},0),V=O.reduce((ee,z)=>{var U;return ee+(((U=d[z])==null?void 0:U.saldo)||0)},0),I=M.reduce((ee,z)=>{var U;return ee+(((U=d[z])==null?void 0:U.saldo)||0)},0),F=T-V-I,D=k+F,X=[{name:"Activos",value:h,color:"hsl(var(--chart-1))"},{name:"Pasivos",value:b,color:"hsl(var(--chart-5))"},{name:"Capital",value:Math.abs(D),color:"hsl(var(--chart-2))"}].filter(ee=>ee.value>0),W=[{name:"Activos Circulantes",value:j,color:"hsl(var(--chart-1))"},{name:"Activos Fijos",value:g,color:"hsl(var(--chart-3))"},{name:"Activos Diferidos",value:N,color:"hsl(var(--chart-4))"}],B=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"],q=x.map((ee,z)=>({name:ee.nombre,size:m(ee.codigo),color:B[z%B.length]})).filter(ee=>Math.abs(ee.size)>.01),te=p.map((ee,z)=>({name:ee.nombre,size:m(ee.codigo),color:B[z%B.length]})).filter(ee=>Math.abs(ee.size)>.01),Y=[{name:"Gastos Diferidos",size:N,color:"hsl(var(--chart-4))"}],H=[{name:"Pasivos Circulantes",value:C,color:"hsl(var(--chart-5))"},{name:"Pasivos Largo Plazo",value:A,color:"hsl(var(--chart-4))"}],L=w.map((ee,z)=>({name:ee.nombre,size:Math.abs(m(ee.codigo)),color:B[z%B.length]})).filter(ee=>ee.size>.01),ue=S.map((ee,z)=>({name:ee.nombre,size:Math.abs(m(ee.codigo)),color:B[z%B.length]})).filter(ee=>ee.size>.01),pe=c.filter(ee=>ee.codigo.startsWith("3")&&ee.estado_financiero==="Balance General"),we=[...pe.map((ee,z)=>({name:ee.nombre,size:Math.abs(m(ee.codigo)),color:B[z%B.length]})),{name:"Utilidad del Ejercicio",size:Math.abs(F),color:B[pe.length%B.length]}].filter(ee=>Math.abs(ee.size)>.01),re=ee=>{const U=Math.abs(ee).toLocaleString("es-CO",{minimumFractionDigits:2});return ee<0?`-$${U}`:`$${U}`},de=({active:ee,payload:z})=>ee&&z&&z.length?r.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-foreground",children:z[0].payload.name}),r.jsx("p",{className:"text-primary font-bold",children:re(z[0].value)})]}):null,he=({active:ee,payload:z,data:U})=>{if(ee&&z&&z.length){const oe=U.reduce((Se,Ne)=>Se+Ne.value,0);return r.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-foreground",children:z[0].name}),r.jsx("p",{className:"text-primary font-bold",children:re(z[0].value)}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[(z[0].value/oe*100).toFixed(1),"%"]})]})}return null};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"1. Estructura del Balance General"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:400,children:r.jsxs(dl,{children:[r.jsx(Xn,{data:X,cx:"50%",cy:"50%",labelLine:!1,label:({name:ee,percent:z})=>`${ee}: ${(z*100).toFixed(1)}%`,outerRadius:120,innerRadius:70,fill:"#8884d8",dataKey:"value",paddingAngle:5,children:X.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))}),r.jsx(yt,{content:ee=>r.jsx(he,{...ee,data:X})})]})}),r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:X.map((ee,z)=>r.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-sm text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"text-lg font-bold text-foreground",children:re(ee.value)})]},z))})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Anlisis Detallado"})}),r.jsx(Q,{children:r.jsxs(Lr,{value:i,onValueChange:ee=>l(ee),className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full max-w-md grid-cols-3 mb-6",children:[r.jsx(Qe,{value:"activos",children:"Activos"}),r.jsx(Qe,{value:"pasivos",children:"Pasivos"}),r.jsx(Qe,{value:"capital",children:"Capital"})]}),r.jsxs(Je,{value:"activos",className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Estructura de Activos por Tipo"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:350,children:r.jsxs(dl,{children:[r.jsx(Xn,{data:W,cx:"50%",cy:"50%",labelLine:!1,label:({name:ee,percent:z})=>`${ee}: ${(z*100).toFixed(1)}%`,outerRadius:100,innerRadius:60,fill:"#8884d8",dataKey:"value",paddingAngle:3,children:W.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))}),r.jsx(yt,{content:ee=>r.jsx(he,{...ee,data:W})})]})}),r.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:W.map((ee,z)=>r.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-sm text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"text-lg font-bold text-foreground",children:re(ee.value)})]},z))})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Composicin de Activos Circulantes"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:Math.max(200,q.length*60),children:r.jsxs(Gt,{data:q,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(jt,{type:"number",tickFormatter:ee=>re(ee)}),r.jsx(gt,{type:"category",dataKey:"name",width:150,tick:{fontSize:12}}),r.jsx(yt,{content:r.jsx(de,{})}),r.jsx(rt,{dataKey:"size",radius:[0,4,4,0],children:q.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))})]})}),r.jsx("div",{className:"mt-4 space-y-2",children:q.map((ee,z)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"font-semibold text-foreground",children:re(ee.size)})]},z))})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Composicin de Activos Fijos"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:Math.max(200,te.length*60),children:r.jsxs(Gt,{data:te,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(jt,{type:"number",tickFormatter:ee=>re(ee)}),r.jsx(gt,{type:"category",dataKey:"name",width:150,tick:{fontSize:12}}),r.jsx(yt,{content:r.jsx(de,{})}),r.jsx(rt,{dataKey:"size",radius:[0,4,4,0],children:te.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))})]})}),r.jsx("div",{className:"mt-4 space-y-2",children:te.map((ee,z)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"font-semibold text-foreground",children:re(ee.size)})]},z))})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Composicin de Activos Diferidos"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:Math.max(200,Y.length*60),children:r.jsxs(Gt,{data:Y,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(jt,{type:"number",tickFormatter:ee=>re(ee)}),r.jsx(gt,{type:"category",dataKey:"name",width:150,tick:{fontSize:12}}),r.jsx(yt,{content:r.jsx(de,{})}),r.jsx(rt,{dataKey:"size",radius:[0,4,4,0],children:Y.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))})]})}),r.jsx("div",{className:"mt-4 space-y-2",children:Y.map((ee,z)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"font-semibold text-foreground",children:re(ee.size)})]},z))})]})]})]}),r.jsxs(Je,{value:"pasivos",className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Estructura de Pasivos por Tipo"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:350,children:r.jsxs(dl,{children:[r.jsx(Xn,{data:H,cx:"50%",cy:"50%",labelLine:!1,label:({name:ee,percent:z})=>`${ee}: ${(z*100).toFixed(1)}%`,outerRadius:100,innerRadius:60,fill:"#8884d8",dataKey:"value",paddingAngle:3,children:H.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))}),r.jsx(yt,{content:ee=>r.jsx(he,{...ee,data:H})})]})}),r.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:H.map((ee,z)=>r.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-sm text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"text-lg font-bold text-foreground",children:re(ee.value)})]},z))})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Composicin de Pasivos Circulantes"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:Math.max(200,L.length*60),children:r.jsxs(Gt,{data:L,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(jt,{type:"number",tickFormatter:ee=>re(ee)}),r.jsx(gt,{type:"category",dataKey:"name",width:150,tick:{fontSize:12}}),r.jsx(yt,{content:r.jsx(de,{})}),r.jsx(rt,{dataKey:"size",radius:[0,4,4,0],children:L.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))})]})}),r.jsx("div",{className:"mt-4 space-y-2",children:L.map((ee,z)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"font-semibold text-foreground",children:re(ee.size)})]},z))})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Composicin de Pasivos a Largo Plazo"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:Math.max(200,ue.length*60),children:r.jsxs(Gt,{data:ue,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(jt,{type:"number",tickFormatter:ee=>re(ee)}),r.jsx(gt,{type:"category",dataKey:"name",width:150,tick:{fontSize:12}}),r.jsx(yt,{content:r.jsx(de,{})}),r.jsx(rt,{dataKey:"size",radius:[0,4,4,0],children:ue.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))})]})}),r.jsx("div",{className:"mt-4 space-y-2",children:ue.map((ee,z)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"font-semibold text-foreground",children:re(ee.size)})]},z))})]})]})]}),r.jsxs(Je,{value:"capital",className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Capital Contable Total"})}),r.jsx(Q,{children:r.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[r.jsx("div",{className:"text-6xl font-bold mb-4",style:{color:"hsl(var(--chart-2))"},children:re(D)}),r.jsx("p",{className:"text-muted-foreground text-center",children:"El capital contable representa la diferencia entre activos y pasivos"}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6 w-full max-w-md",children:[r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Activos"}),r.jsx("p",{className:"text-xl font-semibold text-foreground",children:re(h)})]}),r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Pasivos"}),r.jsx("p",{className:"text-xl font-semibold text-foreground",children:re(b)})]})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Composicin del Capital Contable"})}),r.jsxs(Q,{children:[r.jsx(mt,{width:"100%",height:Math.max(200,we.length*60),children:r.jsxs(Gt,{data:we,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(jt,{type:"number",tickFormatter:ee=>re(ee)}),r.jsx(gt,{type:"category",dataKey:"name",width:150,tick:{fontSize:12}}),r.jsx(yt,{content:r.jsx(de,{})}),r.jsx(rt,{dataKey:"size",radius:[0,4,4,0],children:we.map((ee,z)=>r.jsx(Kt,{fill:ee.color},`cell-${z}`))})]})}),r.jsx("div",{className:"mt-4 space-y-2",children:we.map((ee,z)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.color}}),r.jsx("span",{className:"text-muted-foreground",children:ee.name})]}),r.jsx("span",{className:"font-semibold text-foreground",children:re(ee.size)})]},z))})]})]})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Resumen Ejecutivo"})}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Activos"}),r.jsx("p",{className:"text-2xl font-bold text-foreground",children:re(h)})]}),r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Pasivos"}),r.jsx("p",{className:"text-2xl font-bold text-foreground",children:re(b)})]}),r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Capital Contable"}),r.jsx("p",{className:`text-2xl font-bold ${D>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:re(D)})]})]})})]})]})},OTe=()=>{const[e,t]=y.useState(new Date);return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Balance General"}),r.jsx("p",{className:"text-muted-foreground",children:"Estado de la situacin financiera"})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fecha de Corte"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!e&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),e?ze(e,"PPP",{locale:ht}):"Seleccionar fecha"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:e,onSelect:n=>n&&t(n),initialFocus:!0,className:"pointer-events-auto",locale:ht})})]})]}),r.jsx("div",{className:"flex-1 min-w-[300px] flex items-end",children:r.jsx("div",{className:"text-sm text-muted-foreground bg-background p-3 rounded-md border w-full",children:"El balance mostrar los saldos acumulados hasta la fecha seleccionada"})})]}),r.jsxs(Lr,{defaultValue:"ejecutivo",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full max-w-2xl grid-cols-3",children:[r.jsx(Qe,{value:"ejecutivo",children:"Formato Ejecutivo"}),r.jsx(Qe,{value:"operativo",children:"Formato Operativo"}),r.jsx(Qe,{value:"analitico",children:"Formato Analtico"})]}),r.jsx(Je,{value:"ejecutivo",className:"mt-6",children:r.jsx(ATe,{cutoffDate:e})}),r.jsx(Je,{value:"operativo",className:"mt-6",children:r.jsx(ETe,{cutoffDate:e})}),r.jsx(Je,{value:"analitico",className:"mt-6",children:r.jsx(MTe,{cutoffDate:e})})]})]})},q8=e=>{let t=0,n=0;e.forEach(i=>{i.cuenta_codigo==="1001"?t+=(i.debe||0)-(i.haber||0):i.cuenta_codigo==="1002"&&(n+=(i.debe||0)-(i.haber||0))});const s=t+n;let a="Sin Clasificar",o="";for(const i of e){const l=i.cuenta_codigo;if(!(l==="1001"||l==="1002")){if(l!=null&&l.startsWith("4")){a="Operativo",o=s>0?"Cobro por Ventas/Ingresos":"Devolucin de Ventas";break}else if(l==="1003"||l==="1004"){a="Operativo",o=s>0?"Cobro de Clientes":"Registro de CxC";break}else if(l==="1005"||l==="1006"){a="Operativo",o=s<0?"Pago por Compra de Inventario":"Venta de Inventario";break}else if(l==="5001"){a="Operativo",o="Costo de Ventas";break}else if(l!=null&&l.startsWith("51")||l!=null&&l.startsWith("6")){a="Operativo",o=s<0?"Pago de Gastos Operativos":"Reembolso de Gastos";break}else if(["2001","2002","2003","2004","2005","2006"].includes(l)){a="Operativo",o=s<0?"Pago a Proveedores/Gastos":"Registro de CxP";break}else if(l==="1007"||l==="1008"){a="Operativo",o=s<0?"Pago de IVA/Anticipos":"Recuperacin de Anticipos";break}else if(l!=null&&l.startsWith("12")&&parseInt(l)>=1201){a="Inversion",o=s<0?"Adquisicin de Activos Fijos":"Venta de Activos Fijos";break}else if(l!=null&&l.startsWith("13")){a="Inversion",o=s<0?"Gastos Diferidos":"Recuperacin de Diferidos";break}else if(l!=null&&l.startsWith("20")||l!=null&&l.startsWith("21")){a="Financiamiento",o=s>0?"Disposicin de Prstamo":"Amortizacin de Prstamo";break}else if(["3001","3002","3003"].includes(l)){a="Financiamiento",o=s>0?"Aportacin de Capital":"Retiro de Capital";break}}}return{categoria:a,subcategoria:o,impactoEfectivo:t,impactoBancos:n,impactoTotal:s}},TTe=e=>{const t={efectivo:0,bancos:0,total:0,detalles:[]},n={efectivo:0,bancos:0,total:0,detalles:[]},s={efectivo:0,bancos:0,total:0,detalles:[]};return e.forEach(a=>{a.categoria==="Operativo"?(t.efectivo+=a.impactoEfectivo,t.bancos+=a.impactoBancos,t.total+=a.impactoTotal,t.detalles.push(a)):a.categoria==="Inversion"?(n.efectivo+=a.impactoEfectivo,n.bancos+=a.impactoBancos,n.total+=a.impactoTotal,n.detalles.push(a)):a.categoria==="Financiamiento"&&(s.efectivo+=a.impactoEfectivo,s.bancos+=a.impactoBancos,s.total+=a.impactoTotal,s.detalles.push(a))}),{operativo:t,inversion:n,financiamiento:s}},kTe=async(e,t,n=["1001","1002"])=>{const{data:s}=await e.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").in("cuenta_codigo",n).lt("asientos_contables.fecha",t.toISOString().split("T")[0]);let a=0,o=0;return s==null||s.forEach(i=>{const l=(i.debe||0)-(i.haber||0);i.cuenta_codigo==="1001"?a+=l:i.cuenta_codigo==="1002"&&(o+=l)}),{efectivo:a,bancos:o,total:a+o}},$Te=({startDate:e,endDate:t,vistaColumnas:n})=>{const{data:s,isLoading:a}=it({queryKey:["flujo-efectivo-operativo",e,t,n],queryFn:async()=>{const{data:h,count:x}=await ce.from("asientos_contables").select("*",{count:"exact",head:!0});if(!x||x===0)return{saldoInicial:{efectivo:0,bancos:0,total:0},operativo:{efectivo:0,bancos:0,total:0,desglose:{}},inversion:{efectivo:0,bancos:0,total:0,desglose:{}},financiamiento:{efectivo:0,bancos:0,total:0,desglose:{}},sinDatos:!0};const p=await kTe(ce,e),{data:v}=await ce.from("detalle_asientos").select(`
          debe, haber, cuenta_codigo,
          asientos_contables!inner(id, fecha, descripcion, detalle_asientos(cuenta_codigo, debe, haber))
        `).in("cuenta_codigo",["1001","1002"]).gte("asientos_contables.fecha",e.toISOString().split("T")[0]).lte("asientos_contables.fecha",t.toISOString().split("T")[0]),j=new Set,g=[];v==null||v.forEach(A=>{var O,M;const P=(O=A.asientos_contables)==null?void 0:O.id;if(j.has(P))return;j.add(P);const k=((M=A.asientos_contables)==null?void 0:M.detalle_asientos)||[],E=q8(k);E.categoria!=="Sin Clasificar"&&g.push(E)});const{operativo:N,inversion:_,financiamiento:b}=TTe(g),w={};N.detalles.forEach(A=>{w[A.subcategoria]||(w[A.subcategoria]={efectivo:0,bancos:0,total:0}),w[A.subcategoria].efectivo+=A.impactoEfectivo,w[A.subcategoria].bancos+=A.impactoBancos,w[A.subcategoria].total+=A.impactoTotal});const S={};_.detalles.forEach(A=>{S[A.subcategoria]||(S[A.subcategoria]={efectivo:0,bancos:0,total:0}),S[A.subcategoria].efectivo+=A.impactoEfectivo,S[A.subcategoria].bancos+=A.impactoBancos,S[A.subcategoria].total+=A.impactoTotal});const C={};return b.detalles.forEach(A=>{C[A.subcategoria]||(C[A.subcategoria]={efectivo:0,bancos:0,total:0}),C[A.subcategoria].efectivo+=A.impactoEfectivo,C[A.subcategoria].bancos+=A.impactoBancos,C[A.subcategoria].total+=A.impactoTotal}),{saldoInicial:p,operativo:{...N,desglose:w},inversion:{..._,desglose:S},financiamiento:{...b,desglose:C}}}}),o=h=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(h);if(a||!s)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});if(!(s&&!s.sinDatos))return r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"No hay movimientos de efectivo registrados en el perodo seleccionado. Comienza registrando transacciones para ver el flujo de efectivo."})]});const l=n==="detallada",c=s.operativo.efectivo+s.inversion.efectivo+s.financiamiento.efectivo,d=s.operativo.bancos+s.inversion.bancos+s.financiamiento.bancos,u=s.operativo.total+s.inversion.total+s.financiamiento.total,m={efectivo:s.saldoInicial.efectivo+c,bancos:s.saldoInicial.bancos+d,total:s.saldoInicial.total+u},f=(h,x,p)=>l&&h!==void 0&&x!==void 0?r.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center min-w-[400px]",children:[r.jsx("span",{className:"font-bold",children:o(h)}),r.jsx("span",{className:"font-bold",children:o(x)}),r.jsx("span",{className:"font-bold",children:o(p||0)})]}):r.jsx("span",{className:"font-bold",children:o(p||0)});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Flujo de Efectivo calculado desde los asientos contables (detalle_asientos)."})]}),r.jsx(G,{className:"bg-gradient-to-r from-blue-500/10 to-blue-500/5 border-2 border-blue-500/20",children:r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xl font-bold text-foreground",children:"Saldo Inicial de Efectivo y Bancos"}),l?r.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center min-w-[400px]",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Efectivo"}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:o(s.saldoInicial.efectivo)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Bancos"}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:o(s.saldoInicial.bancos)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Total"}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:o(s.saldoInicial.total)})]})]}):r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:o(s.saldoInicial.total)})]})})}),r.jsxs(G,{children:[r.jsx(ne,{className:"bg-finance-success/10",children:r.jsxs(ae,{className:"text-finance-success flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-5 w-5"}),"Actividades Operativas"]}),l&&r.jsxs("div",{className:"grid grid-cols-3 gap-8 text-sm font-normal text-center min-w-[400px]",children:[r.jsx("span",{children:"Efectivo"}),r.jsx("span",{children:"Bancos"}),r.jsx("span",{children:"Total"})]})]})}),r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[Object.entries(s.operativo.desglose).map(([h,x])=>r.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${x.total>=0?"bg-finance-success":"bg-destructive"}`}),r.jsx("span",{className:"font-medium",children:h})]}),f(x.efectivo,x.bancos,x.total)]},h)),r.jsx("div",{className:"border-t-2 pt-3 mt-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xl font-bold",children:"Flujo Neto Operativo"}),f(s.operativo.efectivo,s.operativo.bancos,s.operativo.total)]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"bg-blue-500/10",children:r.jsxs(ae,{className:"text-blue-600 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-5 w-5"}),"Actividades de Inversin"]}),l&&r.jsxs("div",{className:"grid grid-cols-3 gap-8 text-sm font-normal text-center min-w-[400px]",children:[r.jsx("span",{children:"Efectivo"}),r.jsx("span",{children:"Bancos"}),r.jsx("span",{children:"Total"})]})]})}),r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[Object.entries(s.inversion.desglose).length>0?r.jsx(r.Fragment,{children:Object.entries(s.inversion.desglose).map(([h,x])=>r.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${x.total>=0?"bg-finance-success":"bg-destructive"}`}),r.jsx("span",{className:"font-medium",children:h})]}),f(x.efectivo,x.bancos,x.total)]},h))}):r.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No hay inversiones en este perodo"}),r.jsx("div",{className:"border-t-2 pt-3 mt-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xl font-bold",children:"Flujo Neto de Inversin"}),f(s.inversion.efectivo,s.inversion.bancos,s.inversion.total)]})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"bg-purple-500/10",children:r.jsxs(ae,{className:"text-purple-600 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-5 w-5"}),"Actividades de Financiamiento"]}),l&&r.jsxs("div",{className:"grid grid-cols-3 gap-8 text-sm font-normal text-center min-w-[400px]",children:[r.jsx("span",{children:"Efectivo"}),r.jsx("span",{children:"Bancos"}),r.jsx("span",{children:"Total"})]})]})}),r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[Object.entries(s.financiamiento.desglose).length>0?r.jsx(r.Fragment,{children:Object.entries(s.financiamiento.desglose).map(([h,x])=>r.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${x.total>=0?"bg-finance-success":"bg-destructive"}`}),r.jsx("span",{className:"font-medium",children:h})]}),f(x.efectivo,x.bancos,x.total)]},h))}):r.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No hay financiamientos en este perodo"}),r.jsx("div",{className:"border-t-2 pt-3 mt-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xl font-bold",children:"Flujo Neto de Financiamiento"}),f(s.financiamiento.efectivo,s.financiamiento.bancos,s.financiamiento.total)]})})]})})]}),r.jsx(G,{className:"bg-gradient-to-r from-green-500/10 to-green-500/5 border-2 border-green-500/20",children:r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xl font-bold text-foreground",children:"Saldo Final de Efectivo y Bancos"}),l?r.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center min-w-[400px]",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Efectivo"}),r.jsx("span",{className:"text-2xl font-bold text-green-600",children:o(m.efectivo)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Bancos"}),r.jsx("span",{className:"text-2xl font-bold text-green-600",children:o(m.bancos)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Total"}),r.jsx("span",{className:"text-2xl font-bold text-green-600",children:o(m.total)})]})]}):r.jsx("span",{className:"text-2xl font-bold text-green-600",children:o(m.total)})]})})})]})},DTe=({startDate:e,endDate:t,vistaColumnas:n})=>{const{data:s,isLoading:a}=it({queryKey:["flujo-efectivo-ejecutivo",e,t,n],queryFn:async()=>{const{data:l,count:c}=await ce.from("asientos_contables").select("*",{count:"exact",head:!0});if(!c||c===0)return{saldoInicial:{efectivo:0,bancos:0,total:0},operativo:{efectivo:0,bancos:0,total:0},inversion:{efectivo:0,bancos:0,total:0},financiamiento:{efectivo:0,bancos:0,total:0},flujoNeto:{efectivo:0,bancos:0,total:0},saldoFinal:{efectivo:0,bancos:0,total:0},sinDatos:!0};const{data:d}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").in("cuenta_codigo",["1001","1002"]).lt("asientos_contables.fecha",e.toISOString().split("T")[0]),u={efectivo:0,bancos:0,total:0};d==null||d.forEach(C=>{const A=(C.debe||0)-(C.haber||0);C.cuenta_codigo==="1001"?u.efectivo+=A:C.cuenta_codigo==="1002"&&(u.bancos+=A)}),u.total=u.efectivo+u.bancos;const{data:m}=await ce.from("detalle_asientos").select(`
          debe, haber, cuenta_codigo,
          asientos_contables!inner(id, fecha, detalle_asientos(cuenta_codigo, debe, haber))
        `).in("cuenta_codigo",["1001","1002"]).gte("asientos_contables.fecha",e.toISOString().split("T")[0]).lte("asientos_contables.fecha",t.toISOString().split("T")[0]);let f=0,h=0,x=0,p=0,v=0,j=0;const g=new Set;m==null||m.forEach(C=>{var V,I;const A=(V=C.asientos_contables)==null?void 0:V.id;if(g.has(A))return;g.add(A);const P=((I=C.asientos_contables)==null?void 0:I.detalle_asientos)||[];let k=0,E=0;P.forEach(F=>{F.cuenta_codigo==="1001"?k+=(F.debe||0)-(F.haber||0):F.cuenta_codigo==="1002"&&(E+=(F.debe||0)-(F.haber||0))});let O=!1,M=!1,T=!1;P.forEach(F=>{const D=F.cuenta_codigo;D==="1001"||D==="1002"||(D!=null&&D.startsWith("4")||D!=null&&D.startsWith("5")||D!=null&&D.startsWith("6")||["1003","1004","1005","1006","2001","2002","2003","2004","2005","2006","1007","1008"].includes(D)?O=!0:D!=null&&D.startsWith("12")&&parseInt(D)>=1201||D!=null&&D.startsWith("13")?M=!0:(D!=null&&D.startsWith("20")||D!=null&&D.startsWith("21")||["3001","3002","3003"].includes(D))&&(T=!0))}),O?(f+=k,h+=E):M?(x+=k,p+=E):T&&(v+=k,j+=E)});const N={efectivo:f,bancos:h,total:f+h},_={efectivo:x,bancos:p,total:x+p},b={efectivo:v,bancos:j,total:v+j};N.total=N.efectivo+N.bancos,_.total=_.efectivo+_.bancos,b.total=b.efectivo+b.bancos;const w={efectivo:N.efectivo+_.efectivo+b.efectivo,bancos:N.bancos+_.bancos+b.bancos,total:N.total+_.total+b.total},S={efectivo:u.efectivo+w.efectivo,bancos:u.bancos+w.bancos,total:u.total+w.total};return{saldoInicial:u,operativo:N,inversion:_,financiamiento:b,flujoNeto:w,saldoFinal:S}}});if(a)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});if(!(s&&!s.sinDatos))return r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"No hay movimientos de efectivo registrados en el perodo seleccionado. Comienza registrando transacciones para ver el flujo de efectivo."})]});const i=n==="detallada";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Vista ejecutiva consolidada del flujo de efectivo por categoras principales."})]}),r.jsxs(G,{className:"bg-blue-50 dark:bg-blue-950",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-blue-600",children:"Saldo Inicial de Efectivo"})}),r.jsx(Q,{children:i?r.jsxs("div",{className:"grid grid-cols-4 gap-4 font-bold text-lg",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Efectivo"}),r.jsx("span",{className:"text-right",children:"Bancos"}),r.jsx("span",{className:"text-right",children:"Total"}),r.jsx("span",{children:"Saldo Inicial"}),r.jsxs("span",{className:"text-right text-blue-600",children:["$",s==null?void 0:s.saldoInicial.efectivo.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right text-blue-600",children:["$",s==null?void 0:s.saldoInicial.bancos.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right text-blue-600",children:["$",s==null?void 0:s.saldoInicial.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center font-bold text-lg",children:[r.jsx("span",{children:"Saldo Inicial"}),r.jsxs("span",{className:"text-right text-blue-600",children:["$",s==null?void 0:s.saldoInicial.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-green-600",children:"Actividades Operativas"})}),r.jsx(Q,{children:i?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Efectivo"}),r.jsx("span",{className:"text-right",children:"Bancos"}),r.jsx("span",{className:"text-right",children:"Total"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[r.jsx("span",{children:"Flujo Operativo"}),r.jsxs("span",{className:`font-medium text-right ${(s==null?void 0:s.operativo.efectivo)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.operativo.efectivo)>=0?"$":"-$",Math.abs((s==null?void 0:s.operativo.efectivo)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`font-medium text-right ${(s==null?void 0:s.operativo.bancos)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.operativo.bancos)>=0?"$":"-$",Math.abs((s==null?void 0:s.operativo.bancos)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`font-bold text-right ${(s==null?void 0:s.operativo.total)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.operativo.total)>=0?"$":"-$",Math.abs((s==null?void 0:s.operativo.total)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center font-bold text-lg",children:[r.jsx("span",{children:"Efectivo Neto de Operacin"}),r.jsxs("span",{className:`text-right ${((s==null?void 0:s.operativo.total)||0)>=0?"text-green-600":"text-red-600"}`,children:["$",s==null?void 0:s.operativo.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-blue-600",children:"Actividades de Inversin"})}),r.jsx(Q,{children:i?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Efectivo"}),r.jsx("span",{className:"text-right",children:"Bancos"}),r.jsx("span",{className:"text-right",children:"Total"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[r.jsx("span",{children:"Flujo de Inversin"}),r.jsxs("span",{className:`font-medium text-right ${(s==null?void 0:s.inversion.efectivo)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.inversion.efectivo)>=0?"$":"-$",Math.abs((s==null?void 0:s.inversion.efectivo)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`font-medium text-right ${(s==null?void 0:s.inversion.bancos)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.inversion.bancos)>=0?"$":"-$",Math.abs((s==null?void 0:s.inversion.bancos)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`font-bold text-right ${(s==null?void 0:s.inversion.total)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.inversion.total)>=0?"$":"-$",Math.abs((s==null?void 0:s.inversion.total)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center font-bold text-lg",children:[r.jsx("span",{children:"Efectivo Neto de Inversin"}),r.jsxs("span",{className:`text-right ${((s==null?void 0:s.inversion.total)||0)>=0?"text-green-600":"text-red-600"}`,children:["$",s==null?void 0:s.inversion.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-purple-600",children:"Actividades de Financiamiento"})}),r.jsx(Q,{children:i?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4 pb-2 border-b font-semibold text-sm",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Efectivo"}),r.jsx("span",{className:"text-right",children:"Bancos"}),r.jsx("span",{className:"text-right",children:"Total"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[r.jsx("span",{children:"Flujo Financiamiento"}),r.jsxs("span",{className:`font-medium text-right ${(s==null?void 0:s.financiamiento.efectivo)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.financiamiento.efectivo)>=0?"$":"-$",Math.abs((s==null?void 0:s.financiamiento.efectivo)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`font-medium text-right ${(s==null?void 0:s.financiamiento.bancos)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.financiamiento.bancos)>=0?"$":"-$",Math.abs((s==null?void 0:s.financiamiento.bancos)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`font-bold text-right ${(s==null?void 0:s.financiamiento.total)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.financiamiento.total)>=0?"$":"-$",Math.abs((s==null?void 0:s.financiamiento.total)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center font-bold text-lg",children:[r.jsx("span",{children:"Efectivo Neto de Financiamiento"}),r.jsxs("span",{className:`text-right ${((s==null?void 0:s.financiamiento.total)||0)>=0?"text-green-600":"text-red-600"}`,children:["$",s==null?void 0:s.financiamiento.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]}),r.jsxs(G,{className:"bg-purple-50 dark:bg-purple-950",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-purple-600",children:"Aumento/Disminucin Neto en Efectivo"})}),r.jsx(Q,{children:i?r.jsxs("div",{className:"grid grid-cols-4 gap-4 font-bold text-lg",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Efectivo"}),r.jsx("span",{className:"text-right",children:"Bancos"}),r.jsx("span",{className:"text-right",children:"Total"}),r.jsx("span",{children:"Flujo Neto"}),r.jsxs("span",{className:`text-right ${(s==null?void 0:s.flujoNeto.efectivo)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.flujoNeto.efectivo)>=0?"$":"-$",Math.abs((s==null?void 0:s.flujoNeto.efectivo)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`text-right ${(s==null?void 0:s.flujoNeto.bancos)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.flujoNeto.bancos)>=0?"$":"-$",Math.abs((s==null?void 0:s.flujoNeto.bancos)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:`text-right ${(s==null?void 0:s.flujoNeto.total)>=0?"text-green-600":"text-red-600"}`,children:[(s==null?void 0:s.flujoNeto.total)>=0?"$":"-$",Math.abs((s==null?void 0:s.flujoNeto.total)||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center font-bold text-lg",children:[r.jsx("span",{children:"Flujo Neto"}),r.jsxs("span",{className:`text-right ${(s==null?void 0:s.flujoNeto.total)>=0?"text-green-600":"text-red-600"}`,children:["$",s==null?void 0:s.flujoNeto.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]}),r.jsxs(G,{className:"bg-green-50 dark:bg-green-950",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-green-600",children:"Saldo Final de Efectivo"})}),r.jsx(Q,{children:i?r.jsxs("div",{className:"grid grid-cols-4 gap-4 font-bold text-xl",children:[r.jsx("span",{children:"Concepto"}),r.jsx("span",{className:"text-right",children:"Efectivo"}),r.jsx("span",{className:"text-right",children:"Bancos"}),r.jsx("span",{className:"text-right",children:"Total"}),r.jsx("span",{children:"Saldo Final"}),r.jsxs("span",{className:"text-right text-green-600",children:["$",s==null?void 0:s.saldoFinal.efectivo.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right text-green-600",children:["$",s==null?void 0:s.saldoFinal.bancos.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"text-right text-green-600",children:["$",s==null?void 0:s.saldoFinal.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center font-bold text-xl",children:[r.jsx("span",{children:"Saldo Final"}),r.jsxs("span",{className:"text-right text-green-600",children:["$",s==null?void 0:s.saldoFinal.total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]})]})},FTe=({startDate:e,endDate:t,filtroMetodoPago:n})=>{const{data:s,isLoading:a}=it({queryKey:["saldo-inicial-flujo",e,n],queryFn:async()=>{const C=e.toISOString().split("T")[0],A=n==="consolidado"?["1001","1002"]:n==="efectivo"?["1001"]:["1002"],{data:P}=await ce.from("detalle_asientos").select("debe, haber, cuenta_codigo, asientos_contables!inner(fecha)").in("cuenta_codigo",A).lt("asientos_contables.fecha",C);let k=0;return P==null||P.forEach(E=>{k+=Number(E.debe||0)-Number(E.haber||0)}),k}}),{data:o,isLoading:i}=it({queryKey:["flujo-efectivo-analitico",e,t,n],queryFn:async()=>{const C=[],{data:A}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          fecha,
          descripcion,
          detalle_asientos(cuenta_codigo, debe, haber, descripcion)
        `).gte("fecha",e.toISOString().split("T")[0]).lte("fecha",t.toISOString().split("T")[0]).order("fecha",{ascending:!0});return A==null||A.forEach(P=>{const k=P.detalle_asientos||[];let E=0,O=0,M=!1,T=!1,V="";if(k.forEach(W=>{W.cuenta_codigo==="1001"?(M=!0,E=(W.debe||0)-(W.haber||0),V="efectivo"):W.cuenta_codigo==="1002"&&(T=!0,O=(W.debe||0)-(W.haber||0),V="bancos")}),!M&&!T||n==="efectivo"&&!M||n==="bancos"&&!T)return;const I=E+O;if(I===0)return;const F=q8(k),D=F.categoria==="Inversion"?"Inversin":F.categoria,X=F.subcategoria||(I>0?"Cobro":"Pago");C.push({fecha:ze(new Date(P.fecha),"dd/MM/yyyy"),referencia:P.numero_asiento,tipo:X,descripcion:P.descripcion,monto:I,categoria:D,metodoPago:V})}),C}});if(i||a)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});if(!(o&&o.length>0))return r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"No hay transacciones registradas en el perodo seleccionado. Comienza registrando transacciones para ver el anlisis detallado del flujo de efectivo."})]});const c={operativo:(o==null?void 0:o.filter(C=>C.categoria==="Operativo"))||[],inversion:(o==null?void 0:o.filter(C=>C.categoria==="Inversin"))||[],financiamiento:(o==null?void 0:o.filter(C=>C.categoria==="Financiamiento"))||[]},d={operativo:c.operativo.reduce((C,A)=>C+A.monto,0),inversion:c.inversion.reduce((C,A)=>C+A.monto,0),financiamiento:c.financiamiento.reduce((C,A)=>C+A.monto,0)},u=c.operativo.filter(C=>C.monto>0).reduce((C,A)=>C+A.monto,0),m=Math.abs(c.operativo.filter(C=>C.monto<0).reduce((C,A)=>C+A.monto,0)),f=Math.abs(d.inversion),h=c.financiamiento.filter(C=>C.monto>0).reduce((C,A)=>C+A.monto,0),x=Math.abs(c.financiamiento.filter(C=>C.monto<0).reduce((C,A)=>C+A.monto,0)),p=u+h,v=m+f+x,j=d.operativo+d.inversion+d.financiamiento,g=(s||0)+j,N=[];N.push({name:"Saldo Inicial",value:0,start:s||0,fill:"hsl(var(--chart-balance))",isTotal:!0});const _=(s||0)+d.operativo;N.push({name:"Activ. Operativas",value:s||0,start:d.operativo,fill:d.operativo>=0?"hsl(var(--chart-income))":"hsl(var(--chart-expense))",isTotal:!1}),N.push({name:"Subtotal Operativo",value:0,start:_,fill:"hsl(var(--chart-balance))",isTotal:!0});const b=_+d.inversion;N.push({name:"Activ. Inversin",value:_,start:d.inversion,fill:d.inversion>=0?"hsl(var(--chart-income))":"hsl(var(--chart-expense))",isTotal:!1}),N.push({name:"Subtotal Inversin",value:0,start:b,fill:"hsl(var(--chart-balance))",isTotal:!0}),N.push({name:"Activ. Financ.",value:b,start:d.financiamiento,fill:d.financiamiento>=0?"hsl(var(--chart-income))":"hsl(var(--chart-expense))",isTotal:!1}),N.push({name:"SALDO FINAL",value:0,start:g,fill:"hsl(var(--chart-balance))",isTotal:!0});const w=C=>`$${Math.abs(C).toLocaleString("es-MX",{minimumFractionDigits:0,maximumFractionDigits:0})}`,S=({active:C,payload:A})=>{if(C&&A&&A.length){const P=A[0].payload,k=(P.isTotal,P.start);return r.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-foreground mb-1",children:P.name}),r.jsx("p",{className:`text-sm ${k>=0?"text-green-600":"text-red-600"}`,children:w(k)})]})}return null};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(G,{className:"border-2",children:[r.jsxs(ne,{className:"bg-muted/50",children:[r.jsx(ae,{className:"text-2xl",children:"1. Grfico de Cascada del Flujo de Efectivo"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualizacin del impacto de cada categora de actividades en el efectivo"})]}),r.jsxs(Q,{className:"p-6",children:[r.jsx(mt,{width:"100%",height:500,children:r.jsxs(Gt,{data:N,margin:{top:20,right:30,left:60,bottom:80},barGap:8,children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(jt,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fill:"hsl(var(--foreground))",fontSize:11,fontWeight:500},interval:0}),r.jsx(gt,{tickFormatter:C=>w(C),tick:{fill:"hsl(var(--foreground))",fontSize:11},width:80}),r.jsx(yt,{content:r.jsx(S,{})}),r.jsx(yl,{y:0,stroke:"#374151",strokeWidth:2}),r.jsx(rt,{dataKey:"value",stackId:"stack",isAnimationActive:!1,children:N.map((C,A)=>r.jsx(Kt,{fill:"transparent",style:{pointerEvents:"none"}},`cell-value-${A}`))}),r.jsx(rt,{dataKey:"start",stackId:"stack",radius:[6,6,6,6],label:{position:"top",content:({x:C,y:A,width:P,value:k,index:E})=>{const O=N[E];return O?r.jsx("text",{x:Number(C)+Number(P)/2,y:Number(A)-5,fill:"hsl(var(--foreground))",textAnchor:"middle",dominantBaseline:"bottom",fontSize:10,fontWeight:"bold",children:w(O.start)}):null}},children:N.map((C,A)=>r.jsx(Kt,{fill:C.fill,stroke:C.isTotal?"#000":"transparent",strokeWidth:C.isTotal?2:0},`cell-start-${A}`))})]})}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-muted-foreground",children:"Saldo Inicial"}),r.jsx("p",{className:"font-semibold text-lg",children:w(s||0)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-muted-foreground",children:"Flujo Operativo"}),r.jsx("p",{className:`font-semibold text-lg ${d.operativo>=0?"text-green-600":"text-red-600"}`,children:w(d.operativo)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-muted-foreground",children:"Flujo Neto"}),r.jsx("p",{className:`font-semibold text-lg ${j>=0?"text-green-600":"text-red-600"}`,children:w(j)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-muted-foreground",children:"Saldo Final"}),r.jsx("p",{className:`font-semibold text-lg ${g>=0?"text-green-600":"text-red-600"}`,children:w(g)})]})]})]})]}),r.jsxs(G,{className:"border-2",children:[r.jsxs(ne,{className:"bg-muted/50",children:[r.jsx(ae,{className:"text-2xl",children:"2. Composicin de Ingresos y Egresos de Efectivo"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Desglose porcentual por naturaleza de cada flujo"})]}),r.jsx(Q,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-stretch",children:[r.jsx("div",{className:"flex-1 transition-all duration-500 hover:scale-105",style:{minHeight:`${Math.max(200,p/Math.max(p,v)*500)}px`,maxHeight:"600px"},children:r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 p-6 rounded-lg border-2 border-green-200 dark:border-green-800 h-full flex flex-col animate-fade-in",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-green-800 dark:text-green-200",children:"Ingresos de Efectivo"}),r.jsxs("div",{className:"flex-1 flex flex-col justify-center space-y-3",children:[r.jsxs("div",{className:"flex flex-col p-4 bg-white dark:bg-green-950 rounded-md transition-all duration-300 hover:shadow-lg",style:{height:p>0?`${u/p*100}%`:"50%",minHeight:"60px"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"font-medium",children:"Cobros a Clientes"}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-2xl text-green-600",children:[p>0?(u/p*100).toFixed(1):0,"%"]})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-auto",children:["$",u.toLocaleString("es-MX",{minimumFractionDigits:0})]})]}),r.jsxs("div",{className:"flex flex-col p-4 bg-white dark:bg-green-950 rounded-md transition-all duration-300 hover:shadow-lg",style:{height:p>0?`${h/p*100}%`:"50%",minHeight:"60px"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"font-medium",children:"Nuevos Crditos"}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-2xl text-green-600",children:[p>0?(h/p*100).toFixed(1):0,"%"]})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-auto",children:["$",h.toLocaleString("es-MX",{minimumFractionDigits:0})]})]})]}),r.jsxs("div",{className:"flex justify-between border-t-2 border-green-300 pt-3 mt-4",children:[r.jsx("span",{className:"font-bold text-lg",children:"Total Ingresos"}),r.jsxs("span",{className:"font-bold text-xl text-green-700 dark:text-green-300",children:["$",p.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})}),r.jsx("div",{className:"flex-1 transition-all duration-500 hover:scale-105",style:{minHeight:`${Math.max(200,v/Math.max(p,v)*500)}px`,maxHeight:"600px"},children:r.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950 dark:to-red-900 p-6 rounded-lg border-2 border-red-200 dark:border-red-800 h-full flex flex-col animate-fade-in",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-red-800 dark:text-red-200",children:"Egresos de Efectivo"}),r.jsxs("div",{className:"flex-1 flex flex-col justify-center space-y-3",children:[r.jsxs("div",{className:"flex flex-col p-4 bg-white dark:bg-red-950 rounded-md transition-all duration-300 hover:shadow-lg",style:{height:v>0?`${m/v*100}%`:"33.33%",minHeight:"60px"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"font-medium",children:"Pagos a Proveedores"}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-2xl text-red-600",children:[v>0?(m/v*100).toFixed(1):0,"%"]})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-auto",children:["$",m.toLocaleString("es-MX",{minimumFractionDigits:0})]})]}),r.jsxs("div",{className:"flex flex-col p-4 bg-white dark:bg-red-950 rounded-md transition-all duration-300 hover:shadow-lg",style:{height:v>0?`${f/v*100}%`:"33.33%",minHeight:"60px"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"font-medium",children:"Inversiones (CAPEX)"}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-2xl text-red-600",children:[v>0?(f/v*100).toFixed(1):0,"%"]})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-auto",children:["$",f.toLocaleString("es-MX",{minimumFractionDigits:0})]})]}),r.jsxs("div",{className:"flex flex-col p-4 bg-white dark:bg-red-950 rounded-md transition-all duration-300 hover:shadow-lg",style:{height:v>0?`${x/v*100}%`:"33.33%",minHeight:"60px"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"font-medium",children:"Pago de Crditos"}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-2xl text-red-600",children:[v>0?(x/v*100).toFixed(1):0,"%"]})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-auto",children:["$",x.toLocaleString("es-MX",{minimumFractionDigits:0})]})]})]}),r.jsxs("div",{className:"flex justify-between border-t-2 border-red-300 pt-3 mt-4",children:[r.jsx("span",{className:"font-bold text-lg",children:"Total Egresos"}),r.jsxs("span",{className:"font-bold text-xl text-red-700 dark:text-red-300",children:["$",v.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})})]})})]})]})},ITe=({startDate:e,endDate:t})=>{const{data:n,isLoading:s}=it({queryKey:["resumen-financiero",e,t],queryFn:async()=>{const i=e.toISOString().split("T")[0],l=t.toISOString().split("T")[0],{data:c}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").in("cuenta_codigo",["1001","1002"]).lt("asientos_contables.fecha",i);let d=0,u=0;c==null||c.forEach(j=>{const g=(j.debe||0)-(j.haber||0);j.cuenta_codigo==="1001"?d+=g:j.cuenta_codigo==="1002"&&(u+=g)});const{data:m}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").in("cuenta_codigo",["1001","1002"]).lte("asientos_contables.fecha",l);let f=0,h=0;m==null||m.forEach(j=>{const g=(j.debe||0)-(j.haber||0);j.cuenta_codigo==="1001"?f+=g:j.cuenta_codigo==="1002"&&(h+=g)});const x=f-d,p=h-u,v=x+p;return{flujoCaja:x,flujoBancos:p,flujoNeto:v,saldoFinalCaja:f,saldoFinalBancos:h}}}),a=((n==null?void 0:n.saldoFinalCaja)||0)+((n==null?void 0:n.saldoFinalBancos)||0),o=i=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(i);return s?r.jsx(G,{children:r.jsx(Q,{className:"flex items-center justify-center py-8",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(ps,{className:"h-4 w-4"}),"Flujo Efectivo"]})}),r.jsxs(Q,{children:[r.jsx("div",{className:`text-2xl font-bold ${((n==null?void 0:n.flujoCaja)||0)>=0?"text-finance-success":"text-destructive"}`,children:o((n==null?void 0:n.flujoCaja)||0)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Saldo final: ",o((n==null?void 0:n.saldoFinalCaja)||0)]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(ps,{className:"h-4 w-4"}),"Flujo Bancos"]})}),r.jsxs(Q,{children:[r.jsx("div",{className:`text-2xl font-bold ${((n==null?void 0:n.flujoBancos)||0)>=0?"text-finance-success":"text-destructive"}`,children:o((n==null?void 0:n.flujoBancos)||0)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Saldo final: ",o((n==null?void 0:n.saldoFinalBancos)||0)]})]})]}),r.jsxs(G,{className:"border-finance-success bg-finance-success/5",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(_c,{className:"h-4 w-4 text-finance-success"})," Saldo Final (Verificado)"]})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-finance-success",children:o(a)}),r.jsx("p",{className:"text-xs text-finance-success mt-1 font-medium",children:"Coincide con Balanza de Comprobacin"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Efectivo + Bancos"})]})]})]})})},RTe=({startDate:e,endDate:t,filtroMetodoPago:n})=>{const{data:s,isLoading:a}=it({queryKey:["resumen-transacciones",e,t,n],queryFn:async()=>{const{data:l}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          fecha,
          descripcion,
          detalle_asientos(cuenta_codigo, debe, haber, descripcion)
        `).gte("fecha",e.toISOString().split("T")[0]).lte("fecha",t.toISOString().split("T")[0]).order("fecha",{ascending:!1}),c=[],d=[],u=[],m=[],f=[],h=[],x=new Set;return l==null||l.forEach(p=>{if(p.descripcion.includes("REVERSIN:")||p.numero_asiento.startsWith("REV-")){const v=p.descripcion.replace("REVERSIN: Compra de inventario: ",""),j=l.find(g=>g.descripcion.includes(`Compra de inventario: ${v}`)&&!g.descripcion.includes("REVERSIN:")&&g.numero_asiento.startsWith("COMP-INV-")&&new Date(g.fecha)<=new Date(p.fecha));if(j){x.add(p.id),x.add(j.id);const g=j.detalle_asientos||[],N=p.detalle_asientos||[];let _=0,b=0,w="";if(g.forEach(A=>{(A.cuenta_codigo==="1001"||A.cuenta_codigo==="1002")&&(_=(A.debe||0)-(A.haber||0),w=A.cuenta_codigo==="1001"?"efectivo":"bancos")}),!(n==="consolidado"||n==="efectivo"&&w==="efectivo"||n==="bancos"&&w==="bancos"))return;N.forEach(A=>{(A.cuenta_codigo==="1001"||A.cuenta_codigo==="1002")&&(b=(A.debe||0)-(A.haber||0))});let C="No especificado";p.descripcion.includes("Motivo: ")&&(C=p.descripcion.split("Motivo: ")[1]),h.push({id:`cancelacion-${j.numero_asiento}`,movimiento_id:j.numero_asiento.replace("COMP-INV-",""),fecha_original:j.fecha,fecha_cancelacion:p.fecha,descripcion:v,motivo_cancelacion:C,metodo_pago:w,monto_original:Math.abs(_),monto_reversion:Math.abs(b),monto_neto:0,asiento_original:j,asiento_reversion:p,detalles_original:g,detalles_reversion:N})}}}),l==null||l.forEach(p=>{const v=p.detalle_asientos||[];let j=0,g=0,N=!1,_=!1,b="";if(v.forEach(S=>{S.cuenta_codigo==="1001"?(N=!0,j=(S.debe||0)-(S.haber||0),b="efectivo"):S.cuenta_codigo==="1002"&&(_=!0,g=(S.debe||0)-(S.haber||0),b="bancos")}),!N&&!_||n==="efectivo"&&!N||n==="bancos"&&!_)return;const w=j+g;x.has(p.id)||w!==0&&v.forEach(S=>{const C=S.cuenta_codigo;if(C==="1001"||C==="1002")return;const A={id:p.id,created_at:p.fecha,descripcion:p.descripcion,metodo_pago:b,monto_total:Math.abs(w),monto_pagado:Math.abs(w)};C.startsWith("4")&&w>0?c.push({...A,tipo_ingreso:"venta",cliente_nombre:""}):(C==="1005"||C==="1006")&&w<0?d.push({...A,tipo_egreso:"compra_inventario"}):(C.startsWith("5")||C.startsWith("6"))&&w<0?d.push({...A,tipo_egreso:C.startsWith("5")?"costo":"gasto"}):["2001","2002","2003","2004","2005","2006"].includes(C)&&w<0?d.push({...A,tipo_egreso:"pago_proveedor"}):(C.startsWith("12")&&parseInt(C)>=1201||C.startsWith("13"))&&w<0?u.push({...A,producto_nombre:p.descripcion,categoria_activo:C.startsWith("12")?"activo_fijo":"activo_diferido",valor_total:Math.abs(w)}):(C.startsWith("20")||C.startsWith("21"))&&!["2001","2002","2003","2004","2005","2006"].includes(C)?w>0?m.push({...A,nombre:p.descripcion,institucion_financiera:"N/A",tipo_credito:"credito",saldo_inicial:w}):f.push({...A,capital_pagado:Math.abs(w),interes_pagado:0,financiamientos:{nombre:p.descripcion}}):(C==="3001"||C==="3002")&&w>0&&m.push({...A,nombre:"Aportacin de Capital",institucion_financiera:"N/A",tipo_credito:"capital",saldo_inicial:w})})}),{ingresos:c,egresos:d,inversiones:u,financiamientos:m,amortizaciones:f,intereses:[],transaccionesCanceladas:h}}}),o=l=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(l),i=l=>ze(new Date(l),"dd MMM yyyy",{locale:ht});return a?r.jsx(G,{children:r.jsx(Q,{className:"flex items-center justify-center py-12",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Ingresos"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Cliente"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{className:"text-right",children:"Monto de Transaccin"}),r.jsx(me,{className:"text-right",children:"Monto Cobrado/Pagado"})]})}),r.jsx(kt,{children:(s==null?void 0:s.ingresos.length)===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:6,className:"text-center text-muted-foreground",children:"No hay ingresos registrados"})}):s==null?void 0:s.ingresos.map(l=>r.jsxs(Oe,{children:[r.jsx(Z,{children:i(l.created_at)}),r.jsx(Z,{children:l.descripcion}),r.jsx(Z,{children:l.cliente_nombre||"-"}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:l.metodo_pago})}),r.jsx(Z,{className:"text-right",children:o(l.monto_total)}),r.jsx(Z,{className:"text-right text-finance-success font-medium",children:o(l.monto_pagado)})]},l.id))})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Egresos"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{className:"text-right",children:"Monto de Transaccin"}),r.jsx(me,{className:"text-right",children:"Monto Cobrado/Pagado"})]})}),r.jsx(kt,{children:(s==null?void 0:s.egresos.length)===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:6,className:"text-center text-muted-foreground",children:"No hay egresos registrados"})}):s==null?void 0:s.egresos.map(l=>r.jsxs(Oe,{children:[r.jsx(Z,{children:i(l.created_at)}),r.jsx(Z,{children:l.descripcion}),r.jsx(Z,{children:r.jsx(_e,{children:l.tipo_egreso})}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:l.metodo_pago||"-"})}),r.jsx(Z,{className:"text-right",children:o(l.monto_total)}),r.jsx(Z,{className:"text-right text-destructive font-medium",children:o(l.monto_pagado)})]},l.id))})]})})]}),(s==null?void 0:s.transaccionesCanceladas)&&s.transaccionesCanceladas.length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{className:"text-lg flex items-center gap-2",children:["Compras de Inventario Canceladas",r.jsx(_e,{variant:"outline",className:"text-xs",children:"Neto: $0.00"})]})}),r.jsx(Q,{children:r.jsx(Co,{type:"single",collapsible:!0,className:"w-full",children:s.transaccionesCanceladas.map(l=>r.jsxs(Ga,{value:l.id,children:[r.jsx(Ha,{className:"hover:no-underline",children:r.jsxs("div",{className:"flex justify-between items-center w-full pr-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(_e,{variant:"secondary",children:"Cancelada"}),r.jsx("span",{className:"font-medium",children:l.descripcion}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i(l.fecha_original)})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(_e,{variant:"outline",children:l.metodo_pago}),r.jsx("span",{className:"font-mono text-muted-foreground",children:o(0)})]})]})}),r.jsx(Xa,{children:r.jsxs("div",{className:"space-y-4 pt-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-red-50/50 dark:bg-red-950/20",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h4",{className:"font-semibold text-sm",children:" Transaccin Original (Salida)"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i(l.fecha_original)})]}),r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[l.detalles_original.map((c,d)=>r.jsxs(Oe,{children:[r.jsxs(Z,{className:"text-sm",children:[c.cuenta_codigo," - ",c.descripcion]}),r.jsx(Z,{className:"text-right text-sm",children:c.debe>0?o(c.debe):"-"}),r.jsx(Z,{className:"text-right text-sm",children:c.haber>0?o(c.haber):"-"})]},d)),r.jsxs(Oe,{className:"font-medium bg-red-100/50 dark:bg-red-900/30",children:[r.jsx(Z,{children:"Impacto en Efectivo/Bancos"}),r.jsx(Z,{className:"text-right",children:"-"}),r.jsxs(Z,{className:"text-right text-destructive",children:["-",o(l.monto_original)]})]})]})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-green-50/50 dark:bg-green-950/20",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h4",{className:"font-semibold text-sm",children:" Reversin (Entrada)"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i(l.fecha_cancelacion)})]}),r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[l.detalles_reversion.map((c,d)=>r.jsxs(Oe,{children:[r.jsxs(Z,{className:"text-sm",children:[c.cuenta_codigo," - ",c.descripcion]}),r.jsx(Z,{className:"text-right text-sm",children:c.debe>0?o(c.debe):"-"}),r.jsx(Z,{className:"text-right text-sm",children:c.haber>0?o(c.haber):"-"})]},d)),r.jsxs(Oe,{className:"font-medium bg-green-100/50 dark:bg-green-900/30",children:[r.jsx(Z,{children:"Impacto en Efectivo/Bancos"}),r.jsxs(Z,{className:"text-right text-finance-success",children:["+",o(l.monto_reversion)]}),r.jsx(Z,{className:"text-right",children:"-"})]})]})]})]}),r.jsx("div",{className:"border-2 border-primary/30 rounded-lg p-4 bg-primary/5",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-sm mb-1",children:" Impacto Neto"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.jsx("strong",{children:"Motivo:"})," ",l.motivo_cancelacion]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:o(0)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"(Sin impacto en flujo de efectivo)"})]})]})})]})})]},l.id))})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Inversiones"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Producto"}),r.jsx(me,{children:"Categora"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{className:"text-right",children:"Monto de Transaccin"}),r.jsx(me,{className:"text-right",children:"Monto Cobrado/Pagado"})]})}),r.jsx(kt,{children:(s==null?void 0:s.inversiones.length)===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:6,className:"text-center text-muted-foreground",children:"No hay inversiones registradas"})}):s==null?void 0:s.inversiones.map(l=>r.jsxs(Oe,{children:[r.jsx(Z,{children:i(l.created_at)}),r.jsx(Z,{children:l.producto_nombre}),r.jsx(Z,{children:r.jsx(_e,{children:l.categoria_activo})}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:l.metodo_pago||"-"})}),r.jsx(Z,{className:"text-right",children:o(l.valor_total)}),r.jsx(Z,{className:"text-right text-destructive font-medium",children:o(l.monto_pagado)})]},l.id))})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Financiamientos"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Nombre"}),r.jsx(me,{children:"Institucin"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{className:"text-right",children:"Monto Cobrado/Pagado"})]})}),r.jsx(kt,{children:(s==null?void 0:s.financiamientos.length)===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:5,className:"text-center text-muted-foreground",children:"No hay financiamientos registrados"})}):s==null?void 0:s.financiamientos.map(l=>r.jsxs(Oe,{children:[r.jsx(Z,{children:i(l.created_at)}),r.jsx(Z,{children:l.nombre}),r.jsx(Z,{children:l.institucion_financiera}),r.jsx(Z,{children:r.jsx(_e,{children:l.tipo_credito})}),r.jsx(Z,{className:"text-right text-finance-success font-medium",children:o(l.saldo_inicial)})]},l.id))})]})})]}),(s==null?void 0:s.amortizaciones)&&s.amortizaciones.length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Amortizaciones"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Financiamiento"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{className:"text-right",children:"Capital"}),r.jsx(me,{className:"text-right",children:"Inters"}),r.jsx(me,{className:"text-right",children:"Monto Cobrado/Pagado"})]})}),r.jsx(kt,{children:s.amortizaciones.map(l=>{var c;return r.jsxs(Oe,{children:[r.jsx(Z,{children:i(l.created_at)}),r.jsx(Z,{children:((c=l.financiamientos)==null?void 0:c.nombre)||"-"}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:l.metodo_pago||"-"})}),r.jsx(Z,{className:"text-right",children:o(l.capital_pagado||0)}),r.jsx(Z,{className:"text-right",children:o(l.interes_pagado||0)}),r.jsx(Z,{className:"text-right text-destructive font-medium",children:o((l.capital_pagado||0)+(l.interes_pagado||0))})]},l.id)})})]})})]})]})},LTe=()=>{const[e,t]=y.useState("mensual"),[n,s]=y.useState(new Date),[a,o]=y.useState("consolidada"),[i,l]=y.useState("ejecutivo"),[c,d]=y.useState("consolidado"),m=(()=>{switch(e){case"diario":return{startDate:Nl(n),endDate:nC(n)};case"mensual":return{startDate:dr(n),endDate:Ds(n)};case"anual":return{startDate:Va(n),endDate:Oh(n)};default:return{startDate:dr(n),endDate:Ds(n)}}})();return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Flujo de Efectivo"}),r.jsx("p",{className:"text-muted-foreground",children:"Anlisis de movimientos que afectan efectivo y bancos"})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex-1 min-w-[180px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tipo de Perodo"}),r.jsxs(De,{value:e,onValueChange:f=>t(f),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"diario",children:"Diario"}),r.jsx(le,{value:"mensual",children:"Mensual (Acumulado)"}),r.jsx(le,{value:"anual",children:"Anual (Acumulado)"})]})]})]}),r.jsxs("div",{className:"flex-1 min-w-[180px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Vista"}),r.jsxs(De,{value:a,onValueChange:f=>o(f),disabled:i==="analitico"||i==="resumen",children:[r.jsx(ke,{className:i==="analitico"||i==="resumen"?"opacity-50 cursor-not-allowed":"",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"consolidada",children:"Total Consolidado"}),r.jsx(le,{value:"detallada",children:"Efectivo / Bancos / Total"})]})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fecha"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),n?ze(n,"PPP",{locale:ht}):"Seleccionar fecha"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:n,onSelect:f=>f&&s(f),initialFocus:!0,className:"pointer-events-auto",locale:ht})})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Rango de Consulta"}),r.jsxs("div",{className:"text-sm text-muted-foreground bg-background p-3 rounded-md border",children:[ze(m.startDate,"dd/MM/yyyy",{locale:ht})," - ",ze(m.endDate,"dd/MM/yyyy",{locale:ht})]})]}),(i==="analitico"||i==="resumen")&&r.jsxs("div",{className:"flex-1 min-w-[180px]",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filtro de Cuentas"}),r.jsxs(De,{value:c,onValueChange:f=>d(f),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"consolidado",children:"Consolidado (Efectivo + Bancos)"}),r.jsx(le,{value:"efectivo",children:"Solo Efectivo"}),r.jsx(le,{value:"bancos",children:"Solo Bancos"})]})]})]})]}),r.jsx(ITe,{startDate:m.startDate,endDate:m.endDate}),r.jsxs(Lr,{defaultValue:"ejecutivo",className:"w-full",onValueChange:f=>{l(f),(f==="analitico"||f==="resumen")&&o("consolidada")},children:[r.jsxs(Dr,{className:"grid w-full grid-cols-4",children:[r.jsx(Qe,{value:"ejecutivo",children:"Formato Ejecutivo"}),r.jsx(Qe,{value:"operativo",children:"Formato Operativo"}),r.jsx(Qe,{value:"analitico",children:"Formato Analtico"}),r.jsx(Qe,{value:"resumen",children:"Resumen Transacciones"})]}),r.jsx(Je,{value:"ejecutivo",className:"mt-6",children:r.jsx(DTe,{startDate:m.startDate,endDate:m.endDate,periodType:e,vistaColumnas:a})}),r.jsx(Je,{value:"operativo",className:"mt-6",children:r.jsx($Te,{startDate:m.startDate,endDate:m.endDate,periodType:e,vistaColumnas:a})}),r.jsx(Je,{value:"analitico",className:"mt-6",children:r.jsx(FTe,{startDate:m.startDate,endDate:m.endDate,periodType:e,vistaColumnas:a,filtroMetodoPago:c})}),r.jsx(Je,{value:"resumen",className:"mt-6",children:r.jsx(RTe,{startDate:m.startDate,endDate:m.endDate,filtroMetodoPago:c})})]})]})},zj=fL,Vj=I2,Wj=L2,BTe=()=>{var pe,we,re,de,he,ee,z;const[e,t]=y.useState("todos"),[n,s]=y.useState(dr(new Date)),[a,o]=y.useState(Ds(new Date)),[i,l]=y.useState("todos"),[c,d]=y.useState("todos"),[u,m]=y.useState("todos"),[f,h]=y.useState(""),[x,p]=y.useState("todos"),[v,j]=y.useState("todos"),[g,N]=y.useState("todos"),_=e==="balance"||e==="todos"?new Date(a.getFullYear()-10,0,1):n,{data:b,isLoading:w}=Il(_,a),{data:S}=Ca(),C=y.useMemo(()=>{if(!(S!=null&&S.estadosFinancieros))return[];const U=e==="balance"?"Balance General":e==="resultados"?"Estado de Resultados":null;return U?Object.keys(S.estadosFinancieros[U]||{}):[...Object.keys(S.estadosFinancieros["Balance General"]||{}),...Object.keys(S.estadosFinancieros["Estado de Resultados"]||{})].filter((oe,Se,Ne)=>Ne.indexOf(oe)===Se)},[S,e]),A=y.useMemo(()=>{var oe,Se,Ne;if(x==="todos"||!(S!=null&&S.estadosFinancieros))return[];const U=e==="balance"?"Balance General":e==="resultados"?"Estado de Resultados":null;if(!U){const $=Object.keys(((oe=S.estadosFinancieros["Balance General"])==null?void 0:oe[x])||{}),ie=Object.keys(((Se=S.estadosFinancieros["Estado de Resultados"])==null?void 0:Se[x])||{});return[...$,...ie].filter((J,ge,je)=>je.indexOf(J)===ge)}return Object.keys(((Ne=S.estadosFinancieros[U])==null?void 0:Ne[x])||{})},[S,x,e]),P=y.useMemo(()=>{var oe,Se,Ne,$,ie,J;if(v==="todos"||!(S!=null&&S.estadosFinancieros))return[];const U=e==="balance"?"Balance General":e==="resultados"?"Estado de Resultados":null;if(!U){const ge=((Se=(oe=S.estadosFinancieros["Balance General"])==null?void 0:oe[x])==null?void 0:Se[v])||[],je=(($=(Ne=S.estadosFinancieros["Estado de Resultados"])==null?void 0:Ne[x])==null?void 0:$[v])||[];return[...ge,...je]}return((J=(ie=S.estadosFinancieros[U])==null?void 0:ie[x])==null?void 0:J[v])||[]},[S,x,v,e]);y.useEffect(()=>{p("todos"),j("todos"),N("todos")},[e]);const k=U=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(U);if(w)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Cargando balanza..."})]})});if(!b)return r.jsx("div",{className:"container mx-auto p-6",children:r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsx("p",{className:"text-center text-muted-foreground",children:"No se pudieron cargar los datos de la balanza"})})})});const{movimientos:E,saldosPorCuenta:O}=b;let M=E;if(e==="resultados"?M=E.filter(U=>["4","5","6"].includes(U.cuenta_codigo.charAt(0))):e==="balance"&&(M=E.filter(U=>["1","2","3"].includes(U.cuenta_codigo.charAt(0)))),g!=="todos")M=M.filter(U=>U.cuenta_codigo===g);else if(v!=="todos"&&P.length>0){const U=P.map(oe=>oe.codigo);M=M.filter(oe=>U.includes(oe.cuenta_codigo))}else if(x!=="todos"&&(S!=null&&S.estadosFinancieros)){const U=e==="balance"?"Balance General":e==="resultados"?"Estado de Resultados":null;if(U){const Se=Object.values(((pe=S.estadosFinancieros[U])==null?void 0:pe[x])||{}).flat().map(Ne=>Ne.codigo);M=M.filter(Ne=>Se.includes(Ne.cuenta_codigo))}else{const oe=Object.values(((we=S.estadosFinancieros["Balance General"])==null?void 0:we[x])||{}).flat(),Se=Object.values(((re=S.estadosFinancieros["Estado de Resultados"])==null?void 0:re[x])||{}).flat(),Ne=[...oe,...Se].map($=>$.codigo);M=M.filter($=>Ne.includes($.cuenta_codigo))}}let T=O;if(e==="resultados"){const U=Object.keys(O).filter(oe=>["4","5","6"].includes(oe.charAt(0)));T=Object.fromEntries(U.map(oe=>[oe,O[oe]]))}else if(e==="balance"){const U=Object.keys(O).filter(oe=>["1","2","3"].includes(oe.charAt(0)));T=Object.fromEntries(U.map(oe=>[oe,O[oe]]))}if(g!=="todos"){const U=g;T=T[U]?{[U]:T[U]}:{}}else if(v!=="todos"&&P.length>0){const U=P.map(oe=>oe.codigo);T=Object.fromEntries(Object.entries(T).filter(([oe])=>U.includes(oe)))}else if(x!=="todos"&&(S!=null&&S.estadosFinancieros)){const U=e==="balance"?"Balance General":e==="resultados"?"Estado de Resultados":null;if(U){const Se=Object.values(((de=S.estadosFinancieros[U])==null?void 0:de[x])||{}).flat().map(Ne=>Ne.codigo);T=Object.fromEntries(Object.entries(T).filter(([Ne])=>Se.includes(Ne)))}else{const oe=Object.values(((he=S.estadosFinancieros["Balance General"])==null?void 0:he[x])||{}).flat(),Se=Object.values(((ee=S.estadosFinancieros["Estado de Resultados"])==null?void 0:ee[x])||{}).flat(),Ne=[...oe,...Se].map($=>$.codigo);T=Object.fromEntries(Object.entries(T).filter(([$])=>Ne.includes($)))}}const V=new Map(((z=S==null?void 0:S.cuentasFlat)==null?void 0:z.map(U=>[U.codigo,{nombre:U.nombre,estado_financiero:U.estado_financiero}]))||[]),I=new Date;I.setHours(0,0,0,0);const F=M.some(U=>{const[oe,Se,Ne]=U.fecha.split("/");return new Date(parseInt(Ne),parseInt(Se)-1,parseInt(oe))>I});if(!M||M.length===0)return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"Balanza de Comprobacin"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Vista detallada de todos los movimientos contables del periodo"})]}),r.jsx(G,{children:r.jsx(Q,{className:"p-12",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No hay movimientos contables registrados"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comienza registrando transacciones para ver la balanza de comprobacin"})]})})})]});const D={};e==="todos"?M.forEach(U=>{D[U.referencia]||(D[U.referencia]={referencia:U.referencia,fecha:U.fecha,tipo:U.tipo,descripcion:U.descripcion,movimientos:[],totalDebe:0,totalHaber:0}),D[U.referencia].movimientos.push(U),D[U.referencia].totalDebe+=U.debe,D[U.referencia].totalHaber+=U.haber}):new Set(M.map(oe=>oe.referencia)).forEach(oe=>{const Se=E.filter(J=>J.referencia===oe),Ne=new Set(M.filter(J=>J.referencia===oe).map(J=>J.cuenta_codigo)),$=Se.filter(J=>Ne.has(J.cuenta_codigo));let ie;if($.length>0){const J=$.reduce((We,$t)=>We+$t.debe,0),ge=$.reduce((We,$t)=>We+$t.haber,0),je=$[0].cuenta_codigo.charAt(0),Ce=["1","5","6"].includes(je)?J-ge:ge-J;ie={debe:J,haber:ge,neto:Ce,esAumento:Ce>0,codigoCuenta:$[0].cuenta_codigo}}D[oe]={referencia:oe,fecha:Se[0].fecha,tipo:Se[0].tipo,descripcion:Se[0].descripcion,movimientos:Se.map(J=>({...J,esCuentaFiltrada:Ne.has(J.cuenta_codigo)})),totalDebe:Se.reduce((J,ge)=>J+ge.debe,0),totalHaber:Se.reduce((J,ge)=>J+ge.haber,0),efectoNetoCuentaFiltrada:ie}});const X=Object.values(D),W=X.map(U=>{const oe=U.descripcion.toLowerCase();if(oe.includes("reversin:")||oe.includes("reversion:")||oe.includes("cancelacin de egreso:")||oe.includes("cancelacion de egreso:"))return null;const Ne=X.find($=>{const ie=$.descripcion.toLowerCase();if(!ie.includes("reversin:")&&!ie.includes("reversion:")&&!ie.includes("cancelacin de egreso:")&&!ie.includes("cancelacion de egreso:"))return!1;const J=U.referencia.match(/^([A-Z]+)-(.+)$/);if(!J)return!1;const ge=J[2];return $.referencia.includes(ge)});return{...U,esCancelado:!!Ne,asientoReversion:Ne||null}}).filter(Boolean);let B=W;if(i!=="todos"&&(B=B.filter(U=>U.tipo===i)),c!=="todos"&&(B=B.filter(U=>{const oe=Math.abs(U.totalDebe-U.totalHaber);return c==="cuadrado"?oe<.01:c==="descuadrado"?oe>=.01:!0})),u!=="todos"&&(B=B.filter(U=>U.movimientos.some(oe=>{const Se=oe.cuenta_codigo.charAt(0);return u==="balance"?["1","2","3"].includes(Se):u==="resultados"?["4","5","6"].includes(Se):!0}))),f){const U=f.toLowerCase();B=B.filter(oe=>oe.descripcion.toLowerCase().includes(U)||oe.referencia.toLowerCase().includes(U)||oe.movimientos.some(Se=>Se.cuenta_nombre.toLowerCase().includes(U)||Se.cuenta_codigo.toLowerCase().includes(U)))}const q=Object.values(T).reduce((U,oe)=>U+oe.debe_total,0),te=Object.values(T).reduce((U,oe)=>U+oe.haber_total,0),Y=Math.abs(q-te),H=Y<.01,L=Array.from(new Set(W.map(U=>U.tipo))).sort(),ue=()=>{switch(e){case"todos":return`Vista completa de todas las cuentas al corte del ${ze(a,"dd/MM/yyyy")}. Muestra el saldo acumulado desde el inicio de operaciones.`;case"resultados":return"Cuentas de ingresos, costos y gastos del perodo seleccionado (Cuentas 4xxx, 5xxx, 6xxx)";case"balance":return`Cuentas de activos, pasivos y capital al corte de ${ze(a,"PPP",{locale:ht})} (Cuentas 1xxx, 2xxx, 3xxx)`;default:return"Vista detallada de todos los movimientos contables del periodo"}};return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Balanza de Comprobacin"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:ue()})]}),r.jsxs(Lr,{value:e,onValueChange:t,children:[r.jsxs(Dr,{className:"grid w-full max-w-2xl grid-cols-3",children:[r.jsx(Qe,{value:"todos",children:"Balanza de Comprobacin"}),r.jsx(Qe,{value:"resultados",children:"Balanza de Resultados"}),r.jsx(Qe,{value:"balance",children:"Balanza de Balance"})]}),r.jsxs(Je,{value:e,className:"space-y-6 mt-6",children:[F&&r.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Wr,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-yellow-900 dark:text-yellow-200",children:"Asientos con fechas futuras detectados"}),r.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Esta balanza incluye asientos contables con fechas posteriores a hoy. Esto es normal para depreciaciones mensuales o proyecciones."})]})]})}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dg,{className:"h-5 w-5"}),e==="todos"?"Fecha de Corte":"Filtros de Anlisis"]}),e!=="todos"&&r.jsx(Me,{children:e==="balance"?"Navega desde grupos hasta cuentas especficas para analizar tu posicin financiera":"Filtra por grupos, subgrupos y cuentas para anlisis detallado"})]}),r.jsx(Q,{className:"space-y-4",children:e==="todos"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Fecha de Corte"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),a?ze(a,"PPP",{locale:ht}):"Seleccionar"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:a,onSelect:U=>U&&o(U),initialFocus:!0,className:"pointer-events-auto"})})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Tipo de Transaccin"}),r.jsxs(De,{value:i,onValueChange:l,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),L.map(U=>r.jsx(le,{value:U,children:U},U))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Estado del Asiento"}),r.jsxs(De,{value:c,onValueChange:d,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"cuadrado",children:"Cuadrado"}),r.jsx(le,{value:"descuadrado",children:"Descuadrado"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Estado Financiero"}),r.jsxs(De,{value:u,onValueChange:m,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"balance",children:"Balance General"}),r.jsx(le,{value:"resultados",children:"Estado de Resultados"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Bsqueda"}),r.jsx(Ae,{placeholder:"Buscar...",value:f,onChange:U=>h(U.target.value)})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e!=="balance"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"start-date",children:"Fecha Inicio"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{id:"start-date",variant:"outline",className:Te("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),n?ze(n,"PPP",{locale:ht}):"Seleccionar"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:n,onSelect:U=>U&&s(U),initialFocus:!0,className:"pointer-events-auto"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"end-date",children:e==="balance"?"Fecha de Corte":"Fecha Fin"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{id:"end-date",variant:"outline",className:Te("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),a?ze(a,"PPP",{locale:ht}):"Seleccionar"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:a,onSelect:U=>U&&o(U),initialFocus:!0,className:"pointer-events-auto"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Grupo"}),r.jsxs(De,{value:x,onValueChange:U=>{p(U),j("todos"),N("todos")},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los Grupos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los Grupos"}),C.map(U=>r.jsx(le,{value:U,children:U},U))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Subgrupo"}),r.jsxs(De,{value:v,onValueChange:U=>{j(U),N("todos")},disabled:x==="todos",children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los Subgrupos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los Subgrupos"}),A.map(U=>r.jsx(le,{value:U,children:U},U))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Cuenta"}),r.jsxs(De,{value:g,onValueChange:N,disabled:v==="todos",children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todas las Cuentas"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todas las Cuentas"}),P.map(U=>r.jsxs(le,{value:U.codigo,children:[U.codigo," - ",U.nombre]},U.codigo))]})]})]})]}),(x!=="todos"||v!=="todos"||g!=="todos")&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsx(dg,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),r.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 flex-1",children:["Filtros activos: ",x!=="todos"&&x,v!=="todos"&&` > ${v}`,g!=="todos"&&` > ${g}`]}),r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>{p("todos"),j("todos"),N("todos")},className:"h-7 text-xs",children:"Limpiar filtros"})]})]})})]}),e==="todos"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Debe"})}),r.jsx(Q,{children:r.jsx("p",{className:"text-2xl font-bold text-green-600",children:k(q)})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Haber"})}),r.jsx(Q,{children:r.jsx("p",{className:"text-2xl font-bold text-red-600",children:k(te)})})]}),r.jsxs(G,{className:H?"border-green-500":"border-red-500",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-sm font-medium",children:"Estado"})}),r.jsxs(Q,{children:[r.jsx("p",{className:`text-2xl font-bold ${H?"text-green-600":"text-red-600"}`,children:H?" Cuadrado":" Descuadrado"}),!H&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Diferencia: ",k(Y)]})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{children:["Asientos Contables (",B.length," de ",W.length,")"]})}),r.jsx(Q,{children:r.jsx("div",{className:"space-y-2",children:B.map(U=>{const Se=Math.abs(U.totalDebe-U.totalHaber)<.01,Ne=U;return r.jsx(zj,{children:r.jsxs(G,{className:Ne.esCancelado?"border-red-300 bg-red-50 dark:bg-red-950/20":Se||e!=="todos"?"":"border-red-300",children:[r.jsx(Vj,{asChild:!0,children:r.jsx(ne,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[r.jsx(Ua,{className:"h-4 w-4 transition-transform data-[state=open]:rotate-90"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[Ne.esCancelado&&r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:U.referencia}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:U.fecha}),(()=>{const[$,ie,J]=U.fecha.split("/"),ge=new Date(parseInt(J),parseInt(ie)-1,parseInt($)),je=new Date;return je.setHours(0,0,0,0),ge>je?r.jsx(_e,{variant:"outline",className:"text-xs bg-yellow-50 dark:bg-yellow-950/30 text-yellow-700 dark:text-yellow-400 border-yellow-300 dark:border-yellow-700",children:"Futuro"}):null})()]})]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Ne.esCancelado&&r.jsx("span",{className:"px-3 py-1 rounded-md text-xs font-bold bg-red-500 text-white shadow-sm",children:"CANCELADO"}),r.jsx("p",{className:`text-sm ${Ne.esCancelado?"line-through text-muted-foreground":""}`,children:U.descripcion})]})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:k(U.totalDebe)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Debe"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-medium text-red-600",children:k(U.totalHaber)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Haber"})]}),e!=="todos"&&U.efectoNetoCuentaFiltrada&&r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`flex items-center justify-end gap-1 text-sm font-bold ${U.efectoNetoCuentaFiltrada.esAumento?"text-green-600":"text-red-600"}`,children:U.efectoNetoCuentaFiltrada.esAumento?r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["+",k(Math.abs(U.efectoNetoCuentaFiltrada.neto))]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["-",k(Math.abs(U.efectoNetoCuentaFiltrada.neto))]})]})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Efecto Neto"})]})]}),!Se&&!Ne.esCancelado&&e==="todos"&&r.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Descuadrado"})]})})})}),r.jsx(Wj,{children:r.jsxs(Q,{children:[r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[U.movimientos.map(($,ie)=>r.jsxs(Oe,{className:$.esCuentaFiltrada?"bg-blue-50 dark:bg-blue-950/30":"",children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[$.esCuentaFiltrada&&r.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm",children:$.cuenta_codigo}),r.jsx("p",{className:"text-xs text-muted-foreground",children:$.cuenta_nombre})]})]})}),r.jsx(Z,{children:$.descripcion}),r.jsx(Z,{className:"text-right",children:$.debe>0&&r.jsx("span",{className:"text-green-600 font-medium",children:k($.debe)})}),r.jsx(Z,{className:"text-right",children:$.haber>0&&r.jsx("span",{className:"text-red-600 font-medium",children:k($.haber)})})]},ie)),r.jsxs(Oe,{className:"font-bold bg-muted/50",children:[r.jsx(Z,{colSpan:2,children:"Total"}),r.jsx(Z,{className:"text-right text-green-600",children:k(U.totalDebe)}),r.jsx(Z,{className:"text-right text-red-600",children:k(U.totalHaber)})]})]})]}),e!=="todos"&&U.movimientos.some($=>$.esCuentaFiltrada)&&r.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-950/30 rounded border border-blue-200 dark:border-blue-800",children:r.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:""}),"Las filas resaltadas son las cuentas que coinciden con tu filtro actual"]})}),Ne.asientoReversion&&r.jsxs("div",{className:"mt-4 p-4 bg-orange-100 dark:bg-orange-950/40 rounded-md border border-orange-300 dark:border-orange-800",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsxs("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:[" Asiento de Reversin: ",Ne.asientoReversion.referencia]}),r.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400",children:["(",Ne.asientoReversion.fecha,")"]})]}),r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[Ne.asientoReversion.movimientos.map(($,ie)=>r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-xs",children:$.cuenta_codigo}),r.jsx("p",{className:"text-xs text-muted-foreground",children:$.cuenta_nombre})]})}),r.jsx(Z,{className:"text-xs",children:$.descripcion}),r.jsx(Z,{className:"text-right",children:$.debe>0&&r.jsx("span",{className:"text-green-600 font-medium text-xs",children:k($.debe)})}),r.jsx(Z,{className:"text-right",children:$.haber>0&&r.jsx("span",{className:"text-red-600 font-medium text-xs",children:k($.haber)})})]},ie)),r.jsxs(Oe,{className:"font-bold bg-muted/50",children:[r.jsx(Z,{colSpan:2,children:"Total Reversin"}),r.jsx(Z,{className:"text-right text-green-600 text-xs",children:k(Ne.asientoReversion.totalDebe)}),r.jsx(Z,{className:"text-right text-red-600 text-xs",children:k(Ne.asientoReversion.totalHaber)})]})]})]})]})]})})]})},U.referencia)})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Saldos por Cuenta"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cdigo"}),r.jsx(me,{children:"Nombre de Cuenta"}),r.jsx(me,{children:"Estado Financiero"}),r.jsx(me,{className:"text-right",children:"Total Debe"}),r.jsx(me,{className:"text-right",children:"Total Haber"}),r.jsx(me,{className:"text-right",children:"Saldo"})]})}),r.jsxs(kt,{children:[Object.values(T).sort((U,oe)=>U.cuenta_codigo.localeCompare(oe.cuenta_codigo)).map(U=>{const oe=V.get(U.cuenta_codigo);return r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-mono text-xs",children:U.cuenta_codigo}),r.jsx(Z,{className:"text-sm",children:(oe==null?void 0:oe.nombre)||"N/A"}),r.jsx(Z,{className:"text-xs text-muted-foreground",children:(oe==null?void 0:oe.estado_financiero)||"N/A"}),r.jsx(Z,{className:"text-right text-green-600",children:k(U.debe_total)}),r.jsx(Z,{className:"text-right text-red-600",children:k(U.haber_total)}),r.jsx(Z,{className:"text-right font-medium",children:k(U.saldo)})]},U.cuenta_codigo)}),r.jsxs(Oe,{className:"font-bold bg-muted/50",children:[r.jsx(Z,{colSpan:3,children:"TOTALES"}),r.jsx(Z,{className:"text-right text-green-600",children:k(q)}),r.jsx(Z,{className:"text-right text-red-600",children:k(te)}),r.jsx(Z,{className:"text-right",children:k(Math.abs(q-te))})]})]})]})})]})]})]})]})};var Q1=["Enter"," "],zTe=["ArrowDown","PageUp","Home"],U8=["ArrowUp","PageDown","End"],VTe=[...zTe,...U8],WTe={ltr:[...Q1,"ArrowRight"],rtl:[...Q1,"ArrowLeft"]},qTe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},yp="Menu",[kh,UTe,KTe]=qh(yp),[Xc,K8]=hn(yp,[KTe,Al,gm]),qj=Al(),G8=gm(),[GTe,Yc]=Xc(yp),[HTe,bp]=Xc(yp),H8=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:o,modal:i=!0}=e,l=qj(t),[c,d]=y.useState(null),u=y.useRef(!1),m=fs(o),f=xm(a);return y.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),r.jsx(u0,{...l,children:r.jsx(GTe,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:d,children:r.jsx(HTe,{scope:t,onClose:y.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:f,modal:i,children:s})})})};H8.displayName=yp;var XTe="MenuAnchor",_C=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=qj(n);return r.jsx(Zh,{...a,...s,ref:t})});_C.displayName=XTe;var SC="MenuPortal",[YTe,X8]=Xc(SC,{forceMount:void 0}),Y8=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,o=Yc(SC,t);return r.jsx(YTe,{scope:t,forceMount:n,children:r.jsx(Qn,{present:n||o.open,children:r.jsx(Uu,{asChild:!0,container:a,children:s})})})};Y8.displayName=SC;var xa="MenuContent",[QTe,CC]=Xc(xa),Q8=y.forwardRef((e,t)=>{const n=X8(xa,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=Yc(xa,e.__scopeMenu),i=bp(xa,e.__scopeMenu);return r.jsx(kh.Provider,{scope:e.__scopeMenu,children:r.jsx(Qn,{present:s||o.open,children:r.jsx(kh.Slot,{scope:e.__scopeMenu,children:i.modal?r.jsx(ZTe,{...a,ref:t}):r.jsx(JTe,{...a,ref:t})})})})}),ZTe=y.forwardRef((e,t)=>{const n=Yc(xa,e.__scopeMenu),s=y.useRef(null),a=Ft(t,s);return y.useEffect(()=>{const o=s.current;if(o)return Sj(o)},[]),r.jsx(PC,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ge(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),JTe=y.forwardRef((e,t)=>{const n=Yc(xa,e.__scopeMenu);return r.jsx(PC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),eke=hl("MenuContent.ScrollLock"),PC=y.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:f,onDismiss:h,disableOutsideScroll:x,...p}=e,v=Yc(xa,n),j=bp(xa,n),g=qj(n),N=G8(n),_=UTe(n),[b,w]=y.useState(null),S=y.useRef(null),C=Ft(t,S,v.onContentChange),A=y.useRef(0),P=y.useRef(""),k=y.useRef(0),E=y.useRef(null),O=y.useRef("right"),M=y.useRef(0),T=x?dp:y.Fragment,V=x?{as:eke,allowPinchZoom:!0}:void 0,I=D=>{var L,ue;const X=P.current+D,W=_().filter(pe=>!pe.disabled),B=document.activeElement,q=(L=W.find(pe=>pe.ref.current===B))==null?void 0:L.textValue,te=W.map(pe=>pe.textValue),Y=mke(te,X,q),H=(ue=W.find(pe=>pe.textValue===Y))==null?void 0:ue.ref.current;(function pe(we){P.current=we,window.clearTimeout(A.current),we!==""&&(A.current=window.setTimeout(()=>pe(""),1e3))})(X),H&&setTimeout(()=>H.focus())};y.useEffect(()=>()=>window.clearTimeout(A.current),[]),wj();const F=y.useCallback(D=>{var W,B;return O.current===((W=E.current)==null?void 0:W.side)&&hke(D,(B=E.current)==null?void 0:B.area)},[]);return r.jsx(QTe,{scope:n,searchRef:P,onItemEnter:y.useCallback(D=>{F(D)&&D.preventDefault()},[F]),onItemLeave:y.useCallback(D=>{var X;F(D)||((X=S.current)==null||X.focus(),w(null))},[F]),onTriggerLeave:y.useCallback(D=>{F(D)&&D.preventDefault()},[F]),pointerGraceTimerRef:k,onPointerGraceIntentChange:y.useCallback(D=>{E.current=D},[]),children:r.jsx(T,{...V,children:r.jsx(cp,{asChild:!0,trapped:a,onMountAutoFocus:Ge(o,D=>{var X;D.preventDefault(),(X=S.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:r.jsx(zc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:f,onDismiss:h,children:r.jsx(q2,{asChild:!0,...N,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:b,onCurrentTabStopIdChange:w,onEntryFocus:Ge(c,D=>{j.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(m0,{role:"menu","aria-orientation":"vertical","data-state":fz(v.open),"data-radix-menu-content":"",dir:j.dir,...g,...p,ref:C,style:{outline:"none",...p.style},onKeyDown:Ge(p.onKeyDown,D=>{const W=D.target.closest("[data-radix-menu-content]")===D.currentTarget,B=D.ctrlKey||D.altKey||D.metaKey,q=D.key.length===1;W&&(D.key==="Tab"&&D.preventDefault(),!B&&q&&I(D.key));const te=S.current;if(D.target!==te||!VTe.includes(D.key))return;D.preventDefault();const H=_().filter(L=>!L.disabled).map(L=>L.ref.current);U8.includes(D.key)&&H.reverse(),dke(H)}),onBlur:Ge(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(A.current),P.current="")}),onPointerMove:Ge(e.onPointerMove,$h(D=>{const X=D.target,W=M.current!==D.clientX;if(D.currentTarget.contains(X)&&W){const B=D.clientX>M.current?"right":"left";O.current=B,M.current=D.clientX}}))})})})})})})});Q8.displayName=xa;var tke="MenuGroup",AC=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Ze.div,{role:"group",...s,ref:t})});AC.displayName=tke;var rke="MenuLabel",Z8=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Ze.div,{...s,ref:t})});Z8.displayName=rke;var Rv="MenuItem",kk="menu.itemSelect",Uj=y.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,o=y.useRef(null),i=bp(Rv,e.__scopeMenu),l=CC(Rv,e.__scopeMenu),c=Ft(t,o),d=y.useRef(!1),u=()=>{const m=o.current;if(!n&&m){const f=new CustomEvent(kk,{bubbles:!0,cancelable:!0});m.addEventListener(kk,h=>s==null?void 0:s(h),{once:!0}),eS(m,f),f.defaultPrevented?d.current=!1:i.onClose()}};return r.jsx(J8,{...a,ref:c,disabled:n,onClick:Ge(e.onClick,u),onPointerDown:m=>{var f;(f=e.onPointerDown)==null||f.call(e,m),d.current=!0},onPointerUp:Ge(e.onPointerUp,m=>{var f;d.current||(f=m.currentTarget)==null||f.click()}),onKeyDown:Ge(e.onKeyDown,m=>{const f=l.searchRef.current!=="";n||f&&m.key===" "||Q1.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Uj.displayName=Rv;var J8=y.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...o}=e,i=CC(Rv,n),l=G8(n),c=y.useRef(null),d=Ft(t,c),[u,m]=y.useState(!1),[f,h]=y.useState("");return y.useEffect(()=>{const x=c.current;x&&h((x.textContent??"").trim())},[o.children]),r.jsx(kh.ItemSlot,{scope:n,disabled:s,textValue:a??f,children:r.jsx(U2,{asChild:!0,...l,focusable:!s,children:r.jsx(Ze.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:d,onPointerMove:Ge(e.onPointerMove,$h(x=>{s?i.onItemLeave(x):(i.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ge(e.onPointerLeave,$h(x=>i.onItemLeave(x))),onFocus:Ge(e.onFocus,()=>m(!0)),onBlur:Ge(e.onBlur,()=>m(!1))})})})}),nke="MenuCheckboxItem",ez=y.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(az,{scope:e.__scopeMenu,checked:n,children:r.jsx(Uj,{role:"menuitemcheckbox","aria-checked":Lv(n)?"mixed":n,...a,ref:t,"data-state":MC(n),onSelect:Ge(a.onSelect,()=>s==null?void 0:s(Lv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ez.displayName=nke;var tz="MenuRadioGroup",[ske,ake]=Xc(tz,{value:void 0,onValueChange:()=>{}}),rz=y.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,o=fs(s);return r.jsx(ske,{scope:e.__scopeMenu,value:n,onValueChange:o,children:r.jsx(AC,{...a,ref:t})})});rz.displayName=tz;var nz="MenuRadioItem",sz=y.forwardRef((e,t)=>{const{value:n,...s}=e,a=ake(nz,e.__scopeMenu),o=n===a.value;return r.jsx(az,{scope:e.__scopeMenu,checked:o,children:r.jsx(Uj,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":MC(o),onSelect:Ge(s.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,n)},{checkForDefaultPrevented:!1})})})});sz.displayName=nz;var EC="MenuItemIndicator",[az,oke]=Xc(EC,{checked:!1}),oz=y.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,o=oke(EC,n);return r.jsx(Qn,{present:s||Lv(o.checked)||o.checked===!0,children:r.jsx(Ze.span,{...a,ref:t,"data-state":MC(o.checked)})})});oz.displayName=EC;var ike="MenuSeparator",iz=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});iz.displayName=ike;var lke="MenuArrow",lz=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=qj(n);return r.jsx(f0,{...a,...s,ref:t})});lz.displayName=lke;var cke="MenuSub",[EFe,cz]=Xc(cke),Zm="MenuSubTrigger",dz=y.forwardRef((e,t)=>{const n=Yc(Zm,e.__scopeMenu),s=bp(Zm,e.__scopeMenu),a=cz(Zm,e.__scopeMenu),o=CC(Zm,e.__scopeMenu),i=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:e.__scopeMenu},u=y.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),r.jsx(_C,{asChild:!0,...d,children:r.jsx(J8,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":fz(n.open),...e,ref:ii(t,a.onTriggerChange),onClick:m=>{var f;(f=e.onClick)==null||f.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ge(e.onPointerMove,$h(m=>{o.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ge(e.onPointerLeave,$h(m=>{var h,x;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const p=(x=n.content)==null?void 0:x.dataset.side,v=p==="right",j=v?-5:5,g=f[v?"left":"right"],N=f[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+j,y:m.clientY},{x:g,y:f.top},{x:N,y:f.top},{x:N,y:f.bottom},{x:g,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ge(e.onKeyDown,m=>{var h;const f=o.searchRef.current!=="";e.disabled||f&&m.key===" "||WTe[s.dir].includes(m.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),m.preventDefault())})})})});dz.displayName=Zm;var uz="MenuSubContent",mz=y.forwardRef((e,t)=>{const n=X8(xa,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=Yc(xa,e.__scopeMenu),i=bp(xa,e.__scopeMenu),l=cz(uz,e.__scopeMenu),c=y.useRef(null),d=Ft(t,c);return r.jsx(kh.Provider,{scope:e.__scopeMenu,children:r.jsx(Qn,{present:s||o.open,children:r.jsx(kh.Slot,{scope:e.__scopeMenu,children:r.jsx(PC,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;i.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ge(e.onFocusOutside,u=>{u.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ge(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Ge(e.onKeyDown,u=>{var h;const m=u.currentTarget.contains(u.target),f=qTe[i.dir].includes(u.key);m&&f&&(o.onOpenChange(!1),(h=l.trigger)==null||h.focus(),u.preventDefault())})})})})})});mz.displayName=uz;function fz(e){return e?"open":"closed"}function Lv(e){return e==="indeterminate"}function MC(e){return Lv(e)?"indeterminate":e?"checked":"unchecked"}function dke(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function uke(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function mke(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=uke(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function fke(e,t){const{x:n,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,u=l.y,m=c.x,f=c.y;u>s!=f>s&&n<(m-d)*(s-u)/(f-u)+d&&(a=!a)}return a}function hke(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return fke(n,t)}function $h(e){return t=>t.pointerType==="mouse"?e(t):void 0}var pke=H8,xke=_C,gke=Y8,vke=Q8,jke=AC,yke=Z8,bke=Uj,Nke=ez,wke=rz,_ke=sz,Ske=oz,Cke=iz,Pke=lz,Ake=dz,Eke=mz,Kj="DropdownMenu",[Mke,MFe]=hn(Kj,[K8]),ys=K8(),[Oke,hz]=Mke(Kj),pz=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=ys(t),d=y.useRef(null),[u,m]=hs({prop:a,defaultProp:o??!1,onChange:i,caller:Kj});return r.jsx(Oke,{scope:t,triggerId:cn(),triggerRef:d,contentId:cn(),open:u,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(f=>!f),[m]),modal:l,children:r.jsx(pke,{...c,open:u,onOpenChange:m,dir:s,modal:l,children:n})})};pz.displayName=Kj;var xz="DropdownMenuTrigger",gz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,o=hz(xz,n),i=ys(n);return r.jsx(xke,{asChild:!0,...i,children:r.jsx(Ze.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ii(t,o.triggerRef),onPointerDown:Ge(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Ge(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});gz.displayName=xz;var Tke="DropdownMenuPortal",vz=e=>{const{__scopeDropdownMenu:t,...n}=e,s=ys(t);return r.jsx(gke,{...s,...n})};vz.displayName=Tke;var jz="DropdownMenuContent",yz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=hz(jz,n),o=ys(n),i=y.useRef(!1);return r.jsx(vke,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:Ge(e.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:Ge(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yz.displayName=jz;var kke="DropdownMenuGroup",$ke=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(jke,{...a,...s,ref:t})});$ke.displayName=kke;var Dke="DropdownMenuLabel",bz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(yke,{...a,...s,ref:t})});bz.displayName=Dke;var Fke="DropdownMenuItem",Nz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(bke,{...a,...s,ref:t})});Nz.displayName=Fke;var Ike="DropdownMenuCheckboxItem",wz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(Nke,{...a,...s,ref:t})});wz.displayName=Ike;var Rke="DropdownMenuRadioGroup",Lke=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(wke,{...a,...s,ref:t})});Lke.displayName=Rke;var Bke="DropdownMenuRadioItem",_z=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(_ke,{...a,...s,ref:t})});_z.displayName=Bke;var zke="DropdownMenuItemIndicator",Sz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(Ske,{...a,...s,ref:t})});Sz.displayName=zke;var Vke="DropdownMenuSeparator",Cz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(Cke,{...a,...s,ref:t})});Cz.displayName=Vke;var Wke="DropdownMenuArrow",qke=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(Pke,{...a,...s,ref:t})});qke.displayName=Wke;var Uke="DropdownMenuSubTrigger",Pz=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(Ake,{...a,...s,ref:t})});Pz.displayName=Uke;var Kke="DropdownMenuSubContent",Az=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=ys(n);return r.jsx(Eke,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Az.displayName=Kke;var Gke=pz,Hke=gz,Xke=vz,Ez=yz,Mz=bz,Oz=Nz,Tz=wz,kz=_z,$z=Sz,Dz=Cz,Fz=Pz,Iz=Az;const $k=Gke,Dk=Hke,Yke=y.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(Fz,{ref:a,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,r.jsx(Ua,{className:"ml-auto h-4 w-4"})]}));Yke.displayName=Fz.displayName;const Qke=y.forwardRef(({className:e,...t},n)=>r.jsx(Iz,{ref:n,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Qke.displayName=Iz.displayName;const Z1=y.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(Xke,{children:r.jsx(Ez,{ref:s,sideOffset:t,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Z1.displayName=Ez.displayName;const Jm=y.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(Oz,{ref:s,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Jm.displayName=Oz.displayName;const Zke=y.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(Tz,{ref:a,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx($z,{children:r.jsx(Gh,{className:"h-4 w-4"})})}),t]}));Zke.displayName=Tz.displayName;const Jke=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(kz,{ref:s,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx($z,{children:r.jsx(WF,{className:"h-2 w-2 fill-current"})})}),t]}));Jke.displayName=kz.displayName;const J1=y.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(Mz,{ref:s,className:Te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));J1.displayName=Mz.displayName;const Lx=y.forwardRef(({className:e,...t},n)=>r.jsx(Dz,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));Lx.displayName=Dz.displayName;const Qc=()=>{const e=Gr(),{data:t=[],isLoading:n}=it({queryKey:["inversiones"],queryFn:async()=>{const{data:c,error:d}=await ce.from("inversiones_capex").select("*").order("fecha_adquisicion",{ascending:!1});if(d)throw d;return c}}),{data:s=[]}=it({queryKey:["recomendaciones_depreciacion"],queryFn:async()=>{const{data:c,error:d}=await ce.from("recomendaciones_depreciacion").select("*").order("categoria_activo");if(d)throw d;return c}}),a=Qt({mutationFn:async c=>{const{data:d,error:u}=await ce.from("inversiones_capex").insert([c]).select().single();if(u)throw u;return d},onSuccess:()=>{e.invalidateQueries({queryKey:["inversiones"]}),Le({title:"Inversin registrada",description:"La inversin CAPEX se ha registrado correctamente"})},onError:c=>{Le({title:"Error",description:c.message||"No se pudo registrar la inversin",variant:"destructive"})}}),o=Qt({mutationFn:async({id:c,actualizacion:d})=>{const{data:u,error:m}=await ce.from("inversiones_capex").update(d).eq("id",c).select().single();if(m)throw m;return u},onSuccess:()=>{e.invalidateQueries({queryKey:["inversiones"]}),Le({title:"Inversin actualizada",description:"La inversin se ha actualizado correctamente"})},onError:c=>{Le({title:"Error",description:c.message||"No se pudo actualizar la inversin",variant:"destructive"})}}),i=Qt({mutationFn:async c=>{const{error:d}=await ce.from("inversiones_capex").delete().eq("id",c);if(d)throw d},onSuccess:()=>{e.invalidateQueries({queryKey:["inversiones"]}),Le({title:"Inversin eliminada",description:"La inversin se ha eliminado correctamente"})},onError:c=>{Le({title:"Error",description:c.message||"No se pudo eliminar la inversin",variant:"destructive"})}}),l=Qt({mutationFn:async({id:c,fecha_baja:d,motivo_baja:u,valor_venta:m,estado:f,metodo_pago_venta:h,tipo_pago_venta:x,monto_pagado_venta:p,monto_pendiente_venta:v,fecha_vencimiento_venta:j,comprador_nombre:g,comprador_rfc:N,comprador_telefono:_,comprador_email:b})=>{const{data:w,error:S}=await ce.from("inversiones_capex").update({estado:f,fecha_baja:d,motivo_baja:u,valor_venta:m,metodo_pago_venta:h,tipo_pago_venta:x,monto_pagado_venta:p,monto_pendiente_venta:v,fecha_vencimiento_venta:j,comprador_nombre:g,comprador_rfc:N,comprador_telefono:_,comprador_email:b}).eq("id",c).select().single();if(S)throw S;return w},onSuccess:(c,d)=>{e.invalidateQueries({queryKey:["inversiones"]});const u=d.estado==="vendido"?"vendido":"dado de baja";Le({title:"Activo actualizado",description:`El activo ha sido ${u} correctamente`})},onError:c=>{Le({title:"Error",description:c.message||"No se pudo dar de baja el activo",variant:"destructive"})}});return{inversiones:t,recomendaciones:s,isLoading:n,crearInversion:a,actualizarInversion:o,eliminarInversion:i,darDeBajaActivo:l}},Rz=()=>it({queryKey:["depreciaciones-reales"],queryFn:async()=>{const{data:e,error:t}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          fecha,
          detalle_asientos (
            cuenta_codigo,
            debe,
            haber
          )
        `).like("numero_asiento","DEP-%").order("fecha",{ascending:!1});if(t)return console.error("Error fetching depreciaciones reales:",t),{};const n={},s={};return e==null||e.forEach(a=>{var d;const o=a.numero_asiento.match(/DEP-([a-f0-9-]+)-(\d{6})/);if(!o)return;const i=o[1],l=o[2],c=((d=a.detalle_asientos)==null?void 0:d.filter(u=>u.cuenta_codigo==="5109").reduce((u,m)=>u+m.debe,0))||0;n[i]||(n[i]=0),n[i]+=c,s[i]||(s[i]=new Set),s[i].add(l)}),{depreciacionesPorInversion:n,periodosRegistrados:s}}}),Np=()=>{const{inversiones:e,isLoading:t}=Qc(),{data:n,isLoading:s}=Rz(),a=y.useMemo(()=>{if(!e||!(n!=null&&n.periodosRegistrados))return[];const l=new Date,c=l.getMonth()+1,d=l.getFullYear(),u=[],m=e.filter(f=>f.estado==="activo"&&(f.valor_depreciacion_mensual||0)>0);for(const f of m){const h=f.fecha_inicio_depreciacion?new Date(f.fecha_inicio_depreciacion):new Date(f.fecha_adquisicion),x=h.getMonth()+1,p=h.getFullYear(),v=[];let j=x,g=p;for(;g<d||g===d&&j<c;)v.push(`${g}${j.toString().padStart(2,"0")}`),j++,j>12&&(j=1,g++);const N=n.periodosRegistrados[f.id]||[],_=Array.isArray(N)?N:Array.from(N);for(const b of v)if(!_.includes(b)){const w=parseInt(b.substring(0,4)),S=parseInt(b.substring(4,6)),C=new Date(w,S-1,1),A=GPe(dr(l),dr(C));u.push({inversionId:f.id,productoNombre:f.producto_nombre,mesAno:b,mesesAtrasados:A})}}return u},[e,n]),o=a.length>0,i=a.length;return{depreciacionesAtrasadas:a,tieneAtrasadas:o,totalAtrasadas:i,isLoading:t||s}},e$e=({collapsed:e,onToggle:t})=>{const n=Ju(),{totalAtrasadas:s,isLoading:a}=Np(),[o,i]=y.useState("Usuario"),[l,c]=y.useState(null);y.useEffect(()=>{try{const b=localStorage.getItem("bukipin_user");if(b){const w=JSON.parse(b);w!=null&&w.name&&i(w.name),w!=null&&w.email&&c(w.email)}}catch(b){console.error("Error leyendo bukipin_user de localStorage:",b)}},[]);const d=o&&o.trim().length>0?o.trim().charAt(0).toUpperCase():"U",[u,m]=y.useState({contabilidad:!1,registros:!1,cobrosPagos:!1,estadosFinancieros:!1,analisisFinanciero:!1}),f=b=>{e||m(w=>({...w,[b]:!w[b]}))},h=[{name:"Dashboard",path:"/",icon:Zq,active:n.pathname==="/"}],x=[{name:"Plan de Cuentas",path:"/plan-cuentas",active:n.pathname==="/plan-cuentas"}],p=[{name:"Estado de Resultados",path:"/estados-financieros/resultados",active:n.pathname==="/estados-financieros/resultados"},{name:"Balance General",path:"/estados-financieros/balance",active:n.pathname==="/estados-financieros/balance"},{name:"Flujo de Efectivo",path:"/estados-financieros/flujo-efectivo",active:n.pathname==="/estados-financieros/flujo-efectivo"},{name:"Balanza",path:"/estados-financieros/balanza",active:n.pathname==="/estados-financieros/balanza"}],v=[{name:"Registro de Ingresos",path:"/registros/ingresos",active:n.pathname==="/registros/ingresos"},{name:"Registro de Egresos",path:"/registros/egresos",active:n.pathname==="/registros/egresos"},{name:"Registro de Inversiones",path:"/registros/inversiones",active:n.pathname==="/registros/inversiones"},{name:"Registro de Inventario",path:"/registros/inventario",active:n.pathname==="/registros/inventario"},{name:"Registro de Financiamientos",path:"/registros/financiamientos",active:n.pathname==="/registros/financiamientos"},{name:"Registro de Capital",path:"/registros/capital",active:n.pathname==="/registros/capital"},{name:"Registro de Impuestos",path:"/registros/impuestos",active:n.pathname==="/registros/impuestos"}],j=[{name:"Cuentas por Cobrar",path:"/cobros-pagos/cuentas-por-cobrar",active:n.pathname==="/cobros-pagos/cuentas-por-cobrar"},{name:"Cuentas por Pagar",path:"/cobros-pagos/cuentas-por-pagar",active:n.pathname==="/cobros-pagos/cuentas-por-pagar"},{name:"Base de Datos Clientes",path:"/clientes",active:n.pathname==="/clientes"},{name:"Base de Datos Proveedores",path:"/proveedores",active:n.pathname==="/proveedores"}],g=[{name:"Resultados",path:"/analisis-financiero/resultados",active:n.pathname==="/analisis-financiero/resultados"},{name:"Balance",path:"/analisis-financiero/balance",active:n.pathname==="/analisis-financiero/balance"}],N=[{key:"contabilidad",label:"Contabilidad",icon:zF,items:x},{key:"registros",label:"Registros",icon:On,items:v},{key:"cobrosPagos",label:"Cobros y Pagos",icon:li,items:j},{key:"estadosFinancieros",label:"Estados Financieros",icon:Ku,items:p},{key:"analisisFinanciero",label:"Anlisis Financiero",icon:tr,items:g}],_=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(b){console.error("Error al cerrar sesin:",b)}finally{try{localStorage.removeItem("bukipin_user"),localStorage.removeItem("bukipin_token")}catch{}window.location.href="/"}};return r.jsxs("div",{className:Te("bg-sidebar h-screen flex flex-col transition-all duration-300 ease-in-out",e?"w-16":"w-64"),children:[r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[!e&&r.jsx("h1",{className:"text-xl font-bold text-sidebar-foreground",children:"Bukipin"}),r.jsx(Pe,{variant:"ghost",size:"icon",onClick:t,className:"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:e?r.jsx(tU,{className:"h-5 w-5"}):r.jsx(eU,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"px-3 pb-4",children:r.jsx("nav",{className:"space-y-1",children:h.map(b=>r.jsxs(vA,{delayDuration:0,children:[r.jsx(jA,{asChild:!0,children:r.jsx(Hp,{to:b.path,children:r.jsxs(Pe,{variant:"ghost",size:"sm",className:Te("w-full justify-start text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground transition-colors duration-200",b.active&&"bg-sidebar-accent text-sidebar-accent-foreground font-medium",e&&"justify-center px-2"),children:[r.jsx(b.icon,{className:Te("h-4 w-4",!e&&"mr-2")}),!e&&b.name]})})}),e&&r.jsx(zN,{side:"right",className:"bg-sidebar text-sidebar-foreground border-sidebar-border",children:b.name})]},b.name))})}),r.jsx(Jr,{className:"mx-4 bg-sidebar-border"}),r.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-3 py-2 space-y-1 sidebar-scroll",children:N.map(b=>r.jsx("div",{children:e?r.jsxs($k,{children:[r.jsxs(vA,{delayDuration:0,children:[r.jsx(jA,{asChild:!0,children:r.jsx(Dk,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",size:"sm",className:"w-full justify-center px-2 text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:r.jsx(b.icon,{className:"h-4 w-4"})})})}),r.jsx(zN,{side:"right",className:"bg-sidebar text-sidebar-foreground border-sidebar-border",children:b.label})]}),r.jsxs(Z1,{side:"right",align:"start",className:"w-56",children:[r.jsx(J1,{children:b.label}),r.jsx(Lx,{}),b.items.map(w=>r.jsx(Jm,{asChild:!0,children:r.jsxs(Hp,{to:w.path,className:Te("cursor-pointer",w.active&&"bg-accent font-medium"),children:[w.name,b.key==="registros"&&w.name==="Registro de Inversiones"&&!a&&s>0&&r.jsx(_e,{variant:"destructive",className:"ml-auto text-xs",children:s})]})},w.name))]})]}):r.jsxs(zj,{open:u[b.key],onOpenChange:()=>f(b.key),children:[r.jsx(Vj,{asChild:!0,children:r.jsxs(Pe,{variant:"ghost",className:"w-full justify-between text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(b.icon,{className:"h-4 w-4"}),r.jsx("span",{className:"font-semibold text-sm",children:b.label})]}),u[b.key]?r.jsx(Po,{className:"h-4 w-4"}):r.jsx(Ua,{className:"h-4 w-4"})]})}),r.jsx(Wj,{className:"space-y-1 mt-1",children:b.items.map(w=>r.jsx(Hp,{to:w.path,children:r.jsxs(Pe,{variant:"ghost",size:"sm",className:Te("w-full justify-between ml-6 text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground transition-colors duration-200",w.active&&"bg-sidebar-accent text-sidebar-accent-foreground font-medium"),children:[r.jsx("span",{className:"text-xs",children:w.name}),b.key==="registros"&&w.name==="Registro de Inversiones"&&!a&&s>0&&r.jsx(_e,{variant:"destructive",className:"ml-auto text-xs",children:s})]})},w.name))})]})},b.key))}),r.jsx("div",{className:"p-3 border-t border-sidebar-border",children:r.jsxs($k,{children:[r.jsx(Dk,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",className:Te("w-full hover:bg-sidebar-accent p-2",e?"justify-center":"justify-start"),children:r.jsxs("div",{className:Te("flex items-center w-full",e?"justify-center":"space-x-3"),children:[r.jsx("div",{className:"w-8 h-8 bg-sidebar-primary rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-sidebar-primary-foreground font-medium text-sm",children:d})}),!e&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[r.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:o}),r.jsx("p",{className:"text-xs text-sidebar-foreground opacity-70 truncate",children:l||"Administrador"})]}),r.jsx(Po,{className:"h-4 w-4 text-sidebar-foreground opacity-50"})]})]})})}),r.jsxs(Z1,{align:"end",className:"w-56 mb-2",children:[r.jsx(J1,{children:"Mi Cuenta"}),r.jsx(Lx,{}),r.jsxs(Jm,{disabled:!0,children:[r.jsx(Zo,{className:"h-4 w-4 mr-2"}),"Perfil"]}),r.jsx(Jm,{asChild:!0,children:r.jsxs(Hp,{to:"/configuracion",className:"flex items-center cursor-pointer",children:[r.jsx(o0,{className:"h-4 w-4 mr-2"}),"Configuracin"]})}),r.jsx(Lx,{}),r.jsxs(Jm,{onClick:_,className:"text-red-600 focus:text-red-600 cursor-pointer",children:[r.jsx(Jq,{className:"h-4 w-4 mr-2"}),"Cerrar sesin"]})]})]})})]})},t$e="modulepreload",r$e=function(e){return"/dashboard/"+e},Fk={},n$e=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=r$e(c),c in Fk)return;Fk[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":t$e,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function Ik(e){const t=e instanceof Error?e.message:String(e);return/Loading chunk [\d]+ failed|ChunkLoadError|import\(\) failed/i.test(t)}class s$e extends K.Component{constructor(){super(...arguments);Jj(this,"state",{error:null});Jj(this,"handleRetry",()=>{if(Ik(this.state.error)){window.location.reload();return}this.setState({error:null})})}static getDerivedStateFromError(n){return{error:n}}componentDidCatch(n){console.error("RegistroIngresos.page error:",n)}render(){return this.state.error?r.jsx("div",{className:"flex min-h-[70vh] items-center justify-center px-6",children:r.jsxs("div",{className:"max-w-md w-full rounded-lg border bg-background p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Wr,{className:"h-5 w-5 text-destructive"}),r.jsx("h2",{className:"text-base font-semibold",children:"No se pudo cargar el mdulo"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ocurri un error al cargar ",r.jsx("b",{children:"Registro de Ingresos"}),"."," ",Ik(this.state.error)?"Esto suele pasar despus de un deploy. Recarga la pgina.":"Reintenta y revisa la consola para ver el detalle."]}),r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsxs(Pe,{onClick:this.handleRetry,variant:"default",children:[r.jsx(rU,{className:"h-4 w-4 mr-2"}),"Reintentar"]}),r.jsx(Pe,{variant:"outline",onClick:()=>console.error("Detalle error:",this.state.error),children:"Ver detalle (consola)"})]})]})}):this.props.children}}const a$e=K.lazy(()=>n$e(()=>import("./RegistroIngresos-C6LnENUx.js"),[]));function o$e(){return r.jsx(s$e,{children:r.jsx(y.Suspense,{fallback:r.jsx("div",{className:"flex min-h-[70vh] items-center justify-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Vr,{className:"h-4 w-4 animate-spin"}),"Cargando mdulo de Registro de Ingresos"]})}),children:r.jsx(a$e,{})})})}async function jm(e,t={}){const n=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{}},credentials:"include"}),s=await n.text();let a=null;try{a=s?JSON.parse(s):null}catch{a=s}if(!n.ok){const o=(a==null?void 0:a.message)||(a==null?void 0:a.error)||`HTTP ${n.status}`;throw Object.assign(new Error(o),{status:n.status,data:a})}return a}async function Lz(e,t,n){const s=await fetch(e,{method:t,body:n,credentials:"include"}),a=await s.text();let o=null;try{o=a?JSON.parse(a):null}catch{o=a}if(!s.ok){const i=(o==null?void 0:o.message)||(o==null?void 0:o.error)||`HTTP ${s.status}`;throw Object.assign(new Error(i),{status:s.status,data:o})}return o}const Gj=()=>it({queryKey:["productos-egresos"],queryFn:async()=>await jm("/api/productos-egresos?activo=true")||[]}),i$e=()=>{const e=Gr();return Qt({mutationFn:async t=>{if(!!t.imagen){const a=new FormData;return a.append("nombre",t.nombre),t.descripcion&&a.append("descripcion",t.descripcion),a.append("tipo",t.tipo),a.append("unidad",t.unidad),t.proveedor_principal&&a.append("proveedor_principal",t.proveedor_principal),a.append("es_recurrente",String(t.es_recurrente??!1)),a.append("subcuenta_id",t.subcuenta_id||""),a.append("cuenta_contable",t.cuenta_contable),a.append("imagen",t.imagen),await Lz("/api/productos-egresos","POST",a)}const s={nombre:t.nombre,descripcion:t.descripcion,tipo:t.tipo,unidad:t.unidad,proveedor_principal:t.proveedor_principal,es_recurrente:t.es_recurrente??!1,subcuenta_id:t.subcuenta_id||null,cuenta_contable:t.cuenta_contable};return await jm("/api/productos-egresos",{method:"POST",body:JSON.stringify(s)})},onSuccess:t=>{e.invalidateQueries({queryKey:["productos-egresos"]}),Le({title:" Producto agregado",description:`${t.tipo==="gasto"?"Gasto":"Costo"} "${t.nombre}" agregado al catlogo${t.imagen_url?" con imagen":""}`})},onError:t=>{console.error(" Error creando producto:",t),Le({title:" Error",description:(t==null?void 0:t.message)||"Hubo un problema al agregar el producto",variant:"destructive"})}})},l$e=()=>{const e=Gr();return Qt({mutationFn:async t=>{if(!!t.imagen){const a=new FormData;return t.nombre!==void 0&&a.append("nombre",t.nombre),t.descripcion!==void 0&&a.append("descripcion",t.descripcion),t.tipo!==void 0&&a.append("tipo",t.tipo),t.unidad!==void 0&&a.append("unidad",t.unidad),t.proveedor_principal!==void 0&&a.append("proveedor_principal",t.proveedor_principal),t.es_recurrente!==void 0&&a.append("es_recurrente",String(t.es_recurrente)),t.subcuenta_id!==void 0&&a.append("subcuenta_id",t.subcuenta_id||""),t.cuenta_contable!==void 0&&a.append("cuenta_contable",t.cuenta_contable),a.append("imagen",t.imagen),await Lz(`/api/productos-egresos/${t.id}`,"PATCH",a)}const s={};return t.nombre!==void 0&&(s.nombre=t.nombre),t.descripcion!==void 0&&(s.descripcion=t.descripcion),t.tipo!==void 0&&(s.tipo=t.tipo),t.unidad!==void 0&&(s.unidad=t.unidad),t.proveedor_principal!==void 0&&(s.proveedor_principal=t.proveedor_principal),t.es_recurrente!==void 0&&(s.es_recurrente=t.es_recurrente),t.subcuenta_id!==void 0&&(s.subcuenta_id=t.subcuenta_id||null),t.cuenta_contable!==void 0&&(s.cuenta_contable=t.cuenta_contable),await jm(`/api/productos-egresos/${t.id}`,{method:"PATCH",body:JSON.stringify(s)})},onSuccess:t=>{e.invalidateQueries({queryKey:["productos-egresos"]}),Le({title:" Producto actualizado",description:`${t.tipo==="gasto"?"Gasto":"Costo"} "${t.nombre}" actualizado correctamente`})},onError:t=>{console.error(" Error actualizando producto:",t),Le({title:" Error",description:(t==null?void 0:t.message)||"Hubo un problema al actualizar el producto",variant:"destructive"})}})},c$e=()=>{const e=Gr();return Qt({mutationFn:async t=>{await jm(`/api/productos-egresos/${t}`,{method:"PATCH",body:JSON.stringify({activo:!1})})},onSuccess:()=>{e.invalidateQueries({queryKey:["productos-egresos"]}),Le({title:" Producto eliminado",description:"El producto ha sido eliminado del catlogo"})},onError:t=>{console.error(" Error eliminando producto:",t),Le({title:" Error",description:(t==null?void 0:t.message)||"Hubo un problema al eliminar el producto",variant:"destructive"})}})},d$e=()=>{const{data:e=[]}=Gj(),{proveedores:t,createProveedor:n}=Oj(),{data:s}=fp(),{data:a}=Dl(),[o,i]=y.useState(!0),[l,c]=y.useState(""),[d,u]=y.useState(""),[m,f]=y.useState(null),[h,x]=y.useState("1"),[p,v]=y.useState(""),[j,g]=y.useState(""),[N,_]=y.useState(""),[b,w]=y.useState(""),[S,C]=y.useState(""),[A,P]=y.useState(""),[k,E]=y.useState(""),[O,M]=y.useState(""),[T,V]=y.useState(""),[I,F]=y.useState(""),[D,X]=y.useState(""),[W,B]=y.useState(!1),[q,te]=y.useState(""),[Y,H]=y.useState(""),L=e.filter(z=>z.tipo===l),ue=z=>{c(z),i(!1),u(""),f(null),E(""),v(""),g("")},pe=()=>{i(!0),c(""),u(""),f(null),x("1"),v(""),g(""),_(""),w(""),C(""),P(""),E(""),M(""),V(""),F(""),X(""),B(!1),te(""),H("")},we=z=>{var oe;u(z);const U=e.find(Se=>Se.id===z);if(f(U),U&&(E(U.proveedor_principal||""),v(((oe=U.precio_promedio)==null?void 0:oe.toString())||""),h&&U.precio_promedio)){const Se=(U.precio_promedio*parseFloat(h)).toFixed(2);g(Se)}},re=z=>{if(!z)return"";const U=parseFloat(z.replace(/,/g,""));return isNaN(U)?"":U.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},de=z=>{const U=z.replace(/[^\d.]/g,"");if(x(U),p&&U){const oe=(parseFloat(p)*parseFloat(U)).toFixed(2);g(oe)}},he=z=>{const U=z.replace(/[^\d.]/g,"");if(v(U),h&&U){const oe=(parseFloat(U)*parseFloat(h)).toFixed(2);g(oe)}},ee=async z=>{if(z.preventDefault(),!d||!h||!p||!N){Le({title:" Campos requeridos",description:"Completa todos los campos obligatorios",variant:"destructive"});return}if((N==="credito"||N==="parcial")&&!W){Le({title:" Proveedor requerido",description:"Para pagos a crdito o parciales es obligatorio registrar el proveedor",variant:"destructive"});return}if(W&&!q){Le({title:" Tipo de proveedor requerido",description:"Selecciona si es un proveedor nuevo o existente",variant:"destructive"});return}if(W&&q==="nuevo"&&!k){Le({title:" Nombre del proveedor requerido",description:"Ingresa el nombre del proveedor",variant:"destructive"});return}if(W&&q==="existente"&&!Y){Le({title:" Proveedor no seleccionado",description:"Selecciona un proveedor de la lista",variant:"destructive"});return}try{const{data:{user:U}}=await ce.auth.getUser();if(!U){Le({title:" Error de autenticacin",description:"Debes iniciar sesin para registrar egresos",variant:"destructive"});return}let oe=null;if(W)if(q==="nuevo"){const ge={nombre:k,telefono:O||null,email:T||null,rfc:I||null,direccion:null,ciudad:null,estado:null,codigo_postal:null},{data:je,error:ye}=await n(ge);if(ye){Le({title:" Error al crear proveedor",description:ye,variant:"destructive"});return}oe=je==null?void 0:je.id}else q==="existente"&&(oe=Y);const Se=parseFloat(j)||0,Ne=N==="contado"?Se:N==="parcial"&&parseFloat(S)||0,$=Se-Ne;if(Ne>0&&(b==="efectivo"||b==="tarjeta-transferencia")&&!a){Le({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"});return}if(b==="efectivo"&&Ne>a.efectivo){Le({title:" Saldo insuficiente en efectivo",description:`Disponible: $${a.efectivo.toFixed(2)} | Necesitas: $${Ne.toFixed(2)}`,variant:"destructive"});return}if(b==="tarjeta-transferencia"&&Ne>a.bancos){Le({title:" Saldo insuficiente en bancos",description:`Disponible: $${a.bancos.toFixed(2)} | Necesitas: $${Ne.toFixed(2)}`,variant:"destructive"});return}if(b!=null&&b.startsWith("tarjeta_credito_")&&s){const ge=b.replace("tarjeta_credito_",""),je=hp(ge,Ne,s);if(!je.valido){Le({title:" Lmite de crdito excedido",description:je.mensaje,variant:"destructive"});return}}const{data:ie,error:J}=await ce.functions.invoke("registrar-egreso",{body:{tipo_egreso:l,subtipo_egreso:l==="costo"&&(m!=null&&m.nombre.toLowerCase().includes("inventario"))?"compra_inventario":"precargado",descripcion:(m==null?void 0:m.nombre)||"",cuenta_codigo:(m==null?void 0:m.cuenta_contable)||(l==="costo"?"5001":"6001"),subcuenta_id:null,monto_total:Se,cantidad:parseFloat(h),precio_unitario:parseFloat(p),tipo_pago:N,metodo_pago:b||null,monto_pagado:Ne,monto_pendiente:$,fecha_vencimiento:A||null,proveedor_id:oe,proveedor_nombre:k||null,proveedor_telefono:O||null,proveedor_email:T||null,proveedor_rfc:I||null,producto_egreso_id:d,comentarios:D||null}});if(J)throw console.error("Error en edge function:",J),J;if(console.log("Egreso registrado con asiento:",ie),(m==null?void 0:m.cuenta_contable)==="1005"||(m==null?void 0:m.cuenta_contable)==="1006"){const{data:ge}=await ce.from("productos").select("id, nombre").ilike("nombre",m.nombre).eq("cuenta_codigo",m.cuenta_contable).maybeSingle();if(ge){const je=parseFloat(h),ye=parseFloat(p),Ce=je*ye,{error:We}=await ce.from("movimientos_inventario").insert({user_id:U.id,producto_id:ge.id,tipo_movimiento:"compra",cantidad:je,costo_unitario:ye,costo_total:Ce,descripcion:`Compra de ${m.nombre} - Proveedor: ${k||"No especificado"}`});if(We)throw console.error("Error al crear movimiento de inventario:",We),We}}Le({title:" Egreso registrado",description:`Egreso registrado correctamente con asiento contable ${(ie==null?void 0:ie.numero_asiento)||""}`}),c(""),u(""),f(null),x("1"),v(""),g(""),_(""),w(""),C(""),P(""),E(""),M(""),V(""),F(""),X(""),B(!1),te(""),H("")}catch(U){console.error("Error al registrar egreso:",U),Le({title:" Error",description:"No se pudo registrar el egreso. Intenta nuevamente.",variant:"destructive"})}};return r.jsxs(G,{className:"max-w-5xl mx-auto border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Zr,{className:"h-5 w-5"}),"Registro de Costos y Gastos Precargados"]}),r.jsx(Me,{children:"Registra gastos y costos de productos precargados del catlogo con unidades de medida especficas"})]}),r.jsx(Q,{className:"px-6 pb-6",children:o?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(sr,{className:"mb-4",children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Selecciona el tipo de egreso que deseas registrar"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(G,{className:"cursor-pointer hover:border-primary hover:shadow-lg transition-all",onClick:()=>ue("costo"),children:r.jsxs(ne,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-4 bg-red-100 rounded-full",children:r.jsx(Zr,{className:"h-8 w-8 text-red-600"})})}),r.jsx(ae,{className:"text-lg",children:"Costo"}),r.jsx(Me,{children:"Directamente relacionado con la produccin o venta de productos/servicios"})]})}),r.jsx(G,{className:"cursor-pointer hover:border-primary hover:shadow-lg transition-all",onClick:()=>ue("gasto"),children:r.jsxs(ne,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-4 bg-orange-100 rounded-full",children:r.jsx(Xh,{className:"h-8 w-8 text-orange-600"})})}),r.jsx(ae,{className:"text-lg",children:"Gasto"}),r.jsx(Me,{children:"Gastos operativos, administrativos y de venta"})]})})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs(Pe,{variant:"ghost",onClick:pe,className:"mb-4",children:[r.jsx(Rf,{className:"h-4 w-4 mr-2"}),"Volver a seleccin de tipo"]}),r.jsxs(sr,{className:"mb-4",children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Los productos deben estar registrados en el catlogo para poder seleccionarlos aqu."})]}),r.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Producto"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"producto",children:[l==="costo"?"Costo":"Gasto"," Precargado *"]}),r.jsxs(De,{value:d,onValueChange:we,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:`Seleccionar ${l} del catlogo`})}),r.jsx($e,{children:L.length>0?L.map(z=>r.jsx(le,{value:z.id,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:z.nombre}),r.jsxs("span",{className:"text-muted-foreground text-xs",children:["- ",z.unidad]})]})},z.id)):r.jsxs(le,{value:"no-products",disabled:!0,children:["No hay ",l,"s en el catlogo"]})})]}),L.length===0&&r.jsxs("p",{className:"text-sm text-yellow-600",children:["No hay ",l,"s precargados. Ve al catlogo de costos y gastos para agregar ",l,"s."]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"unidad",children:"Unidad de Medida"}),r.jsx(Ae,{id:"unidad",value:(m==null?void 0:m.unidad)||"",placeholder:"Se completa automticamente",disabled:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"cantidad",children:"Cantidad *"}),r.jsx(Ae,{id:"cantidad",type:"text",value:h,onChange:z=>de(z.target.value),placeholder:"Ej: 10 o 10.5",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"precio-unitario",children:"Precio Unitario *"}),r.jsx(Ae,{id:"precio-unitario",type:"text",value:p,onChange:z=>he(z.target.value),placeholder:"Ej: 100 o 100.50",required:!0}),m&&m.precio_promedio>0&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Precio promedio del catlogo: $",re(m.precio_promedio.toString())]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"total",children:"Monto Total"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(VF,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{id:"total",type:"text",value:j?re(j):"",placeholder:"0.00",disabled:!0,className:"bg-muted"})]})]})]})]}),m&&r.jsxs(r.Fragment,{children:[r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin de Pago"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Pago *"}),r.jsxs(Hn,{value:N,onValueChange:_,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"contado",id:"contado"}),r.jsx(se,{htmlFor:"contado",children:"Pago Total"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"credito",id:"credito"}),r.jsx(se,{htmlFor:"credito",children:"Crdito"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"parcial",id:"parcial"}),r.jsx(se,{htmlFor:"parcial",children:"Pago Parcial"})]})]})]}),(N==="contado"||N==="parcial")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo-pago",children:"Mtodo de Pago"}),r.jsxs(De,{value:b,onValueChange:w,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar mtodo"})}),r.jsxs($e,{children:[r.jsxs(le,{value:"efectivo",children:["Efectivo - Disponible: $",Ke(a==null?void 0:a.efectivo)]}),r.jsxs(le,{value:"tarjeta-transferencia",children:["Bancos - Disponible: $",Ke(a==null?void 0:a.bancos)]}),s==null?void 0:s.map(z=>r.jsxs(le,{value:`tarjeta_credito_${z.id}`,children:[z.nombre," - Disponible: $",Ke(z.limite_disponible)]},z.id))]})]})]}),N==="parcial"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto-pagado",children:"Monto Pagado"}),r.jsx(Ae,{id:"monto-pagado",type:"text",value:S,onChange:z=>{const U=z.target.value.replace(/[^\d.]/g,"");C(U)},placeholder:"Ej: 500 o 500.50"})]})]}),(N==="credito"||N==="parcial")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha-vencimiento",children:"Fecha de Vencimiento"}),r.jsx(Ae,{id:"fecha-vencimiento",type:"date",value:A,onChange:z=>P(z.target.value)})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Proveedor"}),N==="contado"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Deseas registrar informacin del proveedor?"}),r.jsxs(Hn,{value:W?"si":"no",onValueChange:z=>{B(z==="si"),z==="no"&&(te(""),H(""),E(""),M(""),V(""),F(""))},children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"no",id:"no-proveedor"}),r.jsx(se,{htmlFor:"no-proveedor",children:"No, continuar sin proveedor"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"si",id:"si-proveedor"}),r.jsx(se,{htmlFor:"si-proveedor",children:"S, registrar proveedor"})]})]})]}),(N==="credito"||N==="parcial")&&r.jsxs(r.Fragment,{children:[r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"Para pagos a crdito o parciales es obligatorio registrar la informacin del proveedor"})]}),!W&&B(!0)]}),W&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Proveedor *"}),r.jsxs(Hn,{value:q,onValueChange:z=>{te(z),z==="nuevo"?(H(""),E(""),M(""),V(""),F("")):z==="existente"&&(E(""),M(""),V(""),F(""))},children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"nuevo",id:"proveedor-nuevo"}),r.jsx(se,{htmlFor:"proveedor-nuevo",children:"Nuevo Proveedor"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"existente",id:"proveedor-existente"}),r.jsx(se,{htmlFor:"proveedor-existente",children:"Proveedor Existente"})]})]})]}),W&&q==="existente"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-select",children:"Seleccionar Proveedor *"}),r.jsxs(De,{value:Y,onValueChange:z=>{H(z);const U=t.find(oe=>oe.id===z);U&&(E(U.nombre),M(U.telefono||""),V(U.email||""),F(U.rfc||""))},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar proveedor"})}),r.jsx($e,{children:t.length>0?t.map(z=>r.jsxs(le,{value:z.id,children:[z.nombre,z.rfc&&` - ${z.rfc}`]},z.id)):r.jsx(le,{value:"no-proveedores",disabled:!0,children:"No hay proveedores registrados"})})]})]}),W&&q==="nuevo"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-nombre",children:"Nombre del Proveedor *"}),r.jsx(Ae,{id:"proveedor-nombre",value:k,onChange:z=>E(z.target.value),placeholder:"Nombre completo o razn social",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-telefono",children:"Telfono"}),r.jsx(Ae,{id:"proveedor-telefono",value:O,onChange:z=>M(z.target.value),placeholder:"Nmero de telfono"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"No puede repetirse con otro proveedor"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-email",children:"Email"}),r.jsx(Ae,{id:"proveedor-email",type:"email",value:T,onChange:z=>V(z.target.value),placeholder:"correo@ejemplo.com"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"No puede repetirse con otro proveedor"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-rfc",children:"RFC"}),r.jsx(Ae,{id:"proveedor-rfc",value:I,onChange:z=>F(z.target.value),placeholder:"RFC del proveedor"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"No puede repetirse con otro proveedor"})]})]}),W&&q==="existente"&&Y&&r.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[r.jsx("p",{className:"font-semibold",children:"Datos del proveedor seleccionado:"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Nombre:"})," ",k]}),O&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Telfono:"})," ",O]}),T&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",T]}),I&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"RFC:"})," ",I]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin Adicional"}),r.jsx(Kr,{id:"descripcion",value:D,onChange:z=>X(z.target.value),placeholder:"Detalles adicionales del gasto...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{type:"button",variant:"outline",onClick:pe,children:"Cancelar"}),r.jsxs(Pe,{type:"submit",className:"gap-2",children:[r.jsx(a0,{className:"h-4 w-4"}),"Registrar Egreso"]})]})]})]})]})})]})},u$e=()=>{var X;const[e,t]=y.useState(""),[n,s]=y.useState(""),[a,o]=y.useState(""),[i,l]=y.useState(""),[c,d]=y.useState(""),[u,m]=y.useState(""),[f,h]=y.useState(""),[x,p]=y.useState(""),[v,j]=y.useState(""),[g,N]=y.useState(""),[_,b]=y.useState(""),[w,S]=y.useState(""),[C,A]=y.useState(""),[P,k]=y.useState(!1),[E,O]=y.useState(null),{data:M}=Ca(),{data:T}=Nj(),{data:V}=fp(),{data:I}=Dl(),F=async W=>{if(W.preventDefault(),!e||!n||!i||!c){Le({title:" Campos requeridos",description:"Completa todos los campos obligatorios",variant:"destructive"});return}try{const{data:{user:B}}=await ce.auth.getUser();if(!B){Le({title:" Error de autenticacin",description:"Debes iniciar sesin para registrar egresos",variant:"destructive"});return}const q=parseFloat(i),te=c==="contado"?q:c==="parcial"&&parseFloat(f)||0;if(te>0&&(u==="efectivo"||u==="tarjeta-transferencia")&&!I){Le({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"});return}if(u==="efectivo"&&te>I.efectivo){Le({title:" Saldo insuficiente en efectivo",description:`Disponible: $${Ke(I.efectivo)} | Necesitas: $${Ke(te)}`,variant:"destructive"});return}if(u==="tarjeta-transferencia"&&te>I.bancos){Le({title:" Saldo insuficiente en bancos",description:`Disponible: $${Ke(I.bancos)} | Necesitas: $${Ke(te)}`,variant:"destructive"});return}if(u!=null&&u.startsWith("tarjeta_credito_")&&V){const Y=u.replace("tarjeta_credito_",""),H=hp(Y,te,V);if(!H.valido){Le({title:" Lmite de crdito excedido",description:H.mensaje,variant:"destructive"});return}O({montoPagado:te,montoTotal:q}),k(!0);return}await D(te,q)}catch(B){console.error("Error al registrar egreso:",B),Le({title:" Error",description:"No se pudo registrar el egreso. Intenta nuevamente.",variant:"destructive"})}},D=async(W,B)=>{const{data:{user:q}}=await ce.auth.getUser();if(!q)return;const te=B-W,Y=n.startsWith("5")?"costo":"gasto",{data:H,error:L}=await ce.functions.invoke("registrar-egreso",{body:{tipo_egreso:Y,subtipo_egreso:"general",descripcion:e,concepto:e,cuenta_codigo:n,subcuenta_id:a||null,monto_total:B,tipo_pago:c,metodo_pago:u||null,monto_pagado:W,monto_pendiente:te,fecha_vencimiento:x||null,proveedor_nombre:v||null,proveedor_telefono:g||null,proveedor_email:_||null,proveedor_rfc:w||null,comentarios:C||null}});if(L)throw console.error("Error en edge function:",L),L;console.log("Egreso registrado con asiento:",H),Le({title:" Egreso registrado",description:`Egreso registrado correctamente con asiento contable ${(H==null?void 0:H.numero_asiento)||""}`}),t(""),s(""),o(""),l(""),d(""),m(""),h(""),p(""),j(""),N(""),b(""),S(""),A(""),k(!1),O(null)};return r.jsxs(r.Fragment,{children:[r.jsxs(G,{className:"max-w-5xl mx-auto border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Xh,{className:"h-5 w-5"}),"Registro de Costos y Gastos Generales"]}),r.jsx(Me,{children:"Registra egresos generales que no tienen un segmento especfico en el catlogo"})]}),r.jsx(Q,{className:"p-6 pt-0",children:r.jsxs("form",{onSubmit:F,className:"space-y-6 pb-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Gasto"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"concepto",children:"Concepto del Gasto *"}),r.jsx(Ae,{id:"concepto",value:e,onChange:W=>t(W.target.value),placeholder:"Ej: Servicios de electricidad",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"cuenta",children:"Cuenta *"}),r.jsxs(De,{value:n,onValueChange:W=>{s(W),o("")},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar cuenta"})}),r.jsx($e,{children:(X=M==null?void 0:M.cuentasFlat)==null?void 0:X.map(W=>r.jsxs(le,{value:W.codigo,children:[W.codigo," - ",W.nombre]},W.codigo))})]})]}),n&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"subcuenta",children:"Subcuenta *"}),r.jsxs(De,{value:a,onValueChange:o,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar subcuenta"})}),r.jsx($e,{children:(T==null?void 0:T.filter(W=>W.cuenta_madre_codigo===n).length)===0?r.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No hay subcuentas para esta cuenta."}):T==null?void 0:T.filter(W=>W.cuenta_madre_codigo===n).map(W=>r.jsx(le,{value:W.id,children:W.nombre},W.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto-total",children:"Monto Total *"}),r.jsx(Ae,{id:"monto-total",type:"number",step:"0.01",value:i,onChange:W=>l(W.target.value),placeholder:"0.00",required:!0})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin de Pago"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Pago *"}),r.jsxs(Hn,{value:c,onValueChange:d,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"contado",id:"contado"}),r.jsx(se,{htmlFor:"contado",children:"Contado"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"credito",id:"credito"}),r.jsx(se,{htmlFor:"credito",children:"Crdito"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"parcial",id:"parcial"}),r.jsx(se,{htmlFor:"parcial",children:"Pago Parcial"})]})]})]}),(c==="contado"||c==="parcial")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo-pago",children:"Mtodo de Pago"}),r.jsxs(De,{value:u,onValueChange:m,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar mtodo"})}),r.jsxs($e,{children:[r.jsxs(le,{value:"efectivo",children:["Efectivo - Disponible: $",Ke(I==null?void 0:I.efectivo)]}),r.jsxs(le,{value:"tarjeta-transferencia",children:["Bancos - Disponible: $",Ke(I==null?void 0:I.bancos)]}),V&&V.length>0?V.map(W=>r.jsxs(le,{value:`tarjeta_credito_${W.id}`,children:[W.nombre," - Disponible: $",Ke(W.limite_disponible)]},W.id)):null]})]})]}),c==="parcial"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto-pagado",children:"Monto Pagado"}),r.jsx(Ae,{id:"monto-pagado",type:"number",step:"0.01",value:f,onChange:W=>h(W.target.value),placeholder:"0.00"})]})]}),(c==="credito"||c==="parcial")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha-vencimiento",children:"Fecha de Vencimiento"}),r.jsx(Ae,{id:"fecha-vencimiento",type:"date",value:x,onChange:W=>p(W.target.value)})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Proveedor"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-nombre",children:"Nombre del Proveedor"}),r.jsx(Ae,{id:"proveedor-nombre",value:v,onChange:W=>j(W.target.value),placeholder:"Nombre completo o razn social"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-telefono",children:"Telfono"}),r.jsx(Ae,{id:"proveedor-telefono",value:g,onChange:W=>N(W.target.value),placeholder:"Nmero de telfono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-email",children:"Email"}),r.jsx(Ae,{id:"proveedor-email",type:"email",value:_,onChange:W=>b(W.target.value),placeholder:"correo@ejemplo.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-rfc",children:"RFC"}),r.jsx(Ae,{id:"proveedor-rfc",value:w,onChange:W=>S(W.target.value),placeholder:"RFC del proveedor"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin Adicional"}),r.jsx(Kr,{id:"descripcion",value:C,onChange:W=>A(W.target.value),placeholder:"Detalles adicionales del gasto...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{type:"button",variant:"outline",children:"Cancelar"}),r.jsxs(Pe,{type:"submit",className:"gap-2",children:[r.jsx(a0,{className:"h-4 w-4"}),"Registrar Egreso"]})]})]})})]}),r.jsx(wa,{open:P,onOpenChange:k,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Confirmar pago con tarjeta de crdito"}),r.jsx(Js,{children:(u==null?void 0:u.startsWith("tarjeta_credito_"))&&V&&(()=>{var q;const W=u.replace("tarjeta_credito_",""),B=V.find(te=>te.id===W);return B?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2 my-4",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Tarjeta:"})," ",B.nombre]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Lmite disponible actual:"})," $",B.limite_disponible.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Monto del cargo:"})," $",(q=E==null?void 0:E.montoPagado)==null?void 0:q.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Lmite disponible despus:"})," $",(B.limite_disponible-((E==null?void 0:E.montoPagado)||0)).toFixed(2)]})]}),r.jsx("p",{children:"Deseas continuar con este pago?"})]}):null})()})]}),r.jsxs(Qs,{children:[r.jsx(ta,{onClick:()=>{k(!1),O(null)},children:"Cancelar"}),r.jsx(ea,{onClick:()=>{E&&D(E.montoPagado,E.montoTotal)},children:"Continuar"})]})]})})]})},m$e=()=>{const[e,t]=y.useState(""),[n,s]=y.useState(""),[a,o]=y.useState(""),[i,l]=y.useState(""),[c,d]=y.useState(""),[u,m]=y.useState(""),[f,h]=y.useState(""),[x,p]=y.useState(""),[v,j]=y.useState(""),[g,N]=y.useState(""),[_,b]=y.useState(""),[w,S]=y.useState(!1),[C,A]=y.useState(null),[P,k]=y.useState(!1),{data:E}=fp(),{data:O}=Dl(),M=async V=>{if(V.preventDefault(),!e||!n||!a){Le({title:" Campos requeridos",description:"Completa todos los campos obligatorios",variant:"destructive"});return}if((a==="credito"||a==="parcial")&&!f.trim()){Le({title:" Proveedor requerido",description:"Debes proporcionar el nombre del proveedor para pagos a crdito o parciales",variant:"destructive"});return}try{const{data:{user:I}}=await ce.auth.getUser();if(!I){Le({title:" Error de autenticacin",description:"Debes iniciar sesin para registrar egresos",variant:"destructive"});return}const F=parseFloat(n),D=a==="contado"?F:a==="parcial"&&parseFloat(c)||0;if(D>0&&(i==="efectivo"||i==="tarjeta-transferencia")&&!O){Le({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"});return}if(i==="efectivo"&&D>O.efectivo){Le({title:" Saldo insuficiente en efectivo",description:`Disponible: $${Ke(O.efectivo)} | Necesitas: $${Ke(D)}`,variant:"destructive"});return}if(i==="tarjeta-transferencia"&&D>O.bancos){Le({title:" Saldo insuficiente en bancos",description:`Disponible: $${Ke(O.bancos)} | Necesitas: $${Ke(D)}`,variant:"destructive"});return}if(i!=null&&i.startsWith("tarjeta_credito_")&&E){const X=i.replace("tarjeta_credito_",""),W=hp(X,D,E);if(!W.valido){Le({title:" Lmite de crdito excedido",description:W.mensaje,variant:"destructive"});return}A({montoPagado:D,montoTotal:F}),S(!0);return}await T(D,F)}catch(I){console.error("Error al registrar gasto:",I),Le({title:" Error",description:"No se pudo registrar el gasto. Intenta nuevamente.",variant:"destructive"})}},T=async(V,I)=>{const{data:{user:F}}=await ce.auth.getUser();if(!F)return;const D=I-V,X="5204",{data:W,error:B}=await ce.functions.invoke("registrar-egreso",{body:{tipo_egreso:"otro",subtipo_egreso:"otros_gastos",descripcion:e,concepto:e,cuenta_codigo:X,monto_total:I,tipo_pago:a,metodo_pago:i||null,monto_pagado:V,monto_pendiente:D,fecha_vencimiento:u||null,proveedor_nombre:f||null,proveedor_telefono:x||null,proveedor_email:v||null,proveedor_rfc:g||null,es_proveedor_recurrente:P,comentarios:_||null}});if(B)throw console.error("Error en edge function:",B),B;console.log("Gasto registrado con asiento:",W),Le({title:" Gasto registrado",description:`Gasto registrado correctamente con asiento contable ${(W==null?void 0:W.numero_asiento)||""}`}),t(""),s(""),o(""),l(""),d(""),m(""),h(""),p(""),j(""),N(""),b(""),S(!1),A(null),k(!1)};return r.jsxs(r.Fragment,{children:[r.jsxs(G,{className:"max-w-5xl mx-auto border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(oS,{className:"h-5 w-5"}),"Registro de Otros Gastos"]}),r.jsx(Me,{children:"Registra gastos que estn fuera de la operacin normal para poder identificarlos separadamente"})]}),r.jsx(Q,{className:"p-6 pt-0",children:r.jsxs("form",{onSubmit:M,className:"space-y-6 pb-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Gasto"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"concepto",children:"Concepto del Gasto *"}),r.jsx(Ae,{id:"concepto",value:e,onChange:V=>t(V.target.value),placeholder:"Ej: Donaciones, multas, gastos personales",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto-total",children:"Monto Total *"}),r.jsx(Ae,{id:"monto-total",type:"number",step:"0.01",value:n,onChange:V=>s(V.target.value),placeholder:"0.00",required:!0})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin de Pago"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Pago *"}),r.jsxs(Hn,{value:a,onValueChange:o,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"contado",id:"contado"}),r.jsx(se,{htmlFor:"contado",children:"Contado"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"credito",id:"credito"}),r.jsx(se,{htmlFor:"credito",children:"Crdito"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"parcial",id:"parcial"}),r.jsx(se,{htmlFor:"parcial",children:"Pago Parcial"})]})]})]}),(a==="contado"||a==="parcial")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo-pago",children:"Mtodo de Pago"}),r.jsxs(De,{value:i,onValueChange:l,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar mtodo"})}),r.jsxs($e,{children:[r.jsxs(le,{value:"efectivo",children:["Efectivo - Disponible: $",Ke(O==null?void 0:O.efectivo)]}),r.jsxs(le,{value:"tarjeta-transferencia",children:["Bancos - Disponible: $",Ke(O==null?void 0:O.bancos)]}),E&&E.length>0?E.map(V=>r.jsxs(le,{value:`tarjeta_credito_${V.id}`,children:[V.nombre," - Disponible: $",Ke(V.limite_disponible)]},V.id)):null]})]})]}),a==="parcial"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto-pagado",children:"Monto Pagado"}),r.jsx(Ae,{id:"monto-pagado",type:"number",step:"0.01",value:c,onChange:V=>d(V.target.value),placeholder:"0.00"})]})]}),(a==="credito"||a==="parcial")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha-vencimiento",children:"Fecha de Vencimiento"}),r.jsx(Ae,{id:"fecha-vencimiento",type:"date",value:u,onChange:V=>m(V.target.value)})]})]}),r.jsx(Jr,{}),(a==="credito"||a==="parcial")&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Proveedor/Beneficiario *"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Requerido para pagos a crdito o parciales para gestionar cuentas por pagar"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-nombre",children:"Nombre del Proveedor *"}),r.jsx(Ae,{id:"proveedor-nombre",value:f,onChange:V=>h(V.target.value),placeholder:"Nombre completo o razn social",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-telefono",children:"Telfono"}),r.jsx(Ae,{id:"proveedor-telefono",value:x,onChange:V=>p(V.target.value),placeholder:"Nmero de telfono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-email",children:"Email"}),r.jsx(Ae,{id:"proveedor-email",type:"email",value:v,onChange:V=>j(V.target.value),placeholder:"correo@ejemplo.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-rfc",children:"RFC"}),r.jsx(Ae,{id:"proveedor-rfc",value:g,onChange:V=>N(V.target.value),placeholder:"RFC del proveedor/beneficiario"})]})]}),r.jsx("div",{className:"space-y-3 p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",id:"es-recurrente",checked:P,onChange:V=>k(V.target.checked),className:"mt-1 h-4 w-4 rounded border-gray-300"}),r.jsxs("div",{className:"flex-1",children:[r.jsx(se,{htmlFor:"es-recurrente",className:"font-semibold cursor-pointer",children:"Es un proveedor recurrente?"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Si marcas esta opcin, guardaremos este proveedor en tu catlogo para futuras transacciones. til para proveedores con los que trabajas regularmente."})]})]})}),r.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Nota:"})," Esta informacin es necesaria para gestionar correctamente las cuentas por pagar."]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin Adicional"}),r.jsx(Kr,{id:"descripcion",value:_,onChange:V=>b(V.target.value),placeholder:"Detalles adicionales del gasto...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{type:"button",variant:"outline",children:"Cancelar"}),r.jsxs(Pe,{type:"submit",className:"gap-2",children:[r.jsx(a0,{className:"h-4 w-4"}),"Registrar Gasto"]})]})]})})]}),r.jsx(wa,{open:w,onOpenChange:S,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Confirmar pago con tarjeta de crdito"}),r.jsx(Js,{children:(i==null?void 0:i.startsWith("tarjeta_credito_"))&&E&&(()=>{var F;const V=i.replace("tarjeta_credito_",""),I=E.find(D=>D.id===V);return I?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2 my-4",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Tarjeta:"})," ",I.nombre]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Lmite disponible actual:"})," $",I.limite_disponible.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Monto del cargo:"})," $",(F=C==null?void 0:C.montoPagado)==null?void 0:F.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Lmite disponible despus:"})," $",(I.limite_disponible-((C==null?void 0:C.montoPagado)||0)).toFixed(2)]})]}),r.jsx("p",{children:"Deseas continuar con este pago?"})]}):null})()})]}),r.jsxs(Qs,{children:[r.jsx(ta,{onClick:()=>{S(!1),A(null)},children:"Cancelar"}),r.jsx(ea,{onClick:()=>{C&&T(C.montoPagado,C.montoTotal)},children:"Continuar"})]})]})})]})},Bz=(e=1e3,t,n,s)=>it({queryKey:["transacciones-egresos",e,t,n,s],queryFn:async()=>{let a=ce.from("transacciones_egresos").select("*").eq("estado","activo").order("created_at",{ascending:!1});if(t==="diario"&&n){const l=n.toISOString().split("T")[0];a=a.gte("created_at",`${l}T00:00:00`).lte("created_at",`${l}T23:59:59`)}else if(t==="mensual"&&s){const l=s.getFullYear(),c=s.getMonth(),d=new Date(l,c,1).toISOString().split("T")[0],u=new Date(l,c+1,0).toISOString().split("T")[0];a=a.gte("created_at",`${d}T00:00:00`).lte("created_at",`${u}T23:59:59`)}else if(t==="anual"){const l=new Date().getFullYear();a=a.gte("created_at",`${l}-01-01T00:00:00`).lte("created_at",`${l}-12-31T23:59:59`)}t||(a=a.limit(e));const{data:o,error:i}=await a;if(i)throw i;return o||[]}}),hx=e=>Math.round(e*100)/100,zz=(e,t,n)=>it({queryKey:["costos-venta-inventario",e,t,n],queryFn:async()=>{var d,u,m,f;let s=ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          descripcion,
          fecha,
          user_id,
          detalle_asientos(
            id,
            cuenta_codigo,
            debe,
            haber,
            descripcion
          )
        `).order("fecha",{ascending:!1});if(e==="diario"&&t){const h=t.toISOString().split("T")[0];s=s.eq("fecha",h)}else if(e==="mensual"&&n){const h=n.getFullYear(),x=n.getMonth(),p=new Date(h,x,1).toISOString().split("T")[0],v=new Date(h,x+1,0).toISOString().split("T")[0];s=s.gte("fecha",p).lte("fecha",v)}else if(e==="anual"){const h=new Date().getFullYear();s=s.gte("fecha",`${h}-01-01`).lte("fecha",`${h}-12-31`)}const{data:a,error:o}=await s;if(o)throw console.error("Error fetching costos venta:",o),o;const{data:i}=await ce.from("cuentas").select("codigo, nombre"),l=new Map((i==null?void 0:i.map(h=>[h.codigo,h.nombre]))||[]),c=[];for(const h of a||[]){const x=(d=h.detalle_asientos)==null?void 0:d.find(C=>C.cuenta_codigo==="5002"&&C.debe>0);if(!x)continue;let p="Producto Inventariado",v=null,j=null,g=null;const N=h.descripcion||"";N.includes("Venta:")?p=((u=N.split("Venta:")[1])==null?void 0:u.trim())||p:N.includes("Egreso:")&&(p=((m=N.split("Egreso:")[1])==null?void 0:m.trim())||p);const _=hx(Number(x.debe)),{data:b}=await ce.from("movimientos_inventario").select("id, cantidad, producto_id, costo_total").eq("tipo_movimiento","venta").eq("fecha",h.fecha).eq("estado","activo").ilike("descripcion",`%${p}%`),w=(b==null?void 0:b.find(C=>hx(Number(C.costo_total))===_))||null;if(w&&w.cantidad&&(j=Math.abs(Number(w.cantidad)),j>0&&(g=Number(x.debe)/j),w.producto_id)){const{data:C}=await ce.from("productos").select("nombre, imagen_url").eq("id",w.producto_id).maybeSingle();C&&(p=C.nombre,v=C.imagen_url)}if(!v&&x){const C=h.descripcion.replace("Egreso: ","").replace("Venta: ","").trim(),A=hx(Number(x.debe)),{data:P}=await ce.from("transacciones_egresos").select("producto_egreso_id, cantidad, precio_unitario, monto_total").eq("descripcion",C).eq("user_id",h.user_id).eq("estado","activo"),k=(P==null?void 0:P.find(E=>hx(Number(E.monto_total))===A))||null;if(k!=null&&k.producto_egreso_id){const{data:E}=await ce.from("productos_egresos").select("nombre, imagen_url").eq("id",k.producto_egreso_id).maybeSingle();E&&(p=E.nombre,v=E.imagen_url,k.cantidad&&(j=Math.abs(Number(k.cantidad)),j>0&&(g=Number(x.debe)/j)))}}const S=((f=h.detalle_asientos)==null?void 0:f.map(C=>({cuenta_codigo:C.cuenta_codigo,cuenta_nombre:l.get(C.cuenta_codigo)||null,debe:Number(C.debe),haber:Number(C.haber),descripcion:C.descripcion})))||[];c.push({id:h.id,fecha:h.fecha,descripcion:x.descripcion||h.descripcion,monto:Number(x.debe),numero_asiento:h.numero_asiento,producto_nombre:p,producto_imagen:v,cantidad:j,costo_unitario:g,detalles_asiento:S})}return c}}),f$e=()=>it({queryKey:["resumen-egresos-periodo"],queryFn:async()=>{const e=new Date,t=e.toISOString().split("T")[0],n=e.getMonth(),s=e.getFullYear(),{data:a}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").gte("asientos_contables.fecha",`${s}-01-01`).lte("asientos_contables.fecha",`${s}-12-31`),o=(d,u)=>{let m=0,f=0,h=0,x=0;d==null||d.forEach(v=>{const j=v.asientos_contables.fecha;if(!u(j))return;const g=v.cuenta_codigo,N=v.debe||0,_=v.haber||0,b=N-_;g==="5001"?m+=b:g==="5002"?f+=b:g.startsWith("51")&&g!=="5109"&&g!=="5110"?h+=b:(g==="5202"||g==="5203"||g==="5204")&&(x+=b)});const p=m+f+h+x;return{costosVenta5001:Math.max(0,m),costosVenta5002:Math.max(0,f),gastos:Math.max(0,h),otrosGastos:Math.max(0,x),total:Math.max(0,p)}},i=o(a||[],d=>d===t),l=o(a||[],d=>{const u=new Date(d);return u.getMonth()===n&&u.getFullYear()===s}),c=o(a||[],d=>new Date(d).getFullYear()===s);return{dia:i,mes:l,anio:c}},staleTime:2*60*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),h$e=(e,t,n,s)=>it({queryKey:["egresos-por-periodo-v2",e,t,n,s],queryFn:async()=>{const a=n||new Date,o=s||new Date,i=e==="diario"?a.getFullYear():e==="mensual"?o.getFullYear():new Date().getFullYear(),l=e==="mensual"?o.getMonth():new Date().getMonth(),{data:c}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").gte("asientos_contables.fecha",`${i}-01-01`).lte("asientos_contables.fecha",`${i}-12-31`);if(t==="combinada")if(e==="diario"){const u=a.toISOString().split("T")[0];let m=0,f=0,h=0,x=0;return c==null||c.forEach(p=>{if(p.asientos_contables.fecha!==u)return;const v=p.cuenta_codigo,j=(p.debe||0)-(p.haber||0);v==="5001"?m+=j:v==="5002"?h+=j:v==="5204"?x+=j:v.startsWith("51")&&v!=="5109"&&v!=="5110"&&(f+=j)}),[{periodo:"Hoy",costos:Math.max(0,m),gastos:Math.max(0,f),costosInventario:Math.max(0,h),otrosGastos:Math.max(0,x)}]}else if(e==="mensual"){const u=new Date(i,l+1,0).getDate(),m={},f={},h={},x={};return c==null||c.forEach(p=>{const v=new Date(p.asientos_contables.fecha);if(v.getMonth()!==l||v.getFullYear()!==i)return;const j=v.getDate(),g=p.cuenta_codigo,N=(p.debe||0)-(p.haber||0);g==="5001"?m[j]=(m[j]||0)+N:g==="5002"?h[j]=(h[j]||0)+N:g==="5204"?x[j]=(x[j]||0)+N:g.startsWith("51")&&g!=="5109"&&g!=="5110"&&(f[j]=(f[j]||0)+N)}),Array.from({length:Math.min(30,u)},(p,v)=>{const j=v+1;return{periodo:`Da ${j}`,costos:Math.max(0,m[j]||0),gastos:Math.max(0,f[j]||0),costosInventario:Math.max(0,h[j]||0),otrosGastos:Math.max(0,x[j]||0)}})}else{const u=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],m={},f={},h={},x={};return c==null||c.forEach(p=>{const v=new Date(p.asientos_contables.fecha);if(v.getFullYear()!==i)return;const j=v.getMonth(),g=p.cuenta_codigo,N=(p.debe||0)-(p.haber||0);g==="5001"?m[j]=(m[j]||0)+N:g==="5002"?h[j]=(h[j]||0)+N:g==="5204"?x[j]=(x[j]||0)+N:g.startsWith("51")&&g!=="5109"&&g!=="5110"&&(f[j]=(f[j]||0)+N)}),u.map((p,v)=>({periodo:p,costos:Math.max(0,m[v]||0),gastos:Math.max(0,f[v]||0),costosInventario:Math.max(0,h[v]||0),otrosGastos:Math.max(0,x[v]||0)}))}if(t==="total")if(e==="diario"){const u=a.toISOString().split("T")[0];let m=0,f=0,h=0,x=0;c==null||c.forEach(v=>{if(v.asientos_contables.fecha!==u)return;const j=v.cuenta_codigo,g=(v.debe||0)-(v.haber||0);j==="5001"?m+=g:j==="5002"?h+=g:j==="5204"?x+=g:j.startsWith("51")&&j!=="5109"&&j!=="5110"&&(f+=g)});const p=m+h+f+x;return[{periodo:"Hoy",monto:Math.max(0,p),costos:Math.max(0,m),gastos:Math.max(0,f),costosInventario:Math.max(0,h),otrosGastos:Math.max(0,x)}]}else if(e==="mensual"){const u=new Date(i,l+1,0).getDate(),m={},f={},h={},x={};return c==null||c.forEach(p=>{const v=new Date(p.asientos_contables.fecha);if(v.getMonth()!==l||v.getFullYear()!==i)return;const j=v.getDate(),g=p.cuenta_codigo,N=(p.debe||0)-(p.haber||0);j===9&&Math.abs(N)>1e4&&console.log("[ DEBUG] Da 9 detectado - Cuenta:",g,"| Monto:",N,"| Fecha:",p.asientos_contables.fecha),g==="5001"?m[j]=(m[j]||0)+N:g==="5002"?h[j]=(h[j]||0)+N:g==="5204"?x[j]=(x[j]||0)+N:g.startsWith("51")&&g!=="5109"&&g!=="5110"&&(f[j]=(f[j]||0)+N)}),Array.from({length:Math.min(30,u)},(p,v)=>{const j=v+1,g=Math.max(0,m[j]||0),N=Math.max(0,f[j]||0),_=Math.max(0,h[j]||0),b=Math.max(0,x[j]||0),w=g+N+_+b;return{periodo:`Da ${j}`,monto:w,costos:g,gastos:N,costosInventario:_,otrosGastos:b}})}else{const u=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],m={},f={},h={},x={};return c==null||c.forEach(p=>{const v=new Date(p.asientos_contables.fecha);if(v.getFullYear()!==i)return;const j=v.getMonth(),g=p.cuenta_codigo,N=(p.debe||0)-(p.haber||0);g==="5001"?m[j]=(m[j]||0)+N:g==="5002"?h[j]=(h[j]||0)+N:g==="5204"?x[j]=(x[j]||0)+N:g.startsWith("51")&&g!=="5109"&&g!=="5110"&&(f[j]=(f[j]||0)+N)}),u.map((p,v)=>{const j=Math.max(0,m[v]||0),g=Math.max(0,f[v]||0),N=Math.max(0,h[v]||0),_=Math.max(0,x[v]||0),b=j+g+N+_;return{periodo:p,monto:b,costos:j,gastos:g,costosInventario:N,otrosGastos:_}})}const d=u=>t==="costo"?u==="5001":t==="costo_inventario"?u==="5002":t==="otros_gastos"?u==="5204":t==="gasto"?u.startsWith("51")&&u!=="5109"&&u!=="5110":!1;if(e==="diario"){const u=a.toISOString().split("T")[0];let m=0;return c==null||c.forEach(f=>{if(f.asientos_contables.fecha!==u||!d(f.cuenta_codigo))return;const h=(f.debe||0)-(f.haber||0);m+=h}),[{periodo:"Hoy",monto:Math.max(0,m)}]}else if(e==="mensual"){const u=new Date(i,l+1,0).getDate(),m={};return c==null||c.forEach(f=>{const h=new Date(f.asientos_contables.fecha);if(h.getMonth()!==l||h.getFullYear()!==i||!d(f.cuenta_codigo))return;const x=h.getDate(),p=(f.debe||0)-(f.haber||0);m[x]=(m[x]||0)+p}),Array.from({length:Math.min(30,u)},(f,h)=>({periodo:`Da ${h+1}`,monto:Math.max(0,m[h+1]||0)}))}else{const u=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],m={};return c==null||c.forEach(f=>{const h=new Date(f.asientos_contables.fecha);if(h.getFullYear()!==i||!d(f.cuenta_codigo))return;const x=h.getMonth(),p=(f.debe||0)-(f.haber||0);m[x]=(m[x]||0)+p}),u.map((f,h)=>({periodo:f,monto:Math.max(0,m[h]||0)}))}},staleTime:0,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),p$e=e=>{const{x:t,y:n,width:s,height:a,name:o,value:i,fill:l,dataTotal:c,decimales:d=2}=e;if(!o||!i||!c)return null;const u=(i/c*100).toFixed(1),m=`$${i.toLocaleString("es-MX",{minimumFractionDigits:d,maximumFractionDigits:d})}`,f=Math.min(s/8,a/4,20),h=Math.min(s/10,a/6,16);return f<12?r.jsx("g",{children:r.jsx("rect",{x:t,y:n,width:s,height:a,fill:l})}):r.jsxs("g",{children:[r.jsx("rect",{x:t,y:n,width:s,height:a,fill:l}),r.jsxs("text",{x:t+s/2,y:n+a/2-f/2,textAnchor:"middle",fill:"#ffffff",fontSize:f,fontWeight:"bold",children:[o," (",u,"%)"]}),r.jsx("text",{x:t+s/2,y:n+a/2+f,textAnchor:"middle",fill:"#ffffff",fontSize:h,fontWeight:"normal",opacity:"0.9",children:m})]})},x$e=()=>{const[e,t]=y.useState("mensual"),[n,s]=y.useState("normal"),[a,o]=y.useState(2),[i,l]=y.useState("total"),[c,d]=y.useState("unica"),[u,m]=y.useState(new Date),[f,h]=y.useState(new Date),[x,p]=y.useState("subcuenta"),{data:v=[],isLoading:j}=Bz(1e3,e,u,f),{data:g=[],isLoading:N}=zz(e,u,f),{data:_,isLoading:b}=f$e(),{data:w}=Nj(),{data:S}=Gj(),{data:C}=Ca(),A=(C==null?void 0:C.cuentasFlat)||[],{data:P,isLoading:k}=h$e(e,i,u,f),E=y.useMemo(()=>{const $=new Map;return(S||[]).forEach(ie=>{ie.imagen_url&&$.set(ie.nombre.toLowerCase().trim(),ie.imagen_url)}),$},[S]),O=y.useMemo(()=>v.filter($=>$.cuenta_codigo&&($.cuenta_codigo==="5001"||$.cuenta_codigo==="5003"||$.cuenta_codigo==="5004"||$.cuenta_codigo==="5002"||$.cuenta_codigo.startsWith("51")&&$.cuenta_codigo!=="5109"&&$.cuenta_codigo!=="5110"||$.cuenta_codigo==="5204")),[v]),M=y.useMemo(()=>v.filter($=>$.cuenta_codigo!=="6001"&&$.tipo_egreso!=="impuesto"),[v]),T=y.useMemo(()=>{const $=O.filter(Ce=>Ce.cuenta_codigo==="5001"||Ce.cuenta_codigo==="5003"||Ce.cuenta_codigo==="5004"),ie=O.filter(Ce=>{var We;return((We=Ce.cuenta_codigo)==null?void 0:We.startsWith("51"))&&Ce.cuenta_codigo!=="5109"&&Ce.cuenta_codigo!=="5110"}),J=O.filter(Ce=>Ce.cuenta_codigo==="5204"),ge=M.filter(Ce=>Ce.cuenta_codigo==="5001"||Ce.cuenta_codigo==="5003"||Ce.cuenta_codigo==="5004"),je=M.filter(Ce=>{var We;return((We=Ce.cuenta_codigo)==null?void 0:We.startsWith("51"))&&Ce.cuenta_codigo!=="5109"&&Ce.cuenta_codigo!=="5110"}),ye=M.filter(Ce=>Ce.cuenta_codigo==="5204");if(i==="costo_inventario")return{costoVenta:[],gastos:[],otrosGastos:[],costosInventario:g,sinImpuestosCostoVenta:[],sinImpuestosGastos:[],sinImpuestosOtrosGastos:[]};if(i==="gasto")return{costoVenta:[],gastos:ie,otrosGastos:[],costosInventario:[],sinImpuestosCostoVenta:[],sinImpuestosGastos:je,sinImpuestosOtrosGastos:[]};if(i==="otros_gastos")return{costoVenta:[],gastos:[],otrosGastos:J,costosInventario:[],sinImpuestosCostoVenta:[],sinImpuestosGastos:[],sinImpuestosOtrosGastos:ye};if(i==="costo"){const Ce=O.filter($t=>$t.tipo_egreso==="costo"),We=M.filter($t=>$t.tipo_egreso==="costo");return{costoVenta:Ce,gastos:[],otrosGastos:[],costosInventario:[],sinImpuestosCostoVenta:We,sinImpuestosGastos:[],sinImpuestosOtrosGastos:[]}}else return{costoVenta:$,gastos:ie,otrosGastos:J,costosInventario:g,sinImpuestosCostoVenta:ge,sinImpuestosGastos:je,sinImpuestosOtrosGastos:ye}},[O,M,g,i]),V=($,ie)=>ie===0?"0.0":($/ie*100).toFixed(1),I=$=>{let ie=$;return n==="miles"&&(ie=$/1e3),n==="millones"&&(ie=$/1e6),Number(ie.toFixed(a))},F=($,ie=!1)=>{const J=ie?D():"";return`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}${J}`},D=()=>n==="miles"?" (Miles)":n==="millones"?" (Millones)":"",X=y.useMemo(()=>P?i==="total"||i==="combinada"?P.map($=>({periodo:$.periodo,monto:I($.monto||0),costos:I($.costos||0),gastos:I($.gastos||0),costosInventario:I($.costosInventario||0),otrosGastos:I($.otrosGastos||0)})):P.map($=>({periodo:$.periodo,monto:I($.monto)})):[],[P,i,n]),W=()=>{const $=[],ie=T.costoVenta.reduce((ye,Ce)=>ye+Ce.monto_total,0);ie>0&&$.push({tipo:"Costo de Venta",monto:I(ie)});const J=T.costosInventario.reduce((ye,Ce)=>ye+Ce.monto,0);J>0&&$.push({tipo:"Costo Venta Inventario",monto:I(J)});const ge=T.gastos.reduce((ye,Ce)=>ye+Ce.monto_total,0);ge>0&&$.push({tipo:"Gastos",monto:I(ge)});const je=T.otrosGastos.reduce((ye,Ce)=>ye+Ce.monto_total,0);return je>0&&$.push({tipo:"Otros Gastos",monto:I(je)}),$},B=y.useMemo(()=>W(),[T,n]),q=()=>{const $={};[...T.sinImpuestosCostoVenta,...T.sinImpuestosGastos,...T.sinImpuestosOtrosGastos].filter(ge=>ge.monto_pagado>0).forEach(ge=>{const je=ge.metodo_pago||"Sin mtodo especificado",ye=je.charAt(0).toUpperCase()+je.slice(1);$[ye]||($[ye]=0),$[ye]+=ge.monto_pagado});const J=T.costosInventario.reduce((ge,je)=>ge+je.monto,0);return J>0&&($["Adquisicin de Inventario"]=J),Object.entries($).map(([ge,je])=>({estado:ge,monto:I(je)})).sort((ge,je)=>je.monto-ge.monto)},te=y.useMemo(()=>q(),[T,n]),Y=()=>{const ie=[...T.costoVenta,...T.gastos,...T.otrosGastos].reduce((J,ge)=>{const je=ge.proveedor_nombre||"Sin proveedor";return J[je]||(J[je]=0),J[je]+=ge.monto_total,J},{});return T.costosInventario.forEach(J=>{const ge=J.producto_nombre||"Sin producto";ie[ge]||(ie[ge]=0),ie[ge]+=J.monto}),Object.entries(ie).sort(([,J],[,ge])=>ge-J).map(([J,ge])=>({proveedor:J,monto:I(ge)}))};y.useMemo(()=>Y(),[T,n]);const H=()=>{const $={};T.costoVenta.forEach(J=>{let ge="Costos de Venta - Sin subcuenta";if(J.subcuenta_id){const je=w==null?void 0:w.find(ye=>ye.id===J.subcuenta_id);je&&(ge=`Costo Venta - ${je.nombre}`)}$[ge]||($[ge]=0),$[ge]+=J.monto_total}),T.gastos.forEach(J=>{let ge="Gastos - Sin subcuenta";if(J.subcuenta_id){const je=w==null?void 0:w.find(ye=>ye.id===J.subcuenta_id);je&&(ge=`Gastos - ${je.nombre}`)}$[ge]||($[ge]=0),$[ge]+=J.monto_total}),T.otrosGastos.forEach(J=>{let ge="Otros Gastos - Sin subcuenta";if(J.subcuenta_id){const je=w==null?void 0:w.find(ye=>ye.id===J.subcuenta_id);je&&(ge=`Otros Gastos - ${je.nombre}`)}$[ge]||($[ge]=0),$[ge]+=J.monto_total});const ie=T.costosInventario.reduce((J,ge)=>J+ge.monto,0);return ie>0&&($["Costo Venta Inventario"]=ie),Object.entries($).map(([J,ge])=>({subcuenta:J,monto:I(ge)})).sort((J,ge)=>ge.monto-J.monto).slice(0,10)},L=()=>{const $={},ie=(J,ge)=>{if(!$[J]){const je=A.find(ye=>ye.codigo===J);$[J]={codigo:J,nombre:je?`${je.codigo} - ${je.nombre}`:J,monto:0}}$[J].monto+=ge};return T.costoVenta.forEach(J=>{const ge=J.cuenta_codigo;ge&&ie(ge,J.monto_total)}),T.gastos.forEach(J=>{const ge=J.cuenta_codigo;ge&&ie(ge,J.monto_total)}),T.otrosGastos.forEach(J=>{const ge=J.cuenta_codigo;ge&&ie(ge,J.monto_total)}),T.costosInventario.forEach(J=>{ie("5002",J.monto)}),Object.values($).map(J=>({subcuenta:J.nombre,monto:I(J.monto)})).sort((J,ge)=>ge.monto-J.monto).slice(0,15)},ue=y.useMemo(()=>L(),[T,A,n]),pe=y.useMemo(()=>H(),[T,w,n]),we=()=>{const $=[...T.sinImpuestosCostoVenta,...T.sinImpuestosGastos,...T.sinImpuestosOtrosGastos],ie=$.filter(ye=>ye.metodo_pago==="efectivo"&&ye.monto_pagado>0).reduce((ye,Ce)=>ye+Ce.monto_pagado,0),J=$.filter(ye=>ye.metodo_pago&&ye.metodo_pago!=="efectivo"&&ye.monto_pagado>0).reduce((ye,Ce)=>ye+Ce.monto_pagado,0),ge=T.costosInventario.reduce((ye,Ce)=>ye+Ce.monto,0),je=[{name:"Efectivo",value:I(ie),fill:"hsl(180, 50%, 55%)"},{name:"Bancos/Tarjeta",value:I(J),fill:"hsl(180, 45%, 45%)"}];return ge>0&&je.push({name:"Adquisicin de Inventario",value:I(ge),fill:"hsl(180, 35%, 38%)"}),je.filter(ye=>ye.value>0)},re=y.useMemo(()=>we(),[T,n]),de=()=>{const $={};T.costoVenta.forEach(je=>{var Ce,We;const ye=`CV-${je.descripcion||"Sin descripcin"}`;$[ye]||($[ye]={nombre:je.descripcion||"Sin descripcin",imagen:E.get(((We=(Ce=je.descripcion)==null?void 0:Ce.toLowerCase())==null?void 0:We.trim())||"")||je.imagen_comprobante||null,monto:0,transacciones:0,tieneAsignacion:!0,categoria:"Costo Venta"}),$[ye].monto+=je.monto_total,$[ye].transacciones+=1}),T.gastos.forEach(je=>{var Ce,We;const ye=`G-${je.descripcion||"Sin descripcin"}`;$[ye]||($[ye]={nombre:je.descripcion||"Sin descripcin",imagen:E.get(((We=(Ce=je.descripcion)==null?void 0:Ce.toLowerCase())==null?void 0:We.trim())||"")||je.imagen_comprobante||null,monto:0,transacciones:0,tieneAsignacion:!0,categoria:"Gastos"}),$[ye].monto+=je.monto_total,$[ye].transacciones+=1}),T.otrosGastos.forEach(je=>{var Ce,We;const ye=`OG-${je.descripcion||"Sin descripcin"}`;$[ye]||($[ye]={nombre:je.descripcion||"Sin descripcin",imagen:E.get(((We=(Ce=je.descripcion)==null?void 0:Ce.toLowerCase())==null?void 0:We.trim())||"")||je.imagen_comprobante||null,monto:0,transacciones:0,tieneAsignacion:!0,categoria:"Otros Gastos"}),$[ye].monto+=je.monto_total,$[ye].transacciones+=1}),T.costosInventario.forEach(je=>{const ye=`CI-${je.producto_nombre||"Sin asignacin"}`;$[ye]||($[ye]={nombre:je.producto_nombre||"Sin asignacin",imagen:je.producto_imagen||null,monto:0,transacciones:0,tieneAsignacion:!!je.producto_nombre,categoria:"Costo Venta Inventario"}),$[ye].monto+=je.monto,$[ye].transacciones+=1});const ie=Object.values($).sort((je,ye)=>ye.monto-je.monto),J=ie.reduce((je,ye)=>je+ye.monto,0);return{productos:ie.map(je=>({...je,monto:I(je.monto)})).slice(0,10),totalGeneral:I(J)}},he=y.useMemo(()=>de(),[T,n]),ee=()=>{const $={};T.costoVenta.forEach(ye=>{const Ce=ye.proveedor_nombre||"Sin proveedor asignado",We=!!ye.proveedor_nombre;$[Ce]||($[Ce]={nombre:Ce,monto:0,transacciones:0,tieneAsignacion:We}),$[Ce].monto+=ye.monto_total,$[Ce].transacciones+=1}),T.gastos.forEach(ye=>{const Ce=ye.proveedor_nombre||"Sin proveedor asignado",We=!!ye.proveedor_nombre;$[Ce]||($[Ce]={nombre:Ce,monto:0,transacciones:0,tieneAsignacion:We}),$[Ce].monto+=ye.monto_total,$[Ce].transacciones+=1}),T.otrosGastos.forEach(ye=>{const Ce=ye.proveedor_nombre||"Sin proveedor asignado",We=!!ye.proveedor_nombre;$[Ce]||($[Ce]={nombre:Ce,monto:0,transacciones:0,tieneAsignacion:We}),$[Ce].monto+=ye.monto_total,$[Ce].transacciones+=1});const ie=T.costosInventario.reduce((ye,Ce)=>ye+Ce.monto,0);ie>0&&($["Sin proveedor asignado"]||($["Sin proveedor asignado"]={nombre:"Sin proveedor asignado",monto:0,transacciones:0,tieneAsignacion:!1}),$["Sin proveedor asignado"].monto+=ie,$["Sin proveedor asignado"].transacciones+=T.costosInventario.length);const J=Object.values($).sort((ye,Ce)=>Ce.monto-ye.monto),ge=J.reduce((ye,Ce)=>ye+Ce.monto,0);return{proveedores:J.map(ye=>({...ye,monto:I(ye.monto)})).slice(0,10),totalGeneral:I(ge)}},z=y.useMemo(()=>ee(),[T,n]),U=y.useMemo(()=>B.reduce(($,ie)=>$+ie.monto,0),[B]),oe=y.useMemo(()=>te.reduce(($,ie)=>$+ie.monto,0),[te]),Se=y.useMemo(()=>(x==="cuenta"?ue:pe).reduce((ie,J)=>ie+J.monto,0),[x,ue,pe]),Ne=y.useMemo(()=>re.reduce(($,ie)=>$+ie.value,0),[re]);return j||N||b||k||!_?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[1,2,3].map($=>r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsx(gr,{className:"h-20 w-full"})})},$))}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map($=>r.jsx(G,{children:r.jsx(Q,{className:"p-6",children:r.jsx(gr,{className:"h-64 w-full"})})},$))})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Highlights de Egresos"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Resumen de costos y gastos por perodo"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-lg font-semibold text-primary",children:"Resumen del Da"})}),r.jsxs(Q,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costos de Venta"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.dia.costosVenta5001.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.dia.costosVenta5001,_.dia.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costo Venta Inventario"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.dia.costosVenta5002.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.dia.costosVenta5002,_.dia.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Gastos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.dia.gastos.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.dia.gastos,_.dia.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Otros Gastos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.dia.otrosGastos.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.dia.otrosGastos,_.dia.total),"%"]})]})]}),r.jsx("div",{className:"h-px bg-border my-2"}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:"text-sm font-semibold text-primary",children:"Total Egresos"}),r.jsxs("span",{className:"text-lg font-bold text-destructive",children:["$",_.dia.total.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-lg font-semibold text-primary",children:"Resumen del Mes"})}),r.jsxs(Q,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costos de Venta"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.mes.costosVenta5001.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.mes.costosVenta5001,_.mes.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costo Venta Inventario"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.mes.costosVenta5002.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.mes.costosVenta5002,_.mes.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Gastos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.mes.gastos.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.mes.gastos,_.mes.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Otros Gastos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.mes.otrosGastos.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.mes.otrosGastos,_.mes.total),"%"]})]})]}),r.jsx("div",{className:"h-px bg-border my-2"}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:"text-sm font-semibold text-primary",children:"Total Egresos"}),r.jsxs("span",{className:"text-lg font-bold text-destructive",children:["$",_.mes.total.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-lg font-semibold text-primary",children:"Resumen del Ao"})}),r.jsxs(Q,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costos de Venta"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.anio.costosVenta5001.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.anio.costosVenta5001,_.anio.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costo Venta Inventario"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.anio.costosVenta5002.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.anio.costosVenta5002,_.anio.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Gastos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.anio.gastos.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.anio.gastos,_.anio.total),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Otros Gastos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-foreground",children:["$",_.anio.otrosGastos.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]}),r.jsxs(_e,{variant:"outline",className:"text-xs bg-teal-50/50 text-teal-700 border-teal-300",children:[V(_.anio.otrosGastos,_.anio.total),"%"]})]})]}),r.jsx("div",{className:"h-px bg-border my-2"}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:"text-sm font-semibold text-primary",children:"Total Egresos"}),r.jsxs("span",{className:"text-lg font-bold text-destructive",children:["$",_.anio.total.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Analtica de Egresos"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Anlisis detallado con controles personalizables"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Perodo de Anlisis"}),r.jsx(Me,{children:"Selecciona el perodo"})]}),r.jsxs(Q,{className:"space-y-3",children:[r.jsxs(Hn,{value:e,onValueChange:$=>t($),className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"diario",id:"period-daily"}),r.jsx(se,{htmlFor:"period-daily",className:"cursor-pointer",children:"Diario"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"mensual",id:"period-monthly"}),r.jsx(se,{htmlFor:"period-monthly",className:"cursor-pointer",children:"Mensual"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"anual",id:"period-annual"}),r.jsx(se,{htmlFor:"period-annual",className:"cursor-pointer",children:"Anual"})]})]}),e==="diario"&&r.jsxs("div",{className:"pt-2 border-t",children:[r.jsx(se,{className:"text-xs text-muted-foreground mb-2 block",children:"Fecha especfica"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!u&&"text-muted-foreground"),size:"sm",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),ze(u,"PPP",{locale:ht})]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:u,onSelect:$=>$&&m($),initialFocus:!0,className:"pointer-events-auto"})})]})]}),e==="mensual"&&r.jsxs("div",{className:"pt-2 border-t",children:[r.jsx(se,{className:"text-xs text-muted-foreground mb-2 block",children:"Mes especfico"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!f&&"text-muted-foreground"),size:"sm",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),ze(f,"MMMM yyyy",{locale:ht})]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:f,onSelect:$=>$&&h($),initialFocus:!0,className:"pointer-events-auto"})})]})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Tipo de Egreso"}),r.jsx(Me,{children:"Selecciona qu analizar"})]}),r.jsx(Q,{children:r.jsxs(Hn,{value:i,onValueChange:$=>l($),className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"costo",id:"tipo-costo"}),r.jsx(se,{htmlFor:"tipo-costo",className:"cursor-pointer",children:"Costo de Venta"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"costo_inventario",id:"tipo-inventario"}),r.jsx(se,{htmlFor:"tipo-inventario",className:"cursor-pointer",children:"Costo Inventario"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"gasto",id:"tipo-gasto"}),r.jsx(se,{htmlFor:"tipo-gasto",className:"cursor-pointer",children:"Gastos"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"otros_gastos",id:"tipo-otros"}),r.jsx(se,{htmlFor:"tipo-otros",className:"cursor-pointer",children:"Otros Gastos"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"total",id:"tipo-total"}),r.jsx(se,{htmlFor:"tipo-total",className:"cursor-pointer",children:"Total"})]})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Formato de Cifras"}),r.jsx(Me,{children:"Visualizacin de montos"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(se,{className:"text-sm font-medium mb-3 block",children:"Escala"}),r.jsxs(Hn,{value:n,onValueChange:$=>s($),className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"normal",id:"formato-normal"}),r.jsx(se,{htmlFor:"formato-normal",className:"cursor-pointer",children:"Normal"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"miles",id:"formato-miles"}),r.jsx(se,{htmlFor:"formato-miles",className:"cursor-pointer",children:"Miles (K)"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"millones",id:"formato-millones"}),r.jsx(se,{htmlFor:"formato-millones",className:"cursor-pointer",children:"Millones (M)"})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{children:[r.jsx(se,{className:"text-sm font-medium mb-3 block",children:"Decimales"}),r.jsxs(Hn,{value:a.toString(),onValueChange:$=>o(Number($)),className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"0",id:"decimales-0"}),r.jsx(se,{htmlFor:"decimales-0",className:"cursor-pointer",children:"Sin decimales"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"1",id:"decimales-1"}),r.jsx(se,{htmlFor:"decimales-1",className:"cursor-pointer",children:"1 decimal"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"2",id:"decimales-2"}),r.jsx(se,{htmlFor:"decimales-2",className:"cursor-pointer",children:"2 decimales"})]})]})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{className:"lg:col-span-2",children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{children:[r.jsxs(ae,{children:["Evolucin de Egresos",D()]}),r.jsx(Me,{children:"Tendencia de egresos en el perodo seleccionado"})]}),i==="total"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Vista del Total:"}),r.jsx(Lr,{value:c,onValueChange:$=>d($),children:r.jsxs(Dr,{children:[r.jsx(Qe,{value:"unica",children:"Lnea nica"}),r.jsx(Qe,{value:"desglosada",children:"Desglosada"})]})})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:300,children:r.jsxs(bl,{data:X,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"periodo"}),r.jsx(gt,{domain:[0,$=>Math.ceil($*1.15)],padding:{top:20,bottom:0}}),r.jsx(yt,{formatter:$=>[`$${Number($).toLocaleString("es-MX",{minimumFractionDigits:2})}${D()}`,"Monto"],contentStyle:{borderRadius:"8px",border:"1px solid hsl(var(--border))",backgroundColor:"hsl(var(--background))"},labelStyle:{color:"hsl(var(--foreground))"}}),i==="total"&&c==="desglosada"?r.jsxs(r.Fragment,{children:[r.jsx(Wt,{type:"monotone",dataKey:"costos",name:"Costos Manuales",stroke:"hsl(180, 25%, 50%)",strokeWidth:2,dot:{fill:"hsl(180, 25%, 50%)"},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(Wt,{type:"monotone",dataKey:"gastos",name:"Gastos",stroke:"hsl(0, 70%, 55%)",strokeWidth:2,dot:{fill:"hsl(0, 70%, 55%)"},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(Wt,{type:"monotone",dataKey:"costosInventario",name:"Costo Venta Inventario",stroke:"hsl(280, 60%, 55%)",strokeWidth:2,dot:{fill:"hsl(280, 60%, 55%)"},label:{position:"bottom",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(Wt,{type:"monotone",dataKey:"otrosGastos",name:"Otros Gastos",stroke:"hsl(210, 15%, 55%)",strokeWidth:2,dot:{fill:"hsl(210, 15%, 55%)"},label:{position:"bottom",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(jr,{})]}):i==="combinada"?r.jsxs(r.Fragment,{children:[r.jsx(Wt,{type:"monotone",dataKey:"costos",name:"Costos Manuales",stroke:"hsl(180, 25%, 50%)",strokeWidth:2,dot:{fill:"hsl(180, 25%, 50%)"},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(Wt,{type:"monotone",dataKey:"gastos",name:"Gastos",stroke:"hsl(0, 70%, 55%)",strokeWidth:2,dot:{fill:"hsl(0, 70%, 55%)"},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(Wt,{type:"monotone",dataKey:"costosInventario",name:"Costo Venta Inventario",stroke:"hsl(280, 60%, 55%)",strokeWidth:2,dot:{fill:"hsl(280, 60%, 55%)"},label:{position:"bottom",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(Wt,{type:"monotone",dataKey:"otrosGastos",name:"Otros Gastos",stroke:"hsl(210, 15%, 55%)",strokeWidth:2,dot:{fill:"hsl(210, 15%, 55%)"},label:{position:"bottom",fill:"hsl(var(--foreground))",fontSize:12,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}}),r.jsx(jr,{})]}):r.jsx(Wt,{type:"monotone",dataKey:"monto",stroke:"hsl(180, 25%, 50%)",strokeWidth:2,dot:{fill:"hsl(180, 25%, 50%)"},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:14,formatter:$=>$>0?`$${$.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`:""}})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Egresos por Tipo"}),r.jsx(Me,{children:"Distribucin de costos y gastos"})]}),r.jsxs(_e,{variant:"outline",className:"text-lg font-bold bg-primary/10 text-primary border-primary/30 px-4 py-2",children:["Total: $",U.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]})}),r.jsx(Q,{children:B.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:[r.jsx(Ht,{className:"h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay datos para mostrar"})]}):r.jsx(mt,{width:"100%",height:320,children:r.jsxs(dl,{children:[r.jsx(Xn,{data:B,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:3,labelLine:!0,label:$=>{const{x:ie,y:J,tipo:ge,monto:je,percent:ye}=$,Ce=(ye*100).toFixed(1),We=`$${Number(je).toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`;return r.jsxs("text",{x:ie,y:J,fill:"hsl(var(--foreground))",textAnchor:ie>$.cx?"start":"end",dominantBaseline:"central",fontSize:13,fontWeight:"500",children:[r.jsx("tspan",{x:ie,dy:"0",children:ge}),r.jsx("tspan",{x:ie,dy:"16",children:We}),r.jsxs("tspan",{x:ie,dy:"16",fontWeight:"600",children:[Ce,"%"]})]})},fill:"#8884d8",dataKey:"monto",children:B.map(($,ie)=>{const J=["hsl(180, 50%, 55%)","hsl(200, 55%, 50%)","hsl(160, 45%, 50%)","hsl(220, 50%, 55%)"];return r.jsx(Kt,{fill:J[ie%4]},`cell-${ie}`)})}),r.jsx(yt,{formatter:$=>[`$${Number($).toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`,"Monto"],contentStyle:{borderRadius:"8px",border:"1px solid hsl(var(--border))"}}),r.jsx(jr,{verticalAlign:"bottom",height:36,formatter:$=>r.jsx("span",{className:"text-sm",children:$})})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Mtodos de Pago Utilizados"}),r.jsx(Me,{children:"Desglose de egresos por forma de pago"})]}),r.jsxs(_e,{variant:"outline",className:"text-lg font-bold bg-primary/10 text-primary border-primary/30 px-4 py-2",children:["Total: $",oe.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]})}),r.jsx(Q,{children:te.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:[r.jsx(Ht,{className:"h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay datos para mostrar"})]}):r.jsx(mt,{width:"100%",height:320,children:r.jsxs(dl,{children:[r.jsxs(Xn,{data:te,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:3,labelLine:!0,label:$=>{const{x:ie,y:J,estado:ge,monto:je,percent:ye}=$,Ce=(ye*100).toFixed(1),We=`$${Number(je).toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`;return r.jsxs("text",{x:ie,y:J,fill:"hsl(var(--foreground))",textAnchor:ie>$.cx?"start":"end",dominantBaseline:"central",fontSize:13,fontWeight:"500",children:[r.jsx("tspan",{x:ie,dy:"0",children:ge}),r.jsx("tspan",{x:ie,dy:"16",children:We}),r.jsxs("tspan",{x:ie,dy:"16",fontWeight:"600",children:[Ce,"%"]})]})},fill:"#8884d8",dataKey:"monto",children:[r.jsx(Kt,{fill:"hsl(160, 60%, 45%)"}),r.jsx(Kt,{fill:"hsl(200, 50%, 55%)"}),r.jsx(Kt,{fill:"hsl(220, 45%, 50%)"})]}),r.jsx(yt,{formatter:$=>[`$${Number($).toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`,"Monto"],contentStyle:{borderRadius:"8px",border:"1px solid hsl(var(--border))"}}),r.jsx(jr,{verticalAlign:"bottom",height:36,formatter:$=>r.jsx("span",{className:"text-sm",children:$})})]})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:x==="cuenta"?"Egresos por Cuenta":"Egresos por Subcuenta"}),r.jsx(Me,{children:x==="cuenta"?"Agrupacin por cuenta contable completa":"Desglose detallado por subcuentas"})]}),r.jsxs(_e,{variant:"outline",className:"text-lg font-bold bg-primary/10 text-primary border-primary/30 px-4 py-2",children:["Total: $",Se.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Agrupar por:"}),r.jsx(Lr,{value:x,onValueChange:$=>p($),children:r.jsxs(Dr,{className:"h-9",children:[r.jsx(Qe,{value:"cuenta",className:"text-xs",children:"Cuenta"}),r.jsx(Qe,{value:"subcuenta",className:"text-xs",children:"Subcuenta"})]})})]})]})}),r.jsx(Q,{children:(()=>{const $=x==="cuenta"?ue:pe;return $.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:[r.jsx(Ht,{className:"h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay datos para mostrar"})]}):r.jsx(mt,{width:"100%",height:350,children:r.jsxs(Gt,{data:$,layout:"vertical",children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{type:"number",tickFormatter:ie=>`$${ie.toLocaleString("es-MX")}`,domain:[0,ie=>Math.ceil(ie*1.2)]}),r.jsx(gt,{dataKey:"subcuenta",type:"category",width:x==="cuenta"?220:150}),r.jsx(yt,{formatter:ie=>[`$${Number(ie).toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`,"Monto"],contentStyle:{borderRadius:"8px",border:"1px solid hsl(var(--border))"}}),r.jsx(rt,{dataKey:"monto",fill:x==="cuenta"?"hsl(220, 60%, 55%)":"hsl(180, 50%, 50%)",label:{position:"right",fill:"hsl(var(--foreground))",fontSize:13,formatter:ie=>`$${ie.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`}})]})})})()})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Mtodos de Pago"}),r.jsx(Me,{children:"Distribucin de pagos realizados"})]}),r.jsxs(_e,{variant:"outline",className:"text-lg font-bold bg-primary/10 text-primary border-primary/30 px-4 py-2",children:["Total: $",Ne.toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})]})]})}),r.jsx(Q,{children:re.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:[r.jsx(Ht,{className:"h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay datos para mostrar"})]}):r.jsx(mt,{width:"100%",height:400,children:r.jsx(vc,{data:re,dataKey:"value",aspectRatio:16/9,stroke:"#fff",content:r.jsx(p$e,{dataTotal:re.reduce(($,ie)=>$+ie.value,0),decimales:a}),children:r.jsx(yt,{formatter:$=>[`$${Number($).toLocaleString("es-MX",{minimumFractionDigits:a,maximumFractionDigits:a})}`,"Pagado"],contentStyle:{borderRadius:"8px",border:"1px solid hsl(var(--border))"}})})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Egresos por Producto"}),r.jsx(Me,{children:"Top 10 productos con mayor egreso"})]}),r.jsx(Q,{className:"space-y-3",children:he.productos.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[r.jsx(Zr,{className:"h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay productos para mostrar"})]}):r.jsxs(r.Fragment,{children:[he.productos.map($=>{const ie=he.totalGeneral>0?($.monto/he.totalGeneral*100).toFixed(1):"0.0";return r.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${$.tieneAsignacion?"":"border-amber-500/50 bg-amber-50/50 dark:bg-amber-950/20"}`,children:[$.imagen?r.jsx("img",{src:$.imagen,alt:$.nombre,className:"w-12 h-12 rounded-md object-cover flex-shrink-0"}):r.jsx("div",{className:`w-12 h-12 rounded-md flex items-center justify-center flex-shrink-0 ${$.tieneAsignacion?"bg-muted":"bg-amber-100 dark:bg-amber-900/30"}`,children:r.jsx(Zr,{className:`w-5 h-5 ${$.tieneAsignacion?"text-muted-foreground":"text-amber-600 dark:text-amber-400"}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium truncate",children:$.nombre}),!$.tieneAsignacion&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-200 flex-shrink-0",children:"Sin asignar"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.transacciones," ",$.transacciones===1?"transaccin":"transacciones"]})]}),r.jsx("div",{className:"text-right flex-shrink-0",children:r.jsx("p",{className:"font-bold text-foreground",children:F($.monto)})}),r.jsx("div",{className:"flex-shrink-0",children:r.jsxs(_e,{variant:"outline",className:"bg-teal-50/50 text-teal-700 border-teal-300 dark:bg-teal-950/50 dark:text-teal-300",children:[ie,"%"]})})]},$.nombre)}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[r.jsx("span",{className:"font-semibold text-primary",children:"Total General"}),r.jsx("span",{className:"text-lg font-bold text-foreground",children:F(he.totalGeneral,!0)})]})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Egresos por Proveedor"}),r.jsx(Me,{children:"Top 10 proveedores por monto de egresos"})]}),r.jsx(Q,{className:"space-y-3",children:z.proveedores.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[r.jsx(Zr,{className:"h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay proveedores para mostrar"})]}):r.jsxs(r.Fragment,{children:[z.proveedores.map($=>{const ie=z.totalGeneral>0?($.monto/z.totalGeneral*100).toFixed(1):"0.0";return r.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${$.tieneAsignacion?"":"border-amber-500/50 bg-amber-50/50 dark:bg-amber-950/20"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium truncate",children:$.nombre}),!$.tieneAsignacion&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-200 flex-shrink-0",children:"Sin asignar"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.transacciones," ",$.transacciones===1?"transaccin":"transacciones"]})]}),r.jsx("div",{className:"text-right flex-shrink-0",children:r.jsx("p",{className:"font-bold text-foreground",children:F($.monto)})}),r.jsx("div",{className:"flex-shrink-0",children:r.jsxs(_e,{variant:"outline",className:"bg-teal-50/50 text-teal-700 border-teal-300 dark:bg-teal-950/50 dark:text-teal-300",children:[ie,"%"]})})]},$.nombre)}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[r.jsx("span",{className:"font-semibold text-primary",children:"Total General"}),r.jsx("span",{className:"text-lg font-bold text-foreground",children:F(z.totalGeneral,!0)})]})]})})]})]})]})},g$e=({value:e,onValueChange:t,accountType:n,className:s=""})=>{const a=SS(),{data:o}=Ca(),{data:i}=Nj(),[l,c]=y.useState(""),[d,u]=y.useState(""),[m,f]=y.useState(""),[h,x]=y.useState(""),p=(o==null?void 0:o.estadosFinancieros)||{},v=i||[];y.useEffect(()=>{n==="costo"?(c("Estado de Resultados"),u("Egresos"),f("Costo de Ventas"),x("5001"),t("","5001")):n==="gasto"?(c("Estado de Resultados"),u("Egresos"),f("")):(c(""),u(""),f(""),x(""))},[n]);const j=()=>Object.keys(p),g=()=>!l||!p[l]?[]:Object.keys(p[l]),N=()=>{var P;return!l||!d||!((P=p[l])!=null&&P[d])?[]:Object.keys(p[l][d])},_=()=>{var P,k;return!l||!d||!m?[]:((k=(P=p[l])==null?void 0:P[d])==null?void 0:k[m])||[]},b=()=>h?v.filter(P=>P.cuenta_madre_codigo===h):[],w=P=>{t(P,h)},S=P=>{P<=1&&u(""),P<=2&&f(""),P<=3&&x(""),P<=4&&t("","")},C=P=>{if(n==="costo")return e?"completed":"active";if(n==="gasto")switch(P){case 1:return m?"completed":"active";case 2:return h?"completed":m?"active":"disabled";case 3:return e||h?"completed":"disabled";default:return"disabled"}switch(P){case 1:return l?"completed":"pending";case 2:return d?"completed":l?"active":"disabled";case 3:return m?"completed":d?"active":"disabled";case 4:return h?"completed":m?"active":"disabled";case 5:return e?"completed":h?"active":"disabled";default:return"disabled"}},A=({step:P,title:k,status:E})=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${E==="completed"?"bg-green-500 text-white":E==="active"?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:E==="completed"?r.jsx(Hl,{className:"w-3 h-3"}):P}),r.jsx("span",{className:`text-sm ${E==="completed"||E==="active"?"text-foreground":"text-muted-foreground"}`,children:k}),P<5&&r.jsx(Ua,{className:"w-4 h-4 text-muted-foreground"})]});return r.jsxs(G,{className:s,children:[r.jsxs(ne,{children:[r.jsx(ae,{className:"text-lg",children:"Seleccionar Subcuenta"}),r.jsxs(Me,{children:["Sigue estos pasos para seleccionar dnde se registrar este ",n]}),r.jsx("div",{className:"flex flex-wrap items-center gap-1 p-3 bg-muted/30 rounded-lg",children:n==="costo"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium bg-green-500 text-white",children:r.jsx(Hl,{className:"w-3 h-3"})}),r.jsx("span",{className:"text-sm text-foreground",children:"Cuenta: 5001 - Costo de Ventas"}),r.jsx(Ua,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${e?"bg-green-500 text-white":"bg-blue-500 text-white"}`,children:e?r.jsx(Hl,{className:"w-3 h-3"}):"1"}),r.jsx("span",{className:"text-sm text-foreground",children:"Seleccionar detalle especfico"})]})]}):n==="gasto"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium bg-green-500 text-white",children:r.jsx(Hl,{className:"w-3 h-3"})}),r.jsx("span",{className:"text-sm text-foreground",children:"Estado de Resultados  Egresos"}),r.jsx(Ua,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsx(A,{step:1,title:"Subcategora",status:C(1)}),r.jsx(A,{step:2,title:"Cuenta",status:C(2)}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${C(3)==="completed"?"bg-green-500 text-white":C(3)==="active"?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:C(3)==="completed"?r.jsx(Hl,{className:"w-3 h-3"}):"3"}),r.jsx("span",{className:`text-sm ${C(3)==="completed"||C(3)==="active"?"text-foreground":"text-muted-foreground"}`,children:"Detalle (Opcional)"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(A,{step:1,title:"Tipo",status:C(1)}),r.jsx(A,{step:2,title:"Categora",status:C(2)}),r.jsx(A,{step:3,title:"Subcategora",status:C(3)}),r.jsx(A,{step:4,title:"Cuenta",status:C(4)}),r.jsx(A,{step:5,title:"Detalle",status:C(5)})]})})]}),r.jsx(Q,{className:"space-y-4",children:n==="gasto"?h?r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Selecciona el detalle especfico *"}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Para la cuenta ",h,". Es obligatorio seleccionar un detalle especfico para los gastos recurrentes."]}),r.jsxs(De,{value:e||"",onValueChange:w,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el detalle especfico"})}),r.jsx($e,{className:"bg-background border shadow-md",children:b().length>0?b().map(P=>r.jsx(le,{value:P.id,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:P.nombre}),r.jsx(_e,{variant:"outline",className:"text-xs",children:"Detalle especfico"})]})},P.id)):r.jsx(le,{value:"no-subcuentas",disabled:!0,children:r.jsxs("span",{className:"text-muted-foreground italic",children:["No hay subcuentas para la cuenta ",h]})})})]}),b().length===0&&r.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Ht,{className:"w-4 h-4 text-yellow-600"}),r.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Subcuenta requerida"})]}),r.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-3",children:["Necesitas crear un detalle especfico para la cuenta ",h," antes de continuar. Los gastos recurrentes requieren subcuentas para un mejor control contable."]}),r.jsx(Pe,{type:"button",variant:"outline",size:"sm",className:"text-yellow-800 border-yellow-300 hover:bg-yellow-100",onClick:()=>a("/plan-cuentas"),children:"Crear subcuenta ahora"})]})]}):r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:r.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Primero selecciona una cuenta de gasto en la seccin de arriba."})}):n==="costo"?h&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Selecciona el detalle especfico"}),b().length>0?r.jsxs(De,{value:e,onValueChange:w,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el detalle especfico"})}),r.jsx($e,{className:"bg-background border shadow-md",children:b().map(P=>r.jsx(le,{value:P.id,children:P.nombre},P.id))})]}):r.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Ht,{className:"w-4 h-4 text-yellow-600"}),r.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"No hay detalles disponibles"})]}),r.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-3",children:"Necesitas crear un detalle especfico para esta cuenta antes de continuar."}),r.jsx(Pe,{type:"button",variant:"outline",size:"sm",className:"text-yellow-800 border-yellow-300 hover:bg-yellow-100",onClick:()=>a("/plan-cuentas"),children:"Crear detalle especfico"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"1. En qu tipo de reporte aparecer?"}),r.jsxs(De,{value:l,onValueChange:P=>{c(P),S(1)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el tipo de reporte"})}),r.jsx($e,{children:j().map(P=>r.jsx(le,{value:P,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:P}),P==="Balance General"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Lo que tienes"}),P==="Estado de Resultados"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Ingresos y gastos"})]})},P))})]})]}),l&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"2. Qu tipo de movimiento es?"}),r.jsxs(De,{value:d,onValueChange:P=>{u(P),S(2)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la categora principal"})}),r.jsx($e,{children:g().map(P=>r.jsx(le,{value:P,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:P}),P==="Activos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Lo que posees"}),P==="Pasivos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Lo que debes"}),P==="Ingresos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Dinero que entra"}),P==="Egresos"&&r.jsx(_e,{variant:"outline",className:"text-xs",children:"Dinero que sale"})]})},P))})]})]}),d&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"3. Qu tipo especfico?"}),r.jsxs(De,{value:m,onValueChange:P=>{f(P),S(3)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la subcategora"})}),r.jsx($e,{children:N().map(P=>r.jsx(le,{value:P,children:P},P))})]})]}),m&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"4. Cul cuenta especfica?"}),r.jsxs(De,{value:h,onValueChange:P=>{x(P),t("",P)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la cuenta contable"})}),r.jsx($e,{children:_().map(P=>r.jsx(le,{value:P.codigo,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{variant:"outline",className:"font-mono text-xs",children:P.codigo}),r.jsx("span",{children:P.nombre})]})},P.codigo))})]})]}),h&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"5. En qu detalle especfico? *"}),b().length>0?r.jsxs(De,{value:e,onValueChange:w,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el detalle especfico"})}),r.jsx($e,{children:b().map(P=>r.jsx(le,{value:P.id,children:P.nombre},P.id))})]}):r.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Ht,{className:"w-4 h-4 text-yellow-600"}),r.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"No hay detalles disponibles"})]}),r.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-3",children:"Necesitas crear un detalle especfico para esta cuenta antes de continuar."}),r.jsx(Pe,{type:"button",variant:"outline",size:"sm",className:"text-yellow-800 border-yellow-300 hover:bg-yellow-100",onClick:()=>a("/plan-cuentas"),children:"Crear detalle especfico"})]})]})]})})]})},v$e=()=>{const[e,t]=y.useState(""),[n,s]=y.useState(!1),[a,o]=y.useState(!1),[i,l]=y.useState(null),c=SS(),{data:d=[],isLoading:u}=Gj(),m=i$e(),f=l$e(),h=c$e(),[x,p]=y.useState({nombre:"",descripcion:"",tipo:"",unidad:"",proveedorPrincipal:"",esRecurrente:!1,subcuentaId:"",cuentaContable:"",imagen:null}),v=P=>P==="costo"?[{codigo:"5001",nombre:"Costo de Ventas",subgrupo:"Costo de Ventas"},{codigo:"5002",nombre:"Costo de Ventas Inventario",subgrupo:"Costo de Ventas"},{codigo:"5003",nombre:"Devoluciones sobre Compras",subgrupo:"Costo de Ventas"},{codigo:"5004",nombre:"Descuentos sobre Compras",subgrupo:"Costo de Ventas"}]:P==="gasto"?[{codigo:"5101",nombre:"Gastos de Venta",subgrupo:"Gastos de Operacin"},{codigo:"5102",nombre:"Sueldos y Salarios Ventas",subgrupo:"Gastos de Operacin"},{codigo:"5104",nombre:"Publicidad",subgrupo:"Gastos de Operacin"},{codigo:"5105",nombre:"Gastos de Administracin",subgrupo:"Gastos de Operacin"},{codigo:"5106",nombre:"Sueldos y Salarios Administracin",subgrupo:"Gastos de Operacin"},{codigo:"5107",nombre:"Renta de Oficinas",subgrupo:"Gastos de Operacin"},{codigo:"5108",nombre:"Servicios Pblicos",subgrupo:"Gastos de Operacin"},{codigo:"5201",nombre:"Gastos Financieros",subgrupo:"Gastos Financieros"},{codigo:"5202",nombre:"Comisiones Bancarias",subgrupo:"Gastos Financieros"}]:[],j=d.filter(P=>P.tipo==="gasto"),g=d.filter(P=>P.tipo==="costo"),N=j.filter(P=>P.nombre.toLowerCase().includes(e.toLowerCase())||P.proveedor_principal&&P.proveedor_principal.toLowerCase().includes(e.toLowerCase())),_=g.filter(P=>P.nombre.toLowerCase().includes(e.toLowerCase())||P.proveedor_principal&&P.proveedor_principal.toLowerCase().includes(e.toLowerCase())),b=P=>P>20?"text-destructive":P>10?"text-yellow-600":"text-green-600",w=async P=>{if(P.preventDefault(),!x.nombre||!x.tipo||!x.unidad){Le({title:" Campos requeridos",description:"Completa al menos el nombre, tipo y unidad",variant:"destructive"});return}if(x.tipo==="gasto"&&!x.cuentaContable){Le({title:" Cuenta contable requerida",description:"Selecciona la cuenta contable que se ver afectada por este gasto",variant:"destructive"});return}if(x.tipo==="costo"&&!x.subcuentaId){Le({title:" Subcuenta requerida",description:"Es obligatorio seleccionar una subcuenta para registrar un costo",variant:"destructive"});return}const k={nombre:x.nombre,descripcion:x.descripcion,tipo:x.tipo,unidad:x.unidad,proveedor_principal:x.proveedorPrincipal,es_recurrente:x.esRecurrente,subcuenta_id:x.subcuentaId,cuenta_contable:x.cuentaContable,imagen:x.imagen||void 0};m.mutate(k,{onSuccess:()=>{p({nombre:"",descripcion:"",tipo:"",unidad:"",proveedorPrincipal:"",esRecurrente:!1,subcuentaId:"",cuentaContable:"",imagen:null}),s(!1)}})},S=P=>{l({id:P.id,nombre:P.nombre,descripcion:P.descripcion||"",tipo:P.tipo,unidad:P.unidad,proveedorPrincipal:P.proveedor_principal||"",esRecurrente:P.es_recurrente,subcuentaId:P.subcuenta_id||"",cuentaContable:P.cuenta_contable,imagen:null}),o(!0)},C=async P=>{if(P.preventDefault(),!i.nombre||!i.tipo||!i.unidad){Le({title:" Campos requeridos",description:"Completa al menos el nombre, tipo y unidad",variant:"destructive"});return}const k={id:i.id,nombre:i.nombre,descripcion:i.descripcion,tipo:i.tipo,unidad:i.unidad,proveedor_principal:i.proveedorPrincipal,es_recurrente:i.esRecurrente,subcuenta_id:i.subcuentaId,cuenta_contable:i.cuentaContable,imagen:i.imagen||void 0};f.mutate(k,{onSuccess:()=>{l(null),o(!1)}})},A=P=>{var k;return r.jsxs(G,{className:"hover:shadow-md transition-shadow",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex gap-3 items-start",children:[P.imagen_url?r.jsx("img",{src:P.imagen_url,alt:P.nombre,className:"w-16 h-16 object-cover rounded-md border"}):r.jsx("div",{className:"w-16 h-16 bg-muted rounded-md border flex items-center justify-center",children:r.jsx(Oy,{className:"h-8 w-8 text-muted-foreground"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx(ae,{className:"text-lg",children:P.nombre}),r.jsx(Me,{className:"mt-1",children:P.descripcion||"Sin descripcin"})]})]})}),r.jsxs(Q,{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Proveedor principal:"}),r.jsx("span",{className:"font-medium",children:P.proveedor_principal||"No especificado"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Unidad:"}),r.jsx("span",{className:"font-medium",children:P.unidad})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Precio promedio:"}),r.jsxs("span",{className:"font-semibold",children:["$",((k=P.precio_promedio)==null?void 0:k.toLocaleString())||0,"/",P.unidad]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Variacin de precio:"}),r.jsxs("span",{className:`font-medium ${b(P.variacion_precio||0)}`,children:["",P.variacion_precio||0,"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Transacciones:"}),r.jsx("span",{children:P.total_transacciones||0})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"ltima compra:"}),r.jsx("span",{children:P.ultima_compra?new Date(P.ultima_compra).toLocaleDateString():"-"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(Pe,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{P.total_transacciones>0?c(`/egresos/analytics/${P.id}`):Le({title:" Sin datos suficientes",description:`No hay transacciones registradas para "${P.nombre}" an.`,variant:"default"})},children:[r.jsx(pi,{className:"h-3 w-3 mr-1"}),"Analticas"]}),r.jsxs(Pe,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>S(P),children:[r.jsx(Ao,{className:"h-3 w-3 mr-1"}),"Editar"]}),r.jsx(Pe,{size:"sm",variant:"outline",className:"text-destructive",onClick:()=>h.mutate(P.id),children:r.jsx(xs,{className:"h-3 w-3"})})]})]})]},P.id)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(Ts,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar gastos o costos...",value:e,onChange:P=>t(P.target.value),className:"pl-8"})]}),r.jsx(Pe,{variant:"outline",size:"icon",children:r.jsx(dg,{className:"h-4 w-4"})})]}),r.jsxs(vr,{open:n,onOpenChange:s,children:[r.jsx(Hc,{asChild:!0,children:r.jsxs(Pe,{className:"gap-2",children:[r.jsx(as,{className:"h-4 w-4"}),"Agregar Gasto/Costo"]})}),r.jsxs(mr,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Agregar Nuevo Gasto/Costo"}),r.jsx(mn,{children:"Agrega un nuevo item al catlogo de gastos o costos"})]}),r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre *"}),r.jsx(Ae,{id:"nombre",value:x.nombre,onChange:P=>p({...x,nombre:P.target.value}),placeholder:"Nombre del producto/servicio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"tipo",children:"Tipo *"}),r.jsxs(De,{value:x.tipo,onValueChange:P=>{const k={...x,tipo:P,subcuentaId:""};P==="costo"?k.cuentaContable="5001":k.cuentaContable="",p(k)},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar tipo"})}),r.jsxs($e,{children:[r.jsx(le,{value:"gasto",children:"Gasto"}),r.jsx(le,{value:"costo",children:"Costo"})]})]})]})]}),x.tipo==="gasto"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"cuenta-contable",children:"Cuenta Contable a Afectar *"}),r.jsxs(De,{value:x.cuentaContable,onValueChange:P=>p({...x,cuentaContable:P,subcuentaId:""}),children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar cuenta contable"})}),r.jsx($e,{children:v(x.tipo).map(P=>r.jsxs(le,{value:P.codigo,children:[P.codigo," - ",P.nombre]},P.codigo))})]})]}),x.tipo==="costo"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Cuenta Contable Asignada"}),r.jsxs("div",{className:"p-3 bg-muted rounded-md border",children:[r.jsx("p",{className:"text-sm font-medium",children:"5001 - Costo de Ventas"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:" Cuenta asignada automticamente para costos"})]})]}),x.tipo&&r.jsx(g$e,{value:x.subcuentaId,onValueChange:(P,k)=>p({...x,subcuentaId:P,cuentaContable:k}),accountType:x.tipo}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin"}),r.jsx(Kr,{id:"descripcion",value:x.descripcion,onChange:P=>p({...x,descripcion:P.target.value}),placeholder:"Descripcin del producto/servicio",rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"imagen",children:"Imagen (Opcional)"}),r.jsx(Ae,{id:"imagen",type:"file",accept:"image/*",onChange:P=>{var E;const k=((E=P.target.files)==null?void 0:E[0])||null;p({...x,imagen:k})},className:"cursor-pointer"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"unidad",children:"Unidad de Medida *"}),r.jsxs(De,{value:x.unidad,onValueChange:P=>p({...x,unidad:P}),children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar unidad"})}),r.jsxs($e,{children:[r.jsx(le,{value:"kg",children:"Kilogramos (kg)"}),r.jsx(le,{value:"litros",children:"Litros (L)"}),r.jsx(le,{value:"metros",children:"Metros (m)"}),r.jsx(le,{value:"piezas",children:"Piezas (pz)"}),r.jsx(le,{value:"horas",children:"Horas (hrs)"}),r.jsx(le,{value:"servicios",children:"Servicios"}),r.jsx(le,{value:"otros",children:"Otros"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor",children:"Proveedor Principal"}),r.jsx(Ae,{id:"proveedor",value:x.proveedorPrincipal,onChange:P=>p({...x,proveedorPrincipal:P.target.value}),placeholder:"Nombre del proveedor"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(Pe,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),r.jsxs(Pe,{type:"submit",children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Agregar"]})]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Catlogo de Gastos"}),r.jsx(_e,{variant:"secondary",children:N.length})]}),u?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(P=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Q,{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},P))}):N.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(A)}):r.jsx(G,{children:r.jsxs(Q,{className:"text-center py-8",children:[r.jsx(Oy,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:e?"No se encontraron gastos que coincidan con la bsqueda":"An no has agregado gastos al catlogo"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Catlogo de Costos"}),r.jsx(_e,{variant:"secondary",children:_.length})]}),u?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(P=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Q,{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},P))}):_.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(A)}):r.jsx(G,{children:r.jsxs(Q,{className:"text-center py-8",children:[r.jsx(Oy,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:e?"No se encontraron costos que coincidan con la bsqueda":"An no has agregado costos al catlogo"})]})})]}),r.jsx(vr,{open:a,onOpenChange:o,children:r.jsxs(mr,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Editar Gasto/Costo"}),r.jsx(mn,{children:"Modifica la informacin del producto o servicio"})]}),i&&r.jsx("form",{onSubmit:C,className:"space-y-4",children:r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(Pe,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),r.jsxs(Pe,{type:"submit",children:[r.jsx(Ao,{className:"h-4 w-4 mr-2"}),"Actualizar"]})]})})]})})]})},j$e=()=>{var $t,nr,en;const{data:e=[],isLoading:t}=Bz(200),{data:n,isLoading:s}=zz(),{data:a=[]}=Gj();Ca();const{toast:o}=Rs(),i=y.useMemo(()=>{const Ee=new Map;return(a||[]).forEach(He=>{He.imagen_url&&Ee.set(He.nombre.toLowerCase().trim(),He.imagen_url)}),Ee},[a]),[l,c]=y.useState(null),[d,u]=y.useState(!1),[m,f]=y.useState(!1),[h,x]=y.useState(null),[p,v]=y.useState(!1),[j,g]=y.useState(""),[N,_]=y.useState("todos"),[b,w]=y.useState("todos"),[S,C]=y.useState("todos"),[A,P]=y.useState("todos"),[k,E]=y.useState("todos"),[O,M]=y.useState("todos"),[T,V]=y.useState(""),[I,F]=y.useState(""),[D,X]=y.useState(!1),[W,B]=y.useState("todos"),[q,te]=y.useState(!1),[Y,H]=y.useState(null),[L,ue]=y.useState(""),[pe,we]=y.useState(!1),re=y.useMemo(()=>{const Ee=new Set;return e.forEach(He=>{He.proveedor_nombre&&Ee.add(He.proveedor_nombre)}),Array.from(Ee).sort()},[e]),de=y.useMemo(()=>{const Ee=new Set;return e.forEach(He=>{const Vt=new Date(He.created_at);Ee.add(Vt.getFullYear())}),Array.from(Ee).sort((He,Vt)=>Vt-He)},[e]),he=y.useMemo(()=>e.filter(Ee=>{var Vt;if(Ee.tipo_egreso!=="costo"&&Ee.tipo_egreso!=="gasto"&&Ee.tipo_egreso!=="otro")return!1;const He=new Date(Ee.created_at);return!(j&&!Ee.descripcion.toLowerCase().includes(j.toLowerCase())&&!((Vt=Ee.proveedor_nombre)!=null&&Vt.toLowerCase().includes(j.toLowerCase()))||N!=="todos"&&Ee.tipo_egreso!==N||b!=="todos"&&Ee.proveedor_nombre!==b||S!=="todos"&&Ee.tipo_pago!==S||A==="pagado"&&Ee.monto_pendiente>0||A==="pendiente"&&Ee.monto_pendiente===0||k!=="todos"&&He.getMonth()+1!==parseInt(k)||O!=="todos"&&He.getFullYear()!==parseInt(O)||T&&He<new Date(T)||I&&He>new Date(I+"T23:59:59"))}),[e,j,N,b,S,A,k,O,T,I]),ee=y.useMemo(()=>he.filter(Ee=>Ee.cuenta_codigo==="5001"||Ee.cuenta_codigo==="5003"||Ee.cuenta_codigo==="5004"),[he]),z=y.useMemo(()=>he.filter(Ee=>Ee.cuenta_codigo&&Ee.cuenta_codigo.startsWith("51")&&Ee.cuenta_codigo!=="5109"&&Ee.cuenta_codigo!=="5110"),[he]),U=y.useMemo(()=>he.filter(Ee=>Ee.cuenta_codigo==="5204"),[he]),oe=y.useMemo(()=>{const Ee=(n==null?void 0:n.map(R=>{var xe;return{id:R.id,created_at:R.fecha,tipo_egreso:"costo",descripcion:R.producto_nombre,cuenta_codigo:((xe=R.detalles_asiento.find(Re=>Re.cuenta_codigo.startsWith("50")))==null?void 0:xe.cuenta_codigo)||"50XX",monto_total:R.monto,proveedor_nombre:null,imagen_url:R.producto_imagen,cantidad:R.cantidad,costo_unitario:R.costo_unitario,numero_asiento:R.numero_asiento,detalles_asiento:R.detalles_asiento,tipo_pago:null,monto_pagado:R.monto,monto_pendiente:0,estado:"activo"}}))||[],He=ee.map(R=>{var xe,Re;return{id:R.id,created_at:R.created_at,tipo_egreso:R.tipo_egreso,descripcion:R.descripcion,cuenta_codigo:R.cuenta_codigo,monto_total:R.monto_total,proveedor_nombre:R.proveedor_nombre,imagen_url:i.get(((Re=(xe=R.descripcion)==null?void 0:xe.toLowerCase())==null?void 0:Re.trim())||"")||R.imagen_comprobante||null,cantidad:R.cantidad,costo_unitario:R.precio_unitario,numero_asiento:null,detalles_asiento:[],tipo_pago:R.tipo_pago,monto_pagado:R.monto_pagado,monto_pendiente:R.monto_pendiente,estado:R.estado||"activo"}}),Vt=z.map(R=>{var xe,Re;return{id:R.id,created_at:R.created_at,tipo_egreso:R.tipo_egreso,descripcion:R.descripcion,cuenta_codigo:R.cuenta_codigo,monto_total:R.monto_total,proveedor_nombre:R.proveedor_nombre,imagen_url:i.get(((Re=(xe=R.descripcion)==null?void 0:xe.toLowerCase())==null?void 0:Re.trim())||"")||R.imagen_comprobante||null,cantidad:R.cantidad,costo_unitario:R.precio_unitario,numero_asiento:null,detalles_asiento:[],tipo_pago:R.tipo_pago,monto_pagado:R.monto_pagado,monto_pendiente:R.monto_pendiente,estado:R.estado||"activo"}}),At=U.map(R=>{var xe,Re;return{id:R.id,created_at:R.created_at,tipo_egreso:R.tipo_egreso,descripcion:R.descripcion,cuenta_codigo:R.cuenta_codigo,monto_total:R.monto_total,proveedor_nombre:R.proveedor_nombre,imagen_url:i.get(((Re=(xe=R.descripcion)==null?void 0:xe.toLowerCase())==null?void 0:Re.trim())||"")||R.imagen_comprobante||null,cantidad:R.cantidad,costo_unitario:R.precio_unitario,numero_asiento:null,detalles_asiento:[],tipo_pago:R.tipo_pago,monto_pagado:R.monto_pagado,monto_pendiente:R.monto_pendiente,estado:R.estado||"activo"}});return[...Ee,...He,...Vt,...At].sort((R,xe)=>new Date(xe.created_at).getTime()-new Date(R.created_at).getTime())},[n,ee,z,U]);K.useEffect(()=>{console.log(" Costos de Venta Inventario:",n),console.log(" Transacciones Unificadas:",oe)},[n,oe]);const Se=y.useMemo(()=>W==="todos"?oe:W==="costos"?oe.filter(Ee=>{var He;return(He=Ee.cuenta_codigo)==null?void 0:He.startsWith("50")}):W==="gastos"?oe.filter(Ee=>{var He;return(He=Ee.cuenta_codigo)==null?void 0:He.startsWith("51")}):W==="otros_gastos"?oe.filter(Ee=>Ee.cuenta_codigo==="5204"):oe,[oe,W]),Ne=y.useMemo(()=>{const Ee=oe.filter(At=>{var R;return(R=At.cuenta_codigo)==null?void 0:R.startsWith("50")}).reduce((At,R)=>At+R.monto_total,0),He=oe.filter(At=>{var R;return(R=At.cuenta_codigo)==null?void 0:R.startsWith("51")}).reduce((At,R)=>At+R.monto_total,0),Vt=oe.filter(At=>At.cuenta_codigo==="5204").reduce((At,R)=>At+R.monto_total,0);return{totalTransacciones:oe.length,montoTotal:oe.reduce((At,R)=>At+R.monto_total,0),montoPagado:oe.reduce((At,R)=>At+R.monto_pagado,0),montoPendiente:oe.reduce((At,R)=>At+R.monto_pendiente,0),totalCostos:Ee,totalGastos:He,totalOtrosGastos:Vt,totalGlobalEgresos:Ee+He+Vt}},[oe]),$=Ee=>({costo:"destructive",gasto:"default",otro:"secondary"})[Ee]||"default",ie=Ee=>({contado:"default",credito:"secondary",parcial:"outline"})[Ee]||"default",J=Ee=>Ee.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ge=Ee=>{const He=Ee.cuenta_codigo;return He==="5001"||He==="5003"||He==="5004"?{label:"Costos de Venta",className:"bg-red-100 text-red-700 border-red-300"}:He==="5002"?{label:"Costo de Venta Inventario",className:"bg-purple-100 text-purple-700 border-purple-300"}:He==="5204"?{label:"Otros Gastos",className:"bg-gray-100 text-gray-700 border-gray-300"}:He!=null&&He.startsWith("51")?{label:"Gastos Operativos",className:"bg-orange-100 text-orange-700 border-orange-300"}:{label:"Sin categora",className:"bg-gray-50 text-gray-600 border-gray-200"}},je=async Ee=>{f(!0),x(null);try{const He=`EGR-${Ee}`,{data:Vt,error:At}=await ce.from("asientos_contables").select("*").eq("numero_asiento",He).maybeSingle();if(At){console.error("Error loading asiento:",At),f(!1);return}if(!Vt){console.warn("No se encontr asiento para la transaccin:",Ee),f(!1);return}const{data:R,error:xe}=await ce.from("detalle_asientos").select("*").eq("asiento_id",Vt.id);if(xe){console.error("Error loading detalles:",xe),f(!1);return}const{data:Re}=await ce.from("cuentas").select("codigo, nombre"),Ve=new Map((Re==null?void 0:Re.map(st=>[st.codigo,st.nombre]))||[]),Xe=(R==null?void 0:R.map(st=>({...st,cuenta_nombre:Ve.get(st.cuenta_codigo)||st.cuenta_codigo})))||[],nt={...Vt,detalles:Xe};x(nt)}catch(He){console.error("Error en loadAsientosContables:",He),o({title:"Error",description:"Error inesperado al cargar asientos",variant:"destructive"})}finally{f(!1)}},ye=async Ee=>{if(l){v(!0);try{const He=Ee.name.split(".").pop(),At=`comprobantes/${`${l.id}-${Date.now()}.${He}`}`,{error:R}=await ce.storage.from("product-images").upload(At,Ee);if(R)throw R;const{data:{publicUrl:xe}}=ce.storage.from("product-images").getPublicUrl(At),{error:Re}=await ce.from("transacciones_egresos").update({imagen_comprobante:xe}).eq("id",l.id);if(Re)throw Re;o({title:"Comprobante cargado",description:"El comprobante se ha cargado exitosamente"}),c({...l,imagen_comprobante:xe})}catch(He){console.error("Error uploading comprobante:",He),o({title:"Error",description:"Error al cargar el comprobante",variant:"destructive"})}finally{v(!1)}}},Ce=async()=>{if(!Y||!L.trim()){o({title:"Error",description:"Por favor proporciona un motivo de cancelacin",variant:"destructive"});return}we(!0);try{const{data:Ee,error:He}=await ce.functions.invoke("cancelar-egreso",{body:{transaccionId:Y.id,motivoCancelacion:L}});if(He)throw He;o({title:"Transaccin cancelada",description:"La transaccin ha sido cancelada exitosamente"}),te(!1),ue(""),H(null),window.location.reload()}catch(Ee){console.error("Error cancelando transaccin:",Ee),o({title:"Error",description:"No se pudo cancelar la transaccin",variant:"destructive"})}finally{we(!1)}},We=()=>{g(""),_("todos"),w("todos"),C("todos"),P("todos"),E("todos"),M("todos"),V(""),F(""),B("todos")};return t?r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Resumen de Egresos"}),r.jsx(Me,{children:"Cargando transacciones..."})]}),r.jsx(Q,{children:r.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(Ee=>r.jsx(gr,{className:"h-16 w-full"},Ee))})})]}):r.jsxs(r.Fragment,{children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Resumen de Egresos"}),r.jsxs(Me,{children:["Historial de costos y gastos registrados (",he.length," de ",e.filter(Ee=>Ee.tipo_egreso==="costo"||Ee.tipo_egreso==="gasto").length," transacciones)"]})]}),r.jsxs(Pe,{variant:"outline",size:"sm",onClick:()=>X(!D),children:[r.jsx(dg,{className:"h-4 w-4 mr-2"}),D?"Ocultar filtros":"Mostrar filtros"]})]}),D&&r.jsxs("div",{className:"mt-4 space-y-4 p-4 border rounded-lg bg-muted/30",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Buscar"}),r.jsx(Ae,{placeholder:"Buscar por descripcin o proveedor...",value:j,onChange:Ee=>g(Ee.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Tipo de Egreso"}),r.jsxs(De,{value:N,onValueChange:_,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"costo",children:"Costos"}),r.jsx(le,{value:"gasto",children:"Gastos"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Proveedor"}),r.jsxs(De,{value:b,onValueChange:w,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),re.map(Ee=>r.jsx(le,{value:Ee,children:Ee},Ee))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Tipo de Pago"}),r.jsxs(De,{value:S,onValueChange:C,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"contado",children:"Contado"}),r.jsx(le,{value:"credito",children:"Crdito"}),r.jsx(le,{value:"parcial",children:"Parcial"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Categora Contable"}),r.jsxs(De,{value:W,onValueChange:B,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"costos",children:"Costos de Venta (5001-5004)"}),r.jsx(le,{value:"gastos",children:"Gastos Operativos (5101-5108)"}),r.jsx(le,{value:"otros_gastos",children:"Otros Gastos (5204)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Estado de Pago"}),r.jsxs(De,{value:A,onValueChange:P,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"pagado",children:"Pagado"}),r.jsx(le,{value:"pendiente",children:"Con Saldo Pendiente"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Mes"}),r.jsxs(De,{value:k,onValueChange:E,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"1",children:"Enero"}),r.jsx(le,{value:"2",children:"Febrero"}),r.jsx(le,{value:"3",children:"Marzo"}),r.jsx(le,{value:"4",children:"Abril"}),r.jsx(le,{value:"5",children:"Mayo"}),r.jsx(le,{value:"6",children:"Junio"}),r.jsx(le,{value:"7",children:"Julio"}),r.jsx(le,{value:"8",children:"Agosto"}),r.jsx(le,{value:"9",children:"Septiembre"}),r.jsx(le,{value:"10",children:"Octubre"}),r.jsx(le,{value:"11",children:"Noviembre"}),r.jsx(le,{value:"12",children:"Diciembre"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Ao"}),r.jsxs(De,{value:O,onValueChange:M,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),de.map(Ee=>r.jsx(le,{value:Ee.toString(),children:Ee},Ee))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Fecha Inicio"}),r.jsx(Ae,{type:"date",value:T,onChange:Ee=>V(Ee.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Fecha Fin"}),r.jsx(Ae,{type:"date",value:I,onChange:Ee=>F(Ee.target.value)})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs(Pe,{variant:"ghost",size:"sm",onClick:We,className:"w-full",children:[r.jsx(Yh,{className:"h-4 w-4 mr-2"}),"Limpiar Filtros"]})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Transacciones"}),r.jsx("div",{className:"text-lg font-semibold",children:Ne.totalTransacciones})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Monto Total"}),r.jsxs("div",{className:"text-lg font-semibold text-primary",children:["$",J(Ne.montoTotal)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Pagado"}),r.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",J(Ne.montoPagado)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Pendiente"}),r.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:["$",J(Ne.montoPendiente)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Costos de Venta (5001-5004)"}),r.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:["$",J(Ne.totalCostos)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Gastos Operativos (5101-5108)"}),r.jsxs("div",{className:"text-lg font-semibold text-orange-600",children:["$",J(Ne.totalGastos)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Otros Gastos (5204)"}),r.jsxs("div",{className:"text-lg font-semibold text-gray-600",children:["$",J(Ne.totalOtrosGastos)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:"Total de Egresos"}),r.jsxs("div",{className:"text-lg font-semibold text-primary",children:["$",J(Ne.totalGlobalEgresos)]})]})]})]})]}),r.jsx(Q,{children:Se.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Zr,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"No hay egresos registrados"}),r.jsx("p",{className:"text-sm mt-2",children:"Los costos (5001-5004) y gastos (5101-5108) aparecern aqu"})]}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{className:"w-16",children:"Imagen"}),r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Tipo de Egreso"}),r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Proveedor"}),r.jsx(me,{className:"text-right",children:"Cantidad"}),r.jsx(me,{className:"text-right",children:"Costo Unit."}),r.jsx(me,{className:"text-right",children:"Monto Total"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{children:"Acciones"})]})}),r.jsx(kt,{children:Se.map(Ee=>{var He,Vt,At;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-muted flex items-center justify-center border",children:Ee.imagen_url?r.jsx("img",{src:Ee.imagen_url,alt:Ee.descripcion,className:"w-full h-full object-cover",onError:R=>{R.currentTarget.src="/placeholder.svg"}}):r.jsx(Zr,{className:"h-5 w-5 text-muted-foreground"})})}),r.jsx(Z,{className:"whitespace-nowrap",children:new Date(Ee.created_at).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"font-medium",children:Ee.descripcion}),r.jsx("div",{className:"text-xs text-muted-foreground",children:(He=Ee.cuenta_codigo)!=null&&He.startsWith("50")?"Costo de Venta":"Gasto Operativo"})]}),r.jsx(Z,{children:(()=>{const R=ge(Ee);return r.jsx(_e,{variant:"outline",className:`${R.className} text-xs font-medium`,children:R.label})})()}),r.jsx(Z,{children:r.jsx(_e,{variant:(Vt=Ee.cuenta_codigo)!=null&&Vt.startsWith("50")?"destructive":"default",className:"font-mono text-xs",children:Ee.cuenta_codigo||"N/A"})}),r.jsx(Z,{children:Ee.proveedor_nombre?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zo,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm font-medium",children:Ee.proveedor_nombre})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zo,{className:"h-4 w-4 text-muted-foreground opacity-50"}),r.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Sin proveedor asignado"})]})}),r.jsx(Z,{className:"text-right",children:Ee.cantidad?r.jsx("span",{className:"font-medium",children:Ee.cantidad}):r.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})}),r.jsx(Z,{className:"text-right",children:Ee.costo_unitario?r.jsxs("span",{className:"font-medium",children:["$",J(Ee.costo_unitario)]}):r.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})}),r.jsxs(Z,{className:"text-right",children:[r.jsxs("span",{className:`font-semibold ${(At=Ee.cuenta_codigo)!=null&&At.startsWith("50")?"text-purple-600":"text-orange-600"}`,children:["$",J(Ee.monto_total)]}),Ee.monto_pagado>0&&Ee.monto_pagado<Ee.monto_total&&r.jsxs("div",{className:"text-xs text-green-600",children:["Pagado: $",J(Ee.monto_pagado)]}),Ee.monto_pendiente>0&&r.jsxs("div",{className:"text-xs text-yellow-600",children:["Pendiente: $",J(Ee.monto_pendiente)]})]}),r.jsx(Z,{children:Ee.estado==="cancelado"?r.jsx(_e,{variant:"destructive",children:" Cancelada"}):r.jsx(_e,{variant:"outline",children:" Activa"})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(vr,{onOpenChange:R=>{R?(c(Ee),je(Ee.id)):x(null)},children:[r.jsx(Hc,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",size:"sm",title:"Ver detalles completos",children:r.jsx(On,{className:"h-4 w-4"})})}),r.jsxs(mr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Detalles de la Transaccin"}),r.jsx(mn,{children:"Informacin completa y asientos contables"})]}),l&&r.jsxs(Lr,{defaultValue:"general",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-2",children:[r.jsx(Qe,{value:"general",children:"Informacin General"}),r.jsx(Qe,{value:"registros",children:"Registros Contables"})]}),r.jsxs(Je,{value:"general",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Informacin General"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Descripcin:"})," ",l.descripcion]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Tipo:"})," ",l.tipo_egreso]}),l.subtipo_egreso&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Subtipo:"})," ",l.subtipo_egreso]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Mtodo de Pago:"})," ",l.metodo_pago||"N/A"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Tipo de Pago:"})," ",l.tipo_pago]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(l.created_at).toLocaleDateString("es-ES")]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Montos"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Total:"})," $",J(l.monto_total)]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Pagado:"})," $",J(l.monto_pagado)]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Pendiente:"})," $",J(l.monto_pendiente)]}),l.cantidad&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Cantidad:"})," ",l.cantidad]}),l.precio_unitario&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Precio Unitario:"})," $",J(l.precio_unitario)]})]})]})]}),l.proveedor_nombre&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Informacin del Proveedor"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Nombre:"})," ",l.proveedor_nombre]}),l.proveedor_telefono&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Telfono:"})," ",l.proveedor_telefono]}),l.proveedor_email&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",l.proveedor_email]}),l.proveedor_rfc&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"RFC:"})," ",l.proveedor_rfc]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Informacin Contable"}),r.jsx("div",{className:"text-sm space-y-1",children:r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Cuenta Principal:"})," ",l.cuenta_codigo]})})]}),l.comentarios&&r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-md",children:[r.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300 text-sm mb-1",children:" Comentarios"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:l.comentarios})]})]}),r.jsx(Je,{value:"registros",className:"space-y-4",children:m?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),r.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Cargando asientos contables..."})]}):l.detalles_asiento&&l.detalles_asiento.length>0?r.jsxs("div",{children:[r.jsxs("div",{className:"border-b pb-3 mb-4",children:[r.jsx("h4",{className:"font-semibold text-base",children:"Registros Contables"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Asiento: ",l.numero_asiento||"N/A"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm border rounded-lg overflow-hidden",children:[r.jsx("thead",{className:"bg-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left",children:"Cuenta"}),r.jsx("th",{className:"p-3 text-left",children:"Descripcin"}),r.jsx("th",{className:"p-3 text-right",children:"Debe"}),r.jsx("th",{className:"p-3 text-right",children:"Haber"})]})}),r.jsxs("tbody",{children:[l.detalles_asiento.map((R,xe)=>r.jsxs("tr",{className:"border-b last:border-0",children:[r.jsxs("td",{className:"p-3",children:[r.jsx("div",{className:"font-mono font-semibold",children:R.cuenta_codigo}),r.jsx("div",{className:"text-xs text-muted-foreground",children:R.cuenta_nombre})]}),r.jsx("td",{className:"p-3",children:R.descripcion}),r.jsx("td",{className:"p-3 text-right",children:R.debe>0?r.jsxs("span",{className:"text-red-600 font-semibold",children:["$",J(R.debe)]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx("td",{className:"p-3 text-right",children:R.haber>0?r.jsxs("span",{className:"text-green-600 font-semibold",children:["$",J(R.haber)]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})})]},xe)),r.jsxs("tr",{className:"border-t-2 bg-muted/50 font-bold",children:[r.jsx("td",{colSpan:2,className:"p-3",children:"TOTALES"}),r.jsxs("td",{className:"p-3 text-right text-red-600",children:["$",J(l.detalles_asiento.reduce((R,xe)=>R+(Number(xe.debe)||0),0))]}),r.jsxs("td",{className:"p-3 text-right text-green-600",children:["$",J(l.detalles_asiento.reduce((R,xe)=>R+(Number(xe.haber)||0),0))]})]})]})]})}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-md text-sm mt-4",children:[r.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300 mb-1",children:" Informacin"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-400",children:"Este asiento contable refleja cmo esta transaccin afecta a las diferentes cuentas en la balanza de comprobacin y posteriormente en los estados financieros."})]})]}):h!=null&&h.detalles?r.jsxs("div",{children:[r.jsxs("div",{className:"border-b pb-3 mb-4",children:[r.jsx("h4",{className:"font-semibold text-base",children:"Asientos Contables en Balanza"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Asiento #",h.numero_asiento]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm border rounded-lg overflow-hidden",children:[r.jsx("thead",{className:"bg-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left",children:"Cuenta"}),r.jsx("th",{className:"p-3 text-left",children:"Descripcin"}),r.jsx("th",{className:"p-3 text-right",children:"Debe"}),r.jsx("th",{className:"p-3 text-right",children:"Haber"})]})}),r.jsxs("tbody",{children:[h.detalles.map((R,xe)=>r.jsxs("tr",{className:"border-b last:border-0",children:[r.jsxs("td",{className:"p-3",children:[r.jsx("div",{className:"font-mono font-semibold",children:R.cuenta_codigo}),r.jsx("div",{className:"text-xs text-muted-foreground",children:R.cuenta_nombre})]}),r.jsx("td",{className:"p-3",children:R.descripcion}),r.jsx("td",{className:"p-3 text-right",children:R.debe>0?r.jsxs("span",{className:"text-red-600 font-semibold",children:["$",J(R.debe)]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx("td",{className:"p-3 text-right",children:R.haber>0?r.jsxs("span",{className:"text-green-600 font-semibold",children:["$",J(R.haber)]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})})]},xe)),r.jsxs("tr",{className:"border-t-2 bg-muted/50 font-bold",children:[r.jsx("td",{colSpan:2,className:"p-3",children:"TOTALES"}),r.jsxs("td",{className:"p-3 text-right text-red-600",children:["$",J(h.detalles.reduce((R,xe)=>R+Number(xe.debe),0))]}),r.jsxs("td",{className:"p-3 text-right text-green-600",children:["$",J(h.detalles.reduce((R,xe)=>R+Number(xe.haber),0))]})]})]})]})}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-md text-sm mt-4",children:[r.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300 mb-1",children:" Informacin"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-400",children:"Este asiento contable refleja cmo esta transaccin afecta a las diferentes cuentas en la balanza de comprobacin y posteriormente en los estados financieros."})]})]}):r.jsxs("div",{className:"p-8 bg-muted/50 rounded-lg text-center",children:[r.jsx(Ht,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"No se encontraron registros contables para esta transaccin"})]})})]})]})]}),r.jsx(Pe,{variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50",disabled:Ee.estado==="cancelado"||pe,onClick:()=>{H(Ee),te(!0)},title:Ee.estado==="cancelado"?"Transaccin ya cancelada":"Cancelar transaccin",children:""})]})})]},Ee.id)})})]}),r.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Costos de Venta (5001-5004)"}),r.jsxs("div",{className:"text-lg font-bold text-purple-600",children:["$",J(Ne.totalCostos)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Gastos Operativos (5101-5108)"}),r.jsxs("div",{className:"text-lg font-bold text-orange-600",children:["$",J(Ne.totalGastos)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Total de Egresos"}),r.jsxs("div",{className:"text-lg font-bold text-primary",children:["$",J(Ne.totalGlobalEgresos)]})]})]})})]})})]}),r.jsx(vr,{open:q,onOpenChange:te,children:r.jsxs(mr,{children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Cancelar Transaccin"}),r.jsx(mn,{children:"Esta accin crear un asiento de reversin y marcar la transaccin como cancelada."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(se,{children:"Motivo de Cancelacin *"}),r.jsx(Kr,{value:L,onChange:Ee=>ue(Ee.target.value),placeholder:"Describe el motivo de la cancelacin...",rows:4})]}),Y&&r.jsxs("div",{className:"p-3 bg-muted rounded-md text-sm",children:[r.jsx("p",{className:"font-medium mb-2",children:"Transaccin a cancelar:"}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Descripcin:"})," ",Y.descripcion]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Monto:"})," $",J(Y.monto_total)]})]})]}),r.jsxs(Th,{children:[r.jsx(Pe,{variant:"outline",onClick:()=>{te(!1),ue(""),H(null)},disabled:pe,children:"Cerrar"}),r.jsx(Pe,{variant:"destructive",onClick:Ce,disabled:pe||!L.trim(),children:pe?"Cancelando...":"Confirmar Cancelacin"})]})]})}),r.jsx(vr,{open:d,onOpenChange:u,children:r.jsxs(mr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Detalles del Egreso"}),r.jsx(mn,{children:"Informacin completa de la transaccin"})]}),l&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[r.jsx(er,{className:"h-4 w-4"}),"Fecha"]}),r.jsx("div",{className:"font-medium",children:new Date(l.created_at).toLocaleString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Tipo de Egreso"}),r.jsx(_e,{variant:$(l.tipo_egreso),children:l.tipo_egreso}),l.subtipo_egreso&&r.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",l.subtipo_egreso,")"]})]})]}),l.estado==="cancelado"&&r.jsxs("div",{className:"border-t border-destructive/20 pt-4 bg-destructive/5 p-4 rounded-lg",children:[r.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-destructive",children:[r.jsx(Ht,{className:"h-5 w-5"}),"Transaccin Cancelada"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-destructive font-medium",children:"Estado"}),r.jsx(_e,{variant:"destructive",className:"text-sm",children:" CANCELADA"})]}),l.fecha_cancelacion&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-destructive font-medium",children:"Fecha de Cancelacin"}),r.jsx("div",{className:"font-medium text-destructive",children:new Date(l.fecha_cancelacion).toLocaleString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),l.motivo_cancelacion&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-destructive font-medium",children:"Motivo de Cancelacin"}),r.jsx("div",{className:"text-sm bg-destructive/10 p-3 rounded-md border border-destructive/20 whitespace-pre-wrap",children:l.motivo_cancelacion})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Descripcin"}),r.jsx("div",{className:"font-medium",children:l.descripcion})]}),l.cantidad&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Cantidad"}),r.jsx("div",{className:"font-medium",children:l.cantidad})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Precio Unitario"}),r.jsxs("div",{className:"font-medium",children:["$",J(l.precio_unitario||0)]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),r.jsxs("div",{className:"font-medium text-lg",children:["$",J(l.monto_total)]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[r.jsx(li,{className:"h-4 w-4"}),"Informacin de Pago"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Tipo de Pago"}),r.jsx(_e,{variant:ie(l.tipo_pago),children:l.tipo_pago})]}),l.metodo_pago&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mtodo de Pago"}),r.jsx("div",{className:"font-medium",children:l.metodo_pago})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Monto Pagado"}),r.jsxs("div",{className:"font-medium text-green-600",children:["$",J(l.monto_pagado)]})]}),l.monto_pendiente>0&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Monto Pendiente"}),r.jsxs("div",{className:"font-medium text-yellow-600",children:["$",J(l.monto_pendiente)]})]}),l.fecha_vencimiento&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Fecha de Vencimiento"}),r.jsx("div",{className:"font-medium",children:new Date(l.fecha_vencimiento).toLocaleDateString("es-MX")})]})]})]}),l.proveedor_nombre&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Zo,{className:"h-4 w-4"}),"Informacin del Proveedor"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Nombre"}),r.jsx("div",{className:"font-medium",children:l.proveedor_nombre})]}),l.proveedor_telefono&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Telfono"}),r.jsx("div",{className:"font-medium",children:l.proveedor_telefono})]}),l.proveedor_email&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Email"}),r.jsx("div",{className:"font-medium",children:l.proveedor_email})]}),l.proveedor_rfc&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"RFC"}),r.jsx("div",{className:"font-medium",children:l.proveedor_rfc})]})]})]}),l.comentarios&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Comentarios"}),r.jsx("div",{className:"text-sm bg-muted p-3 rounded-md",children:l.comentarios})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[r.jsx(zF,{className:"h-4 w-4"}),"Asientos en Balanza de Comprobacin"]}),m?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando asientos contables..."}):h?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-muted rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Nmero de Asiento:"})," ",h.numero_asiento]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(h.fecha).toLocaleDateString("es-ES")]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"font-medium",children:"Descripcin:"})," ",h.descripcion]})]})}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Cuenta"}),r.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Descripcin"}),r.jsx("th",{className:"text-right p-3 text-sm font-medium",children:"Debe"}),r.jsx("th",{className:"text-right p-3 text-sm font-medium",children:"Haber"})]})}),r.jsxs("tbody",{children:[($t=h.detalles)==null?void 0:$t.map((Ee,He)=>r.jsxs("tr",{className:"border-t",children:[r.jsxs("td",{className:"p-3 text-sm",children:[r.jsx("div",{className:"font-medium",children:Ee.cuenta_codigo}),r.jsx("div",{className:"text-xs text-muted-foreground",children:Ee.cuenta_nombre})]}),r.jsx("td",{className:"p-3 text-sm",children:Ee.descripcion}),r.jsx("td",{className:"p-3 text-sm text-right font-medium",children:Ee.debe>0?`$${J(Ee.debe)}`:"-"}),r.jsx("td",{className:"p-3 text-sm text-right font-medium",children:Ee.haber>0?`$${J(Ee.haber)}`:"-"})]},He)),r.jsxs("tr",{className:"border-t-2 bg-muted/50 font-bold",children:[r.jsx("td",{colSpan:2,className:"p-3 text-sm",children:"TOTALES"}),r.jsxs("td",{className:"p-3 text-sm text-right",children:["$",J((nr=h.detalles)==null?void 0:nr.reduce((Ee,He)=>Ee+Number(He.debe),0))]}),r.jsxs("td",{className:"p-3 text-sm text-right",children:["$",J((en=h.detalles)==null?void 0:en.reduce((Ee,He)=>Ee+Number(He.haber),0))]})]})]})]})}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-md text-sm",children:[r.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300 mb-1",children:" Informacin"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-400",children:"Este asiento contable refleja cmo esta transaccin afecta a las diferentes cuentas en la balanza de comprobacin y posteriormente en los estados financieros."})]})]}):r.jsx("div",{className:"p-4 bg-muted/50 rounded-lg text-sm text-muted-foreground text-center",children:"No se encontraron asientos contables para esta transaccin"})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[r.jsx(ug,{className:"h-4 w-4"}),"Comprobante Fotogrfico"]}),l.imagen_comprobante?r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"rounded-lg overflow-hidden border",children:r.jsx("img",{src:l.imagen_comprobante,alt:"Comprobante",className:"w-full h-auto max-h-96 object-contain bg-muted"})}),r.jsx("a",{href:l.imagen_comprobante,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline inline-block",children:"Ver imagen completa en nueva pestaa"})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 bg-muted/50 rounded-lg text-center text-sm text-muted-foreground",children:"No hay comprobante cargado para esta transaccin"}),r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("label",{htmlFor:"comprobante-upload",className:"cursor-pointer",children:r.jsxs("div",{className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium inline-flex items-center gap-2",children:[r.jsx(ug,{className:"h-4 w-4"}),p?"Cargando...":"Cargar Comprobante"]})}),r.jsx("input",{id:"comprobante-upload",type:"file",accept:"image/*",className:"hidden",disabled:p,onChange:Ee=>{var Vt;const He=(Vt=Ee.target.files)==null?void 0:Vt[0];He&&ye(He)}}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatos soportados: JPG, PNG, WEBP (Mx. 5MB)"})]})]})]})]})]})})]})},y$e=()=>{const[e,t]=y.useState(null);return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gestin de Egresos"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Registra gastos, costos y otros egresos con seguimiento completo de pagos y proveedores"})]}),r.jsx("div",{className:"p-6 pb-0",children:r.jsxs(Lr,{defaultValue:"registro",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-4 mb-6",children:[r.jsxs(Qe,{value:"registro",className:"flex items-center gap-2",children:[r.jsx(a0,{className:"h-4 w-4"}),"Registro de Egresos"]}),r.jsxs(Qe,{value:"resumen",className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-4 w-4"}),"Resumen de Egresos"]}),r.jsxs(Qe,{value:"reportes",className:"flex items-center gap-2",children:[r.jsx(Ku,{className:"h-4 w-4"}),"Analtica de Egresos"]}),r.jsxs(Qe,{value:"catalogo",className:"flex items-center gap-2",children:[r.jsx(iS,{className:"h-4 w-4"}),"Catlogo de Costos y Gastos"]})]}),r.jsx(Je,{value:"registro",className:"w-full overflow-visible",children:e?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(Pe,{variant:"ghost",onClick:()=>t(null),className:"mb-4",children:[r.jsx(Rf,{className:"h-4 w-4 mr-2"}),"Volver al men de seleccin"]}),e==="precargados"&&r.jsx(d$e,{}),e==="generales"&&r.jsx(u$e,{}),e==="otros"&&r.jsx(m$e,{})]}):r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Nuevo Registro de Egreso"}),r.jsx(Me,{children:"Selecciona el tipo de egreso que deseas registrar"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(G,{className:"cursor-pointer hover:border-primary hover:shadow-md transition-all",onClick:()=>t("precargados"),children:r.jsxs(ne,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:r.jsx(Zr,{className:"h-8 w-8 text-primary"})})}),r.jsx(ae,{className:"text-lg",children:"Costos y Gastos Precargados"}),r.jsx(Me,{children:"Registra egresos de productos del catlogo"})]})}),r.jsx(G,{className:"cursor-pointer hover:border-primary hover:shadow-md transition-all",onClick:()=>t("generales"),children:r.jsxs(ne,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:r.jsx(Xh,{className:"h-8 w-8 text-primary"})})}),r.jsx(ae,{className:"text-lg",children:"Costos y Gastos Generales"}),r.jsx(Me,{children:"Registra gastos operativos generales"})]})}),r.jsx(G,{className:"cursor-pointer hover:border-primary hover:shadow-md transition-all",onClick:()=>t("otros"),children:r.jsxs(ne,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:r.jsx(oS,{className:"h-8 w-8 text-primary"})})}),r.jsx(ae,{className:"text-lg",children:"Otros Gastos"}),r.jsx(Me,{children:"Registra gastos extraordinarios y diversos"})]})})]})})]})}),r.jsx(Je,{value:"resumen",className:"w-full overflow-visible",children:r.jsx(j$e,{})}),r.jsx(Je,{value:"reportes",className:"w-full overflow-visible",children:r.jsx(x$e,{})}),r.jsx(Je,{value:"catalogo",className:"w-full overflow-visible",children:r.jsx(v$e,{})})]})})]})},b$e=({categoriaActivo:e,valorTotal:t,tipoPago:n,metodoPago:s,montoPagado:a,montoPendiente:o,anosDepreciacion:i,fechaAdquisicion:l})=>{const c=()=>({equipo_computo:{codigo:"1201",nombre:"Activos Fijos"},maquinaria:{codigo:"1201",nombre:"Activos Fijos"},vehiculos:{codigo:"1201",nombre:"Activos Fijos"},mobiliario:{codigo:"1201",nombre:"Activos Fijos"},edificios:{codigo:"1201",nombre:"Activos Fijos"},equipo_oficina:{codigo:"1201",nombre:"Activos Fijos"},otro:{codigo:"1201",nombre:"Activos Fijos"}})[e]||{codigo:"1201",nombre:"Activos Fijos"},d=()=>s==="efectivo"?{codigo:"1001",nombre:"Caja"}:s==="transferencia"?{codigo:"1002",nombre:"Bancos"}:s!=null&&s.startsWith("tarjeta_credito_")?{codigo:"2002",nombre:"Cuentas por Pagar"}:null,u=c(),m=d(),f=i?t/i:0,h=f/12,x=g=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(g),p=t,v=a+o,j=Math.abs(p-v)<.01;return!e||!t||!n?r.jsxs(G,{className:"border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsx(ae,{className:"text-lg",children:"Preview Asiento Contable"}),r.jsx(Me,{className:"text-xs",children:"Completa los campos para ver el impacto contable"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Selecciona categora, valor y tipo de pago"})})]}):r.jsxs(G,{className:"border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsx(ae,{className:"text-lg",children:"Preview Asiento Contable"}),r.jsx(Me,{className:"text-xs",children:"Impacto en la balanza de comprobacin"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2 p-3 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Nmero:"}),r.jsx("span",{className:"font-mono",children:"INV-[nuevo]"})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Fecha:"}),r.jsx("span",{children:ze(l,"dd/MM/yyyy",{locale:ht})})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Tipo:"}),r.jsx("span",{children:"Inversin CAPEX"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-semibold",children:"DEBE"}),r.jsx(_e,{variant:"outline",className:"text-xs",children:x(t)})]}),r.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 rounded-lg space-y-1",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs font-medium",children:[u.codigo," - ",u.nombre]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Adquisicin de activo fijo"})]}),r.jsx("p",{className:"text-xs font-bold text-green-600",children:x(t)})]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-semibold",children:"HABER"}),r.jsx(_e,{variant:"outline",className:"text-xs",children:x(a+o)})]}),a>0&&m&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg space-y-1",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs font-medium",children:[m.codigo," - ",m.nombre]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n==="parcial"?"Pago parcial":"Pago total"," (",s==="efectivo"?"efectivo":s==="transferencia"?"transferencia":"tarjeta crdito",")"]})]}),r.jsx("p",{className:"text-xs font-bold text-blue-600",children:x(a)})]})}),o>0&&r.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-950/20 rounded-lg space-y-1",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium",children:"2002 - Cuentas por Pagar"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Saldo pendiente por pagar"})]}),r.jsx("p",{className:"text-xs font-bold text-orange-600",children:x(o)})]})})]}),r.jsx("div",{className:"flex items-center justify-center gap-2 p-2 bg-muted rounded-lg",children:j?r.jsxs(r.Fragment,{children:[r.jsx(_c,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-xs font-medium text-green-600",children:"El asiento cuadra"})]}):r.jsx(r.Fragment,{children:r.jsx("span",{className:"text-xs font-medium text-destructive",children:" El asiento NO cuadra"})})}),i&&r.jsx(r.Fragment,{children:r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4 text-purple-600"}),r.jsx("h4",{className:"text-sm font-semibold",children:"Depreciacin Mensual"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Se generarn automticamente ",i*12," asientos de depreciacin"]}),r.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg space-y-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs font-medium",children:"5003 - Gasto por Depreciacin"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"DEBE (mensual)"}),r.jsx("span",{className:"text-xs font-bold text-purple-600",children:x(h)})]})]}),r.jsxs("div",{className:"border-t pt-2 space-y-1",children:[r.jsx("p",{className:"text-xs font-medium",children:"1202 - Depreciacin Acumulada"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"HABER (mensual)"}),r.jsx("span",{className:"text-xs font-bold text-purple-600",children:x(h)})]})]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Depreciacin anual: ",x(f)]})]})})]})]})},N$e=()=>{var re,de;const{crearInversion:e,recomendaciones:t}=Qc(),{proveedores:n}=Oj(),{data:s}=fp(),{data:a}=Dl(),[o,i]=y.useState(new Date),[l,c]=y.useState(!1),[d,u]=y.useState(null),[m,f]=y.useState(""),[h,x]=y.useState(null),[p,v]=y.useState(!1),[j,g]=y.useState(""),[N,_]=y.useState(""),[b,w]=y.useState(""),[S,C]=y.useState(""),[A,P]=y.useState(""),[k,E]=y.useState(),[O,M]=y.useState({producto_nombre:"",descripcion:"",valor_total:"",monto_pagado:"",tipo_pago:"",metodo_pago:"",proveedor_nombre:"",proveedor_email:"",proveedor_telefono:"",proveedor_rfc:"",cuenta_codigo:"",comentarios:""}),T=t.find(he=>he.categoria_activo===m),V=he=>{if(!he)return"";const ee=parseFloat(he.replace(/,/g,""));return isNaN(ee)?"":ee.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},I=he=>{f(he);const ee=t.find(U=>U.categoria_activo===he);ee&&x(ee.anos_recomendados),M({...O,cuenta_codigo:{equipo_computo:"1206",maquinaria:"1203",vehiculos:"1205",mobiliario:"1204",edificios:"1202",equipo_oficina:"1204",otro:"1212"}[he]||"1212"})},F=he=>{const ee=he.replace(/[^\d.]/g,"");_(ee),M({...O,valor_total:ee})},D=()=>{O.valor_total&&_(V(O.valor_total))},X=()=>{_(O.valor_total)},W=he=>{const ee=he.replace(/[^\d.]/g,"");w(ee),M({...O,monto_pagado:ee})},B=()=>{O.monto_pagado&&w(V(O.monto_pagado))},q=()=>{w(O.monto_pagado)},te=async he=>{var z;const ee=(z=he.target.files)==null?void 0:z[0];if(ee){v(!0);try{const U=ee.name.split(".").pop(),Se=`${`${Math.random()}.${U}`}`,{error:Ne}=await ce.storage.from("product-images").upload(Se,ee);if(Ne)throw Ne;const{data:$}=ce.storage.from("product-images").getPublicUrl(Se);g($.publicUrl),Le({title:"Imagen cargada",description:"La imagen se ha cargado correctamente"})}catch(U){Le({title:"Error",description:U.message||"No se pudo cargar la imagen",variant:"destructive"})}finally{v(!1)}}},Y=()=>{const he=parseFloat(O.valor_total)||0,ee=parseFloat(O.monto_pagado)||0;return he-ee},H=async he=>{var Se;if(he.preventDefault(),!O.cuenta_codigo){Le({title:"Error de validacin",description:"No se pudo determinar la cuenta contable. Por favor selecciona nuevamente la categora.",variant:"destructive"});return}const ee=parseFloat(O.valor_total),z=O.tipo_pago==="total"?ee:O.tipo_pago==="credito"?0:parseFloat(O.monto_pagado);if(z>0&&(O.metodo_pago==="efectivo"||O.metodo_pago==="transferencia")&&!a){Le({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"});return}if(O.metodo_pago==="efectivo"&&z>a.efectivo){Le({title:" Saldo insuficiente en efectivo",description:`Disponible: $${Ke(a.efectivo)} | Necesitas: $${Ke(z)}`,variant:"destructive"});return}if(O.metodo_pago==="transferencia"&&z>a.bancos){Le({title:" Saldo insuficiente en bancos",description:`Disponible: $${Ke(a.bancos)} | Necesitas: $${Ke(z)}`,variant:"destructive"});return}if((Se=O.metodo_pago)!=null&&Se.startsWith("tarjeta_credito_")&&s){const Ne=O.metodo_pago.replace("tarjeta_credito_",""),$=hp(Ne,z,s);if(!$.valido){Le({title:" Lmite de crdito excedido",description:$.mensaje,variant:"destructive"});return}u({formData:O,montoPagado:z,valorTotal:ee}),c(!0);return}const U=ee/(h||1),oe=U/12;e.mutate({...O,categoria_activo:m,anos_depreciacion:h||0,valor_total:ee,monto_pagado:z,monto_pendiente:ee-z,valor_depreciacion_anual:U,valor_depreciacion_mensual:oe,fecha_adquisicion:ze(o,"yyyy-MM-dd"),fecha_inicio_depreciacion:ze(o,"yyyy-MM-dd"),fecha_vencimiento:k?ze(k,"yyyy-MM-dd"):null,imagen_url:j},{onSuccess:async()=>{const Ne=K1(O.metodo_pago);Ne&&z>0&&await U1(Ne,z,`Pago de inversin: ${O.producto_nombre}`)},onError:Ne=>{console.error("Error al registrar inversin:",Ne);let $="Error al registrar la inversin";Ne!=null&&Ne.message&&(Ne.message.includes("Para pago total")?$=Ne.message:Ne.message.includes("asiento")?$="Error al generar el asiento contable: "+Ne.message:$=Ne.message),Le({title:" Error",description:$,variant:"destructive"})}}),M({producto_nombre:"",descripcion:"",valor_total:"",monto_pagado:"",tipo_pago:"",metodo_pago:"",proveedor_nombre:"",proveedor_email:"",proveedor_telefono:"",proveedor_rfc:"",cuenta_codigo:"",comentarios:""}),f(""),x(null),g(""),E(void 0),_(""),w(""),C(""),P("")},L=he=>({equipo_computo:"Equipo de Cmputo",maquinaria:"Maquinaria",vehiculos:"Vehculos",mobiliario:"Mobiliario",edificios:"Edificios",equipo_oficina:"Equipo de Oficina",otro:"Otro"})[he]||he,ue=parseFloat(O.valor_total)||0,pe=O.tipo_pago==="total"?ue:O.tipo_pago==="credito"?0:parseFloat(O.monto_pagado)||0,we=ue-pe;return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{className:"lg:col-span-2 border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Registro de Inversin CAPEX"}),r.jsx(Me,{children:"Registra un nuevo activo fijo y configura su depreciacin"})]}),r.jsx(Q,{className:"px-6 pb-6",children:r.jsxs("form",{onSubmit:H,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Categora del Activo"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Qu tipo de activo fijo vas a registrar? *"}),r.jsxs(De,{value:m,onValueChange:I,required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la categora del activo"})}),r.jsxs($e,{children:[r.jsx(le,{value:"equipo_computo",children:"Equipo de Cmputo"}),r.jsx(le,{value:"maquinaria",children:"Maquinaria"}),r.jsx(le,{value:"vehiculos",children:"Vehculos"}),r.jsx(le,{value:"mobiliario",children:"Mobiliario"}),r.jsx(le,{value:"edificios",children:"Edificios"}),r.jsx(le,{value:"equipo_oficina",children:"Equipo de Oficina"}),r.jsx(le,{value:"otro",children:"Otro"})]})]})]})]}),m&&r.jsxs(r.Fragment,{children:[r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Activo"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"producto_nombre",children:"Nombre del Activo *"}),r.jsx(Ae,{id:"producto_nombre",value:O.producto_nombre,onChange:he=>M({...O,producto_nombre:he.target.value}),placeholder:"Ej: Computadora Dell XPS 15",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"valor_total",children:"Valor Total del Activo *"}),r.jsx(Ae,{id:"valor_total",type:"text",value:N||O.valor_total,onChange:he=>F(he.target.value),onBlur:D,onFocus:X,placeholder:"Ej: 25000.00",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"anos_depreciacion",children:"Aos de Depreciacin *"}),r.jsx(Ae,{id:"anos_depreciacion",type:"number",value:h||"",disabled:!0,className:"bg-muted",required:!0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Establecido automticamente segn la categora del activo"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha_adquisicion",children:"Fecha de Adquisicin *"}),r.jsx(Ae,{id:"fecha_adquisicion",type:"text",value:ze(o,"PPP"),disabled:!0,className:"bg-muted"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Se registrar automticamente con la fecha de hoy"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin del Activo"}),r.jsx(Kr,{id:"descripcion",value:O.descripcion,onChange:he=>M({...O,descripcion:he.target.value}),placeholder:"Descripcin detallada del activo",rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"imagen",children:"Fotografa del Activo"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ae,{id:"imagen",type:"file",accept:"image/*",onChange:te,disabled:p}),j&&r.jsx("img",{src:j,alt:"Preview",className:"h-20 w-20 object-cover rounded"})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin de Pago"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Cmo se pag el activo? *"}),r.jsxs(De,{value:O.tipo_pago,onValueChange:he=>M({...O,tipo_pago:he}),required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el tipo de pago"})}),r.jsxs($e,{children:[r.jsx(le,{value:"total",children:"Pago Total"}),r.jsx(le,{value:"parcial",children:"Pago Parcial"}),r.jsx(le,{value:"credito",children:"Crdito Total"})]})]})]}),O.tipo_pago==="total"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo_pago",children:"Mtodo de Pago *"}),r.jsxs(De,{value:O.metodo_pago,onValueChange:he=>M({...O,metodo_pago:he}),required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar mtodo"})}),r.jsxs($e,{children:[r.jsxs(le,{value:"efectivo",children:["Efectivo - Disponible: $",(a==null?void 0:a.efectivo.toFixed(2))||"0.00"]}),r.jsxs(le,{value:"transferencia",children:["Bancos - Disponible: $",(a==null?void 0:a.bancos.toFixed(2))||"0.00"]}),s&&s.length>0?s.map(he=>r.jsxs(le,{value:`tarjeta_credito_${he.id}`,children:[he.nombre," - Disponible: $",he.limite_disponible.toFixed(2)]},he.id)):null]})]})]}),O.tipo_pago==="parcial"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto_pagado",children:"Monto Pagado *"}),r.jsx(Ae,{id:"monto_pagado",type:"text",value:b||O.monto_pagado,onChange:he=>W(he.target.value),onBlur:B,onFocus:q,placeholder:"Ej: 10000.00",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo_pago",children:"Mtodo de Pago *"}),r.jsxs(De,{value:O.metodo_pago,onValueChange:he=>M({...O,metodo_pago:he}),required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar mtodo"})}),r.jsxs($e,{children:[r.jsxs(le,{value:"efectivo",children:["Efectivo - Disponible: $",(a==null?void 0:a.efectivo.toFixed(2))||"0.00"]}),r.jsxs(le,{value:"transferencia",children:["Bancos - Disponible: $",(a==null?void 0:a.bancos.toFixed(2))||"0.00"]}),s&&s.length>0?s.map(he=>r.jsxs(le,{value:`tarjeta_credito_${he.id}`,children:[he.nombre," - Disponible: $",he.limite_disponible.toFixed(2)]},he.id)):null]})]})]})]}),O.monto_pagado&&O.valor_total&&r.jsx("div",{className:"p-4 bg-muted rounded-lg",children:r.jsxs("p",{className:"text-sm font-medium",children:["Monto Pendiente: $",V(Y().toString())]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Vencimiento *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!k&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),k?ze(k,"PPP"):r.jsx("span",{children:"Selecciona fecha"})]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:k,onSelect:E,initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),O.tipo_pago==="credito"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-muted rounded-lg",children:r.jsxs("p",{className:"text-sm font-medium",children:["Monto Total a Crdito: $",O.valor_total?V(O.valor_total):"0.00"]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Vencimiento *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!k&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),k?ze(k,"PPP"):r.jsx("span",{children:"Selecciona fecha"})]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:k,onSelect:E,initialFocus:!0,className:"pointer-events-auto"})})]})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informacin del Proveedor"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Proveedor"}),r.jsxs(Hn,{value:S,onValueChange:he=>{C(he),he==="nuevo"?(P(""),M({...O,proveedor_nombre:"",proveedor_telefono:"",proveedor_email:"",proveedor_rfc:""})):he==="existente"&&M({...O,proveedor_nombre:"",proveedor_telefono:"",proveedor_email:"",proveedor_rfc:""})},children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"nuevo",id:"proveedor-nuevo-inv"}),r.jsx(se,{htmlFor:"proveedor-nuevo-inv",children:"Nuevo Proveedor"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"existente",id:"proveedor-existente-inv"}),r.jsx(se,{htmlFor:"proveedor-existente-inv",children:"Proveedor Existente"})]})]})]}),S==="existente"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor-select-inv",children:"Seleccionar Proveedor *"}),r.jsxs(De,{value:A,onValueChange:he=>{P(he);const ee=n.find(z=>z.id===he);ee&&M({...O,proveedor_nombre:ee.nombre,proveedor_telefono:ee.telefono||"",proveedor_email:ee.email||"",proveedor_rfc:ee.rfc||""})},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Seleccionar proveedor"})}),r.jsx($e,{children:n&&n.length>0?n.map(he=>r.jsxs(le,{value:he.id,children:[he.nombre,he.rfc&&` - ${he.rfc}`]},he.id)):r.jsx(le,{value:"no-proveedores",disabled:!0,children:"No hay proveedores registrados"})})]})]}),S==="existente"&&A&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-xs text-muted-foreground",children:"Nombre"}),r.jsx("p",{className:"text-sm font-medium",children:O.proveedor_nombre})]}),O.proveedor_telefono&&r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-xs text-muted-foreground",children:"Telfono"}),r.jsx("p",{className:"text-sm font-medium",children:O.proveedor_telefono})]}),O.proveedor_email&&r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-xs text-muted-foreground",children:"Email"}),r.jsx("p",{className:"text-sm font-medium",children:O.proveedor_email})]}),O.proveedor_rfc&&r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-xs text-muted-foreground",children:"RFC"}),r.jsx("p",{className:"text-sm font-medium",children:O.proveedor_rfc})]})]}),S==="nuevo"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor_nombre",children:"Nombre del Proveedor"}),r.jsx(Ae,{id:"proveedor_nombre",value:O.proveedor_nombre,onChange:he=>M({...O,proveedor_nombre:he.target.value}),placeholder:"Nombre del proveedor"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor_telefono",children:"Telfono"}),r.jsx(Ae,{id:"proveedor_telefono",value:O.proveedor_telefono,onChange:he=>M({...O,proveedor_telefono:he.target.value}),placeholder:"Telfono de contacto"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor_email",children:"Email"}),r.jsx(Ae,{id:"proveedor_email",type:"email",value:O.proveedor_email,onChange:he=>M({...O,proveedor_email:he.target.value}),placeholder:"email@proveedor.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"proveedor_rfc",children:"RFC"}),r.jsx(Ae,{id:"proveedor_rfc",value:O.proveedor_rfc,onChange:he=>M({...O,proveedor_rfc:he.target.value}),placeholder:"RFC del proveedor"})]})]})]}),r.jsx(Jr,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"comentarios",children:"Comentarios Adicionales"}),r.jsx(Kr,{id:"comentarios",value:O.comentarios,onChange:he=>M({...O,comentarios:he.target.value}),placeholder:"Notas o comentarios adicionales sobre la inversin",rows:2})]}),r.jsx(Pe,{type:"submit",className:"w-full",disabled:e.isPending,children:e.isPending?"Registrando...":"Registrar Inversin"})]})]})})]}),r.jsxs("div",{className:"space-y-6",children:[m&&O.valor_total&&O.tipo_pago&&r.jsx(b$e,{categoriaActivo:m,valorTotal:ue,tipoPago:O.tipo_pago,metodoPago:O.metodo_pago,montoPagado:pe,montoPendiente:we,anosDepreciacion:h,fechaAdquisicion:o}),r.jsxs(G,{className:"border-0 shadow-none",children:[r.jsxs(ne,{children:[r.jsx(ae,{className:"text-lg",children:"Recomendaciones de Depreciacin"}),r.jsx(Me,{className:"text-xs",children:"Aos recomendados segn normativas fiscales mexicanas"})]}),r.jsxs(Q,{className:"px-4",children:[r.jsx("div",{className:"overflow-auto max-h-[calc(100vh-40rem)]",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{className:"text-xs",children:"Categora"}),r.jsx(me,{className:"text-xs text-center",children:"Aos"})]})}),r.jsx(kt,{children:t.map(he=>r.jsxs(Oe,{className:he.categoria_activo===m?"bg-muted":"",children:[r.jsx(Z,{className:"text-xs font-medium py-2",children:L(he.categoria_activo)}),r.jsx(Z,{className:"text-center py-2",children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-primary text-primary-foreground",children:he.anos_recomendados})})]},he.id))})]})}),m&&T&&r.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[r.jsx("p",{className:"text-xs font-semibold mb-1",children:L(m)}),r.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Rango: ",T.anos_minimos," - ",T.anos_maximos," aos"]}),T.descripcion&&r.jsx("p",{className:"text-xs text-muted-foreground",children:T.descripcion})]})]})]})]}),r.jsx(wa,{open:l,onOpenChange:c,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Confirmar pago con tarjeta de crdito"}),r.jsx(Js,{children:((de=(re=d==null?void 0:d.formData)==null?void 0:re.metodo_pago)==null?void 0:de.startsWith("tarjeta_credito_"))&&s&&(()=>{var z;const he=d.formData.metodo_pago.replace("tarjeta_credito_",""),ee=s.find(U=>U.id===he);return ee?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2 my-4",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Tarjeta:"})," ",ee.nombre]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Lmite disponible actual:"})," $",ee.limite_disponible.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Monto del cargo:"})," $",(z=d==null?void 0:d.montoPagado)==null?void 0:z.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Lmite disponible despus:"})," $",(ee.limite_disponible-((d==null?void 0:d.montoPagado)||0)).toFixed(2)]})]}),r.jsx("p",{children:"Deseas continuar con este pago?"})]}):null})()})]}),r.jsxs(Qs,{children:[r.jsx(ta,{onClick:()=>{c(!1),u(null)},children:"Cancelar"}),r.jsx(ea,{onClick:async()=>{if(d){const{formData:he,montoPagado:ee,valorTotal:z}=d,U=z/(h||1),oe=U/12;e.mutate({...he,categoria_activo:m,anos_depreciacion:h||0,valor_total:z,monto_pagado:ee,monto_pendiente:z-ee,valor_depreciacion_anual:U,valor_depreciacion_mensual:oe,fecha_adquisicion:ze(o,"yyyy-MM-dd"),fecha_inicio_depreciacion:ze(o,"yyyy-MM-dd"),fecha_vencimiento:k?ze(k,"yyyy-MM-dd"):null,imagen_url:j},{onSuccess:async()=>{const Se=K1(he.metodo_pago);Se&&ee>0&&await U1(Se,ee,`Pago de inversin: ${he.producto_nombre}`),M({producto_nombre:"",descripcion:"",valor_total:"",monto_pagado:"",tipo_pago:"",metodo_pago:"",proveedor_nombre:"",proveedor_email:"",proveedor_telefono:"",proveedor_rfc:"",cuenta_codigo:"",comentarios:""}),f(""),x(null),g(""),E(void 0),_(""),w(""),c(!1),u(null)}})}},children:"Continuar"})]})]})})]})},w$e=()=>{const{inversiones:e,isLoading:t}=Qc(),{data:n,isLoading:s}=it({queryKey:["asientos-depreciacion-all"],queryFn:async()=>{const{data:o,error:i}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          descripcion,
          fecha,
          detalle_asientos (
            id,
            cuenta_codigo,
            debe,
            haber,
            descripcion
          )
        `).like("numero_asiento","DEP-%").order("fecha",{ascending:!1});return i?(console.error("Error fetching asientos depreciacion:",i),[]):o||[]},enabled:e.length>0});return{transacciones:y.useMemo(()=>{const o=[];return e.forEach(i=>{o.push({id:`alta-${i.id}`,tipo:"alta",fecha:i.fecha_adquisicion,activo:i.producto_nombre,categoria:i.categoria_activo,monto:i.valor_total,descripcion:i.descripcion,inversion_id:i.id,inversion:i}),(i.estado==="activo"||i.estado==="dado_de_baja")&&((n==null?void 0:n.filter(c=>c.numero_asiento.includes(i.id)))||[]).forEach(c=>{var p;const d=c.numero_asiento.match(/DEP-.+-(\d{4})(\d{2})/),u=d?d[1]:"",m=d?d[2]:"",f=d?new Date(parseInt(u),parseInt(m),0):new Date(c.fecha),h=d?new Date(parseInt(u),parseInt(m)-1).toLocaleString("es-MX",{month:"long",year:"numeric"}):"",x=((p=c.detalle_asientos)==null?void 0:p.filter(v=>v.cuenta_codigo==="5109").reduce((v,j)=>v+j.debe,0))||0;o.push({id:`dep-${c.id}`,tipo:"depreciacion",fecha:f.toISOString().split("T")[0],activo:i.producto_nombre,categoria:i.categoria_activo,monto:x,descripcion:c.descripcion,numero_asiento:c.numero_asiento,mes_ano:h,inversion_id:i.id,inversion:i})}),i.estado==="dado_de_baja"&&i.fecha_baja?o.push({id:`baja-${i.id}`,tipo:"baja",fecha:i.fecha_baja,activo:i.producto_nombre,categoria:i.categoria_activo,motivo:i.motivo_baja,inversion_id:i.id,inversion:i}):i.estado==="vendido"&&i.fecha_baja&&o.push({id:`venta-${i.id}`,tipo:"venta",fecha:i.fecha_baja,activo:i.producto_nombre,categoria:i.categoria_activo,valor_venta:i.valor_venta,motivo:i.motivo_baja,inversion_id:i.id,inversion:i})}),o.sort((i,l)=>new Date(l.fecha).getTime()-new Date(i.fecha).getTime())},[e,n]),isLoading:t||s}},Vz=(e,t)=>it({queryKey:["asientos-inversion",e,t],queryFn:async()=>{if(!e)return null;const n=t==="baja"||t==="venta"?"BAJA":"INV",{data:s,error:a}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          descripcion,
          fecha,
          created_at,
          detalle_asientos (
            id,
            cuenta_codigo,
            debe,
            haber,
            descripcion
          )
        `).like("numero_asiento",`${n}-${e}%`).order("created_at",{ascending:!1});if(a)return console.error("Error fetching asientos:",a),null;if(!s||s.length===0)return null;const o=s.flatMap(u=>u.detalle_asientos||[]),i=[...new Set(o.map(u=>u.cuenta_codigo))],{data:l}=await ce.from("cuentas").select("codigo, nombre").in("codigo",i),c=new Map((l==null?void 0:l.map(u=>[u.codigo,u.nombre]))||[]);return s.map(u=>{var m;return{...u,detalle_asientos:((m=u.detalle_asientos)==null?void 0:m.map(f=>({...f,cuenta:{nombre:c.get(f.cuenta_codigo)||f.cuenta_codigo}})))||[]}})},enabled:!!e}),_$e=()=>it({queryKey:["asientos-inversion-bulk"],queryFn:async()=>{const{data:e,error:t}=await ce.from("asientos_contables").select("numero_asiento").like("numero_asiento","INV-%");if(t)return console.error("Error fetching asientos:",t),new Set;const n=e.map(s=>s.numero_asiento.replace("INV-","")).filter(s=>s.length>0);return new Set(n)}}),e_=e=>it({queryKey:["asientos-depreciacion",e],queryFn:async()=>{if(!e)return[];const t=`DEP-${e}-%`,{data:n,error:s}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          descripcion,
          fecha,
          detalle_asientos (
            id,
            cuenta_codigo,
            debe,
            haber,
            descripcion
          )
        `).like("numero_asiento",t).order("fecha",{ascending:!1});if(s)return console.error("Error fetching asientos depreciacion:",s),[];if(n&&n.length>0){const a=new Set;n.forEach(l=>{var c;(c=l.detalle_asientos)==null||c.forEach(d=>{a.add(d.cuenta_codigo)})});const{data:o}=await ce.from("cuentas").select("codigo, nombre").in("codigo",Array.from(a)),i=new Map((o==null?void 0:o.map(l=>[l.codigo,l.nombre]))||[]);n.forEach(l=>{l.detalle_asientos&&(l.detalle_asientos=l.detalle_asientos.map(c=>({...c,cuenta:{nombre:i.get(c.cuenta_codigo)||c.cuenta_codigo}})))})}return n},enabled:!!e}),S$e=()=>{const{inversiones:e,isLoading:t,eliminarInversion:n,actualizarInversion:s}=Qc(),{transacciones:a,isLoading:o}=w$e(),{tieneAtrasadas:i,totalAtrasadas:l}=Np(),[c,d]=y.useState(null),{data:u,isLoading:m}=Vz(c==null?void 0:c.inversion_id,(c==null?void 0:c.tipo)==="depreciacion"||c==null?void 0:c.tipo),{data:f}=e_((c==null?void 0:c.tipo)==="depreciacion"?c==null?void 0:c.inversion_id:void 0),{data:h,isLoading:x}=_$e(),p=M=>{n.mutate(M)},v=M=>{s.mutate({id:M,actualizacion:{estado:"activo"}})},j=M=>{switch(M){case"alta":return r.jsx(tr,{className:"h-4 w-4"});case"baja":return r.jsx(Rn,{className:"h-4 w-4"});case"venta":return r.jsx(iS,{className:"h-4 w-4"});case"depreciacion":return r.jsx(er,{className:"h-4 w-4"});default:return null}},g=M=>({alta:"Alta",baja:"Baja",venta:"Venta",depreciacion:"Depreciacin"})[M]||M,N=M=>({alta:"default",baja:"destructive",venta:"secondary",depreciacion:"outline"})[M]||"default",_=M=>({equipo_computo:"Equipo de Cmputo",maquinaria:"Maquinaria",vehiculos:"Vehculos",mobiliario:"Mobiliario",edificios:"Edificios",equipo_oficina:"Equipo de Oficina",otro:"Otro"})[M]||M;if(t||o)return r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(gr,{className:"h-8 w-3/4"})}),r.jsx(Q,{children:r.jsx(gr,{className:"h-96 w-full"})})]});const w=e.reduce((M,T)=>M+Number(T.valor_total),0),S=e.filter(M=>M.estado==="activo").reduce((M,T)=>M+Number(T.valor_total),0),C=a.length,A=a.filter(M=>M.tipo==="alta").length,P=a.filter(M=>M.tipo==="baja").length,k=a.filter(M=>M.tipo==="venta").length,E=a.filter(M=>M.tipo==="depreciacion").length,O=e.filter(M=>!(h!=null&&h.has(M.id)));return r.jsxs("div",{className:"space-y-6",children:[i&&r.jsxs(sr,{variant:"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx(ar,{className:"flex items-center justify-between",children:r.jsxs("span",{children:[r.jsxs("strong",{children:[l," depreciacin(es) atrasada(s)."]})," Algunos activos no tienen depreciaciones registradas para perodos anteriores."]})})]}),!x&&O.length>0&&r.jsxs(sr,{variant:"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsxs(ar,{children:["Hay ",O.length," inversin(es) registrada(s) antes de la implementacin de asientos automticos. Estas inversiones NO afectan la balanza de comprobacin. Se recomienda eliminarlas y registrarlas nuevamente."]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Invertido"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["$",w.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Valor Activos Activos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["$",S.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Transacciones"})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-2xl font-bold",children:C}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[A," altas  ",E," depreciaciones  ",P," bajas  ",k," ventas"]})]})})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Historial de Transacciones CAPEX"}),r.jsx(Me,{children:"Registro cronolgico de todas las transacciones de inversiones"})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{children:"Activo"}),r.jsx(me,{children:"Categora"}),r.jsx(me,{children:"Monto"}),r.jsx(me,{children:"Mes/Ao"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Detalle"})]})}),r.jsx(kt,{children:a.map(M=>{var T,V;return r.jsxs(Oe,{children:[r.jsx(Z,{children:ze(new Date(M.fecha),"dd/MM/yyyy")}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_e,{variant:N(M.tipo),children:r.jsxs("div",{className:"flex items-center gap-1",children:[j(M.tipo),g(M.tipo)]})}),M.inversion.estado==="activo"&&(M.tipo==="baja"||M.tipo==="venta")&&r.jsxs(_e,{variant:"outline",className:"text-xs",children:[r.jsx(kN,{className:"h-3 w-3 mr-1"}),"Reactivado"]})]})}),r.jsx(Z,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:M.inversion.imagen_url||"",alt:M.activo}),r.jsx(Na,{children:r.jsx(ug,{className:"h-5 w-5 text-muted-foreground"})})]}),r.jsx("span",{children:M.activo})]})}),r.jsx(Z,{children:_(M.categoria)}),r.jsxs(Z,{children:[M.tipo==="alta"&&M.monto&&r.jsxs("span",{className:"font-medium text-green-600",children:["$",Number(M.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]}),M.tipo==="venta"&&M.valor_venta&&r.jsxs("span",{className:"font-medium text-blue-600",children:["$",Number(M.valor_venta).toLocaleString("es-MX",{minimumFractionDigits:2})]}),M.tipo==="depreciacion"&&M.monto&&r.jsxs("span",{className:"font-medium text-purple-600",children:["$",Number(M.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]}),M.tipo==="baja"&&r.jsx("span",{className:"text-muted-foreground",children:"-"})]}),r.jsxs(Z,{children:[M.tipo==="depreciacion"&&M.mes_ano&&r.jsx(_e,{variant:"secondary",className:"bg-purple-50 text-purple-700",children:M.mes_ano}),M.tipo!=="depreciacion"&&"-"]}),r.jsxs(Z,{className:"max-w-xs truncate",children:[M.tipo==="alta"&&M.descripcion,M.tipo==="depreciacion"&&M.descripcion,(M.tipo==="baja"||M.tipo==="venta")&&M.motivo]}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(vr,{children:[r.jsx(Hc,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>d(M),children:r.jsx(pi,{className:"h-4 w-4"})})}),r.jsxs(mr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(fr,{children:r.jsxs(hr,{children:["Detalle de Transaccin - ",c&&g(c.tipo)]})}),c&&r.jsxs("div",{className:"space-y-4",children:[c.inversion.imagen_url&&r.jsx("img",{src:c.inversion.imagen_url,alt:c.activo,className:"w-full h-64 object-cover rounded-lg"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tipo de Transaccin"}),r.jsx(_e,{variant:N(c.tipo),children:r.jsxs("div",{className:"flex items-center gap-1",children:[j(c.tipo),g(c.tipo)]})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"text-base",children:ze(new Date(c.fecha),"dd/MM/yyyy")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Activo"}),r.jsx("p",{className:"text-base",children:c.activo})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Categora"}),r.jsx("p",{className:"text-base",children:_(c.categoria)})]}),c.tipo==="alta"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valor Total"}),r.jsxs("p",{className:"text-base font-semibold text-green-600",children:["$",Number(c.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Depreciacin Anual"}),r.jsxs("p",{className:"text-base",children:["$",Number(c.inversion.valor_depreciacion_anual||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),c.inversion.proveedor_nombre&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Proveedor"}),r.jsx("p",{className:"text-base",children:c.inversion.proveedor_nombre})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"RFC"}),r.jsx("p",{className:"text-base",children:c.inversion.proveedor_rfc||"N/A"})]})]})]}),c.tipo==="venta"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valor de Venta"}),r.jsxs("p",{className:"text-base font-semibold text-blue-600",children:["$",Number(c.valor_venta||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valor Original"}),r.jsxs("p",{className:"text-base",children:["$",Number(c.inversion.valor_total).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]}),c.tipo==="alta"&&c.descripcion&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Descripcin"}),r.jsx("p",{className:"text-base",children:c.descripcion})]}),(c.tipo==="baja"||c.tipo==="venta")&&c.motivo&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Motivo"}),r.jsx("p",{className:"text-base",children:c.motivo})]}),r.jsx(Jr,{className:"my-4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Historial de Asientos Contables"}),m?r.jsx(gr,{className:"h-32 w-full"}):c.tipo==="depreciacion"&&!f?r.jsxs("div",{className:"space-y-2",children:[r.jsx(gr,{className:"h-12 w-full"}),r.jsx(gr,{className:"h-32 w-full"})]}):c.tipo==="depreciacion"&&c.numero_asiento?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(_e,{variant:"secondary",className:"bg-purple-50 text-purple-700 border-purple-200",children:"Asiento de Depreciacin"}),r.jsx(_e,{variant:"outline",children:c.numero_asiento}),c.mes_ano&&r.jsx(_e,{variant:"secondary",children:c.mes_ano})]}),r.jsx("div",{className:"border rounded-lg p-4 bg-purple-50/30",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:c.descripcion}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Periodo: ",c.mes_ano]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Monto de Depreciacin"}),r.jsxs("p",{className:"text-lg font-bold text-purple-700",children:["$",Number(c.monto||0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})}),f&&f.length>0&&r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsx(kt,{children:(V=(T=f.find(I=>I.numero_asiento===c.numero_asiento))==null?void 0:T.detalle_asientos)==null?void 0:V.map(I=>{var F;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium text-sm",children:[I.cuenta_codigo," - ",(F=I.cuenta)==null?void 0:F.nombre]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:I.descripcion})]})}),r.jsx(Z,{className:"text-right font-mono",children:I.debe>0?r.jsxs("span",{className:"text-red-600 font-medium",children:["$",Number(I.debe).toLocaleString("es-MX",{minimumFractionDigits:2})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{className:"text-right font-mono",children:I.haber>0?r.jsxs("span",{className:"text-green-600 font-medium",children:["$",Number(I.haber).toLocaleString("es-MX",{minimumFractionDigits:2})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})})]},I.id)})})]})}),r.jsx("div",{className:"bg-muted/50 p-3 rounded-lg text-sm",children:r.jsx("p",{className:"text-muted-foreground",children:"Los asientos de depreciacin se generan mensualmente y se reflejan automticamente en la Balanza de Comprobacin."})})]}):u&&u.length>0?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(_e,{variant:"secondary",children:[u.length," ",u.length===1?"asiento":"asientos"]})}),r.jsx(Co,{type:"single",collapsible:!0,defaultValue:"item-0",className:"space-y-2",children:u.map((I,F)=>r.jsxs(Ga,{value:`item-${F}`,className:"border rounded-lg",children:[r.jsx(Ha,{className:"px-4 hover:no-underline",children:r.jsxs("div",{className:"flex flex-col items-start gap-2 text-left w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(_e,{variant:"outline",children:I.numero_asiento}),r.jsx("span",{className:"text-xs text-muted-foreground",children:ze(new Date(I.created_at),"dd/MM/yyyy HH:mm")})]}),r.jsx("span",{className:"text-sm font-normal",children:I.descripcion})]})}),r.jsx(Xa,{className:"px-4 pb-4",children:r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsx(kt,{children:I.detalle_asientos.map(D=>{var X;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium text-sm",children:[D.cuenta_codigo," - ",(X=D.cuenta)==null?void 0:X.nombre]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:D.descripcion})]})}),r.jsx(Z,{className:"text-right font-mono",children:D.debe>0?r.jsxs("span",{className:"text-green-600",children:["$",Number(D.debe).toLocaleString("es-MX",{minimumFractionDigits:2})]}):"-"}),r.jsx(Z,{className:"text-right font-mono",children:D.haber>0?r.jsxs("span",{className:"text-red-600",children:["$",Number(D.haber).toLocaleString("es-MX",{minimumFractionDigits:2})]}):"-"})]},D.id)})})]})})})]},I.id))}),r.jsx("div",{className:"bg-muted/50 p-3 rounded-lg text-sm",children:r.jsxs("p",{className:"text-muted-foreground",children:["Los asientos se generan automticamente al ",c.tipo==="alta"?"registrar la inversin":c.tipo==="venta"?"vender el activo":"dar de baja el activo"," y se reflejan en la Balanza de Comprobacin."]})})]}):r.jsx(sr,{children:r.jsx(ar,{children:"No hay asientos contables registrados para esta transaccin."})})]})]})]})]}),M.tipo==="alta"&&r.jsxs(wa,{children:[r.jsx(Fv,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",size:"sm",children:r.jsx(xs,{className:"h-4 w-4 text-destructive"})})}),r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Eliminar inversin?"}),r.jsxs(Js,{children:['Esta accin no se puede deshacer. Se eliminar permanentemente la inversin "',M.activo,'" y todas sus transacciones asociadas.']})]}),r.jsxs(Qs,{children:[r.jsx(ta,{children:"Cancelar"}),r.jsx(ea,{onClick:()=>p(M.inversion_id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})]}),(M.tipo==="baja"||M.tipo==="venta")&&r.jsxs(wa,{children:[r.jsx(Fv,{asChild:!0,children:r.jsx(Pe,{variant:"ghost",size:"sm",children:r.jsx(kN,{className:"h-4 w-4 text-primary"})})}),r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Reactivar activo?"}),r.jsxs(Js,{children:["Esta accin revertir la ",M.tipo==="venta"?"venta":"baja",' del activo "',M.activo,'". El activo volver a estado activo y podrs darlo de baja nuevamente para generar los asientos contables correctos.']})]}),r.jsxs(Qs,{children:[r.jsx(ta,{children:"Cancelar"}),r.jsx(ea,{onClick:()=>v(M.inversion_id),children:"Reactivar"})]})]})]})]})})]},M.id)})})]})})]})]})},C$e=()=>{const e=Gr();return Qt({mutationFn:async(t={})=>{const{data:n,error:s}=await ce.functions.invoke("generar-depreciaciones-manual",{body:{...t,origen:t.origen||"manual"}});if(s)throw s;return n},onSuccess:t=>{e.invalidateQueries({queryKey:["asientos-depreciacion"]}),e.invalidateQueries({queryKey:["asientos-depreciacion-all"]}),e.invalidateQueries({queryKey:["inversiones"]}),e.invalidateQueries({queryKey:["asientos-contables"]});const n=new Date(t.ano,t.mes-1).toLocaleString("es-MX",{month:"long",year:"numeric"});t.asientos_creados>0&&t.asientos_existentes===0?Le({title:" Depreciaciones generadas",description:`Se crearon ${t.asientos_creados} asiento(s) para ${n}.`}):t.asientos_creados===0&&t.asientos_existentes>0?Le({title:" Sin cambios",description:`Las depreciaciones de ${n} ya fueron generadas anteriormente (${t.asientos_existentes} asiento(s)).`}):t.asientos_creados>0&&t.asientos_existentes>0?Le({title:" Parcialmente generado",description:`${t.asientos_creados} nuevo(s), ${t.asientos_existentes} ya existan para ${n}.`}):Le({title:" Sin asientos",description:`No se encontraron activos que requieran depreciacin en ${n}.`}),t.errores&&t.errores.length>0&&(Le({title:" Algunos errores",description:`${t.errores.length} error(es). Revisa la consola para detalles.`,variant:"destructive"}),console.error("Errores al generar depreciaciones:",t.errores))},onError:t=>{Le({title:"Error",description:`No se pudieron generar las depreciaciones: ${t.message}`,variant:"destructive"})}})},P$e=()=>{const{inversiones:e,isLoading:t}=Qc(),[n,s]=y.useState([]),{mutate:a,isPending:o}=C$e(),{depreciacionesAtrasadas:i,tieneAtrasadas:l,totalAtrasadas:c}=Np(),d=new Date,[u,m]=y.useState((d.getMonth()+1).toString()),[f,h]=y.useState(d.getFullYear().toString());if(t)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin"})});const x=(e==null?void 0:e.filter(M=>M.estado==="activo"))||[],p=x.reduce((M,T)=>M+(T.valor_depreciacion_anual||0),0),v=x.reduce((M,T)=>M+(T.valor_depreciacion_mensual||0),0),j=x.reduce((M,T)=>M+T.valor_total,0),g=M=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(M),N=M=>{s(T=>T.includes(M)?T.filter(V=>V!==M):[...T,M])},_=()=>{a({mes:parseInt(u),ano:parseInt(f),origen:"manual"})},b=parseInt(u),w=parseInt(f),S=new Date(w,b-1,1),C=new Date(d.getFullYear(),d.getMonth(),1),A=S<C,P=Array.from({length:12},(M,T)=>({value:(T+1).toString(),label:new Date(2e3,T).toLocaleString("es-MX",{month:"long"})})),k=Array.from({length:3},(M,T)=>{const V=d.getFullYear()+T;return{value:V.toString(),label:V.toString()}}),E=({inversionId:M})=>{const{data:T,isLoading:V}=e_(M),I=n.includes(M);return V?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx(Vr,{className:"h-4 w-4 animate-spin"})}):!T||T.length===0?r.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:"No hay asientos de depreciacin generados an"}):r.jsxs(zj,{open:I,onOpenChange:()=>N(M),children:[r.jsxs(Vj,{className:"flex items-center justify-between w-full p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-950/30 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-4 w-4 text-purple-600"}),r.jsxs("span",{className:"text-sm font-medium",children:["Asientos de Depreciacin Generados (",T.length,")"]})]}),r.jsx(Po,{className:`h-4 w-4 transition-transform ${I?"rotate-180":""}`})]}),r.jsx(Wj,{className:"pt-3 space-y-2",children:T.map(F=>{var q;const D=F.numero_asiento.match(/DEP-.+-(\d{4})(\d{2})/),X=D?D[1]:"",W=D?D[2]:"",B=D?new Date(parseInt(X),parseInt(W)-1):new Date(F.fecha);return r.jsxs("div",{className:"p-3 border border-purple-200 dark:border-purple-900 rounded-lg bg-background",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold",children:ze(B,"MMMM yyyy",{locale:ht})}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:F.numero_asiento})]}),r.jsx(_e,{variant:"outline",className:"text-xs",children:ze(new Date(F.fecha),"dd/MM/yyyy")})]}),r.jsx("div",{className:"space-y-2 mt-3",children:(q=F.detalle_asientos)==null?void 0:q.map(te=>{var Y;return r.jsxs("div",{className:"flex items-start justify-between text-xs",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-medium",children:[te.cuenta_codigo," - ",(Y=te.cuenta)==null?void 0:Y.nombre]}),r.jsx("p",{className:"text-muted-foreground",children:te.descripcion})]}),r.jsxs("div",{className:"text-right ml-2",children:[te.debe>0&&r.jsxs("div",{className:"space-y-0",children:[r.jsx("p",{className:"text-green-600 font-semibold",children:g(te.debe)}),r.jsx(_e,{variant:"outline",className:"text-[10px] h-4",children:"DEBE"})]}),te.haber>0&&r.jsxs("div",{className:"space-y-0",children:[r.jsx("p",{className:"text-blue-600 font-semibold",children:g(te.haber)}),r.jsx(_e,{variant:"outline",className:"text-[10px] h-4",children:"HABER"})]})]})]},te.id)})})]},F.id)})})]})},O=({inversion:M})=>{const{data:T}=e_(M.id),V=y.useMemo(()=>T?T.reduce((H,L)=>{var pe;const ue=((pe=L.detalle_asientos)==null?void 0:pe.filter(we=>we.cuenta_codigo==="5109").reduce((we,re)=>we+re.debe,0))||0;return H+ue},0):0,[T]),I=Math.max(0,M.valor_total-V),F=H=>{const L=H.match(/DEP-.+-(\d{4})(\d{2})/);if(!L)return null;const ue=parseInt(L[1]),pe=parseInt(L[2]);return new Date(ue,pe-1,1)},D=T&&T.length>0?F(T[0].numero_asiento):null,X=M.fecha_inicio_depreciacion?new Date(M.fecha_inicio_depreciacion):new Date(M.fecha_adquisicion);let W;D?W=H1(ms(D,1)):W=H1(X);const q=UPe(W,new Date),te=(T==null?void 0:T.length)||0,Y=M.valor_total>0?V/M.valor_total*100:0;return r.jsx(G,{className:"border-2",children:r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg",children:M.producto_nombre}),M.descripcion&&r.jsx("p",{className:"text-sm text-muted-foreground",children:M.descripcion}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Categora: ",M.categoria_activo]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Adquisicin: ",ze(new Date(M.fecha_adquisicion),"dd MMM yyyy",{locale:ht})]})]})]}),M.imagen_url&&r.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-muted flex-shrink-0 ml-4",children:r.jsx("img",{src:M.imagen_url,alt:M.producto_nombre,className:"w-full h-full object-cover"})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 pt-4 border-t",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor Original"}),r.jsx("p",{className:"font-semibold",children:g(M.valor_total)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Aos Depreciacin"}),r.jsxs("p",{className:"font-semibold",children:[M.anos_depreciacion," aos"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Meses Depreciados"}),r.jsxs("p",{className:"font-semibold",children:[te," meses"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Prxima Depreciacin"}),r.jsx("p",{className:"font-semibold text-blue-600",children:ze(W,"dd MMM yyyy",{locale:ht})}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:q===0?"Hoy":q>0?`en ${q} das`:`hace ${Math.abs(q)} das`})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Depreciacin Acumulada"}),r.jsx("p",{className:"font-semibold text-orange-600",children:g(V)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor en Libros"}),r.jsx("p",{className:"font-semibold text-green-600",children:g(I)})]})]}),r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Progreso de Depreciacin"}),r.jsxs("span",{className:"font-medium",children:[Y.toFixed(2),"%"]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-full rounded-full transition-all duration-500",style:{width:`${Math.min(Y,100)}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Mensual: ",g(M.valor_depreciacion_mensual||0)]}),r.jsxs("span",{children:["Anual: ",g(M.valor_depreciacion_anual||0)]})]})]}),r.jsx("div",{className:"pt-2",children:r.jsx(E,{inversionId:M.id})})]})})},M.id)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-2 border-primary/20 bg-gradient-to-r from-primary/5 to-purple-500/5",children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ty,{className:"h-5 w-5"}),"Generar Depreciaciones Manualmente"]}),r.jsx(Me,{children:"Genera los asientos contables de depreciacin para el mes seleccionado. Solo puedes generar desde el mes actual en adelante."})]}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Mes"}),r.jsxs(De,{value:u,onValueChange:m,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsx($e,{children:P.map(M=>{const T=M.value===(d.getMonth()+1).toString()&&f===d.getFullYear().toString();return r.jsx(le,{value:M.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[M.label,T&&r.jsx(_e,{variant:"secondary",className:"text-[10px] px-1 py-0",children:"Actual"})]})},M.value)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Ao"}),r.jsxs(De,{value:f,onValueChange:h,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsx($e,{children:k.map(M=>r.jsx(le,{value:M.value,children:M.label},M.value))})]})]})]}),r.jsxs(wa,{children:[r.jsx(Fv,{asChild:!0,children:r.jsxs(Pe,{disabled:o||x.length===0,size:"lg",variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(Ty,{className:"h-4 w-4 mr-2"}),"Generar Manualmente"]})}),r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsxs(Zs,{className:"flex items-center gap-2",children:[r.jsx(Wr,{className:"h-5 w-5 text-amber-500"}),"Generacin Manual de Depreciaciones"]}),r.jsxs(Js,{className:"space-y-3 text-left",children:[r.jsx("p",{className:"font-medium text-foreground",children:"Las depreciaciones se generan automticamente entre los das 28-31 de cada mes."}),r.jsx("p",{children:r.jsx("strong",{children:"Usa esta funcin solo si:"})}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm pl-2",children:[r.jsx("li",{children:"Necesitas registrar depreciaciones de meses anteriores"}),r.jsx("li",{children:"El proceso automtico fall por algn motivo"}),r.jsx("li",{children:"Necesitas proyectar depreciaciones futuras"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground pt-2",children:["Perodo seleccionado: ",r.jsx("strong",{children:new Date(parseInt(f),parseInt(u)-1).toLocaleString("es-MX",{month:"long",year:"numeric"})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Fecha de registro: ",r.jsxs("strong",{children:["Hoy (",ze(new Date,"d 'de' MMMM, yyyy",{locale:ht}),")"]})]})]})]}),r.jsxs(Qs,{children:[r.jsx(ta,{children:"Cancelar"}),r.jsx(ea,{onClick:_,disabled:o,className:"gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Vr,{className:"h-4 w-4 animate-spin"}),"Generando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ty,{className:"h-4 w-4"}),"Generar Ahora"]})})]})]})]})]}),A&&r.jsx(sr,{variant:"destructive",className:"mt-4",children:r.jsx(ar,{children:" No puedes generar depreciaciones de meses pasados. Solo puedes generar desde el mes actual en adelante."})}),x.length===0&&r.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"No hay activos activos para depreciar."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Depreciacin Anual Total"}),r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:g(p)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Basado en ",x.length," activo(s) activo(s)"]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Depreciacin Mensual Total"}),r.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:g(v)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Promedio mensual"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Valor Total de Activos"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:g(j)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Valor original"})]})]})]}),l&&r.jsxs(sr,{variant:"destructive",className:"border-l-4 border-red-500",children:[r.jsx(Wr,{className:"h-5 w-5"}),r.jsxs(ar,{className:"space-y-2",children:[r.jsxs("p",{className:"font-semibold",children:[c," Perodo(s) de Depreciacin Sin Registrar"]}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[i.slice(0,5).map(M=>{const T=M.mesAno.substring(0,4),V=M.mesAno.substring(4,6),I=new Date(parseInt(T),parseInt(V)-1);return r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:M.productoNombre}),r.jsxs("span",{className:"text-muted-foreground",children:[I.toLocaleString("es-MX",{month:"long",year:"numeric"}),M.mesesAtrasados>0&&` (${M.mesesAtrasados} mes${M.mesesAtrasados>1?"es":""} atrs)`]})]},`${M.inversionId}-${M.mesAno}`)}),i.length>5&&r.jsxs("p",{className:"text-muted-foreground italic pt-1",children:["... y ",i.length-5," ms"]})]}),r.jsxs("p",{className:"text-sm mt-3",children:["Usa el botn ",r.jsx("strong",{children:'"Generar Manualmente"'})," arriba para registrar perodos atrasados."]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Historial de Depreciaciones por Activo"}),r.jsx(Me,{children:"Detalle de la depreciacin acumulada y valor en libros de cada activo activo"})]}),r.jsx(Q,{children:x.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay inversiones registradas an"}):r.jsx("div",{className:"space-y-4",children:x.map(M=>r.jsx(O,{inversion:M},M.id))})})]})]})},A$e=()=>it({queryKey:["clientes"],queryFn:async()=>{const{data:e,error:t}=await ce.from("clientes").select("*").eq("activo",!0).order("nombre",{ascending:!0});if(t)throw t;const{data:n,error:s}=await ce.from("transacciones_ingresos").select(`
          cliente_nombre,
          cliente_email,
          cliente_telefono,
          cliente_rfc,
          created_at
        `).not("cliente_nombre","is",null).order("created_at",{ascending:!1});if(s)throw s;const a=new Map;n==null||n.forEach(c=>{const d=`${c.cliente_nombre}_${c.cliente_email}_${c.cliente_telefono}_${c.cliente_rfc}`.toLowerCase();a.has(d)||a.set(d,{id:`tx-${Math.random().toString(36).substr(2,9)}`,nombre:c.cliente_nombre||"",email:c.cliente_email||"",telefono:c.cliente_telefono||"",rfc:c.cliente_rfc||"",direccion:"",ciudad:"",estado:"",codigo_postal:"",activo:!0,created_at:c.created_at,updated_at:c.created_at,source:"transaction"})});const o=[...(e==null?void 0:e.map(c=>({...c,source:"dedicated"})))||[],...Array.from(a.values())],i=[],l=new Set;return o.filter(c=>c.source==="dedicated").forEach(c=>{const d=`${c.nombre}_${c.email}_${c.telefono}`.toLowerCase();l.has(d)||(l.add(d),i.push(c))}),o.filter(c=>c.source==="transaction").forEach(c=>{const d=`${c.nombre}_${c.email}_${c.telefono}`.toLowerCase();l.has(d)||(l.add(d),i.push(c))}),i.sort((c,d)=>c.nombre.localeCompare(d.nombre))}}),E$e=()=>{const e=Gr();return Qt({mutationFn:async t=>{var a;const{data:n,error:s}=await ce.from("clientes").insert([{...t,user_id:(a=(await ce.auth.getUser()).data.user)==null?void 0:a.id}]).select().single();if(s)throw s;return n},onSuccess:()=>{e.invalidateQueries({queryKey:["clientes"]}),Le({title:"Cliente creado",description:"El cliente ha sido registrado exitosamente."})},onError:t=>{console.error("Error creating client:",t),Le({title:"Error",description:"No se pudo crear el cliente.",variant:"destructive"})}})};var Hj="Checkbox",[M$e,OFe]=hn(Hj),[O$e,OC]=M$e(Hj);function T$e(e){const{__scopeCheckbox:t,checked:n,children:s,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=e,[f,h]=hs({prop:n,defaultProp:a??!1,onChange:c,caller:Hj}),[x,p]=y.useState(null),[v,j]=y.useState(null),g=y.useRef(!1),N=x?!!i||!!x.closest("form"):!0,_={checked:f,disabled:o,setChecked:h,control:x,setControl:p,name:l,form:i,value:u,hasConsumerStoppedPropagationRef:g,required:d,defaultChecked:ul(a)?!1:a,isFormControl:N,bubbleInput:v,setBubbleInput:j};return r.jsx(O$e,{scope:t,..._,children:k$e(m)?m(_):s})}var Wz="CheckboxTrigger",qz=y.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...s},a)=>{const{control:o,value:i,disabled:l,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:f,isFormControl:h,bubbleInput:x}=OC(Wz,e),p=Ft(a,u),v=y.useRef(c);return y.useEffect(()=>{const j=o==null?void 0:o.form;if(j){const g=()=>m(v.current);return j.addEventListener("reset",g),()=>j.removeEventListener("reset",g)}},[o,m]),r.jsx(Ze.button,{type:"button",role:"checkbox","aria-checked":ul(c)?"mixed":c,"aria-required":d,"data-state":Xz(c),"data-disabled":l?"":void 0,disabled:l,value:i,...s,ref:p,onKeyDown:Ge(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Ge(n,j=>{m(g=>ul(g)?!0:!g),x&&h&&(f.current=j.isPropagationStopped(),f.current||j.stopPropagation())})})});qz.displayName=Wz;var TC=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:d,form:u,...m}=e;return r.jsx(T$e,{__scopeCheckbox:n,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:f})=>r.jsxs(r.Fragment,{children:[r.jsx(qz,{...m,ref:t,__scopeCheckbox:n}),f&&r.jsx(Hz,{__scopeCheckbox:n})]})})});TC.displayName=Hj;var Uz="CheckboxIndicator",Kz=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,o=OC(Uz,n);return r.jsx(Qn,{present:s||ul(o.checked)||o.checked===!0,children:r.jsx(Ze.span,{"data-state":Xz(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Kz.displayName=Uz;var Gz="CheckboxBubbleInput",Hz=y.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:l,disabled:c,name:d,value:u,form:m,bubbleInput:f,setBubbleInput:h}=OC(Gz,e),x=Ft(n,h),p=_j(o),v=d0(s);y.useEffect(()=>{const g=f;if(!g)return;const N=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(N,"checked").set,w=!a.current;if(p!==o&&b){const S=new Event("click",{bubbles:w});g.indeterminate=ul(o),b.call(g,ul(o)?!1:o),g.dispatchEvent(S)}},[f,p,o,a]);const j=y.useRef(ul(o)?!1:o);return r.jsx(Ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??j.current,required:l,disabled:c,name:d,value:u,form:m,...t,tabIndex:-1,ref:x,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Hz.displayName=Gz;function k$e(e){return typeof e=="function"}function ul(e){return e==="indeterminate"}function Xz(e){return ul(e)?"indeterminate":e?"checked":"unchecked"}const zo=y.forwardRef(({className:e,...t},n)=>r.jsx(TC,{ref:n,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(Kz,{className:Te("flex items-center justify-center text-current"),children:r.jsx(Gh,{className:"h-4 w-4"})})}));zo.displayName=TC.displayName;const $$e=()=>{const{inversiones:e,isLoading:t,darDeBajaActivo:n}=Qc(),{data:s}=A$e(),a=E$e(),[o,i]=y.useState(null),[l,c]=y.useState(!1),[d,u]=y.useState(!1),[m,f]=y.useState(null),[h,x]=y.useState("dado_de_baja"),[p,v]=y.useState(new Date),[j,g]=y.useState(""),[N,_]=y.useState(""),[b,w]=y.useState("contado"),[S,C]=y.useState("efectivo"),[A,P]=y.useState(""),[k,E]=y.useState("0"),[O,M]=y.useState(void 0),[T,V]=y.useState("nuevo"),[I,F]=y.useState(""),[D,X]=y.useState(!1),[W,B]=y.useState(""),[q,te]=y.useState(""),[Y,H]=y.useState(""),[L,ue]=y.useState(""),pe=e.filter(oe=>oe.estado==="activo"),we=e.filter(oe=>oe.estado==="dado_de_baja"||oe.estado==="vendido"),{data:re}=Vz(m==null?void 0:m.id,(m==null?void 0:m.estado)==="vendido"?"venta":"baja"),de=async()=>{if(!(!o||!j)){if(h==="vendido"){const oe=parseFloat(N);if(!oe||oe<=0)return;const Se=parseFloat(A)||0,Ne=parseFloat(k)||0;if(b==="contado"&&Math.abs(Se-oe)>.01||b==="credito"&&Se!==0||b==="parcial"&&Math.abs(Se+Ne-oe)>.01||Ne>0&&!O)return;if(T==="nuevo"&&D&&W)try{await a.mutateAsync({nombre:W,rfc:q||void 0,telefono:Y||void 0,email:L||void 0,activo:!0})}catch($){console.error("Error al guardar cliente:",$)}}n.mutate({id:o.id,fecha_baja:ze(p,"yyyy-MM-dd"),motivo_baja:j,valor_venta:h==="vendido"&&N?parseFloat(N):void 0,estado:h,metodo_pago_venta:h==="vendido"&&(b==="contado"||b==="parcial")?S:void 0,tipo_pago_venta:h==="vendido"?b:void 0,monto_pagado_venta:h==="vendido"?parseFloat(A)||0:void 0,monto_pendiente_venta:h==="vendido"?parseFloat(k)||0:void 0,fecha_vencimiento_venta:h==="vendido"&&O?ze(O,"yyyy-MM-dd"):void 0,comprador_nombre:h==="vendido"&&W?W:void 0,comprador_rfc:h==="vendido"&&q?q:void 0,comprador_telefono:h==="vendido"&&Y?Y:void 0,comprador_email:h==="vendido"&&L?L:void 0},{onSuccess:()=>{c(!1),i(null),g(""),_(""),x("dado_de_baja"),v(new Date),w("contado"),C("efectivo"),P(""),E("0"),M(void 0),V("nuevo"),F(""),X(!1),B(""),te(""),H(""),ue("")}})}},he=oe=>({equipo_computo:"Equipo de Cmputo",maquinaria:"Maquinaria",vehiculos:"Vehculos",mobiliario:"Mobiliario",edificios:"Edificios",equipo_oficina:"Equipo de Oficina",otro:"Otro"})[oe]||oe,ee=(oe,Se)=>{const Ne=new Date(oe.fecha_adquisicion),ie=Math.floor(((Se||new Date).getTime()-Ne.getTime())/(1e3*60*60*24*30));return Math.min(ie*(oe.valor_depreciacion_mensual||0),oe.valor_total)},z=(oe,Se)=>oe.valor_total-ee(oe,Se),U=oe=>{if(oe.estado!=="vendido"||!oe.valor_venta)return null;const Se=oe.fecha_baja?new Date(oe.fecha_baja):new Date,Ne=z(oe,Se);return oe.valor_venta-Ne};return t?r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(gr,{className:"h-8 w-3/4"})}),r.jsx(Q,{children:r.jsx(gr,{className:"h-96 w-full"})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Lr,{defaultValue:"disponibles",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-2",children:[r.jsxs(Qe,{value:"disponibles",children:["Activos Disponibles (",pe.length,")"]}),r.jsxs(Qe,{value:"historial",children:["Historial de Bajas (",we.length,")"]})]}),r.jsx(Je,{value:"disponibles",children:r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Activos Disponibles para Baja"}),r.jsx(Me,{children:"Registra la venta o baja de activos fijos. Solo se muestran los activos activos."})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Activo"}),r.jsx(me,{children:"Categora"}),r.jsx(me,{children:"Valor Original"}),r.jsx(me,{children:"Valor en Libros"}),r.jsx(me,{children:"Depreciacin Acumulada"}),r.jsx(me,{children:"Fecha Adquisicin"}),r.jsx(me,{children:"Acciones"})]})}),r.jsx(kt,{children:pe.length===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:7,className:"text-center text-muted-foreground",children:"No hay activos activos para dar de baja"})}):pe.map(oe=>{const Se=z(oe),Ne=ee(oe);return r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:oe.imagen_url||"",alt:oe.producto_nombre}),r.jsx(Na,{children:oe.producto_nombre.charAt(0)})]}),r.jsx("span",{children:oe.producto_nombre})]})}),r.jsx(Z,{children:he(oe.categoria_activo)}),r.jsxs(Z,{children:["$",Number(oe.valor_total).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{className:"font-medium",children:["$",Se.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{className:"text-muted-foreground",children:["$",Ne.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx(Z,{children:ze(new Date(oe.fecha_adquisicion),"dd/MM/yyyy")}),r.jsx(Z,{children:r.jsxs(vr,{open:l&&(o==null?void 0:o.id)===oe.id,onOpenChange:$=>{c($),$||(i(null),g(""),_(""),x("dado_de_baja"))},children:[r.jsx(Hc,{asChild:!0,children:r.jsxs(Pe,{variant:"destructive",size:"sm",onClick:()=>{i(oe),c(!0)},children:[r.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Venta/Baja de Activo"]})}),r.jsxs(mr,{className:"max-w-md",children:[r.jsx(fr,{children:r.jsx(hr,{children:"Venta o Baja de Activo"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Activo:"}),r.jsx("p",{className:"text-base",children:oe.producto_nombre})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Valor Original:"}),r.jsxs("p",{className:"font-medium",children:["$",Number(oe.valor_total).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Valor en Libros:"}),r.jsxs("p",{className:"font-medium",children:["$",Se.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Baja *"}),r.jsxs(De,{value:h,onValueChange:$=>x($),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"dado_de_baja",children:"Baja de Activo (Sin Venta)"}),r.jsx(le,{value:"vendido",children:"Venta de Activo (Con Ingreso)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Baja *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!p&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),p?ze(p,"dd/MM/yyyy"):r.jsx("span",{children:"Selecciona fecha"})]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:p,onSelect:$=>$&&v($),initialFocus:!0})})]})]}),h==="vendido"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Valor de Venta *"}),r.jsx(Ae,{type:"number",step:"0.01",value:N,onChange:$=>{const ie=$.target.value;_(ie),b==="contado"?(P(ie),E("0")):b==="credito"&&(P("0"),E(ie))},placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Tipo de Pago *"}),r.jsxs(De,{value:b,onValueChange:$=>{w($),$==="contado"?(P(N),E("0")):$==="credito"?(P("0"),E(N)):(P(""),E(""))},children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"contado",children:"Pago de Contado"}),r.jsx(le,{value:"credito",children:"Venta a Crdito"}),r.jsx(le,{value:"parcial",children:"Pago Parcial"})]})]})]}),(b==="contado"||b==="parcial")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Mtodo de Pago *"}),r.jsxs(De,{value:S,onValueChange:$=>C($),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"efectivo",children:"Efectivo"}),r.jsx(le,{value:"transferencia",children:"Transferencia/Tarjeta"})]})]})]}),(b==="parcial"||b==="contado")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Monto Pagado *"}),r.jsx(Ae,{type:"number",step:"0.01",value:A,onChange:$=>{if(P($.target.value),b==="parcial"){const ie=parseFloat(N)||0,J=parseFloat($.target.value)||0;E((ie-J).toFixed(2))}},placeholder:"0.00",disabled:b==="contado"})]}),(b==="parcial"||b==="credito")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{children:["Monto Pendiente ",b==="parcial"&&"(Calculado)"]}),r.jsx(Ae,{type:"number",step:"0.01",value:k,disabled:!0,placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Vencimiento *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!O&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),O?ze(O,"dd/MM/yyyy"):r.jsx("span",{children:"Selecciona fecha"})]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:O,onSelect:$=>M($),initialFocus:!0})})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(se,{children:"Datos del Comprador (Opcional)"}),r.jsxs(Hn,{value:T,onValueChange:$=>{V($),$==="recurrente"&&(F(""),B(""),te(""),H(""),ue(""))},children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"nuevo",id:"nuevo"}),r.jsx(se,{htmlFor:"nuevo",className:"font-normal cursor-pointer",children:"Cliente Nuevo"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(It,{value:"recurrente",id:"recurrente"}),r.jsx(se,{htmlFor:"recurrente",className:"font-normal cursor-pointer",children:"Cliente Recurrente"})]})]})]}),T==="recurrente"?r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Seleccionar Cliente"}),r.jsxs(De,{value:I,onValueChange:$=>{F($);const ie=s==null?void 0:s.find(J=>J.id===$);ie&&(B(ie.nombre||""),te(ie.rfc||""),H(ie.telefono||""),ue(ie.email||""))},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona un cliente"})}),r.jsx($e,{children:s==null?void 0:s.map($=>r.jsxs(le,{value:$.id,children:[$.nombre," ",$.rfc?`- ${$.rfc}`:""]},$.id))})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Nombre"}),r.jsx(Ae,{value:W,onChange:$=>B($.target.value),placeholder:"Nombre del comprador"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"RFC"}),r.jsx(Ae,{value:q,onChange:$=>te($.target.value),placeholder:"RFC"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Telfono"}),r.jsx(Ae,{value:Y,onChange:$=>H($.target.value),placeholder:"Telfono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Email"}),r.jsx(Ae,{type:"email",value:L,onChange:$=>ue($.target.value),placeholder:"email@ejemplo.com"})]})]}),W&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"guardarCliente",checked:D,onCheckedChange:$=>X($)}),r.jsx(se,{htmlFor:"guardarCliente",className:"text-sm font-normal cursor-pointer",children:"Guardar como cliente recurrente"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Motivo / Observaciones *"}),r.jsx(Kr,{value:j,onChange:$=>g($.target.value),placeholder:"Describe el motivo de la baja...",rows:3})]})]}),r.jsxs(Th,{children:[r.jsx(Pe,{variant:"outline",onClick:()=>{c(!1),i(null)},children:"Cancelar"}),r.jsxs(Pe,{variant:"destructive",onClick:de,disabled:!j||h==="vendido"&&(!N||parseFloat(N)<=0)||n.isPending,children:["Confirmar ",h==="vendido"?"Venta":"Baja"]})]})]})]})})]},oe.id)})})]})})]})}),r.jsx(Je,{value:"historial",children:r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Historial de Bajas"}),r.jsx(Me,{children:"Consulta el historial completo de activos dados de baja o vendidos."})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Activo"}),r.jsx(me,{children:"Categora"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{children:"Fecha Baja"}),r.jsx(me,{children:"Valor Original"}),r.jsx(me,{children:"Valor en Libros"}),r.jsx(me,{children:"Valor Venta"}),r.jsx(me,{children:"Mtodo Pago"}),r.jsx(me,{children:"Tipo Pago"}),r.jsx(me,{children:"Monto Pagado/Pendiente"}),r.jsx(me,{children:"Ganancia/Prdida"}),r.jsx(me,{children:"Cliente"}),r.jsx(me,{children:"Motivo"}),r.jsx(me,{children:"Acciones"})]})}),r.jsx(kt,{children:we.length===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:14,className:"text-center text-muted-foreground",children:"No hay activos dados de baja en el historial"})}):we.sort((oe,Se)=>{const Ne=oe.fecha_baja?new Date(oe.fecha_baja).getTime():0;return(Se.fecha_baja?new Date(Se.fecha_baja).getTime():0)-Ne}).map(oe=>{const Se=oe.fecha_baja?new Date(oe.fecha_baja):new Date,Ne=z(oe,Se),$=U(oe);return r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:oe.imagen_url||"",alt:oe.producto_nombre}),r.jsx(Na,{children:oe.producto_nombre.charAt(0)})]}),r.jsx("span",{children:oe.producto_nombre})]})}),r.jsx(Z,{children:he(oe.categoria_activo)}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_e,{variant:oe.estado==="vendido"?"default":"secondary",children:oe.estado==="vendido"?"Vendido":"Dado de Baja"}),new Date(oe.updated_at)>new Date(oe.fecha_baja||oe.created_at)&&r.jsxs(_e,{variant:"outline",className:"text-xs",children:[r.jsx(kN,{className:"h-3 w-3 mr-1"}),"Reactivado"]})]})}),r.jsx(Z,{children:oe.fecha_baja?ze(new Date(oe.fecha_baja),"dd/MM/yyyy"):"-"}),r.jsxs(Z,{children:["$",Number(oe.valor_total).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{children:["$",Ne.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx(Z,{children:oe.valor_venta?`$${Number(oe.valor_venta).toLocaleString("es-MX",{minimumFractionDigits:2})}`:"-"}),r.jsx(Z,{children:oe.metodo_pago_venta?r.jsx(_e,{variant:"outline",children:oe.metodo_pago_venta==="efectivo"?"Efectivo":"Transferencia"}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{children:oe.tipo_pago_venta?r.jsx(_e,{variant:"secondary",children:oe.tipo_pago_venta==="contado"?"Contado":oe.tipo_pago_venta==="credito"?"Crdito":"Parcial"}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{children:oe.monto_pagado_venta!==void 0||oe.monto_pendiente_venta!==void 0?r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"text-green-600",children:["Pagado: $",(oe.monto_pagado_venta||0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),(oe.monto_pendiente_venta||0)>0&&r.jsxs("div",{className:"text-orange-600",children:["Pendiente: $",oe.monto_pendiente_venta.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{children:$!==null?r.jsxs("span",{className:$>=0?"text-green-600":"text-red-600",children:["$",Math.abs($).toLocaleString("es-MX",{minimumFractionDigits:2}),$>=0?" ":" "]}):"-"}),r.jsx(Z,{children:oe.comprador_nombre?r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium",children:oe.comprador_nombre}),oe.comprador_telefono&&r.jsx("div",{className:"text-muted-foreground",children:oe.comprador_telefono})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{className:"max-w-xs truncate",children:oe.motivo_baja||"-"}),r.jsx(Z,{children:r.jsxs(Pe,{variant:"outline",size:"sm",onClick:()=>{f(oe),u(!0)},children:[r.jsx(On,{className:"h-4 w-4 mr-2"}),"Ver Asiento"]})})]},oe.id)})})]})})]})})]}),r.jsx(vr,{open:d,onOpenChange:u,children:r.jsxs(mr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(fr,{children:r.jsx(hr,{children:"Historial de Asientos Contables de Baja"})}),re&&re.length>0?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(_e,{variant:"secondary",children:[re.length," ",re.length===1?"asiento":"asientos"]})}),r.jsx(Co,{type:"single",collapsible:!0,defaultValue:"item-0",className:"space-y-2",children:re.map((oe,Se)=>r.jsxs(Ga,{value:`item-${Se}`,className:"border rounded-lg",children:[r.jsx(Ha,{className:"px-4 hover:no-underline",children:r.jsxs("div",{className:"flex flex-col items-start gap-2 text-left w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(_e,{variant:"outline",children:oe.numero_asiento}),r.jsx("span",{className:"text-xs text-muted-foreground",children:ze(new Date(oe.created_at),"dd/MM/yyyy HH:mm")})]}),r.jsx("span",{className:"text-sm font-normal",children:oe.descripcion})]})}),r.jsx(Xa,{className:"px-4 pb-4",children:r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[oe.detalle_asientos.map(Ne=>{var $;return r.jsxs(Oe,{children:[r.jsxs(Z,{className:"font-mono text-sm",children:[Ne.cuenta_codigo,r.jsx("br",{}),r.jsx("span",{className:"text-xs text-muted-foreground",children:($=Ne.cuenta)==null?void 0:$.nombre})]}),r.jsx(Z,{className:"text-sm",children:Ne.descripcion}),r.jsx(Z,{className:"text-right font-medium",children:Ne.debe>0?`$${Number(Ne.debe).toLocaleString("es-MX",{minimumFractionDigits:2})}`:"-"}),r.jsx(Z,{className:"text-right font-medium",children:Ne.haber>0?`$${Number(Ne.haber).toLocaleString("es-MX",{minimumFractionDigits:2})}`:"-"})]},Ne.id)}),r.jsxs(Oe,{className:"font-semibold bg-muted/50",children:[r.jsx(Z,{colSpan:2,children:"Total"}),r.jsxs(Z,{className:"text-right",children:["$",oe.detalle_asientos.reduce((Ne,$)=>Ne+Number($.debe),0).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{className:"text-right",children:["$",oe.detalle_asientos.reduce((Ne,$)=>Ne+Number($.haber),0).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]})})})]},oe.id))})]}):r.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[r.jsx("p",{children:"No se encontr el asiento contable para esta baja."}),r.jsx("p",{className:"text-sm mt-2",children:"Es posible que an no se haya generado."})]}),r.jsx(Th,{children:r.jsx(Pe,{variant:"outline",onClick:()=>u(!1),children:"Cerrar"})})]})})]})},Si=["#10b981","#059669","#047857","#065f46","#064e3b","#34d399","#6ee7b7"],D$e=()=>{const{inversiones:e,isLoading:t}=Qc(),{data:n,isLoading:s}=Rz(),{tieneAtrasadas:a,totalAtrasadas:o}=Np(),i=(n==null?void 0:n.depreciacionesPorInversion)||{},l=(n==null?void 0:n.periodosRegistrados)||{},[c,d]=y.useState("mensual"),[u,m]=y.useState("completo"),f=(F,D=!0)=>{let X,W="";switch(u){case"miles":X=F/1e3,W="K";break;case"millones":X=F/1e6,W="M";break;default:X=F,W=""}const B=2,q=X.toLocaleString("es-MX",{minimumFractionDigits:B,maximumFractionDigits:B});return D?`$${q}${W}`:`${q}${W}`};if(t||s)return r.jsxs("div",{className:"space-y-6",children:[r.jsx(gr,{className:"h-64 w-full"}),r.jsx(gr,{className:"h-64 w-full"})]});const h=F=>({equipo_computo:"Equipo de Cmputo",maquinaria:"Maquinaria",vehiculos:"Vehculos",mobiliario:"Mobiliario",edificios:"Edificios",equipo_oficina:"Equipo de Oficina",otro:"Otro"})[F]||F,x=e.filter(F=>F.estado==="activo"&&!F.fecha_baja);e.filter(F=>F.estado!=="activo"||F.fecha_baja);const p=new Date,v=x.reduce((F,D)=>{const X=h(D.categoria_activo),W=(i==null?void 0:i[D.id])||0;return F[X]||(F[X]={name:X,montoTotal:0,depreciacionAcumulada:0,cantidad:0}),F[X].montoTotal+=Number(D.valor_total),F[X].depreciacionAcumulada+=W,F[X].cantidad+=1,F},{}),j=Object.values(v),g=x.reduce((F,D)=>F+Number(D.valor_total),0),N=Object.values(i||{}).reduce((F,D)=>F+D,0),_=g-N,b=x.length,w=j.filter(F=>F.montoTotal>0).map(F=>({name:F.name,size:F.montoTotal,value:F.montoTotal})),S=j.filter(F=>F.depreciacionAcumulada>0).map(F=>({name:F.name,size:F.depreciacionAcumulada,value:F.depreciacionAcumulada})),C=j.filter(F=>F.montoTotal-F.depreciacionAcumulada>0).map(F=>({name:F.name,size:F.montoTotal-F.depreciacionAcumulada,value:F.montoTotal-F.depreciacionAcumulada})),A=w.reduce((F,D)=>F+D.value,0),P=S.reduce((F,D)=>F+D.value,0),k=C.reduce((F,D)=>F+D.value,0),E=(F,D)=>D===0?"0.0":(F/D*100).toFixed(1),M=(()=>{const F=c==="mensual"?12:20,D=[],X=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];for(let W=0;W<F;W++){let B;if(c==="mensual"){const te=p.getMonth(),Y=p.getFullYear(),H=(te+W)%12,L=Math.floor((te+W)/12);B=`${X[H]} ${Y+L}`}else{const te=p.getFullYear(),H=12-p.getMonth();W===0?B=`${te} (${H} meses)`:B=`${te+W}`}const q={periodo:B};j.forEach(te=>{q[te.name]=0}),D.push(q)}return x.forEach(W=>{var L,ue;const B=h(W.categoria_activo),q=W.fecha_inicio_depreciacion?new Date(W.fecha_inicio_depreciacion):new Date(W.fecha_adquisicion),te=Math.max(0,(p.getFullYear()-q.getFullYear())*12+(p.getMonth()-q.getMonth())),Y=W.anos_depreciacion*12,H=Math.max(0,Y-te);if(c==="mensual"){const pe=Math.min(12,H);for(let we=0;we<pe;we++){const re=new Date(p);re.setMonth(re.getMonth()+we);const de=`${re.getFullYear()}${String(re.getMonth()+1).padStart(2,"0")}`;((L=l==null?void 0:l[W.id])==null?void 0:L.has(de))||(D[we][B]+=W.valor_depreciacion_mensual||0)}}else{const pe=Math.ceil(H/12),we=Math.min(20,pe),re=p.getMonth(),de=12-re;for(let he=0;he<we;he++){const ee=p.getFullYear()+he;let z=0;he===0?z=Math.min(de,H):he===pe-1?z=H%12||12:z=12;let U=0;const oe=he===0?re:0,Se=12;for(let $=oe;$<Se;$++){const ie=`${ee}${String($+1).padStart(2,"0")}`;(ue=l==null?void 0:l[W.id])!=null&&ue.has(ie)&&U++}const Ne=z-U;Ne>0&&(D[he][B]+=(W.valor_depreciacion_mensual||0)*Ne)}}}),D})(),T=j.map(F=>F.name),I=((F,D)=>F.map(X=>{const W=D.reduce((B,q)=>B+(X[q]||0),0);return{...X,total:W}}))(M,T);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Resumen de Activos Fijos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"formato",children:"Formato:"}),r.jsxs(De,{value:u,onValueChange:F=>m(F),children:[r.jsx(ke,{id:"formato",className:"w-32",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"completo",children:"Completo"}),r.jsx(le,{value:"miles",children:"Miles (K)"}),r.jsx(le,{value:"millones",children:"Millones (M)"})]})]})]})]}),a&&r.jsxs(sr,{variant:"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsxs(ar,{children:[r.jsx("strong",{children:"Advertencia:"})," Hay ",o," perodo(s) de depreciacin sin registrar. Los anlisis pueden estar incompletos. Ve a la pestaa ",r.jsx("strong",{children:'"Depreciaciones"'})," para actualizar."]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Activos Fijos Brutos"})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(g)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Solo activos activos"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Depreciacin Acumulada"})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f(N)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Real de asientos contables"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Activos Netos"})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f(_)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Valor en libros"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Nmero de Activos"})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:b}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Activos activos"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Inversiones por Categora"}),r.jsx(Me,{children:"Monto total invertido por tipo de activo"})]}),r.jsx(Q,{children:w.length>0?r.jsx(mt,{width:"100%",height:400,children:r.jsx(vc,{data:w,dataKey:"size",aspectRatio:4/3,stroke:"#fff",content:F=>{const{x:D,y:X,width:W,height:B,index:q,name:te,value:Y}=F;return!Y||typeof Y!="number"?null:r.jsxs("g",{children:[r.jsx("rect",{x:D,y:X,width:W,height:B,style:{fill:Si[q%Si.length],stroke:"#fff",strokeWidth:2}}),W>80&&B>60&&r.jsxs(r.Fragment,{children:[r.jsx("text",{x:D+W/2,y:X+B/2-18,textAnchor:"middle",fill:"#000",fontSize:16,fontWeight:"bold",children:te||"Sin nombre"}),r.jsx("text",{x:D+W/2,y:X+B/2+2,textAnchor:"middle",fill:"#000",fontSize:14,children:f(Y)}),r.jsx("text",{x:D+W/2,y:X+B/2+20,textAnchor:"middle",fill:"#000",fontSize:13,fontWeight:"normal",children:`(${E(Y,A)}%)`})]})]})}})}):r.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"No hay datos de inversiones para mostrar"})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Depreciaciones por Categora"}),r.jsx(Me,{children:"Depreciacin acumulada por tipo de activo"})]}),r.jsx(Q,{children:S.length>0?r.jsx(mt,{width:"100%",height:400,children:r.jsx(vc,{data:S,dataKey:"size",aspectRatio:4/3,stroke:"#fff",content:F=>{const{x:D,y:X,width:W,height:B,index:q,name:te,value:Y}=F;return!Y||typeof Y!="number"?null:r.jsxs("g",{children:[r.jsx("rect",{x:D,y:X,width:W,height:B,style:{fill:Si[q%Si.length],stroke:"#fff",strokeWidth:2}}),W>80&&B>60&&r.jsxs(r.Fragment,{children:[r.jsx("text",{x:D+W/2,y:X+B/2-18,textAnchor:"middle",fill:"#000",fontSize:16,fontWeight:"bold",children:te||"Sin nombre"}),r.jsx("text",{x:D+W/2,y:X+B/2+2,textAnchor:"middle",fill:"#000",fontSize:14,children:f(Y)}),r.jsx("text",{x:D+W/2,y:X+B/2+20,textAnchor:"middle",fill:"#000",fontSize:13,fontWeight:"normal",children:`(${E(Y,P)}%)`})]})]})}})}):r.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"No hay datos de depreciacin para mostrar"})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Activo Fijo Neto"}),r.jsx(Me,{children:"Valor en libros por categora"})]}),r.jsx(Q,{children:C.length>0?r.jsx(mt,{width:"100%",height:400,children:r.jsx(vc,{data:C,dataKey:"size",aspectRatio:4/3,stroke:"#fff",content:F=>{const{x:D,y:X,width:W,height:B,index:q,name:te,value:Y}=F;return!Y||typeof Y!="number"?null:r.jsxs("g",{children:[r.jsx("rect",{x:D,y:X,width:W,height:B,style:{fill:Si[q%Si.length],stroke:"#fff",strokeWidth:2}}),W>80&&B>60&&r.jsxs(r.Fragment,{children:[r.jsx("text",{x:D+W/2,y:X+B/2-18,textAnchor:"middle",fill:"#000",fontSize:16,fontWeight:"bold",children:te||"Sin nombre"}),r.jsx("text",{x:D+W/2,y:X+B/2+2,textAnchor:"middle",fill:"#000",fontSize:14,children:f(Y)}),r.jsx("text",{x:D+W/2,y:X+B/2+20,textAnchor:"middle",fill:"#000",fontSize:13,fontWeight:"normal",children:`(${E(Y,k)}%)`})]})]})}})}):r.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"No hay datos de activo fijo neto para mostrar"})})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Proyeccin de Depreciaciones"}),r.jsxs(Me,{children:["Distribucin de depreciaciones ",c==="mensual"?"en los prximos 12 meses":"por ao"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"periodo",children:"Vista:"}),r.jsxs(De,{value:c,onValueChange:F=>d(F),children:[r.jsx(ke,{id:"periodo",className:"w-32",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mensual"}),r.jsx(le,{value:"anual",children:"Anual"})]})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:I,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"periodo"}),r.jsx(gt,{tickFormatter:F=>f(F,!1),domain:[0,F=>Math.ceil(F*1.08)]}),r.jsx(yt,{formatter:F=>f(F)}),r.jsx(jr,{}),T.map((F,D)=>r.jsx(rt,{dataKey:F,stackId:"a",fill:Si[D%Si.length],children:r.jsx(Et,{dataKey:F,position:"center",fill:"#fff",stroke:"#fff",strokeWidth:.5,fontSize:13,fontWeight:"bold",formatter:X=>{if(X<=0)return"";let W,B="";switch(u){case"miles":W=X/1e3,B="K";break;case"millones":W=X/1e6,B="M";break;default:W=X,B=""}const q=u==="completo"?0:1;return`$${W.toFixed(q)}${B}`}})},F)),r.jsx(rt,{dataKey:"total",stackId:"a",fill:"transparent",children:r.jsx(Et,{dataKey:"total",position:"top",offset:-40,fill:"#000",fontSize:14,fontWeight:"bold",formatter:F=>F<=0?"":f(F)})})]})})})]})]})},F$e=()=>{const{depreciacionesAtrasadas:e,tieneAtrasadas:t,totalAtrasadas:n}=Np();return r.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Registro de Inversiones CAPEX"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona inversiones de capital, depreciacin de activos y anlisis financiero"}),t&&r.jsxs(sr,{variant:"destructive",className:"mt-4",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsxs(ar,{children:[r.jsx("strong",{children:"Depreciaciones Atrasadas:"})," ",n," perodo(s) sin registrar. Ve a la pestaa ",r.jsx("strong",{children:'"Depreciaciones"'})," para generarlas manualmente."]})]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs(Lr,{defaultValue:"registro",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-5",children:[r.jsx(Qe,{value:"registro",children:"Registro"}),r.jsx(Qe,{value:"resumen",children:"Resumen"}),r.jsx(Qe,{value:"depreciaciones",children:"Depreciaciones"}),r.jsx(Qe,{value:"baja",children:"Baja"}),r.jsx(Qe,{value:"analitica",children:"Analtica"})]}),r.jsx(Je,{value:"registro",className:"space-y-6",children:r.jsx(N$e,{})}),r.jsx(Je,{value:"resumen",children:r.jsx(S$e,{})}),r.jsx(Je,{value:"depreciaciones",children:r.jsx(P$e,{})}),r.jsx(Je,{value:"baja",children:r.jsx($$e,{})}),r.jsx(Je,{value:"analitica",children:r.jsx(D$e,{})})]})})]})},wl=()=>{const e=Gr(),{data:t=[],isLoading:n}=it({queryKey:["financiamientos"],queryFn:async()=>{const{data:l,error:c}=await ce.from("financiamientos").select("*").order("created_at",{ascending:!1});if(c)throw c;if(l.find(u=>u.id==="77ca12dc-a22a-4b2b-a4b5-ad4d77d9e301"&&u.saldo_actual===2300)){console.log("Corrigiendo saldo de Amex Corp de $2,300 a $2,000"),await ce.from("financiamientos").update({saldo_actual:2e3}).eq("id","77ca12dc-a22a-4b2b-a4b5-ad4d77d9e301");const{data:u,error:m}=await ce.from("financiamientos").select("*").order("created_at",{ascending:!1});if(m)throw m;return u}return l}}),{data:s=[]}=it({queryKey:["transacciones_financiamientos"],queryFn:async()=>{const{data:l,error:c}=await ce.from("transacciones_financiamientos").select("*").order("fecha",{ascending:!1});if(c)throw c;return l}}),a=Qt({mutationFn:async l=>{const{data:{user:c}}=await ce.auth.getUser();if(!c)throw new Error("Usuario no autenticado");console.log("Iniciando creacin de financiamiento:",l);const d=l.tipo_credito==="tarjeta_corporativa",u=d?{...l,saldo_inicial:0,saldo_actual:0,user_id:c.id}:{...l,user_id:c.id},{data:m,error:f}=await ce.from("financiamientos").insert([u]).select().single();if(f)throw console.error("Error al crear financiamiento:",f),f;console.log("Financiamiento creado:",m);const h=l.tipo_credito==="revolvente";if(d||h)return console.log(`${d?"Tarjeta de crdito":"Lnea revolvente"} registrada - no se genera asiento contable`),m;const x={user_id:c.id,financiamiento_id:m.id,tipo_transaccion:"desembolso",monto:l.monto_total,fecha:l.fecha_inicio,capital_pagado:0,interes_pagado:0,saldo_restante:l.monto_total,descripcion:`Desembolso inicial del financiamiento: ${l.nombre}`};console.log("Creando transaccin de desembolso:",x);const{error:p}=await ce.from("transacciones_financiamientos").insert([x]);if(p)throw console.error("Error al crear transaccin:",p),p;console.log("Transaccin de desembolso creada");const{data:v,error:j}=await ce.rpc("generate_asiento_number",{p_user_id:c.id});if(j)throw console.error("Error al generar nmero de asiento:",j),j;console.log("Nmero de asiento generado:",v);const{data:g,error:N}=await ce.from("asientos_contables").insert([{user_id:c.id,numero_asiento:v,fecha:l.fecha_inicio,descripcion:`Registro de financiamiento: ${l.nombre} - ${l.institucion_financiera}`}]).select().single();if(N)throw console.error("Error al crear asiento:",N),N;console.log("Asiento contable creado:",g);const{error:_}=await ce.from("detalle_asientos").insert([{asiento_id:g.id,cuenta_codigo:"1002",debe:l.monto_total,haber:0,descripcion:`Desembolso de ${l.tipo_credito} - ${l.institucion_financiera}`}]);if(_)throw console.error("Error al crear dbito:",_),_;const{error:b}=await ce.from("detalle_asientos").insert([{asiento_id:g.id,cuenta_codigo:"2101",debe:0,haber:l.monto_total,descripcion:`Prstamo ${l.tipo_credito} - ${l.institucion_financiera}`}]);if(b)throw console.error("Error al crear crdito:",b),b;return console.log("Asientos contables completados"),m},onSuccess:()=>{e.invalidateQueries({queryKey:["financiamientos"]}),Le({title:"Financiamiento registrado",description:"El financiamiento se ha registrado correctamente."})},onError:l=>{Le({title:"Error",description:l.message,variant:"destructive"})}}),o=Qt({mutationFn:async l=>{const{data:{user:c}}=await ce.auth.getUser();if(!c)throw new Error("Usuario no autenticado");const{data:d,error:u}=await ce.from("transacciones_financiamientos").insert([{...l,user_id:c.id}]).select().single();if(u)throw u;if(l.financiamiento_id&&l.saldo_restante!==void 0&&await ce.from("financiamientos").update({saldo_actual:l.saldo_restante}).eq("id",l.financiamiento_id),l.tipo_transaccion==="amortizacion"){const{data:m}=await ce.from("financiamientos").select("*").eq("id",l.financiamiento_id).single();if(m){const{data:f}=await ce.rpc("generate_asiento_number",{p_user_id:c.id}),{data:h}=await ce.from("asientos_contables").insert([{user_id:c.id,numero_asiento:f,fecha:l.fecha,descripcion:`Pago de amortizacin: ${m.nombre}`}]).select().single();if(h){l.capital_pagado>0&&await ce.from("detalle_asientos").insert([{asiento_id:h.id,cuenta_codigo:"2101",debe:l.capital_pagado,haber:0,descripcion:`Pago a capital - ${m.nombre}`}]),l.interes_pagado>0&&await ce.from("detalle_asientos").insert([{asiento_id:h.id,cuenta_codigo:"5201",debe:l.interes_pagado,haber:0,descripcion:`Intereses pagados - ${m.nombre}`}]);const x=l.metodo_pago==="efectivo"?"1001":"1002";await ce.from("detalle_asientos").insert([{asiento_id:h.id,cuenta_codigo:x,debe:0,haber:l.monto,descripcion:`Pago de financiamiento - ${m.nombre}`}])}}}if(l.tipo_transaccion==="cargo_interes"){const{data:m}=await ce.from("financiamientos").select("*").eq("id",l.financiamiento_id).single();if(m){const{data:f}=await ce.rpc("generate_asiento_number",{p_user_id:c.id}),{data:h}=await ce.from("asientos_contables").insert([{user_id:c.id,numero_asiento:f,fecha:l.fecha,descripcion:`Cargo por intereses: ${m.nombre}`}]).select().single();if(h)if(await ce.from("detalle_asientos").insert([{asiento_id:h.id,cuenta_codigo:"5201",debe:l.monto,haber:0,descripcion:l.descripcion||`Cargo por intereses - ${m.nombre}`}]),l.interes_pagado>0){const x=l.metodo_pago==="efectivo"?"1001":"1002";await ce.from("detalle_asientos").insert([{asiento_id:h.id,cuenta_codigo:x,debe:0,haber:l.monto,descripcion:`Pago de intereses - ${m.nombre}`}])}else await ce.from("detalle_asientos").insert([{asiento_id:h.id,cuenta_codigo:"2101",debe:0,haber:l.monto,descripcion:`Acumulacin de intereses - ${m.nombre}`}])}}return d},onSuccess:()=>{e.invalidateQueries({queryKey:["transacciones_financiamientos"]}),e.invalidateQueries({queryKey:["financiamientos"]}),Le({title:"Transaccin registrada",description:"La transaccin se ha registrado correctamente."})},onError:l=>{Le({title:"Error",description:l.message,variant:"destructive"})}}),i=Qt({mutationFn:async l=>{const{data:{user:c}}=await ce.auth.getUser();if(!c)throw new Error("Usuario no autenticado");const{data:d,error:u}=await ce.from("financiamientos").select("*").eq("id",l.financiamiento_id).single();if(u||!d)throw new Error("Financiamiento no encontrado");const m=d.monto_total-d.saldo_actual;if(l.monto>m)throw new Error(`Lmite insuficiente. Disponible: $${m.toFixed(2)}`);const f=d.saldo_actual+l.monto,{error:h}=await ce.from("transacciones_financiamientos").insert([{user_id:c.id,financiamiento_id:l.financiamiento_id,tipo_transaccion:"disposicion",monto:l.monto,fecha:l.fecha,capital_pagado:0,interes_pagado:0,saldo_restante:f,descripcion:l.descripcion||"Disposicin de lnea revolvente",metodo_pago:l.metodo_pago,numero_referencia:l.numero_referencia}]);if(h)throw h;const{error:x}=await ce.from("financiamientos").update({saldo_actual:f}).eq("id",l.financiamiento_id);if(x)throw x;const{data:p}=await ce.rpc("generate_asiento_number",{p_user_id:c.id}),{data:v}=await ce.from("asientos_contables").insert([{user_id:c.id,numero_asiento:p,fecha:l.fecha,descripcion:`Disposicin: ${d.nombre} - $${l.monto.toFixed(2)}`}]).select().single();if(v){const j=l.metodo_pago==="efectivo"?"1001":"1002";await ce.from("detalle_asientos").insert([{asiento_id:v.id,cuenta_codigo:j,debe:l.monto,haber:0,descripcion:`Disposicin de ${d.nombre}`}]),await ce.from("detalle_asientos").insert([{asiento_id:v.id,cuenta_codigo:"2101",debe:0,haber:l.monto,descripcion:`Disposicin de lnea revolvente - ${d.institucion_financiera}`}])}return{success:!0}},onSuccess:()=>{e.invalidateQueries({queryKey:["financiamientos"]}),e.invalidateQueries({queryKey:["transacciones_financiamientos"]}),Le({title:"Disposicin registrada",description:"La disposicin se ha registrado correctamente."})},onError:l=>{Le({title:"Error",description:l.message,variant:"destructive"})}});return{financiamientos:t,transacciones:s,isLoading:n,crearFinanciamiento:a,crearTransaccion:o,crearDisposicion:i}},Xj=()=>{const{toast:e}=Rs(),t=Gr(),{data:n,isLoading:s}=it({queryKey:["instituciones-financieras"],queryFn:async()=>{const{data:{user:l}}=await ce.auth.getUser();if(!l)throw new Error("Usuario no autenticado");const{data:c,error:d}=await ce.from("instituciones_financieras").select("*").eq("user_id",l.id).eq("activo",!0).order("nombre",{ascending:!0});if(d)throw d;return c}});y.useEffect(()=>{const l=ce.channel("instituciones-changes").on("postgres_changes",{event:"*",schema:"public",table:"instituciones_financieras"},()=>{t.invalidateQueries({queryKey:["instituciones-financieras"]})}).subscribe();return()=>{ce.removeChannel(l)}},[t]);const a=Qt({mutationFn:async l=>{const{data:{user:c}}=await ce.auth.getUser();if(!c)throw new Error("Usuario no autenticado");const{data:d}=await ce.from("instituciones_financieras").select("id").eq("user_id",c.id).eq("nombre",l.nombre).eq("activo",!0).single();if(d)throw new Error("Ya existe una institucin con ese nombre");const{data:u,error:m}=await ce.from("instituciones_financieras").insert({...l,user_id:c.id,activo:!0}).select().single();if(m)throw m;return u},onSuccess:()=>{t.invalidateQueries({queryKey:["instituciones-financieras"]}),e({title:" Institucin creada",description:"La institucin financiera se registr correctamente"})},onError:l=>{e({title:" Error al crear institucin",description:l.message,variant:"destructive"})}}),o=Qt({mutationFn:async({id:l,...c})=>{const{error:d}=await ce.from("instituciones_financieras").update(c).eq("id",l);if(d)throw d},onSuccess:()=>{t.invalidateQueries({queryKey:["instituciones-financieras"]}),e({title:" Institucin actualizada",description:"Los cambios se guardaron correctamente"})},onError:()=>{e({title:" Error al actualizar",description:"No se pudieron guardar los cambios",variant:"destructive"})}}),i=Qt({mutationFn:async l=>{const{data:c}=await ce.from("financiamientos").select("id").eq("institucion_financiera_id",l).eq("estado","activo");if(c&&c.length>0)throw new Error("No se puede eliminar una institucin con crditos activos");const{error:d}=await ce.from("instituciones_financieras").update({activo:!1}).eq("id",l);if(d)throw d},onSuccess:()=>{t.invalidateQueries({queryKey:["instituciones-financieras"]}),e({title:" Institucin eliminada",description:"La institucin se dio de baja correctamente"})},onError:l=>{e({title:" Error al eliminar",description:l.message,variant:"destructive"})}});return{instituciones:n||[],isLoading:s,crearInstitucion:a,actualizarInstitucion:o,eliminarInstitucion:i}};var Rk=1,I$e=.9,R$e=.8,L$e=.17,Tb=.1,kb=.999,B$e=.9999,z$e=.99,V$e=/[\\\/_+.#"@\[\(\{&]/,W$e=/[\\\/_+.#"@\[\(\{&]/g,q$e=/[\s-]/,Yz=/[\s-]/g;function t_(e,t,n,s,a,o,i){if(o===t.length)return a===e.length?Rk:z$e;var l=`${a},${o}`;if(i[l]!==void 0)return i[l];for(var c=s.charAt(o),d=n.indexOf(c,a),u=0,m,f,h,x;d>=0;)m=t_(e,t,n,s,d+1,o+1,i),m>u&&(d===a?m*=Rk:V$e.test(e.charAt(d-1))?(m*=R$e,h=e.slice(a,d-1).match(W$e),h&&a>0&&(m*=Math.pow(kb,h.length))):q$e.test(e.charAt(d-1))?(m*=I$e,x=e.slice(a,d-1).match(Yz),x&&a>0&&(m*=Math.pow(kb,x.length))):(m*=L$e,a>0&&(m*=Math.pow(kb,d-a))),e.charAt(d)!==t.charAt(o)&&(m*=B$e)),(m<Tb&&n.charAt(d-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&n.charAt(d-1)!==s.charAt(o))&&(f=t_(e,t,n,s,d+1,o+2,i),f*Tb>m&&(m=f*Tb)),m>u&&(u=m),d=n.indexOf(c,d+1);return i[l]=u,u}function Lk(e){return e.toLowerCase().replace(Yz," ")}function U$e(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,t_(e,t,Lk(e),Lk(t),0,0,{})}var Wm='[cmdk-group=""]',$b='[cmdk-group-items=""]',K$e='[cmdk-group-heading=""]',Qz='[cmdk-item=""]',Bk=`${Qz}:not([aria-disabled="true"])`,r_="cmdk-item-select",ld="data-value",G$e=(e,t,n)=>U$e(e,t,n),Zz=y.createContext(void 0),wp=()=>y.useContext(Zz),Jz=y.createContext(void 0),kC=()=>y.useContext(Jz),eV=y.createContext(void 0),tV=y.forwardRef((e,t)=>{let n=cd(()=>{var B,q;return{search:"",value:(q=(B=e.value)!=null?B:e.defaultValue)!=null?q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=cd(()=>new Set),a=cd(()=>new Map),o=cd(()=>new Map),i=cd(()=>new Set),l=rV(e),{label:c,children:d,value:u,onValueChange:m,filter:f,shouldFilter:h,loop:x,disablePointerSelection:p=!1,vimBindings:v=!0,...j}=e,g=cn(),N=cn(),_=cn(),b=y.useRef(null),w=sDe();Ic(()=>{if(u!==void 0){let B=u.trim();n.current.value=B,S.emit()}},[u]),Ic(()=>{w(6,O)},[]);let S=y.useMemo(()=>({subscribe:B=>(i.current.add(B),()=>i.current.delete(B)),snapshot:()=>n.current,setState:(B,q,te)=>{var Y,H,L,ue;if(!Object.is(n.current[B],q)){if(n.current[B]=q,B==="search")E(),P(),w(1,k);else if(B==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let pe=document.getElementById(_);pe?pe.focus():(Y=document.getElementById(g))==null||Y.focus()}if(w(7,()=>{var pe;n.current.selectedItemId=(pe=M())==null?void 0:pe.id,S.emit()}),te||w(5,O),((H=l.current)==null?void 0:H.value)!==void 0){let pe=q??"";(ue=(L=l.current).onValueChange)==null||ue.call(L,pe);return}}S.emit()}},emit:()=>{i.current.forEach(B=>B())}}),[]),C=y.useMemo(()=>({value:(B,q,te)=>{var Y;q!==((Y=o.current.get(B))==null?void 0:Y.value)&&(o.current.set(B,{value:q,keywords:te}),n.current.filtered.items.set(B,A(q,te)),w(2,()=>{P(),S.emit()}))},item:(B,q)=>(s.current.add(B),q&&(a.current.has(q)?a.current.get(q).add(B):a.current.set(q,new Set([B]))),w(3,()=>{E(),P(),n.current.value||k(),S.emit()}),()=>{o.current.delete(B),s.current.delete(B),n.current.filtered.items.delete(B);let te=M();w(4,()=>{E(),(te==null?void 0:te.getAttribute("id"))===B&&k(),S.emit()})}),group:B=>(a.current.has(B)||a.current.set(B,new Set),()=>{o.current.delete(B),a.current.delete(B)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:g,inputId:_,labelId:N,listInnerRef:b}),[]);function A(B,q){var te,Y;let H=(Y=(te=l.current)==null?void 0:te.filter)!=null?Y:G$e;return B?H(B,n.current.search,q):0}function P(){if(!n.current.search||l.current.shouldFilter===!1)return;let B=n.current.filtered.items,q=[];n.current.filtered.groups.forEach(Y=>{let H=a.current.get(Y),L=0;H.forEach(ue=>{let pe=B.get(ue);L=Math.max(pe,L)}),q.push([Y,L])});let te=b.current;T().sort((Y,H)=>{var L,ue;let pe=Y.getAttribute("id"),we=H.getAttribute("id");return((L=B.get(we))!=null?L:0)-((ue=B.get(pe))!=null?ue:0)}).forEach(Y=>{let H=Y.closest($b);H?H.appendChild(Y.parentElement===H?Y:Y.closest(`${$b} > *`)):te.appendChild(Y.parentElement===te?Y:Y.closest(`${$b} > *`))}),q.sort((Y,H)=>H[1]-Y[1]).forEach(Y=>{var H;let L=(H=b.current)==null?void 0:H.querySelector(`${Wm}[${ld}="${encodeURIComponent(Y[0])}"]`);L==null||L.parentElement.appendChild(L)})}function k(){let B=T().find(te=>te.getAttribute("aria-disabled")!=="true"),q=B==null?void 0:B.getAttribute(ld);S.setState("value",q||void 0)}function E(){var B,q,te,Y;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let H=0;for(let L of s.current){let ue=(q=(B=o.current.get(L))==null?void 0:B.value)!=null?q:"",pe=(Y=(te=o.current.get(L))==null?void 0:te.keywords)!=null?Y:[],we=A(ue,pe);n.current.filtered.items.set(L,we),we>0&&H++}for(let[L,ue]of a.current)for(let pe of ue)if(n.current.filtered.items.get(pe)>0){n.current.filtered.groups.add(L);break}n.current.filtered.count=H}function O(){var B,q,te;let Y=M();Y&&(((B=Y.parentElement)==null?void 0:B.firstChild)===Y&&((te=(q=Y.closest(Wm))==null?void 0:q.querySelector(K$e))==null||te.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function M(){var B;return(B=b.current)==null?void 0:B.querySelector(`${Qz}[aria-selected="true"]`)}function T(){var B;return Array.from(((B=b.current)==null?void 0:B.querySelectorAll(Bk))||[])}function V(B){let q=T()[B];q&&S.setState("value",q.getAttribute(ld))}function I(B){var q;let te=M(),Y=T(),H=Y.findIndex(ue=>ue===te),L=Y[H+B];(q=l.current)!=null&&q.loop&&(L=H+B<0?Y[Y.length-1]:H+B===Y.length?Y[0]:Y[H+B]),L&&S.setState("value",L.getAttribute(ld))}function F(B){let q=M(),te=q==null?void 0:q.closest(Wm),Y;for(;te&&!Y;)te=B>0?rDe(te,Wm):nDe(te,Wm),Y=te==null?void 0:te.querySelector(Bk);Y?S.setState("value",Y.getAttribute(ld)):I(B)}let D=()=>V(T().length-1),X=B=>{B.preventDefault(),B.metaKey?D():B.altKey?F(1):I(1)},W=B=>{B.preventDefault(),B.metaKey?V(0):B.altKey?F(-1):I(-1)};return y.createElement(Ze.div,{ref:t,tabIndex:-1,...j,"cmdk-root":"",onKeyDown:B=>{var q;(q=j.onKeyDown)==null||q.call(j,B);let te=B.nativeEvent.isComposing||B.keyCode===229;if(!(B.defaultPrevented||te))switch(B.key){case"n":case"j":{v&&B.ctrlKey&&X(B);break}case"ArrowDown":{X(B);break}case"p":case"k":{v&&B.ctrlKey&&W(B);break}case"ArrowUp":{W(B);break}case"Home":{B.preventDefault(),V(0);break}case"End":{B.preventDefault(),D();break}case"Enter":{B.preventDefault();let Y=M();if(Y){let H=new Event(r_);Y.dispatchEvent(H)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:oDe},c),Yj(e,B=>y.createElement(Jz.Provider,{value:S},y.createElement(Zz.Provider,{value:C},B))))}),H$e=y.forwardRef((e,t)=>{var n,s;let a=cn(),o=y.useRef(null),i=y.useContext(eV),l=wp(),c=rV(e),d=(s=(n=c.current)==null?void 0:n.forceMount)!=null?s:i==null?void 0:i.forceMount;Ic(()=>{if(!d)return l.item(a,i==null?void 0:i.id)},[d]);let u=nV(a,o,[e.value,e.children,o],e.keywords),m=kC(),f=_l(w=>w.value&&w.value===u.current),h=_l(w=>d||l.filter()===!1?!0:w.search?w.filtered.items.get(a)>0:!0);y.useEffect(()=>{let w=o.current;if(!(!w||e.disabled))return w.addEventListener(r_,x),()=>w.removeEventListener(r_,x)},[h,e.onSelect,e.disabled]);function x(){var w,S;p(),(S=(w=c.current).onSelect)==null||S.call(w,u.current)}function p(){m.setState("value",u.current,!0)}if(!h)return null;let{disabled:v,value:j,onSelect:g,forceMount:N,keywords:_,...b}=e;return y.createElement(Ze.div,{ref:ii(o,t),...b,id:a,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||l.getDisablePointerSelection()?void 0:p,onClick:v?void 0:x},e.children)}),X$e=y.forwardRef((e,t)=>{let{heading:n,children:s,forceMount:a,...o}=e,i=cn(),l=y.useRef(null),c=y.useRef(null),d=cn(),u=wp(),m=_l(h=>a||u.filter()===!1?!0:h.search?h.filtered.groups.has(i):!0);Ic(()=>u.group(i),[]),nV(i,l,[e.value,e.heading,c]);let f=y.useMemo(()=>({id:i,forceMount:a}),[a]);return y.createElement(Ze.div,{ref:ii(l,t),...o,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&y.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),Yj(e,h=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},y.createElement(eV.Provider,{value:f},h))))}),Y$e=y.forwardRef((e,t)=>{let{alwaysRender:n,...s}=e,a=y.useRef(null),o=_l(i=>!i.search);return!n&&!o?null:y.createElement(Ze.div,{ref:ii(a,t),...s,"cmdk-separator":"",role:"separator"})}),Q$e=y.forwardRef((e,t)=>{let{onValueChange:n,...s}=e,a=e.value!=null,o=kC(),i=_l(d=>d.search),l=_l(d=>d.selectedItemId),c=wp();return y.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),y.createElement(Ze.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:i,onChange:d=>{a||o.setState("search",d.target.value),n==null||n(d.target.value)}})}),Z$e=y.forwardRef((e,t)=>{let{children:n,label:s="Suggestions",...a}=e,o=y.useRef(null),i=y.useRef(null),l=_l(d=>d.selectedItemId),c=wp();return y.useEffect(()=>{if(i.current&&o.current){let d=i.current,u=o.current,m,f=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let h=d.offsetHeight;u.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(d),()=>{cancelAnimationFrame(m),f.unobserve(d)}}},[]),y.createElement(Ze.div,{ref:ii(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":s,id:c.listId},Yj(e,d=>y.createElement("div",{ref:ii(i,c.listInnerRef),"cmdk-list-sizer":""},d)))}),J$e=y.forwardRef((e,t)=>{let{open:n,onOpenChange:s,overlayClassName:a,contentClassName:o,container:i,...l}=e;return y.createElement(uC,{open:n,onOpenChange:s},y.createElement(mC,{container:i},y.createElement(Dj,{"cmdk-overlay":"",className:a}),y.createElement(Fj,{"aria-label":e.label,"cmdk-dialog":"",className:o},y.createElement(tV,{ref:t,...l}))))}),eDe=y.forwardRef((e,t)=>_l(n=>n.filtered.count===0)?y.createElement(Ze.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),tDe=y.forwardRef((e,t)=>{let{progress:n,children:s,label:a="Loading...",...o}=e;return y.createElement(Ze.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Yj(e,i=>y.createElement("div",{"aria-hidden":!0},i)))}),Ls=Object.assign(tV,{List:Z$e,Item:H$e,Input:Q$e,Group:X$e,Separator:Y$e,Dialog:J$e,Empty:eDe,Loading:tDe});function rDe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function nDe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function rV(e){let t=y.useRef(e);return Ic(()=>{t.current=e}),t}var Ic=typeof window>"u"?y.useEffect:y.useLayoutEffect;function cd(e){let t=y.useRef();return t.current===void 0&&(t.current=e()),t}function _l(e){let t=kC(),n=()=>e(t.snapshot());return y.useSyncExternalStore(t.subscribe,n,n)}function nV(e,t,n,s=[]){let a=y.useRef(),o=wp();return Ic(()=>{var i;let l=(()=>{var d;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=s.map(d=>d.trim());o.value(e,l,c),(i=t.current)==null||i.setAttribute(ld,l),a.current=l}),a}var sDe=()=>{let[e,t]=y.useState(),n=cd(()=>new Map);return Ic(()=>{n.current.forEach(s=>s()),n.current=new Map},[e]),(s,a)=>{n.current.set(s,a),t({})}};function aDe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Yj({asChild:e,children:t},n){return e&&y.isValidElement(t)?y.cloneElement(aDe(t),{ref:t.ref},n(t.props.children)):n(t)}var oDe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const sV=y.forwardRef(({className:e,...t},n)=>r.jsx(Ls,{ref:n,className:Te("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));sV.displayName=Ls.displayName;const aV=y.forwardRef(({className:e,...t},n)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(Ts,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(Ls.Input,{ref:n,className:Te("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));aV.displayName=Ls.Input.displayName;const iDe=y.forwardRef(({className:e,...t},n)=>r.jsx(Ls.List,{ref:n,className:Te("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));iDe.displayName=Ls.List.displayName;const oV=y.forwardRef((e,t)=>r.jsx(Ls.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));oV.displayName=Ls.Empty.displayName;const iV=y.forwardRef(({className:e,...t},n)=>r.jsx(Ls.Group,{ref:n,className:Te("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));iV.displayName=Ls.Group.displayName;const lDe=y.forwardRef(({className:e,...t},n)=>r.jsx(Ls.Separator,{ref:n,className:Te("-mx-1 h-px bg-border",e),...t}));lDe.displayName=Ls.Separator.displayName;const n_=y.forwardRef(({className:e,...t},n)=>r.jsx(Ls.Item,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));n_.displayName=Ls.Item.displayName;function cDe({value:e,onChange:t}){const[n,s]=y.useState(!1),[a,o]=y.useState(!1),[i,l]=y.useState(null),[c,d]=y.useState(null),[u,m]=y.useState(!1),{instituciones:f,crearInstitucion:h}=Xj(),{toast:x}=Rs(),[p,v]=y.useState({nombre:"",logo_url:"",ejecutivo_nombre:"",ejecutivo_telefono:"",ejecutivo_email:"",telefono_principal:"",email_principal:"",direccion:"",ciudad:"",estado:"",codigo_postal:"",sitio_web:"",notas:""}),j=f.find(b=>b.id===e),g=b=>{var S;const w=(S=b.target.files)==null?void 0:S[0];if(w){if(w.size>2*1024*1024){x({title:" Archivo muy grande",description:"El logo debe pesar menos de 2MB",variant:"destructive"});return}if(!w.type.startsWith("image/")){x({title:" Tipo de archivo invlido",description:"Solo se permiten imgenes",variant:"destructive"});return}l(w);const C=new FileReader;C.onload=A=>{var P;d((P=A.target)==null?void 0:P.result)},C.readAsDataURL(w)}},N=async()=>{if(!i)return p.logo_url;try{m(!0);const b=i.name.split(".").pop(),S=`instituciones/${`${Math.random()}.${b}`}`,{error:C}=await ce.storage.from("product-images").upload(S,i);if(C)return x({title:" Error al subir logo",description:C.message,variant:"destructive"}),null;const{data:{publicUrl:A}}=ce.storage.from("product-images").getPublicUrl(S);return x({title:" Logo subido",description:"El logo se ha guardado correctamente"}),A}catch(b){return x({title:" Error inesperado",description:b.message,variant:"destructive"}),null}finally{m(!1)}},_=async()=>{if(!p.nombre.trim()){x({title:" Campo requerido",description:"El nombre de la institucin es obligatorio",variant:"destructive"});return}try{let b=p.logo_url;if(i){const w=await N();w&&(b=w)}await h.mutateAsync({...p,logo_url:b},{onSuccess:w=>{t(w.id,w.nombre),o(!1),v({nombre:"",logo_url:"",ejecutivo_nombre:"",ejecutivo_telefono:"",ejecutivo_email:"",telefono_principal:"",email_principal:"",direccion:"",ciudad:"",estado:"",codigo_postal:"",sitio_web:"",notas:""}),l(null),d(null)}})}catch(b){x({title:" Error al crear institucin",description:b.message,variant:"destructive"})}};return r.jsxs(r.Fragment,{children:[r.jsxs(wn,{open:n,onOpenChange:s,children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[j?r.jsxs("div",{className:"flex items-center gap-2",children:[j.logo_url&&r.jsxs(ya,{className:"h-5 w-5",children:[r.jsx(ba,{src:j.logo_url}),r.jsx(Na,{className:"text-xs",children:j.nombre[0]})]}),r.jsx("span",{children:j.nombre})]}):"Seleccionar institucin...",r.jsx(Xq,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(fn,{className:"w-full p-0",children:r.jsxs(sV,{children:[r.jsx(aV,{placeholder:"Buscar institucin..."}),r.jsx(oV,{children:"No se encontr la institucin."}),r.jsxs(iV,{children:[f.map(b=>r.jsxs(n_,{value:b.nombre,onSelect:()=>{t(b.id,b.nombre),s(!1)},children:[r.jsx(Gh,{className:Te("mr-2 h-4 w-4",e===b.id?"opacity-100":"opacity-0")}),r.jsxs("div",{className:"flex items-center gap-2",children:[b.logo_url&&r.jsxs(ya,{className:"h-6 w-6",children:[r.jsx(ba,{src:b.logo_url}),r.jsx(Na,{className:"text-xs",children:b.nombre[0]})]}),r.jsx("span",{children:b.nombre})]})]},b.id)),r.jsxs(n_,{onSelect:()=>{s(!1),o(!0)},className:"border-t",children:[r.jsx(as,{className:"mr-2 h-4 w-4"}),r.jsx("span",{className:"font-medium",children:"Nueva Institucin"})]})]})]})})]}),r.jsx(vr,{open:a,onOpenChange:o,children:r.jsxs(mr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Nueva Institucin Financiera"}),r.jsx(mn,{children:"Registra los datos de la institucin financiera"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre de la Institucin *"}),r.jsx(Ae,{id:"nombre",value:p.nombre,onChange:b=>v({...p,nombre:b.target.value}),placeholder:"Ej: BBVA Bancomer"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Logo de la Institucin"}),c&&r.jsxs("div",{className:"relative w-32 h-32 border rounded-lg overflow-hidden",children:[r.jsx("img",{src:c,alt:"Preview",className:"w-full h-full object-contain"}),r.jsx(Pe,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:()=>{l(null),d(null),v({...p,logo_url:""})},children:r.jsx(xs,{className:"h-4 w-4"})})]}),!c&&r.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:r.jsxs("label",{className:"cursor-pointer",children:[r.jsx(zf,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[r.jsx("span",{className:"font-semibold text-primary",children:"Click para subir"})," o arrastra aqu"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG (mx. 2MB)"}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:g,disabled:u})]})}),r.jsxs("div",{className:"pt-2",children:[r.jsx(se,{htmlFor:"logo_url",className:"text-xs text-muted-foreground",children:"O ingresa una URL directamente"}),r.jsx(Ae,{id:"logo_url",value:p.logo_url,onChange:b=>v({...p,logo_url:b.target.value}),placeholder:"https://ejemplo.com/logo.png",disabled:!!i||u})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ejecutivo_nombre",children:"Nombre del Ejecutivo"}),r.jsx(Ae,{id:"ejecutivo_nombre",value:p.ejecutivo_nombre,onChange:b=>v({...p,ejecutivo_nombre:b.target.value}),placeholder:"Nombre completo"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ejecutivo_telefono",children:"Telfono del Ejecutivo"}),r.jsx(Ae,{id:"ejecutivo_telefono",value:p.ejecutivo_telefono,onChange:b=>v({...p,ejecutivo_telefono:b.target.value}),placeholder:"(555) 123-4567"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ejecutivo_email",children:"Email del Ejecutivo"}),r.jsx(Ae,{id:"ejecutivo_email",type:"email",value:p.ejecutivo_email,onChange:b=>v({...p,ejecutivo_email:b.target.value}),placeholder:"ejecutivo@banco.com"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"telefono_principal",children:"Telfono Principal"}),r.jsx(Ae,{id:"telefono_principal",value:p.telefono_principal,onChange:b=>v({...p,telefono_principal:b.target.value}),placeholder:"(555) 000-0000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"email_principal",children:"Email Principal"}),r.jsx(Ae,{id:"email_principal",type:"email",value:p.email_principal,onChange:b=>v({...p,email_principal:b.target.value}),placeholder:"info@banco.com"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"direccion",children:"Direccin"}),r.jsx(Ae,{id:"direccion",value:p.direccion,onChange:b=>v({...p,direccion:b.target.value}),placeholder:"Calle, nmero, colonia"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ciudad",children:"Ciudad"}),r.jsx(Ae,{id:"ciudad",value:p.ciudad,onChange:b=>v({...p,ciudad:b.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"estado",children:"Estado"}),r.jsx(Ae,{id:"estado",value:p.estado,onChange:b=>v({...p,estado:b.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"codigo_postal",children:"Cdigo Postal"}),r.jsx(Ae,{id:"codigo_postal",value:p.codigo_postal,onChange:b=>v({...p,codigo_postal:b.target.value})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"sitio_web",children:"Sitio Web"}),r.jsx(Ae,{id:"sitio_web",value:p.sitio_web,onChange:b=>v({...p,sitio_web:b.target.value}),placeholder:"https://www.banco.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"notas",children:"Notas"}),r.jsx(Kr,{id:"notas",value:p.notas,onChange:b=>v({...p,notas:b.target.value}),placeholder:"Informacin adicional...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),r.jsx(Pe,{onClick:_,disabled:u||h.isPending,children:u?r.jsxs(r.Fragment,{children:[r.jsx(zf,{className:"mr-2 h-4 w-4 animate-spin"}),"Subiendo logo..."]}):h.isPending?"Creando...":"Crear Institucin"})]})]})]})})]})}const dDe=()=>{const{crearFinanciamiento:e}=wl(),{instituciones:t}=Xj(),[n,s]=y.useState("tipo"),[a,o]=y.useState({nombre:"",descripcion:"",tipo_credito:"",institucion_financiera:"",institucion_financiera_id:"",numero_cuenta:"",monto_total:"",tasa_interes:"",plazo_meses:"",condiciones:""}),[i,l]=y.useState(new Date),[c,d]=y.useState(),u=t.find(v=>v.id===a.institucion_financiera_id);y.useEffect(()=>{if(a.tipo_credito==="simple"&&i&&a.plazo_meses){const v=parseInt(a.plazo_meses);if(!isNaN(v)&&v>0){const j=ms(i,v);d(j)}}else if(a.tipo_credito==="revolvente"&&i){const v=ms(i,12);d(v)}},[i,a.plazo_meses,a.tipo_credito]);const m=v=>{o({...a,tipo_credito:v}),s("datos")},f=()=>{s("tipo"),o({nombre:"",descripcion:"",tipo_credito:"",institucion_financiera:"",institucion_financiera_id:"",numero_cuenta:"",monto_total:"",tasa_interes:"",plazo_meses:"",condiciones:""})},h=a.tipo_credito==="tarjeta_corporativa"||a.tipo_credito==="revolvente",x=a.tipo_credito==="revolvente",p=v=>{v.preventDefault();const j=parseFloat(a.monto_total);if(h)e.mutate({nombre:a.nombre,descripcion:a.descripcion,tipo_credito:a.tipo_credito,institucion_financiera:a.institucion_financiera,institucion_financiera_id:a.institucion_financiera_id||void 0,numero_cuenta:a.numero_cuenta,monto_total:j,tasa_interes:parseFloat(a.tasa_interes),plazo_meses:1,fecha_inicio:ze(i,"yyyy-MM-dd"),fecha_vencimiento:ze(c||ms(i,a.tipo_credito==="revolvente"?12:60),"yyyy-MM-dd"),saldo_inicial:0,saldo_actual:0,condiciones:a.condiciones,estado:"activo"});else{if(!c)return;e.mutate({nombre:a.nombre,descripcion:a.descripcion,tipo_credito:a.tipo_credito,institucion_financiera:a.institucion_financiera,institucion_financiera_id:a.institucion_financiera_id||void 0,numero_cuenta:a.numero_cuenta,monto_total:j,tasa_interes:parseFloat(a.tasa_interes),plazo_meses:parseInt(a.plazo_meses),fecha_inicio:ze(i,"yyyy-MM-dd"),fecha_vencimiento:ze(c,"yyyy-MM-dd"),saldo_inicial:j,saldo_actual:j,condiciones:a.condiciones,estado:"activo"})}o({nombre:"",descripcion:"",tipo_credito:"",institucion_financiera:"",institucion_financiera_id:"",numero_cuenta:"",monto_total:"",tasa_interes:"",plazo_meses:"",condiciones:""}),l(new Date),d(void 0),s("tipo")};return r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Registro de Nuevo Financiamiento"})}),r.jsx(Q,{children:n==="tipo"?r.jsxs("div",{className:"space-y-4",children:[r.jsx(se,{className:"text-base",children:"Qu tipo de financiamiento deseas registrar?"}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs(Pe,{type:"button",variant:"outline",className:"h-auto p-6 flex flex-col items-start space-y-2 hover:border-primary",onClick:()=>m("simple"),children:[r.jsx("span",{className:"font-semibold text-lg",children:"Crdito Simple"}),r.jsx("span",{className:"text-sm text-muted-foreground text-left",children:"Prstamo con monto fijo que se paga gradualmente con intereses"})]}),r.jsxs(Pe,{type:"button",variant:"outline",className:"h-auto p-6 flex flex-col items-start space-y-2 hover:border-primary",onClick:()=>m("revolvente"),children:[r.jsx("span",{className:"font-semibold text-lg",children:"Crdito Revolvente"}),r.jsx("span",{className:"text-sm text-muted-foreground text-left",children:"Lnea de crdito que se dispone segn necesidad y se libera al pagar"})]}),r.jsxs(Pe,{type:"button",variant:"outline",className:"h-auto p-6 flex flex-col items-start space-y-2 hover:border-primary",onClick:()=>m("tarjeta_corporativa"),children:[r.jsx("span",{className:"font-semibold text-lg",children:"Tarjeta de Crdito Corporativa"}),r.jsx("span",{className:"text-sm text-muted-foreground text-left",children:"Tarjeta empresarial con lmite de crdito para gastos operativos"})]})]})]}):r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Tipo seleccionado:"}),r.jsxs("p",{className:"font-semibold",children:[a.tipo_credito==="simple"&&"Crdito Simple",a.tipo_credito==="revolvente"&&"Crdito Revolvente",a.tipo_credito==="tarjeta_corporativa"&&"Tarjeta de Crdito Corporativa"]})]}),r.jsx(Pe,{type:"button",variant:"ghost",onClick:f,children:"Cambiar tipo"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"nombre",children:["Nombre del ",h?"Instrumento":"Crdito"," *"]}),r.jsx(Ae,{id:"nombre",value:a.nombre,onChange:v=>o({...a,nombre:v.target.value}),placeholder:h?"Ej: Amex Corporativa":"Ej: Crdito Equipamiento",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"institucion",children:"Institucin Financiera *"}),r.jsx(cDe,{value:a.institucion_financiera_id,onChange:(v,j)=>{o({...a,institucion_financiera_id:v,institucion_financiera:j})}}),u&&r.jsx(G,{className:"mt-2 p-3 bg-muted",children:r.jsxs("div",{className:"flex items-center gap-3",children:[u.logo_url&&r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:u.logo_url}),r.jsx(Na,{children:u.nombre[0]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:u.nombre}),u.ejecutivo_nombre&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ejecutivo: ",u.ejecutivo_nombre,u.ejecutivo_telefono&&`  ${u.ejecutivo_telefono}`]})]})]})})]}),!x&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"numero_cuenta",children:["Nmero de ",h?"Tarjeta/Cuenta":"Cuenta/Contrato"]}),r.jsx(Ae,{id:"numero_cuenta",value:a.numero_cuenta,onChange:v=>o({...a,numero_cuenta:v.target.value}),placeholder:h?"**** **** **** 1234":"Ej: 123456789"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"monto_total",children:[h?"Lmite de Crdito":"Monto del Prstamo"," *"]}),r.jsx(Ae,{id:"monto_total",type:"number",step:"0.01",value:a.monto_total,onChange:v=>o({...a,monto_total:v.target.value}),placeholder:"0.00",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"tasa_interes",children:"Tasa de Inters Anual (%) *"}),r.jsx(Ae,{id:"tasa_interes",type:"number",step:"0.01",value:a.tasa_interes,onChange:v=>o({...a,tasa_interes:v.target.value}),placeholder:"0.00",required:!0})]}),x&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Registro *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),i?ze(i,"PPP"):"Selecciona fecha"]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:i,onSelect:v=>v&&l(v),initialFocus:!0,className:Te("p-3 pointer-events-auto")})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Vencimiento (1 ao)"}),r.jsxs("div",{className:"flex items-center h-10 px-3 rounded-md border border-input bg-muted",children:[r.jsx(er,{className:"mr-2 h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:c?ze(c,"PPP"):"Se calcular a 1 ao"})]})]})]}),!h&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"plazo_meses",children:"Plazo (meses) *"}),r.jsx(Ae,{id:"plazo_meses",type:"number",value:a.plazo_meses,onChange:v=>o({...a,plazo_meses:v.target.value}),placeholder:"12",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Inicio *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),i?ze(i,"PPP"):"Selecciona fecha"]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:i,onSelect:v=>v&&l(v),initialFocus:!0,className:Te("p-3 pointer-events-auto")})})]})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(se,{children:"Fecha de Vencimiento (calculada automticamente)"}),r.jsxs("div",{className:"flex items-center h-10 px-3 rounded-md border border-input bg-muted",children:[r.jsx(er,{className:"mr-2 h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:c?ze(c,"PPP"):"Se calcular automticamente"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin"}),r.jsx(Kr,{id:"descripcion",value:a.descripcion,onChange:v=>o({...a,descripcion:v.target.value}),placeholder:h?"Detalles adicionales sobre la lnea de crdito...":"Propsito del prstamo...",rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"condiciones",children:"Condiciones y Trminos"}),r.jsx(Kr,{id:"condiciones",value:a.condiciones,onChange:v=>o({...a,condiciones:v.target.value}),placeholder:"Garantas, seguros, comisiones, etc.",rows:3})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Pe,{type:"button",variant:"outline",onClick:f,className:"w-1/3",children:"Atrs"}),r.jsxs(Pe,{type:"submit",className:"flex-1",children:["Registrar ",h?"Lnea de Crdito":"Prstamo"]})]})]})})]})},uDe=()=>{const{financiamientos:e}=wl(),[t,n]=y.useState({financiamiento_id:"",monto:"",descripcion:"",metodo_pago:"",numero_referencia:""}),[s,a]=y.useState(new Date),o=e.filter(u=>u.tipo_credito==="revolvente"&&u.estado==="activo"),i=o.find(u=>u.id===t.financiamiento_id),l=i?i.monto_total-i.saldo_actual:0,{crearDisposicion:c}=wl(),d=u=>{u.preventDefault();const m=parseFloat(t.monto);if(m>l){alert(`El monto excede el lmite disponible de $${l.toFixed(2)}`);return}c.mutate({financiamiento_id:t.financiamiento_id,monto:m,fecha:ze(s,"yyyy-MM-dd"),metodo_pago:t.metodo_pago,descripcion:t.descripcion,numero_referencia:t.numero_referencia||void 0},{onSuccess:()=>{n({financiamiento_id:"",monto:"",descripcion:"",metodo_pago:"",numero_referencia:""}),a(new Date)}})};return o.length===0?r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Registro de Disposicin"})}),r.jsx(Q,{children:r.jsxs(sr,{children:[r.jsx(Ht,{className:"h-4 w-4"}),r.jsx(ar,{children:"No hay lneas de crdito revolventes disponibles para disponer. Para utilizar esta opcin, primero registra un Crdito Revolvente."})]})})]}):r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Registro de Disposicin"})}),r.jsx(Q,{children:r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(se,{htmlFor:"financiamiento_id",children:"Lnea de Crdito *"}),r.jsxs(De,{value:t.financiamiento_id,onValueChange:u=>n({...t,financiamiento_id:u}),required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona la lnea de crdito"})}),r.jsx($e,{children:o.map(u=>r.jsxs(le,{value:u.id,children:[u.nombre," - ",u.institucion_financiera," (Disponible: $",(u.monto_total-u.saldo_actual).toLocaleString("es-MX",{minimumFractionDigits:2}),")"]},u.id))})]})]}),i&&r.jsxs("div",{className:"col-span-2 p-4 bg-muted rounded-lg space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Lmite Total:"}),r.jsxs("span",{className:"font-medium",children:["$",i.monto_total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Saldo Utilizado:"}),r.jsxs("span",{className:"font-medium text-red-600",children:["$",i.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Lmite Disponible:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["$",l.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto",children:"Monto a Disponer *"}),r.jsx(Ae,{id:"monto",type:"number",step:"0.01",value:t.monto,onChange:u=>n({...t,monto:u.target.value}),placeholder:"0.00",required:!0,max:l}),t.monto&&parseFloat(t.monto)>l&&r.jsx("p",{className:"text-sm text-red-600",children:"El monto excede el lmite disponible"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha de Disposicin *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),s?ze(s,"PPP"):"Selecciona fecha"]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:s,onSelect:u=>u&&a(u),initialFocus:!0,className:Te("p-3 pointer-events-auto")})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo_pago",children:"Mtodo de Pago *"}),r.jsxs(De,{value:t.metodo_pago,onValueChange:u=>n({...t,metodo_pago:u}),required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona mtodo"})}),r.jsxs($e,{children:[r.jsx(le,{value:"transferencia",children:"Transferencia/Bancos"}),r.jsx(le,{value:"efectivo",children:"Efectivo"})]})]})]}),r.jsx("div",{className:"col-span-2",children:r.jsxs(sr,{className:"bg-blue-50 border-blue-200",children:[r.jsx(Ht,{className:"h-4 w-4 text-blue-600"}),r.jsxs(ar,{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Las disposiciones de crdito generalmente se realizan mediante transferencia bancaria. La opcin de efectivo est disponible para casos especiales donde el usuario lo requiera."]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"numero_referencia",children:"Nmero de Referencia"}),r.jsx(Ae,{id:"numero_referencia",value:t.numero_referencia,onChange:u=>n({...t,numero_referencia:u.target.value}),placeholder:"Folio, referencia o nmero de operacin"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin *"}),r.jsx(Kr,{id:"descripcion",value:t.descripcion,onChange:u=>n({...t,descripcion:u.target.value}),placeholder:"Describe el propsito de esta disposicin...",rows:3,required:!0})]}),r.jsx(Pe,{type:"submit",className:"w-full",disabled:!t.financiamiento_id,children:"Registrar Disposicin"})]})})]})},mDe=()=>{const{financiamientos:e,transacciones:t,crearTransaccion:n}=wl(),{data:s}=Dl(),{toast:a}=Rs(),[o,i]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState(""),[m,f]=y.useState(""),[h,x]=y.useState(""),[p,v]=y.useState(""),[j,g]=y.useState(""),[N,_]=y.useState(new Date),[b,w]=y.useState(!1),S=e.find(E=>E.id===o),C=()=>{if(!S)return{capitalPendiente:0,interesesPendientes:0};const E=t.filter(I=>I.financiamiento_id===S.id),O=E.filter(I=>I.tipo_transaccion==="cargo_interes").reduce((I,F)=>I+F.monto,0),M=E.filter(I=>I.tipo_transaccion==="amortizacion"||I.tipo_transaccion==="cargo_interes").reduce((I,F)=>I+(F.interes_pagado||0),0),T=Math.max(0,O-M);return{capitalPendiente:Math.max(0,S.saldo_actual-T),interesesPendientes:T}},{capitalPendiente:A,interesesPendientes:P}=C();y.useEffect(()=>{if(S)if(S.tipo_credito==="simple"){const E=S.monto_total/S.plazo_meses;u(E.toFixed(2)),f("0"),a({title:" Capital mensual calculado",description:`Pago mensual de capital: $${Ke(E)}. Los intereses se registran por separado.`,duration:5e3})}else u(""),f("")},[o,S,a]),y.useEffect(()=>{const E=parseFloat(d)||0,O=parseFloat(m)||0,M=E+O;c(M>0?M.toString():"")},[d,m]);const k=E=>{if(E.preventDefault(),!S)return;const O=parseFloat(l),M=parseFloat(d),T=parseFloat(m);if(T>P){a({title:"Error en el monto",description:`No puedes pagar ms intereses de los pendientes. Mximo: $${Ke(P)}`,variant:"destructive"});return}if(!s){a({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"});return}if(h==="efectivo"&&O>s.efectivo){a({title:" Saldo insuficiente en efectivo",description:`Disponible: $${Ke(s.efectivo)} | Necesitas: $${Ke(O)}`,variant:"destructive"});return}if(h==="transferencia"&&O>s.bancos){a({title:" Saldo insuficiente en bancos",description:`Disponible: $${Ke(s.bancos)} | Necesitas: $${Ke(O)}`,variant:"destructive"});return}const V=Math.max(0,S.saldo_actual-M-T);n.mutate({financiamiento_id:o,tipo_transaccion:"amortizacion",monto:O,fecha:ze(N,"yyyy-MM-dd"),capital_pagado:M,interes_pagado:T,saldo_restante:V,metodo_pago:h,numero_referencia:p,descripcion:j}),i(""),c(""),u(""),f(""),x(""),v(""),g(""),_(new Date)};return r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Registro de Amortizacin"})}),r.jsx(Q,{children:r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"financiamiento",children:"Financiamiento *"}),r.jsxs(De,{value:o,onValueChange:i,required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona un financiamiento"})}),r.jsx($e,{children:e.filter(E=>E.estado==="activo"&&E.saldo_actual>0).map(E=>r.jsxs(le,{value:E.id,children:[E.nombre," - Saldo: $",E.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]},E.id))})]})]}),(S==null?void 0:S.tipo_credito)==="simple"&&r.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800",children:r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[" ",r.jsx("strong",{children:"Crdito Simple:"})," El capital mensual se calcula automticamente ($",Ke(S.monto_total),"  ",S.plazo_meses," meses = $",Ke(S.monto_total/S.plazo_meses),"). Los intereses se registran por separado."]})}),S&&r.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 rounded-lg space-y-3 border border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Institucin:"})," ",S.institucion_financiera]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tasa: ",S.tasa_interes,"%"]})]}),r.jsx("div",{className:"h-px bg-blue-200 dark:bg-blue-800"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-950 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Capital Pendiente"}),r.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",A.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-950 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Intereses Pendientes"}),r.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:["$",P.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-950 p-3 rounded-lg border-2 border-blue-300 dark:border-blue-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-medium",children:"Saldo Total a Pagar:"}),r.jsxs("p",{className:"text-xl font-bold text-foreground",children:["$",S.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})}),P>0&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-950 p-2 rounded-lg border border-orange-200 dark:border-orange-800",children:[r.jsx("span",{className:"font-medium",children:" Tienes intereses pendientes"}),r.jsxs("span",{className:"text-muted-foreground",children:["(",(P/S.saldo_actual*100).toFixed(1),"% del saldo total)"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"capital",children:["Capital Pagado * ",(S==null?void 0:S.tipo_credito)==="simple"&&r.jsx("span",{className:"text-xs text-muted-foreground",children:"(Fijo)"})]}),r.jsx(Ae,{id:"capital",type:"number",step:"0.01",value:d,onChange:E=>u(E.target.value),placeholder:`Pendiente: $${A.toLocaleString("es-MX",{minimumFractionDigits:2})} (puedes pagar ms)`,required:!0,readOnly:(S==null?void 0:S.tipo_credito)==="simple",className:(S==null?void 0:S.tipo_credito)==="simple"?"bg-muted cursor-not-allowed":""}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Capital pendiente: $",A.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"interes",children:["Inters Pagado * ",(S==null?void 0:S.tipo_credito)==="simple"&&r.jsx("span",{className:"text-xs text-muted-foreground",children:"(Se registra por separado)"})]}),r.jsx(Ae,{id:"interes",type:"number",step:"0.01",max:P,value:m,onChange:E=>{(parseFloat(E.target.value)||0)<=P?f(E.target.value):(f(P.toString()),a({title:"Lmite alcanzado",description:`No puedes pagar ms de $${P.toLocaleString("es-MX",{minimumFractionDigits:2})} en intereses`,variant:"destructive"}))},placeholder:`Mx: $${P.toLocaleString("es-MX",{minimumFractionDigits:2})}`,required:!0,readOnly:(S==null?void 0:S.tipo_credito)==="simple",className:(S==null?void 0:S.tipo_credito)==="simple"?"bg-muted cursor-not-allowed":""}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Intereses pendientes: $",P.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),S&&(d||m)&&r.jsxs("div",{className:"col-span-2 p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900 rounded-lg space-y-3 border border-purple-200 dark:border-purple-800",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("span",{className:"text-sm font-semibold text-purple-700 dark:text-purple-300",children:" Previsualizacin despus del pago"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-950 p-3 rounded-lg border border-purple-200 dark:border-purple-800",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:A-(parseFloat(d)||0)<0?"Saldo a Favor":"Capital que quedar"}),r.jsxs("p",{className:`text-lg font-bold ${A-(parseFloat(d)||0)<0?"text-green-600 dark:text-green-400":"text-purple-600 dark:text-purple-400"}`,children:["$",Math.abs(A-(parseFloat(d)||0)).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-950 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Intereses que quedarn"}),r.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:["$",Math.max(0,P-(parseFloat(m)||0)).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}),r.jsx("div",{className:Te("p-3 rounded-lg border-2",A-(parseFloat(d)||0)<=0&&P-(parseFloat(m)||0)===0?"bg-green-50 dark:bg-green-950 border-green-300 dark:border-green-700":"bg-white dark:bg-gray-950 border-purple-300 dark:border-purple-700"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-medium",children:A-(parseFloat(d)||0)<=0&&P-(parseFloat(m)||0)===0?` Deuda liquidada completamente${A-(parseFloat(d)||0)<0?" (con saldo a favor)":""}`:"Saldo Total que quedar:"}),(A-(parseFloat(d)||0)>0||P-(parseFloat(m)||0)>0)&&r.jsxs("p",{className:"text-xl font-bold text-foreground",children:["$",(Math.max(0,A-(parseFloat(d)||0))+Math.max(0,P-(parseFloat(m)||0))).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(se,{htmlFor:"monto",children:"Monto Total del Pago (calculado automticamente)"}),r.jsx(Ae,{id:"monto",type:"number",step:"0.01",value:l,disabled:!0,className:"bg-muted cursor-not-allowed",placeholder:"Se calcular automticamente"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Este monto se calcula sumando el capital + inters pagados"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo_pago",children:"Mtodo de Pago *"}),r.jsxs(De,{value:h,onValueChange:E=>{x(E),E==="efectivo"&&w(!0)},required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona mtodo"})}),r.jsxs($e,{children:[r.jsxs(le,{value:"efectivo",children:["Efectivo ",s&&`(Disponible: $${s.efectivo.toLocaleString("es-MX",{minimumFractionDigits:2})})`]}),r.jsxs(le,{value:"transferencia",children:["Transferencia/Bancos ",s&&`(Disponible: $${s.bancos.toLocaleString("es-MX",{minimumFractionDigits:2})})`]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha del Pago *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),N?ze(N,"PPP"):"Selecciona fecha"]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:N,onSelect:E=>E&&_(E),initialFocus:!0,className:Te("p-3 pointer-events-auto")})})]})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(se,{htmlFor:"numero_referencia",children:"Nmero de Referencia"}),r.jsx(Ae,{id:"numero_referencia",value:p,onChange:E=>v(E.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin"}),r.jsx(Kr,{id:"descripcion",value:j,onChange:E=>g(E.target.value),rows:2})]}),r.jsx(Pe,{type:"submit",className:"w-full",children:"Registrar Amortizacin"}),r.jsx(wa,{open:b,onOpenChange:w,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:" Advertencia: Pago en Efectivo"}),r.jsxs(Js,{className:"space-y-2",children:[r.jsxs("p",{children:["Has seleccionado ",r.jsx("strong",{children:"Efectivo"})," como mtodo de pago para esta amortizacin."]}),r.jsxs("p",{className:"text-amber-600 dark:text-amber-400",children:["Ten en cuenta que los pagos a instituciones financieras ",r.jsx("strong",{children:"regularmente se realizan por transferencia bancaria"}),"."]}),r.jsx("p",{children:"Ests seguro de que deseas continuar con el pago en efectivo?"})]})]}),r.jsxs(Qs,{children:[r.jsx(ta,{onClick:()=>x(""),children:"Cancelar y cambiar"}),r.jsx(ea,{onClick:()=>w(!1),children:"S, continuar con efectivo"})]})]})})]})})]})},fDe=()=>{const{financiamientos:e,crearTransaccion:t}=wl(),{data:n}=Dl(),[s,a]=y.useState(""),[o,i]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState(new Date),[m,f]=y.useState("pendiente"),[h,x]=y.useState(""),[p,v]=y.useState(!1),j=e.find(N=>N.id===s),g=N=>{if(N.preventDefault(),!j)return;const _=parseFloat(o);if(m==="pagado"){if(!n){Xt.error("Error de validacin",{description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente."});return}if(h==="efectivo"&&_>n.efectivo){Xt.error(" Saldo insuficiente en efectivo",{description:`Disponible: $${n.efectivo.toLocaleString("es-MX",{minimumFractionDigits:2})} | Necesitas: $${_.toLocaleString("es-MX",{minimumFractionDigits:2})}`});return}if(h==="transferencia"&&_>n.bancos){Xt.error(" Saldo insuficiente en bancos",{description:`Disponible: $${n.bancos.toLocaleString("es-MX",{minimumFractionDigits:2})} | Necesitas: $${_.toLocaleString("es-MX",{minimumFractionDigits:2})}`});return}}const b=m==="pendiente"?j.saldo_actual+_:j.saldo_actual,w=l.trim()?`${l.trim()} (${m==="pagado"?"Pagado":"Pendiente"})`:`Cargo de intereses (${m==="pagado"?"Pagado":"Pendiente"})`;t.mutate({financiamiento_id:s,tipo_transaccion:"cargo_interes",monto:_,fecha:ze(d,"yyyy-MM-dd"),capital_pagado:0,interes_pagado:m==="pagado"?_:0,saldo_restante:b,metodo_pago:m==="pagado"?h:null,descripcion:w}),a(""),i(""),f("pendiente"),x(""),c(""),u(new Date)};return r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Registro de Cargo por Intereses"})}),r.jsxs(Q,{children:[r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"financiamiento",children:"Financiamiento *"}),r.jsxs(De,{value:s,onValueChange:a,required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona un financiamiento"})}),r.jsx($e,{children:e.filter(N=>N.estado==="activo").map(N=>r.jsxs(le,{value:N.id,children:[N.nombre," - ",N.institucion_financiera]},N.id))})]})]}),j&&r.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Institucin:"})," ",j.institucion_financiera]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Saldo Actual:"})," $",j.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Tasa:"})," ",j.tasa_interes,"%"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto",children:"Monto del Cargo *"}),r.jsx(Ae,{id:"monto",type:"number",step:"0.01",value:o,onChange:N=>i(N.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"tipoPago",children:"Tipo de Pago *"}),r.jsxs(De,{value:m,onValueChange:N=>f(N),required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"pendiente",children:"Pendiente (se acumula al saldo)"}),r.jsx(le,{value:"pagado",children:"Pagado (reducir efectivo/bancos)"})]})]})]}),m==="pagado"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodoPago",children:"Mtodo de Pago *"}),r.jsxs(De,{value:h,onValueChange:N=>{x(N),N==="efectivo"&&v(!0)},required:!0,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona mtodo"})}),r.jsxs($e,{children:[r.jsx(le,{value:"efectivo",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsx("span",{children:"Efectivo"}),r.jsxs("span",{className:"text-xs text-muted-foreground ml-4",children:["(Disponible: $",(n==null?void 0:n.efectivo.toLocaleString("es-MX",{minimumFractionDigits:2}))||"0.00",")"]})]})}),r.jsx(le,{value:"transferencia",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsx("span",{children:"Transferencia"}),r.jsxs("span",{className:"text-xs text-muted-foreground ml-4",children:["(Disponible: $",(n==null?void 0:n.bancos.toLocaleString("es-MX",{minimumFractionDigits:2}))||"0.00",")"]})]})})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Fecha del Cargo *"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),d?ze(d,"PPP"):"Selecciona fecha"]})}),r.jsx(fn,{className:"w-auto p-0",children:r.jsx(Nn,{mode:"single",selected:d,onSelect:N=>N&&u(N),initialFocus:!0,className:Te("p-3 pointer-events-auto")})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin (opcional)"}),r.jsx(Kr,{id:"descripcion",value:l,onChange:N=>c(N.target.value),placeholder:"Detalla el motivo del cargo (intereses ordinarios, moratorios, comisin, etc.)",rows:3})]}),r.jsx(Pe,{type:"submit",className:"w-full",children:"Registrar Cargo"})]}),r.jsx(wa,{open:p,onOpenChange:v,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:" Advertencia: Pago en Efectivo"}),r.jsxs(Js,{className:"space-y-2",children:[r.jsxs("p",{children:["Has seleccionado ",r.jsx("strong",{children:"Efectivo"})," como mtodo de pago."]}),r.jsxs("p",{className:"text-amber-600 dark:text-amber-400",children:["Ten en cuenta que los pagos a instituciones financieras ",r.jsx("strong",{children:"regularmente se realizan por transferencia bancaria"}),"."]}),r.jsx("p",{children:"Ests seguro de que deseas continuar con el pago en efectivo?"})]})]}),r.jsxs(Qs,{children:[r.jsx(ta,{onClick:()=>{x(""),v(!1)},children:"Cambiar a Transferencia"}),r.jsx(ea,{onClick:()=>{v(!1)},children:"Continuar con Efectivo"})]})]})})]})]})},hDe=({financiamientoId:e,nombreTarjeta:t,limiteCredito:n,saldoActual:s})=>{var v,j;const[a,o]=y.useState(null),[i,l]=y.useState(!1),{data:c,isLoading:d}=it({queryKey:["transacciones-tarjeta",e],queryFn:async()=>{const g=`tarjeta_credito_${e}`,{data:N}=await ce.from("transacciones_egresos").select("*").eq("metodo_pago",g).order("created_at",{ascending:!1}),{data:_}=await ce.from("inversiones_capex").select("*").eq("metodo_pago",g).order("created_at",{ascending:!1}),{data:b}=await ce.from("transacciones_financiamientos").select("*").eq("financiamiento_id",e).order("fecha",{ascending:!1});return[...(N||[]).map(S=>({id:S.id,fecha:S.created_at,descripcion:S.descripcion,monto:S.monto_pagado,tipo:"egreso",proveedor:S.proveedor_nombre,detalle:S,tipoTransaccion:"cargo",estado:S.estado,fechaCancelacion:S.fecha_cancelacion,motivoCancelacion:S.motivo_cancelacion})),...(_||[]).map(S=>({id:S.id,fecha:S.fecha_adquisicion,descripcion:S.producto_nombre,monto:S.monto_pagado,tipo:"capex",proveedor:S.proveedor_nombre,detalle:S,tipoTransaccion:"cargo",estado:S.estado,fechaCancelacion:S.fecha_baja,motivoCancelacion:S.motivo_baja})),...(b||[]).map(S=>({id:S.id,fecha:S.fecha,descripcion:S.tipo_transaccion==="amortizacion"&&S.capital_pagado>0&&S.interes_pagado>0?`Pago de Tarjeta: $${S.capital_pagado.toLocaleString("es-MX")} capital + $${S.interes_pagado.toLocaleString("es-MX")} inters`:S.descripcion||u(S.tipo_transaccion),monto:S.monto,tipo:S.tipo_transaccion,proveedor:null,detalle:S,tipoTransaccion:S.tipo_transaccion,estado:"activo",fechaCancelacion:null,motivoCancelacion:null}))].sort((S,C)=>new Date(C.fecha).getTime()-new Date(S.fecha).getTime())}}),u=g=>({amortizacion:"Pago de Tarjeta",cargo_interes:"Cargo por Intereses",desembolso:"Disposicin"})[g]||g,m=g=>{o(g),l(!0)},f=g=>g.tipoTransaccion==="cargo"?{cargo:g.detalle.cuenta_codigo||"Cuenta de gasto/inversin",abono:`2101 - Prstamos Bancarios LP (${t})`}:g.tipoTransaccion==="amortizacion"?{cargo:`2101 - Prstamos Bancarios LP (${t})`,abono:g.detalle.metodo_pago==="efectivo"?"1001 - Efectivo":"1002 - Bancos"}:g.tipoTransaccion==="cargo_interes"?{cargo:"5201 - Gastos Financieros",abono:`2101 - Prstamos Bancarios LP (${t})`}:{cargo:"N/A",abono:"N/A"},h=n-s,x=s/n*100,p=(c==null?void 0:c.filter(g=>g.estado==="cancelado"&&(g.tipo==="egreso"||g.tipo==="capex")).reduce((g,N)=>g+N.monto,0))||0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(li,{className:"h-4 w-4"}),"Lmite de Crdito"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",n.toLocaleString("es-MX")]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lnea aprobada"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Saldo Utilizado"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-destructive",children:["$",s.toLocaleString("es-MX")]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[x.toFixed(1),"% del lmite"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(er,{className:"h-4 w-4"}),"Crdito Disponible"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",h.toLocaleString("es-MX")]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Puede utilizar"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Ht,{className:"h-4 w-4"}),"Cargos Cancelados"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-muted-foreground",children:["$",p.toLocaleString("es-MX")]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revertidos (impacto: $0)"})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{children:["Transacciones de ",t]}),r.jsx(Me,{children:"Historial completo de compras, pagos y transacciones canceladas"})]}),r.jsx(Q,{children:d?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando transacciones..."}):!c||c.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay transacciones registradas con esta tarjeta"}):r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Proveedor"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{className:"text-right",children:"Impacto en Saldo"}),r.jsx(me,{className:"text-right",children:"Monto"}),r.jsx(me,{className:"text-center",children:"Acciones"})]})}),r.jsx(kt,{children:c.map(g=>r.jsxs(Oe,{className:g.estado==="cancelado"?"bg-red-50 dark:bg-red-950/20":"",children:[r.jsx(Z,{children:ze(new Date(g.fecha),"dd MMM yyyy",{locale:ht})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:g.descripcion}),g.estado==="cancelado"&&r.jsx(_e,{variant:"destructive",className:"w-fit text-xs",children:"CANCELADO"})]})}),r.jsx(Z,{children:g.proveedor||"-"}),r.jsx(Z,{children:r.jsx(_e,{variant:g.estado==="cancelado"?"outline":g.tipo==="egreso"?"secondary":g.tipo==="capex"||g.tipo==="amortizacion"?"default":"destructive",children:g.tipo==="egreso"?"Egreso":g.tipo==="capex"?"CAPEX":g.tipo==="amortizacion"?"Pago":g.tipo==="cargo_interes"?"Inters":g.tipo})}),r.jsx(Z,{className:"text-right",children:g.estado==="cancelado"?r.jsx(_e,{variant:"outline",className:"text-muted-foreground",children:"$0 (revertido)"}):g.tipoTransaccion==="amortizacion"?r.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["-$",g.monto.toLocaleString("es-MX")]}):g.tipoTransaccion==="cargo_interes"?r.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["+$",g.monto.toLocaleString("es-MX")]}):r.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["+$",g.monto.toLocaleString("es-MX")]})}),r.jsx(Z,{className:"text-right font-medium",children:r.jsxs("span",{className:g.estado==="cancelado"?"line-through text-muted-foreground":"",children:["$",g.monto.toLocaleString("es-MX")]})}),r.jsx(Z,{className:"text-center",children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>m(g),children:r.jsx(pi,{className:"h-4 w-4"})})})]},g.id))})]})})]}),r.jsx(vr,{open:i,onOpenChange:l,children:r.jsxs(mr,{className:"max-w-2xl",children:[r.jsx(fr,{children:r.jsx(hr,{children:"Detalle de Transaccin"})}),a&&r.jsxs("div",{className:"space-y-4",children:[a.estado==="cancelado"&&r.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ht,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-100",children:"Transaccin Cancelada"}),r.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["Esta transaccin fue cancelada el"," ",ze(new Date(a.fechaCancelacion),"dd 'de' MMMM 'de' yyyy",{locale:ht})]}),a.motivoCancelacion&&r.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[r.jsx("strong",{children:"Motivo:"})," ",a.motivoCancelacion]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"El saldo de la tarjeta fue revertido automticamente."})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"font-medium",children:ze(new Date(a.fecha),"dd 'de' MMMM 'de' yyyy",{locale:ht})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Tipo"}),r.jsx(_e,{variant:a.tipo==="egreso"?"secondary":a.tipo==="capex"||a.tipo==="amortizacion"?"default":"destructive",children:a.tipo==="egreso"?"Egreso":a.tipo==="capex"?"CAPEX":a.tipo==="amortizacion"?"Pago de Tarjeta":a.tipo==="cargo_interes"?"Cargo por Intereses":a.tipo})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Descripcin"}),r.jsx("p",{className:"font-medium",children:a.descripcion})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Monto"}),r.jsxs("p",{className:"font-medium text-lg",children:["$",a.monto.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),a.proveedor&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Proveedor"}),r.jsx("p",{className:"font-medium",children:a.proveedor})]}),a.tipo==="amortizacion"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Capital Pagado"}),r.jsxs("p",{className:"font-medium",children:["$",(v=a.detalle.capital_pagado)==null?void 0:v.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Inters Pagado"}),r.jsxs("p",{className:"font-medium",children:["$",(j=a.detalle.interes_pagado)==null?void 0:j.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Mtodo de Pago"}),r.jsx("p",{className:"font-medium",children:a.detalle.metodo_pago==="efectivo"?"Efectivo":"Transferencia/Bancos"})]})]})]}),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Afectacin Contable"}),r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Cargo (Debe)"}),r.jsx(me,{className:"text-right",children:"Abono (Haber)"})]})}),r.jsxs(kt,{children:[r.jsxs(Oe,{children:[r.jsx("td",{className:"font-medium py-2",children:f(a).cargo}),r.jsxs("td",{className:"text-right py-2 text-destructive",children:["$",(a.tipoTransaccion==="amortizacion"?(a.detalle.capital_pagado||0)+(a.detalle.interes_pagado||0):a.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("td",{className:"text-right py-2",children:"-"})]}),r.jsxs(Oe,{children:[r.jsx("td",{className:"font-medium py-2",children:f(a).abono}),r.jsx("td",{className:"text-right py-2",children:"-"}),r.jsxs("td",{className:"text-right py-2 text-success",children:["$",(a.tipoTransaccion==="amortizacion"?(a.detalle.capital_pagado||0)+(a.detalle.interes_pagado||0):a.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]})]}),a.detalle.comentarios&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comentarios"}),r.jsx("p",{className:"text-sm",children:a.detalle.comentarios})]})]})]})})]})},zk=({financiamientoId:e,nombreFinanciamiento:t,montoTotal:n,saldoActual:s,saldoInicial:a,tipoCredito:o="simple"})=>{var P,k,E;const[i,l]=y.useState(!1),[c,d]=y.useState(null),[u,m]=y.useState(!1),[f,h]=y.useState(null),{data:x,isLoading:p}=it({queryKey:["transacciones-financiamiento",e],queryFn:async()=>{const{data:O}=await ce.from("transacciones_financiamientos").select("*").eq("financiamiento_id",e).order("fecha",{ascending:!1});return O||[]}}),{data:v}=it({queryKey:["asientos-financiamiento",e],queryFn:async()=>{const{data:O}=await ce.from("asientos_contables").select(`
          *,
          detalle_asientos (
            *,
            cuentas:cuenta_codigo (
              codigo,
              nombre
            )
          )
        `).ilike("descripcion",`%${t}%`).order("fecha",{ascending:!1});return O||[]}}),j=O=>{const M=v==null?void 0:v.find(T=>T.fecha===O.fecha&&(T.descripcion.includes(O.tipo_transaccion)||T.descripcion.includes(t)));M&&(d(M),l(!0))},g=a-s,N=a>0?g/a*100:0,_=o==="revolvente"||o==="tarjeta_corporativa",b=n-s,w=n>0?s/n*100:0,S=O=>({desembolso:"Desembolso Inicial",disposicion:"Disposicin",amortizacion:"Amortizacin",cargo_interes:"Cargo por Inters"})[O]||O,C=O=>({desembolso:"secondary",disposicion:"secondary",amortizacion:"default",cargo_interes:"destructive"})[O]||"default",A=O=>O.tipo_transaccion==="desembolso"?{cargo:"1002 - Bancos",abono:`2101 - Crditos Bancarios (${t})`}:O.tipo_transaccion==="disposicion"?{cargo:O.metodo_pago==="efectivo"?"1001 - Caja":"1002 - Bancos",abono:`2101 - Prstamos Bancarios LP (${t})`}:O.tipo_transaccion==="amortizacion"?{cargo:`2101 - Crditos Bancarios (${t})`,abono:O.metodo_pago==="efectivo"?"1001 - Efectivo":"1002 - Bancos",adicional:O.interes_pagado>0?{cargo:"5201 - Gastos Financieros",abono:O.metodo_pago==="efectivo"?"1001 - Efectivo":"1002 - Bancos",monto:O.interes_pagado}:null}:O.tipo_transaccion==="cargo_interes"?O.interes_pagado>0?{cargo:"5201 - Gastos Financieros",abono:O.metodo_pago==="efectivo"?"1001 - Efectivo":"1002 - Bancos"}:{cargo:"5201 - Gastos Financieros",abono:`2101 - Crditos Bancarios (${t})`}:{cargo:"N/A",abono:"N/A"};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:_?r.jsxs(r.Fragment,{children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(ps,{className:"h-4 w-4"}),"Lnea Total"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",n.toLocaleString("es-MX")]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lnea aprobada"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Monto Utilizado"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",s.toLocaleString("es-MX")]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w.toFixed(1),"% utilizado"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4"}),"Saldo Disponible"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",b.toLocaleString("es-MX")]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(100-w).toFixed(1),"% disponible"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(On,{className:"h-4 w-4"}),"Transacciones"]})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(x==null?void 0:x.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Registros"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(ps,{className:"h-4 w-4"}),"Monto Original"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",n.toLocaleString("es-MX")]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Prstamo total"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Amortizado"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",g.toLocaleString("es-MX")]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N.toFixed(1),"% pagado"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4"}),"Saldo Pendiente"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"text-2xl font-bold text-destructive",children:["$",s.toLocaleString("es-MX")]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Por pagar"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(On,{className:"h-4 w-4"}),"Transacciones"]})}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(x==null?void 0:x.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Registros"})]})]})]})}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{children:["Transacciones de ",t]}),r.jsx(Me,{children:"Historial de desembolsos, amortizaciones y cargos por inters"})]}),r.jsx(Q,{children:p?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando transacciones..."}):!x||x.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay transacciones registradas para este financiamiento"}):r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{className:"text-right",children:"Monto"}),r.jsx(me,{className:"text-right",children:"Capital"}),r.jsx(me,{className:"text-right",children:"Inters"}),r.jsx(me,{className:"text-right",children:"Saldo Restante"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{className:"text-center",children:"Asiento"}),r.jsx(me,{className:"text-center",children:"Detalle"})]})}),r.jsx(kt,{children:x.map(O=>r.jsxs(Oe,{children:[r.jsx(Z,{children:ze(new Date(O.fecha),"dd MMM yyyy",{locale:ht})}),r.jsx(Z,{children:r.jsx(_e,{variant:C(O.tipo_transaccion),children:S(O.tipo_transaccion)})}),r.jsxs(Z,{className:"text-right font-medium",children:["$",O.monto.toLocaleString("es-MX")]}),r.jsxs(Z,{className:"text-right",children:["$",O.capital_pagado.toLocaleString("es-MX")]}),r.jsxs(Z,{className:"text-right",children:["$",O.interes_pagado.toLocaleString("es-MX")]}),r.jsxs(Z,{className:"text-right font-medium",children:["$",O.saldo_restante.toLocaleString("es-MX")]}),r.jsx(Z,{children:O.metodo_pago||"-"}),r.jsx(Z,{className:"text-center",children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>j(O),children:r.jsx(On,{className:"h-4 w-4"})})}),r.jsx(Z,{className:"text-center",children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>{h(O),m(!0)},children:r.jsx(pi,{className:"h-4 w-4"})})})]},O.id))})]})})]}),r.jsx(vr,{open:i,onOpenChange:l,children:r.jsxs(mr,{className:"max-w-4xl",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Detalle del Asiento Contable"}),r.jsx(mn,{children:"Registro contable de la transaccin"})]}),c&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Nmero de Asiento"}),r.jsx("p",{className:"font-semibold",children:c.numero_asiento})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"font-semibold",children:ze(new Date(c.fecha),"dd MMM yyyy",{locale:ht})})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Descripcin"}),r.jsx("p",{className:"font-medium",children:c.descripcion})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-base",children:"Detalle de Movimientos"})}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[(P=c.detalle_asientos)==null?void 0:P.map(O=>{var M;return r.jsxs(Oe,{children:[r.jsxs(Z,{className:"font-medium",children:[O.cuenta_codigo," - ",((M=O.cuentas)==null?void 0:M.nombre)||"N/A"]}),r.jsx(Z,{children:O.descripcion}),r.jsx(Z,{className:"text-right font-medium text-success",children:O.debe>0?`$${O.debe.toLocaleString("es-MX")}`:"-"}),r.jsx(Z,{className:"text-right font-medium text-destructive",children:O.haber>0?`$${O.haber.toLocaleString("es-MX")}`:"-"})]},O.id)}),r.jsxs(Oe,{className:"font-bold bg-muted",children:[r.jsx(Z,{colSpan:2,children:"TOTALES"}),r.jsxs(Z,{className:"text-right text-success",children:["$",(k=c.detalle_asientos)==null?void 0:k.reduce((O,M)=>O+M.debe,0).toLocaleString("es-MX")]}),r.jsxs(Z,{className:"text-right text-destructive",children:["$",(E=c.detalle_asientos)==null?void 0:E.reduce((O,M)=>O+M.haber,0).toLocaleString("es-MX")]})]})]})]})})]})]})]})}),r.jsx(vr,{open:u,onOpenChange:m,children:r.jsxs(mr,{className:"max-w-2xl",children:[r.jsx(fr,{children:r.jsx(hr,{children:"Detalle de Transaccin"})}),f&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"font-medium",children:ze(new Date(f.fecha),"dd 'de' MMMM 'de' yyyy",{locale:ht})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Tipo"}),r.jsx(_e,{variant:C(f.tipo_transaccion),children:S(f.tipo_transaccion)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Descripcin"}),r.jsx("p",{className:"font-medium",children:f.descripcion||S(f.tipo_transaccion)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Monto Total"}),r.jsxs("p",{className:"font-medium text-lg",children:["$",f.monto.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),f.capital_pagado>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Capital Pagado"}),r.jsxs("p",{className:"font-medium",children:["$",f.capital_pagado.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),f.interes_pagado>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Inters Pagado"}),r.jsxs("p",{className:"font-medium",children:["$",f.interes_pagado.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Saldo Restante"}),r.jsxs("p",{className:"font-medium",children:["$",f.saldo_restante.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),f.metodo_pago&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Mtodo de Pago"}),r.jsx("p",{className:"font-medium",children:f.metodo_pago==="efectivo"?"Efectivo":"Transferencia/Bancos"})]})]}),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Afectacin Contable"}),r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Cargo (Debe)"}),r.jsx(me,{className:"text-right",children:"Abono (Haber)"})]})}),r.jsxs(kt,{children:[r.jsxs(Oe,{children:[r.jsx("td",{className:"font-medium py-2",children:A(f).cargo}),r.jsxs("td",{className:"text-right py-2 text-destructive",children:["$",(f.tipo_transaccion==="amortizacion"?f.capital_pagado:f.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("td",{className:"text-right py-2",children:"-"})]}),r.jsxs(Oe,{children:[r.jsx("td",{className:"font-medium py-2",children:A(f).abono}),r.jsx("td",{className:"text-right py-2",children:"-"}),r.jsxs("td",{className:"text-right py-2 text-success",children:["$",(f.tipo_transaccion==="amortizacion"?f.capital_pagado:f.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),A(f).adicional&&r.jsxs(r.Fragment,{children:[r.jsxs(Oe,{children:[r.jsx("td",{className:"font-medium py-2",children:A(f).adicional.cargo}),r.jsxs("td",{className:"text-right py-2 text-destructive",children:["$",A(f).adicional.monto.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("td",{className:"text-right py-2",children:"-"})]}),r.jsxs(Oe,{children:[r.jsx("td",{className:"font-medium py-2",children:A(f).adicional.abono}),r.jsx("td",{className:"text-right py-2",children:"-"}),r.jsxs("td",{className:"text-right py-2 text-success",children:["$",A(f).adicional.monto.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]})]})]})]})]})})]})},pDe=()=>{const{transacciones:e,financiamientos:t,isLoading:n}=wl();if(console.log("Financiamientos:",t),console.log("Transacciones:",e),n)return r.jsxs("div",{className:"space-y-4",children:[r.jsx(gr,{className:"h-32 w-full"}),r.jsx(gr,{className:"h-96 w-full"})]});const s=e.filter(i=>i.tipo_transaccion==="amortizacion").reduce((i,l)=>i+l.capital_pagado,0),a=e.reduce((i,l)=>i+l.interes_pagado,0),o=e.filter(i=>i.tipo_transaccion==="cargo_interes").reduce((i,l)=>i+l.monto,0);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Amortizado"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold text-primary",children:["$",s.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Intereses Pagados"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",a.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Cargos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",o.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]})]}),t.filter(i=>i.tipo_credito==="tarjeta_corporativa").length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Tarjetas de Crdito Corporativas"})}),r.jsx(Q,{children:r.jsx(Co,{type:"single",collapsible:!0,className:"w-full",children:t.filter(i=>i.tipo_credito==="tarjeta_corporativa").map(i=>r.jsxs(Ga,{value:i.id,children:[r.jsx(Ha,{children:r.jsxs("div",{className:"flex justify-between items-center w-full pr-4",children:[r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("span",{className:"font-medium",children:i.nombre}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i.institucion_financiera})]}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Lmite: "}),r.jsxs("span",{className:"font-medium",children:["$",i.monto_total.toLocaleString("es-MX")]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Utilizado: "}),r.jsxs("span",{className:"font-medium",children:["$",i.saldo_actual.toLocaleString("es-MX")]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Disponible: "}),r.jsxs("span",{className:"font-medium text-success",children:["$",(i.monto_total-i.saldo_actual).toLocaleString("es-MX")]})]})]})]})}),r.jsx(Xa,{children:r.jsx(hDe,{financiamientoId:i.id,nombreTarjeta:i.nombre,limiteCredito:i.monto_total,saldoActual:i.saldo_actual})})]},i.id))})})]}),t.filter(i=>i.tipo_credito==="revolvente").length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Lneas de Crdito Revolventes"})}),r.jsx(Q,{children:r.jsx(Co,{type:"single",collapsible:!0,className:"w-full",children:t.filter(i=>i.tipo_credito==="revolvente").map(i=>r.jsxs(Ga,{value:i.id,children:[r.jsx(Ha,{children:r.jsxs("div",{className:"flex justify-between items-center w-full pr-4",children:[r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("span",{className:"font-medium",children:i.nombre}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i.institucion_financiera})]}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Lnea Aprobada: "}),r.jsxs("span",{className:"font-medium",children:["$",i.monto_total.toLocaleString("es-MX")]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Monto Utilizado: "}),r.jsxs("span",{className:"font-medium text-destructive",children:["$",i.saldo_actual.toLocaleString("es-MX")]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Disponible: "}),r.jsxs("span",{className:"font-medium text-success",children:["$",(i.monto_total-i.saldo_actual).toLocaleString("es-MX")]})]})]})]})}),r.jsx(Xa,{children:r.jsx(zk,{financiamientoId:i.id,nombreFinanciamiento:i.nombre,montoTotal:i.monto_total,saldoActual:i.saldo_actual,saldoInicial:i.saldo_inicial,tipoCredito:i.tipo_credito})})]},i.id))})})]}),t.filter(i=>i.tipo_credito!=="tarjeta_corporativa"&&i.tipo_credito!=="revolvente").length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Crditos Simples"})}),r.jsx(Q,{children:r.jsx(Co,{type:"single",collapsible:!0,className:"w-full",children:t.filter(i=>i.tipo_credito!=="tarjeta_corporativa"&&i.tipo_credito!=="revolvente").map(i=>r.jsxs(Ga,{value:i.id,children:[r.jsx(Ha,{children:r.jsxs("div",{className:"flex justify-between items-center w-full pr-4",children:[r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("span",{className:"font-medium",children:i.nombre}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i.institucion_financiera})]}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Monto Original: "}),r.jsxs("span",{className:"font-medium",children:["$",i.monto_total.toLocaleString("es-MX")]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Amortizado: "}),r.jsxs("span",{className:"font-medium text-success",children:["$",(i.monto_total-i.saldo_actual).toLocaleString("es-MX")]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Pendiente: "}),r.jsxs("span",{className:"font-medium text-destructive",children:["$",i.saldo_actual.toLocaleString("es-MX")]})]})]})]})}),r.jsx(Xa,{children:r.jsx(zk,{financiamientoId:i.id,nombreFinanciamiento:i.nombre,montoTotal:i.monto_total,saldoActual:i.saldo_actual,saldoInicial:i.saldo_inicial,tipoCredito:i.tipo_credito})})]},i.id))})})]})]})},xDe=()=>{const{financiamientos:e,isLoading:t}=wl(),n=l=>({simple:"Crdito Simple",arrendamiento:"Arrendamiento",revolvente:"Crdito Revolvente",tarjeta_corporativa:"Tarjeta Corporativa"})[l]||l,s=l=>({activo:"default",pagado:"secondary",vencido:"destructive"})[l]||"default";if(t)return r.jsx("div",{className:"space-y-4",children:r.jsx(gr,{className:"h-96 w-full"})});const a=e.filter(l=>l.estado==="activo"),o=e.filter(l=>l.estado==="pagado"),i=e.filter(l=>l.estado==="vencido");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{children:["Crditos Activos (",a.length,")"]})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-4",children:[a.map(l=>r.jsxs("div",{className:"border rounded-lg p-6 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-lg",children:l.nombre}),r.jsx("p",{className:"text-sm text-muted-foreground",children:l.institucion_financiera}),l.numero_cuenta&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Cuenta: ",l.numero_cuenta]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{children:n(l.tipo_credito)}),r.jsx(_e,{variant:s(l.estado),children:l.estado.toUpperCase()})]})]}),l.descripcion&&r.jsx("p",{className:"text-sm text-muted-foreground",children:l.descripcion}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Monto Original"}),r.jsxs("p",{className:"font-semibold",children:["$",l.monto_total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Saldo Actual"}),r.jsxs("p",{className:"font-semibold text-red-600",children:["$",l.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Tasa de Inters"}),r.jsxs("p",{className:"font-semibold",children:[l.tasa_interes,"% anual"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Plazo"}),r.jsxs("p",{className:"font-semibold",children:[l.plazo_meses," meses"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Fecha de Inicio"}),r.jsx("p",{className:"text-sm",children:ze(new Date(l.fecha_inicio),"dd/MM/yyyy")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Fecha de Vencimiento"}),r.jsx("p",{className:"text-sm",children:ze(new Date(l.fecha_vencimiento),"dd/MM/yyyy")})]})]}),l.condiciones&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Condiciones"}),r.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:l.condiciones})]}),l.tipo_credito==="tarjeta_corporativa"||l.tipo_credito==="revolvente"?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Uso de Lnea de Crdito"}),r.jsxs("span",{className:"font-medium",children:[(l.saldo_actual/l.monto_total*100).toFixed(1),"% utilizado"]})]}),r.jsxs("div",{className:"w-full bg-green-100 rounded-full h-3 flex overflow-hidden",children:[r.jsx("div",{className:"bg-green-500 h-3 transition-all",style:{width:`${(l.monto_total-l.saldo_actual)/l.monto_total*100}%`},title:"Lnea Disponible"}),r.jsx("div",{className:"bg-red-500 h-3 transition-all",style:{width:`${l.saldo_actual/l.monto_total*100}%`},title:"Saldo Pendiente"})]}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 bg-green-500 rounded"}),"Disponible: $",(l.monto_total-l.saldo_actual).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 bg-red-500 rounded"}),"Pendiente: $",l.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Progreso de Pago"}),r.jsxs("span",{className:"font-medium",children:[((l.monto_total-l.saldo_actual)/l.monto_total*100).toFixed(1),"% completado"]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-3",children:r.jsx("div",{className:"bg-primary h-3 rounded-full transition-all",style:{width:`${(l.monto_total-l.saldo_actual)/l.monto_total*100}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Pagado: $",(l.monto_total-l.saldo_actual).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("span",{children:["Pendiente: $",l.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]},l.id)),a.length===0&&r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No hay crditos activos"})]})})]}),o.length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{children:["Crditos Pagados (",o.length,")"]})}),r.jsx(Q,{children:r.jsx("div",{className:"space-y-4",children:o.map(l=>r.jsxs("div",{className:"border rounded-lg p-4 opacity-75",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:l.nombre}),r.jsx("p",{className:"text-sm text-muted-foreground",children:l.institucion_financiera})]}),r.jsx(_e,{variant:"secondary",children:"PAGADO"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Monto Total"}),r.jsxs("p",{className:"font-medium",children:["$",l.monto_total.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Fecha de Inicio"}),r.jsx("p",{className:"text-sm",children:ze(new Date(l.fecha_inicio),"dd/MM/yyyy")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Fecha de Vencimiento"}),r.jsx("p",{className:"text-sm",children:ze(new Date(l.fecha_vencimiento),"dd/MM/yyyy")})]})]})]},l.id))})})]}),i.length>0&&r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{className:"text-red-600",children:["Crditos Vencidos (",i.length,")"]})}),r.jsx(Q,{children:r.jsx("div",{className:"space-y-4",children:i.map(l=>r.jsxs("div",{className:"border border-red-300 rounded-lg p-4 bg-red-50",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-red-900",children:l.nombre}),r.jsx("p",{className:"text-sm text-red-700",children:l.institucion_financiera})]}),r.jsx(_e,{variant:"destructive",children:"VENCIDO"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-600",children:"Saldo Pendiente"}),r.jsxs("p",{className:"font-bold text-red-900",children:["$",l.saldo_actual.toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-600",children:"Tasa"}),r.jsxs("p",{className:"font-medium",children:[l.tasa_interes,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-600",children:"Fecha de Vencimiento"}),r.jsx("p",{className:"text-sm font-medium",children:ze(new Date(l.fecha_vencimiento),"dd/MM/yyyy")})]})]})]},l.id))})})]})]})},qm=["hsl(180, 50%, 55%)","hsl(180, 45%, 45%)","hsl(180, 55%, 65%)","hsl(180, 40%, 40%)","hsl(180, 60%, 70%)"],gDe=()=>{var At;const{financiamientos:e,isLoading:t,transacciones:n}=wl(),{instituciones:s}=Xj(),[a,o]=y.useState("mensual"),[i,l]=y.useState("normal"),[c,d]=y.useState(2),[u,m]=y.useState("todos"),[f,h]=y.useState("todos"),[x,p]=y.useState("todos"),[v,j]=y.useState("mensual"),[g,N]=y.useState("total"),[_,b]=y.useState("total"),[w,S]=y.useState(null),{data:C,isLoading:A}=it({queryKey:["gastos-financieros-5201"],queryFn:async()=>{const{data:{user:R}}=await ce.auth.getUser();if(!R)throw new Error("Usuario no autenticado");const{data:xe,error:Re}=await ce.from("detalle_asientos").select(`
          id,
          debe,
          cuenta_codigo,
          asientos_contables!inner(
            id,
            fecha,
            descripcion,
            user_id
          )
        `).eq("cuenta_codigo","5201").eq("asientos_contables.user_id",R.id).gt("debe",0);if(Re)throw Re;return xe||[]}});if(t||A)return r.jsxs("div",{className:"space-y-4",children:[r.jsx(gr,{className:"h-32 w-full"}),r.jsx(gr,{className:"h-96 w-full"})]});const P=e.filter(R=>R.estado==="activo"),k=P.filter(R=>R.tipo_credito==="tarjeta_corporativa"),E=P.filter(R=>R.tipo_credito==="revolvente"),O=P.filter(R=>R.tipo_credito!=="tarjeta_corporativa"&&R.tipo_credito!=="revolvente"),M=k.reduce((R,xe)=>R+xe.saldo_actual,0),T=E.reduce((R,xe)=>R+xe.saldo_actual,0),V=O.reduce((R,xe)=>R+xe.saldo_inicial,0),I=O.reduce((R,xe)=>R+xe.saldo_actual,0),F=V-I,D=I+M+T,X=V,W=F,B=f==="todos"?O:O.filter(R=>R.id===f),q=B.reduce((R,xe)=>R+xe.saldo_inicial,0),te=B.reduce((R,xe)=>R+xe.saldo_actual,0),Y=q-te,H=[{name:"Monto Original",valor:q,color:"hsl(180, 50%, 55%)"},{name:"Monto Pagado",valor:Y,color:"hsl(142, 76%, 36%)"},{name:"Saldo Pendiente",valor:te,color:"hsl(0, 70%, 55%)"}],L=[...E,...k],ue=x==="todos"?L:L.filter(R=>R.id===x),pe=ue.reduce((R,xe)=>R+(xe.monto_total||0),0),we=ue.reduce((R,xe)=>R+xe.saldo_actual,0),re=pe-we,de=[];de.push({name:"Lnea Total",value:0,start:pe,fill:"hsl(180, 50%, 55%)",isTotal:!0}),de.push({name:"(-) Lnea Utilizada",value:re,start:we,fill:"hsl(0, 70%, 55%)",isTotal:!1}),de.push({name:"= Lnea Disponible",value:0,start:re,fill:"hsl(142, 76%, 36%)",isTotal:!0});const he=({active:R,payload:xe})=>{if(R&&xe&&xe.length){const Re=xe[0].payload,Ve=Re.isTotal?Re.start:Re.name.includes("(-)")?-Re.start:Re.start;return r.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-foreground mb-1",children:Re.name}),r.jsx("p",{className:`text-sm ${Ve>=0?"text-green-600":"text-red-600"}`,children:ie(Math.abs(Ve))})]})}return null},ee=R=>{const{x:xe,y:Re,width:Ve,height:Xe,value:nt,index:st}=R,wt=de[st].start;return r.jsxs("text",{x:xe+Ve/2,y:Re-5,fill:"hsl(var(--foreground))",textAnchor:"middle",dominantBaseline:"bottom",fontSize:12,fontWeight:"bold",children:["$",$(wt)]})},z=P.reduce((R,xe)=>{const Re=xe.tipo_credito,Ve=xe.saldo_actual;return R[Re]||(R[Re]={tipo:Re,saldo:0,count:0}),R[Re].saldo+=Ve,R[Re].count+=1,R},{}),U=Object.values(z),oe=R=>({simple:"Crdito Simple",arrendamiento:"Arrendamiento",revolvente:"Crdito Revolvente",tarjeta_corporativa:"Tarjeta Corporativa"})[R]||R,Se=U.reduce((R,xe)=>R+xe.saldo,0),Ne=U.map((R,xe)=>({name:oe(R.tipo),value:R.saldo,percentage:Se>0?R.saldo/Se*100:0,color:qm[xe%qm.length]})),$=R=>i==="miles"?`${(R/1e3).toFixed(c)}K`:i==="millones"?`${(R/1e6).toFixed(c)}M`:R.toLocaleString("es-MX",{minimumFractionDigits:c,maximumFractionDigits:c}),ie=R=>`$${R.toLocaleString("es-MX",{minimumFractionDigits:c,maximumFractionDigits:c})}`,J=R=>{const{x:xe,y:Re,width:Ve,height:Xe,root:nt,depth:st,index:Nt,name:wt}=R;if(Ve<80||Xe<80||!nt)return null;const pt=Ne[Nt],Be=(pt==null?void 0:pt.name)||wt||"",Ye=(pt==null?void 0:pt.value)||0,ft=(pt==null?void 0:pt.percentage)||0,Bt=(pt==null?void 0:pt.color)||qm[0],_t=i==="miles"?`${(Ye/1e3).toFixed(1)}K`:i==="millones"?`${(Ye/1e6).toFixed(2)}M`:Ye.toLocaleString("es-MX",{minimumFractionDigits:0});return r.jsxs("g",{children:[r.jsx("rect",{x:xe,y:Re,width:Ve,height:Xe,style:{fill:Bt,stroke:"#fff",strokeWidth:2}}),r.jsx("text",{x:xe+Ve/2,y:Re+Xe/2-20,textAnchor:"middle",fill:"#fff",fontSize:14,fontWeight:"bold",children:Be}),r.jsxs("text",{x:xe+Ve/2,y:Re+Xe/2,textAnchor:"middle",fill:"#fff",fontSize:16,fontWeight:"bold",children:["$",_t]}),r.jsxs("text",{x:xe+Ve/2,y:Re+Xe/2+20,textAnchor:"middle",fill:"#fff",fontSize:13,children:[ft.toFixed(1),"%"]})]})},ge=()=>{const R=new Date;let xe=new Date(R);P.forEach(Ye=>{const ft=new Date(Ye.fecha_vencimiento);ft>xe&&(xe=ft)});const Re=R.getFullYear(),Xe=xe.getFullYear()-Re+1,st=a==="mensual"?12:Math.max(5,Xe),wt=u==="todos"?P:P.filter(Ye=>Ye.id===u),pt=[],Be=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];for(let Ye=0;Ye<st;Ye++){let ft;if(a==="mensual"){const _t=R.getMonth(),Zt=R.getFullYear(),pn=(_t+Ye)%12,fe=Math.floor((_t+Ye)/12);ft=`${Be[pn]} ${Zt+fe}`}else ft=`${R.getFullYear()+Ye}`;const Bt={periodo:ft};wt.forEach(_t=>{Bt[_t.nombre]=0}),pt.push(Bt)}return wt.forEach(Ye=>{const ft=new Date(Ye.fecha_vencimiento);if(Math.max(0,(ft.getFullYear()-R.getFullYear())*12+(ft.getMonth()-R.getMonth())),Ye.tipo_credito==="simple"||Ye.tipo_credito==="arrendamiento"){const _t=(n||[]).filter(fe=>fe.financiamiento_id===Ye.id&&fe.tipo_transaccion==="amortizacion").length,Zt=Math.max(0,Ye.plazo_meses-_t),pn=Zt>0?Ye.saldo_actual/Zt:0;if(a==="mensual"){const fe=Math.min(st-1,Zt);for(let be=1;be<=fe;be++)pt[be][Ye.nombre]+=pn}else{const fe=ft.getFullYear(),be=R.getFullYear(),tt=fe-be+1,dt=Math.min(st,tt),Jt=12-R.getMonth();let Er=0;for(let bs=0;bs<dt;bs++){let Zn;if(bs===0?Zn=Math.min(Jt,Zt):Er+12<=Zt?Zn=12:Zn=Zt-Er,pt[bs][Ye.nombre]+=pn*Zn,Er+=Zn,Er>=Zt)break}}}else if(Ye.tipo_credito==="revolvente"){const Bt=Math.max(0,(ft.getFullYear()-R.getFullYear())*12+(ft.getMonth()-R.getMonth()));if(a==="mensual"&&Bt<st)pt[Bt][Ye.nombre]+=Ye.saldo_actual;else if(a==="anual"){const _t=Math.floor(Bt/12);_t<st&&(pt[_t][Ye.nombre]+=Ye.saldo_actual)}}else if(Ye.tipo_credito==="tarjeta_corporativa"){const Bt=new Date,_t=Bt.getMonth(),Zt=Bt.getFullYear(),fe=(n||[]).filter(be=>{const tt=new Date(be.fecha);return be.financiamiento_id===Ye.id&&be.tipo_transaccion==="amortizacion"&&tt.getMonth()===_t&&tt.getFullYear()===Zt}).length>0?1:0;a==="mensual"&&fe<st?pt[fe][Ye.nombre]+=Ye.saldo_actual:a==="anual"&&(pt[0][Ye.nombre]+=Ye.saldo_actual)}}),pt},je=()=>{const R={};P.filter(st=>st.saldo_actual>0).forEach(st=>{const Nt=st.institucion_financiera_id||st.institucion_financiera,wt=s==null?void 0:s.find(_t=>_t.id===st.institucion_financiera_id),pt=(n||[]).filter(_t=>_t.financiamiento_id===st.id),Be=pt.filter(_t=>_t.tipo_transaccion==="cargo_interes").reduce((_t,Zt)=>_t+Zt.monto,0),Ye=pt.filter(_t=>_t.tipo_transaccion==="amortizacion"||_t.tipo_transaccion==="cargo_interes").reduce((_t,Zt)=>_t+(Zt.interes_pagado||0),0),ft=Be-Ye,Bt=st.saldo_actual-ft;R[Nt]||(R[Nt]={total:0,capital:0,intereses:0,logo:(wt==null?void 0:wt.logo_url)||void 0,nombre:(wt==null?void 0:wt.nombre)||st.institucion_financiera}),R[Nt].total+=st.saldo_actual,R[Nt].capital+=Bt,R[Nt].intereses+=ft});const xe=_==="total"?"total":_==="capital"?"capital":"intereses",Re=Object.entries(R).map(([st,Nt])=>({id:st,...Nt,saldo:Nt[xe]})).filter(st=>st.saldo>0).sort((st,Nt)=>Nt.saldo-st.saldo),Ve=Re.slice(0,5),Xe=Re.slice(5);if(Xe.length>0){const st=Xe.reduce((Nt,wt)=>Nt+wt.saldo,0);Ve.push({id:"otros",nombre:"Otros Bancos",saldo:st,total:Xe.reduce((Nt,wt)=>Nt+wt.total,0),capital:Xe.reduce((Nt,wt)=>Nt+wt.capital,0),intereses:Xe.reduce((Nt,wt)=>Nt+wt.intereses,0),logo:void 0})}const nt=Ve.reduce((st,Nt)=>st+Nt.saldo,0);return Ve.map(st=>({...st,porcentaje:nt>0?st.saldo/nt*100:0}))},ye=R=>{const xe=P.filter(Ve=>Ve.saldo_actual>0).filter(Ve=>(Ve.institucion_financiera_id||Ve.institucion_financiera)===R).map(Ve=>{const Xe=(n||[]).filter(pt=>pt.financiamiento_id===Ve.id),nt=Xe.filter(pt=>pt.tipo_transaccion==="cargo_interes").reduce((pt,Be)=>pt+Be.monto,0),st=Xe.filter(pt=>pt.tipo_transaccion==="amortizacion"||pt.tipo_transaccion==="cargo_interes").reduce((pt,Be)=>pt+(Be.interes_pagado||0),0),Nt=nt-st,wt=Ve.saldo_actual-Nt;return{id:Ve.id,nombre:Ve.nombre,tipo_credito:Ve.tipo_credito,total:Ve.saldo_actual,capital:wt,intereses:Nt,saldo:_==="total"?Ve.saldo_actual:_==="capital"?wt:Nt}}).filter(Ve=>Ve.saldo>0).sort((Ve,Xe)=>Xe.saldo-Ve.saldo),Re=xe.reduce((Ve,Xe)=>Ve+Xe.saldo,0);return xe.map(Ve=>({...Ve,porcentaje:Re>0?Ve.saldo/Re*100:0}))},Ce=je(),We=w?ye(w):[],$t=w?(At=Ce.find(R=>R.id===w))==null?void 0:At.nombre:"",nr=ge(),en=P.map(R=>R.nombre),He=(()=>{const R=Re=>{const Ve=[/cargo\s+por\s+intereses:\s*(.+)/i,/intereses\s+pagados?\s*-?\s*(.+)/i,/pago\s+de\s+(?:amortizacin|intereses)\s*:?\s*(.+)/i,/acumulacin\s+de\s+intereses\s*-?\s*(.+)/i];for(const Xe of Ve){const nt=Re.match(Xe);if(nt&&nt[1])return nt[1].toLowerCase().trim()}return null};if(!C||C.length===0){const Ve=new Date().getFullYear();return v==="mensual"?Array.from({length:12},(Xe,nt)=>{const st=nt+1;return{periodo:`${Ve}-${String(st).padStart(2,"0")}`,simple:0,revolvente:0,tarjeta:0,total:0,periodoFormateado:new Date(Ve,nt,1).toLocaleDateString("es-MX",{month:"short",year:"numeric"})}}):[]}const xe=new Map;if(e&&e.forEach(Re=>{const Ve=Re.nombre.toLowerCase().trim();xe.set(Ve,Re.tipo_credito)}),v==="mensual"){const Re=new Date().getFullYear(),Ve=new Map;for(let Xe=1;Xe<=12;Xe++){const nt=`${Re}-${String(Xe).padStart(2,"0")}`;Ve.set(nt,{periodo:nt,simple:0,revolvente:0,tarjeta:0,total:0})}return C.forEach(Xe=>{var Zt,pn;const nt=(Zt=Xe.asientos_contables)==null?void 0:Zt.fecha;if(!nt)return;const[st,Nt,wt]=nt.split("-").map(Number);if(st!==Re)return;const pt=`${Re}-${String(Nt).padStart(2,"0")}`,Be=Ve.get(pt);if(!Be)return;const Ye=((pn=Xe.asientos_contables)==null?void 0:pn.descripcion)||"",ft=R(Ye);let Bt="desconocido";if(ft){for(const[fe,be]of xe.entries())if(fe.includes(ft)||ft.includes(fe)){Bt=be;break}}const _t=Xe.debe||0;Bt==="tarjeta_corporativa"?Be.tarjeta+=_t:Bt==="revolvente"?Be.revolvente+=_t:Bt==="simple"&&(Be.simple+=_t),Be.total+=_t}),Array.from(Ve.values()).sort((Xe,nt)=>Xe.periodo.localeCompare(nt.periodo)).map(Xe=>{const[nt,st]=Xe.periodo.split("-"),wt=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"][parseInt(st)-1];return{...Xe,periodoFormateado:`${wt} ${nt}`}})}else{const Re=new Map;return C.forEach(Ve=>{var Ye,ft;const nt=`${new Date((Ye=Ve.asientos_contables)==null?void 0:Ye.fecha).getFullYear()}`;Re.has(nt)||Re.set(nt,{periodo:nt,simple:0,revolvente:0,tarjeta:0,total:0});const st=Re.get(nt),Nt=((ft=Ve.asientos_contables)==null?void 0:ft.descripcion)||"",wt=R(Nt);let pt="desconocido";if(wt){for(const[Bt,_t]of xe.entries())if(Bt.includes(wt)||wt.includes(Bt)){pt=_t;break}}const Be=Ve.debe||0;pt==="tarjeta_corporativa"?st.tarjeta+=Be:pt==="revolvente"?st.revolvente+=Be:pt==="simple"&&(st.simple+=Be),st.total+=Be}),Re.size===0?[]:Array.from(Re.values()).sort((Ve,Xe)=>Ve.periodo.localeCompare(Xe.periodo)).map(Ve=>({...Ve,periodoFormateado:Ve.periodo}))}})(),Vt=nr.length===0?0:Math.max(...nr.map(xe=>en.reduce((Re,Ve)=>Re+(xe[Ve]||0),0)))*1.2;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Crditos Activos"})}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-primary",children:P.length})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Deuda Total"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",D.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Total Pagado"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",W.toLocaleString("es-MX",{minimumFractionDigits:2})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"% Pagado"})}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[X>0?(W/X*100).toFixed(1):0,"%"]})})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium",children:"Estado Vencimientos"})}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("div",{children:(()=>{const R=new Date;R.setHours(0,0,0,0);const xe=P.filter(Xe=>{const nt=new Date(Xe.fecha_vencimiento);return nt.setHours(0,0,0,0),nt<R&&Xe.saldo_actual>0});if(xe.length===0)return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:""}),r.jsx("div",{className:"text-sm text-green-600",children:"Al da"})]});const Re=xe.reduce((Xe,nt)=>Xe+nt.saldo_actual,0),Ve=Math.max(...xe.map(Xe=>{const nt=new Date(Xe.fecha_vencimiento);return nt.setHours(0,0,0,0),Math.floor((R.getTime()-nt.getTime())/(1e3*60*60*24))}));return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:""}),r.jsx("div",{className:"text-sm text-red-600 font-semibold",children:"Atrasado"})]}),r.jsxs("div",{className:"text-lg font-bold text-red-600",children:[Ve," das"]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["$",Re.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})})()}),r.jsxs("div",{className:"space-y-2 border-l pl-4",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Configuracin Visual"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{htmlFor:"formato-global",className:"text-xs text-muted-foreground",children:"Formato:"}),r.jsxs(De,{value:i,onValueChange:R=>l(R),children:[r.jsx(ke,{id:"formato-global",className:"h-7 text-xs",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"normal",children:"Normal"}),r.jsx(le,{value:"miles",children:"Miles (K)"}),r.jsx(le,{value:"millones",children:"Millones (M)"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{htmlFor:"decimales-global",className:"text-xs text-muted-foreground",children:"Decimales:"}),r.jsxs(De,{value:c.toString(),onValueChange:R=>d(Number(R)),children:[r.jsx(ke,{id:"decimales-global",className:"h-7 text-xs",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"0",children:"0 decimales"}),r.jsx(le,{value:"1",children:"1 decimal"}),r.jsx(le,{value:"2",children:"2 decimales"})]})]})]})]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Deuda por Tipo de Crdito"})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:250,children:r.jsx(vc,{data:Ne,dataKey:"value",stroke:"#fff",fill:"#10b981",content:r.jsx(J,{})})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ae,{children:"Resumen Deuda"}),w&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-muted-foreground",children:"/"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:$t})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[w&&r.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>S(null),className:"h-8",children:" Volver"}),r.jsx(se,{className:"text-xs text-muted-foreground",children:"Mostrar:"}),r.jsxs(De,{value:_,onValueChange:R=>b(R),children:[r.jsx(ke,{className:"w-[140px] h-8",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"total",children:"Deuda Total"}),r.jsx(le,{value:"capital",children:"Solo Capital"}),r.jsx(le,{value:"intereses",children:"Solo Intereses"})]})]})]})]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"space-y-3",children:[!w&&r.jsx(r.Fragment,{children:Ce.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No hay deuda pendiente con acreedores"}):Ce.map(R=>r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors ${R.id!=="otros"?"cursor-pointer":""}`,onClick:()=>{R.id!=="otros"&&S(R.id)},children:[r.jsx("div",{className:"flex-shrink-0",children:R.logo?r.jsx("img",{src:R.logo,alt:R.nombre,className:"w-12 h-12 object-contain rounded-md bg-white p-1 border"}):r.jsx("div",{className:"w-12 h-12 rounded-md bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg border",children:R.nombre.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold truncate",children:R.nombre}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[R.porcentaje.toFixed(1),"% del total"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-bold text-foreground",children:["$",$(R.saldo)]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"adeudado"})]})]},R.id))}),w&&r.jsx(r.Fragment,{children:We.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No hay crditos activos para este acreedor"}):We.map(R=>r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 rounded-md bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-lg border",children:R.tipo_credito==="simple"?"":R.tipo_credito==="revolvente"?"":R.tipo_credito==="tarjeta_corporativa"?"":""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold truncate",children:R.nombre}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[R.tipo_credito==="simple"?"Crdito Simple":R.tipo_credito==="revolvente"?"Crdito Revolvente":R.tipo_credito==="tarjeta_corporativa"?"Tarjeta Corporativa":R.tipo_credito,"  ",R.porcentaje.toFixed(1),"% del total"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-bold text-foreground",children:["$",$(R.saldo)]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"adeudado"})]})]},R.id))})]}),(Ce.length>0&&!w||We.length>0&&w)&&r.jsx("div",{className:"mt-4 pt-4 border-t",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-semibold",children:["Total ",_==="total"?"Deuda":_==="capital"?"Capital":"Intereses",":"]}),r.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",$(w?We.reduce((R,xe)=>R+xe.saldo,0):Ce.reduce((R,xe)=>R+xe.saldo,0))]})]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ae,{children:"Comportamiento Crdito Simple"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"filtro-credito-simple",className:"text-xs",children:"Crdito:"}),r.jsxs(De,{value:f,onValueChange:h,children:[r.jsx(ke,{id:"filtro-credito-simple",className:"w-40 h-8 text-xs",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),O.map(R=>r.jsxs(le,{value:R.id,children:[R.nombre," ",R.saldo_actual===0?"(Saldo: $0)":""]},R.id))]})]})]})]}),r.jsx(Me,{children:"Monto original vs. pagado"})]}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:250,children:r.jsxs(Gt,{data:H,layout:"vertical",margin:{top:5,right:15,left:20,bottom:5},children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{type:"number",tickFormatter:R=>`$${$(R)}`}),r.jsx(gt,{dataKey:"name",type:"category",width:120}),r.jsx(yt,{formatter:R=>ie(R),contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),r.jsxs(rt,{dataKey:"valor",radius:[0,8,8,0],children:[H.map((R,xe)=>r.jsx(Kt,{fill:R.color},`cell-${xe}`)),r.jsx(Et,{dataKey:"valor",position:"right",formatter:R=>`$${$(R)}`,style:{fill:"hsl(var(--foreground))",fontSize:"12px",fontWeight:"bold"}})]})]})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ae,{children:"Comportamiento Revolvente/Tarjetas"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"filtro-credito-revolvente",className:"text-xs",children:"Crdito:"}),r.jsxs(De,{value:x,onValueChange:p,children:[r.jsx(ke,{id:"filtro-credito-revolvente",className:"w-40 h-8 text-xs",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),L.map(R=>r.jsxs(le,{value:R.id,children:[R.nombre," ",R.saldo_actual===0?"(Sin disposiciones)":""]},R.id))]})]})]})]}),r.jsx(Me,{children:"Capacidad y utilizacin de lneas de crdito"})]}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:250,children:r.jsxs(Gt,{data:de,margin:{top:20,right:30,left:60,bottom:20},barGap:8,children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(jt,{dataKey:"name",angle:0,textAnchor:"middle",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{domain:[0,R=>Math.ceil(R*1.2)],tickFormatter:R=>`$${$(R)}`,tick:{fill:"hsl(var(--muted-foreground))"}}),r.jsx(yt,{content:r.jsx(he,{})}),r.jsx(rt,{dataKey:"value",stackId:"a",fill:"transparent",fillOpacity:0,stroke:"transparent",strokeOpacity:0,isAnimationActive:!1}),r.jsx(rt,{dataKey:"start",stackId:"a",radius:[8,8,0,0],label:ee,children:de.map((R,xe)=>r.jsx(Kt,{fill:R.fill},`cell-${xe}`))}),r.jsx(yl,{y:0,stroke:"hsl(var(--muted-foreground))",strokeWidth:1})]})})})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Amortizaciones Futuras por Crdito"}),r.jsx(Me,{children:"Proyeccin de pagos pendientes hasta el vencimiento de todos los crditos"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"credito-amortizacion",children:"Crdito:"}),r.jsxs(De,{value:u,onValueChange:m,children:[r.jsx(ke,{id:"credito-amortizacion",className:"w-40",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),P.map(R=>r.jsxs(le,{value:R.id,children:[R.nombre," ",R.saldo_actual===0?"(Sin disposiciones)":""]},R.id))]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"periodo-amortizacion",children:"Periodo:"}),r.jsxs(De,{value:a,onValueChange:R=>o(R),children:[r.jsx(ke,{id:"periodo-amortizacion",className:"w-32",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mensual"}),r.jsx(le,{value:"anual",children:"Anual"})]})]})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:nr,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"periodo"}),r.jsx(gt,{domain:[0,Vt],allowDataOverflow:!1}),r.jsx(yt,{formatter:R=>ie(R)}),r.jsx(jr,{}),en.map((R,xe)=>{const Re=xe===en.length-1;return r.jsxs(rt,{dataKey:R,stackId:"a",fill:qm[xe%qm.length],children:[r.jsx(Et,{dataKey:R,position:"center",fill:"#fff",fontSize:11,fontWeight:"bold",formatter:Ve=>Ve===0?"":`$${$(Ve)}`}),Re&&r.jsx(Et,{content:Ve=>{const{x:Xe,y:nt,width:st,index:Nt}=Ve;if(Nt===void 0)return null;const wt=nr[Nt],pt=en.reduce((Ye,ft)=>Ye+(wt[ft]||0),0);if(pt===0)return null;const Be=`$${$(pt)}`;return r.jsx("text",{x:Xe+st/2,y:nt-5,fill:"#000",textAnchor:"middle",fontSize:12,fontWeight:"bold",children:Be})}})]},R)})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Evolucin de Gastos Financieros"}),r.jsx(Me,{children:"Evolucin de la cuenta 5201 - Gastos Financieros (intereses pagados y devengados)"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"tipo-gasto",children:"Tipo:"}),r.jsxs(De,{value:g,onValueChange:N,children:[r.jsx(ke,{id:"tipo-gasto",className:"w-44",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"total",children:"Total"}),r.jsx(le,{value:"simple",children:"Crditos Simples"}),r.jsx(le,{value:"revolvente",children:"Lneas Revolventes"}),r.jsx(le,{value:"tarjeta",children:"Tarjetas Corporativas"}),r.jsx(le,{value:"combinada",children:"Combinada (Todas)"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"periodo-gastos",children:"Periodo:"}),r.jsxs(De,{value:v,onValueChange:R=>j(R),children:[r.jsx(ke,{id:"periodo-gastos",className:"w-32",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mensual"}),r.jsx(le,{value:"anual",children:"Anual"})]})]})]})]})]})}),r.jsx(Q,{children:v==="anual"&&He.length===0?r.jsx("div",{className:"flex items-center justify-center h-[400px] text-muted-foreground",children:"No hay pagos de intereses registrados"}):r.jsx(mt,{width:"100%",height:400,children:r.jsxs(bl,{data:He,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"periodoFormateado",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{domain:[0,(()=>{if(!He||He.length===0)return 100;let R=0;return g==="total"?R=Math.max(...He.map(xe=>xe.total||0)):g==="simple"?R=Math.max(...He.map(xe=>xe.simple||0)):g==="revolvente"?R=Math.max(...He.map(xe=>xe.revolvente||0)):g==="tarjeta"?R=Math.max(...He.map(xe=>xe.tarjeta||0)):g==="combinada"&&(R=Math.max(...He.map(xe=>Math.max(xe.simple||0,xe.revolvente||0,xe.tarjeta||0)))),Math.ceil(R*1.2)})()],allowDataOverflow:!1,tickFormatter:R=>`$${$(R)}`}),r.jsx(yt,{formatter:R=>ie(R),labelStyle:{color:"#000"}}),r.jsx(jr,{}),g==="total"&&r.jsx(Wt,{type:"monotone",dataKey:"total",stroke:"hsl(180, 50%, 55%)",strokeWidth:3,name:"Total Intereses",dot:{r:4},activeDot:{r:6},children:r.jsx(Et,{dataKey:"total",position:"top",fill:"#000",fontSize:11,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})}),g==="simple"&&r.jsx(Wt,{type:"monotone",dataKey:"simple",stroke:"hsl(180, 50%, 55%)",strokeWidth:3,name:"Crditos Simples",dot:{r:4},activeDot:{r:6},children:r.jsx(Et,{dataKey:"simple",position:"top",fill:"#000",fontSize:11,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})}),g==="revolvente"&&r.jsx(Wt,{type:"monotone",dataKey:"revolvente",stroke:"hsl(180, 45%, 45%)",strokeWidth:3,name:"Lneas Revolventes",dot:{r:4},activeDot:{r:6},children:r.jsx(Et,{dataKey:"revolvente",position:"top",fill:"#000",fontSize:11,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})}),g==="tarjeta"&&r.jsx(Wt,{type:"monotone",dataKey:"tarjeta",stroke:"hsl(180, 55%, 65%)",strokeWidth:3,name:"Tarjetas Corporativas",dot:{r:4},activeDot:{r:6},children:r.jsx(Et,{dataKey:"tarjeta",position:"top",fill:"#000",fontSize:11,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})}),g==="combinada"&&r.jsxs(r.Fragment,{children:[r.jsx(Wt,{type:"monotone",dataKey:"simple",stroke:"hsl(180, 50%, 55%)",strokeWidth:2,name:"Crditos Simples",dot:{r:3},activeDot:{r:5},children:r.jsx(Et,{dataKey:"simple",position:"top",fill:"#000",fontSize:10,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})}),r.jsx(Wt,{type:"monotone",dataKey:"revolvente",stroke:"hsl(180, 45%, 45%)",strokeWidth:2,name:"Lneas Revolventes",dot:{r:3},activeDot:{r:5},children:r.jsx(Et,{dataKey:"revolvente",position:"top",fill:"#000",fontSize:10,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})}),r.jsx(Wt,{type:"monotone",dataKey:"tarjeta",stroke:"hsl(180, 55%, 65%)",strokeWidth:2,name:"Tarjetas Corporativas",dot:{r:3},activeDot:{r:5},children:r.jsx(Et,{dataKey:"tarjeta",position:"top",fill:"#000",fontSize:10,fontWeight:"bold",formatter:R=>R===0?"":`$${$(R)}`})})]})]})})})]})]})};function vDe(){const{instituciones:e,crearInstitucion:t,actualizarInstitucion:n,eliminarInstitucion:s}=Xj(),[a,o]=y.useState(""),[i,l]=y.useState(!1),[c,d]=y.useState(null),[u,m]=y.useState(null),[f,h]=y.useState(null),[x,p]=y.useState(null),[v,j]=y.useState(!1),{toast:g}=Rs(),[N,_]=y.useState({nombre:"",logo_url:"",ejecutivo_nombre:"",ejecutivo_telefono:"",ejecutivo_email:"",telefono_principal:"",email_principal:"",direccion:"",ciudad:"",estado:"",codigo_postal:"",sitio_web:"",notas:""}),{data:b}=it({queryKey:["financiamientos-por-institucion"],queryFn:async()=>{const{data:{user:I}}=await ce.auth.getUser();if(!I)return[];const{data:F,error:D}=await ce.from("financiamientos").select("*").eq("user_id",I.id);if(D)throw D;return F}}),w=e.length,S=(b==null?void 0:b.filter(I=>I.estado==="activo").length)||0,C=(b==null?void 0:b.reduce((I,F)=>I+F.monto_total,0))||0,A=b&&b.length>0?b.reduce((I,F)=>I+F.tasa_interes,0)/b.length:0,P=e.filter(I=>I.nombre.toLowerCase().includes(a.toLowerCase())),k=I=>{I?(d(I),_({nombre:I.nombre,logo_url:I.logo_url||"",ejecutivo_nombre:I.ejecutivo_nombre||"",ejecutivo_telefono:I.ejecutivo_telefono||"",ejecutivo_email:I.ejecutivo_email||"",telefono_principal:I.telefono_principal||"",email_principal:I.email_principal||"",direccion:I.direccion||"",ciudad:I.ciudad||"",estado:I.estado||"",codigo_postal:I.codigo_postal||"",sitio_web:I.sitio_web||"",notas:I.notas||""}),I.logo_url&&p(I.logo_url)):(d(null),_({nombre:"",logo_url:"",ejecutivo_nombre:"",ejecutivo_telefono:"",ejecutivo_email:"",telefono_principal:"",email_principal:"",direccion:"",ciudad:"",estado:"",codigo_postal:"",sitio_web:"",notas:""}),h(null),p(null)),l(!0)},E=I=>{var D;const F=(D=I.target.files)==null?void 0:D[0];if(F){if(F.size>2*1024*1024){g({title:" Archivo muy grande",description:"El logo debe pesar menos de 2MB",variant:"destructive"});return}if(!F.type.startsWith("image/")){g({title:" Tipo de archivo invlido",description:"Solo se permiten imgenes",variant:"destructive"});return}h(F);const X=new FileReader;X.onload=W=>{var B;p((B=W.target)==null?void 0:B.result)},X.readAsDataURL(F)}},O=async()=>{if(!f)return N.logo_url;try{j(!0);const I=f.name.split(".").pop(),D=`instituciones/${`${Math.random()}.${I}`}`,{error:X}=await ce.storage.from("product-images").upload(D,f);if(X)return g({title:" Error al subir logo",description:X.message,variant:"destructive"}),null;const{data:{publicUrl:W}}=ce.storage.from("product-images").getPublicUrl(D);return g({title:" Logo subido",description:"El logo se ha guardado correctamente"}),W}catch(I){return g({title:" Error inesperado",description:I.message,variant:"destructive"}),null}finally{j(!1)}},M=async()=>{try{let I=N.logo_url;if(f){const F=await O();F&&(I=F)}c?await n.mutateAsync({id:c.id,...N,logo_url:I}):await t.mutateAsync({...N,logo_url:I}),l(!1),h(null),p(null)}catch(I){g({title:" Error al guardar",description:I.message,variant:"destructive"})}},T=I=>(b==null?void 0:b.filter(F=>F.institucion_financiera_id===I&&F.estado==="activo").length)||0,V=I=>(b==null?void 0:b.filter(F=>F.institucion_financiera_id===I))||[];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Instituciones Activas"}),r.jsx(ae,{className:"text-3xl",children:w})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Crditos Activos"}),r.jsx(ae,{className:"text-3xl",children:S})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Monto Total Financiado"}),r.jsxs(ae,{className:"text-3xl",children:["$",C.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Tasa Promedio"}),r.jsxs(ae,{className:"text-3xl",children:[A.toFixed(2),"%"]})]})})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar institucin...",value:a,onChange:I=>o(I.target.value),className:"pl-10"})]}),r.jsxs(Pe,{onClick:()=>k(),children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Nueva Institucin"]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Catlogo de Acreedores Financieros"}),r.jsx(Me,{children:"Gestiona las instituciones financieras con las que trabajas"})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Institucin"}),r.jsx(me,{children:"Ejecutivo"}),r.jsx(me,{children:"Contacto"}),r.jsx(me,{className:"text-center",children:"Crditos Activos"}),r.jsx(me,{className:"text-right",children:"Acciones"})]})}),r.jsx(kt,{children:P.map(I=>{const F=T(I.id);return r.jsxs(Oe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>m(I),children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:I.logo_url||void 0}),r.jsx(Na,{children:r.jsx(pl,{className:"h-5 w-5"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:I.nombre}),I.sitio_web&&r.jsx("a",{href:I.sitio_web,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline",onClick:D=>D.stopPropagation(),children:"Sitio web "})]})]})}),r.jsx(Z,{children:I.ejecutivo_nombre?r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zo,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:I.ejecutivo_nombre})]}),I.ejecutivo_telefono&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bf,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:I.ejecutivo_telefono})]})]}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Sin asignar"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-1",children:[I.telefono_principal&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bf,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-xs",children:I.telefono_principal})]}),I.email_principal&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(aS,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-xs",children:I.email_principal})]})]})}),r.jsx(Z,{className:"text-center",children:r.jsx(_e,{variant:F>0?"default":"outline",children:F})}),r.jsx(Z,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"sm",onClick:D=>{D.stopPropagation(),k(I)},children:r.jsx(Ao,{className:"h-4 w-4"})}),r.jsx(Pe,{variant:"ghost",size:"sm",onClick:D=>{D.stopPropagation(),s.mutate(I.id)},disabled:F>0,children:r.jsx(xs,{className:"h-4 w-4"})})]})})]},I.id)})})]})})]}),r.jsx(vr,{open:i,onOpenChange:l,children:r.jsxs(mr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:c?"Editar Institucin":"Nueva Institucin"}),r.jsx(mn,{children:c?"Modifica los datos de la institucin financiera":"Registra una nueva institucin financiera"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre de la Institucin *"}),r.jsx(Ae,{id:"nombre",value:N.nombre,onChange:I=>_({...N,nombre:I.target.value}),placeholder:"Ej: BBVA Bancomer"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Logo de la Institucin"}),x&&r.jsxs("div",{className:"relative w-32 h-32 border rounded-lg overflow-hidden",children:[r.jsx("img",{src:x,alt:"Preview",className:"w-full h-full object-contain"}),r.jsx(Pe,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:()=>{h(null),p(null),_({...N,logo_url:""})},children:r.jsx(xs,{className:"h-4 w-4"})})]}),!x&&r.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:r.jsxs("label",{className:"cursor-pointer",children:[r.jsx(zf,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[r.jsx("span",{className:"font-semibold text-primary",children:"Click para subir"})," o arrastra aqu"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG (mx. 2MB)"}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:E,disabled:v})]})}),r.jsxs("div",{className:"pt-2",children:[r.jsx(se,{htmlFor:"logo_url",className:"text-xs text-muted-foreground",children:"O ingresa una URL directamente"}),r.jsx(Ae,{id:"logo_url",value:N.logo_url,onChange:I=>_({...N,logo_url:I.target.value}),placeholder:"https://ejemplo.com/logo.png",disabled:!!f||v})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ejecutivo_nombre",children:"Nombre del Ejecutivo"}),r.jsx(Ae,{id:"ejecutivo_nombre",value:N.ejecutivo_nombre,onChange:I=>_({...N,ejecutivo_nombre:I.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ejecutivo_telefono",children:"Telfono del Ejecutivo"}),r.jsx(Ae,{id:"ejecutivo_telefono",value:N.ejecutivo_telefono,onChange:I=>_({...N,ejecutivo_telefono:I.target.value})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ejecutivo_email",children:"Email del Ejecutivo"}),r.jsx(Ae,{id:"ejecutivo_email",type:"email",value:N.ejecutivo_email,onChange:I=>_({...N,ejecutivo_email:I.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"telefono_principal",children:"Telfono Principal"}),r.jsx(Ae,{id:"telefono_principal",value:N.telefono_principal,onChange:I=>_({...N,telefono_principal:I.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"email_principal",children:"Email Principal"}),r.jsx(Ae,{id:"email_principal",type:"email",value:N.email_principal,onChange:I=>_({...N,email_principal:I.target.value})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"direccion",children:"Direccin"}),r.jsx(Ae,{id:"direccion",value:N.direccion,onChange:I=>_({...N,direccion:I.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ciudad",children:"Ciudad"}),r.jsx(Ae,{id:"ciudad",value:N.ciudad,onChange:I=>_({...N,ciudad:I.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"estado",children:"Estado"}),r.jsx(Ae,{id:"estado",value:N.estado,onChange:I=>_({...N,estado:I.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"codigo_postal",children:"Cdigo Postal"}),r.jsx(Ae,{id:"codigo_postal",value:N.codigo_postal,onChange:I=>_({...N,codigo_postal:I.target.value})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"sitio_web",children:"Sitio Web"}),r.jsx(Ae,{id:"sitio_web",value:N.sitio_web,onChange:I=>_({...N,sitio_web:I.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"notas",children:"Notas"}),r.jsx(Kr,{id:"notas",value:N.notas,onChange:I=>_({...N,notas:I.target.value}),rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),r.jsx(Pe,{onClick:M,disabled:v||n.isPending||t.isPending,children:v?r.jsxs(r.Fragment,{children:[r.jsx(zf,{className:"mr-2 h-4 w-4 animate-spin"}),"Subiendo logo..."]}):c?"Guardar Cambios":"Crear Institucin"})]})]})]})}),r.jsx(vr,{open:!!u,onOpenChange:()=>m(null),children:r.jsxs(mr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(fr,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ya,{className:"h-12 w-12",children:[r.jsx(ba,{src:(u==null?void 0:u.logo_url)||void 0}),r.jsx(Na,{children:r.jsx(pl,{className:"h-6 w-6"})})]}),r.jsxs("div",{children:[r.jsx(hr,{children:u==null?void 0:u.nombre}),r.jsx(mn,{children:"Detalle de la institucin financiera"})]})]})}),u&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.ejecutivo_nombre&&r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Ejecutivo de Cuenta"}),r.jsx("p",{className:"font-medium",children:u.ejecutivo_nombre}),u.ejecutivo_telefono&&r.jsx("p",{className:"text-sm text-muted-foreground",children:u.ejecutivo_telefono}),u.ejecutivo_email&&r.jsx("p",{className:"text-sm text-primary",children:u.ejecutivo_email})]}),r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Contacto General"}),u.telefono_principal&&r.jsx("p",{className:"text-sm",children:u.telefono_principal}),u.email_principal&&r.jsx("p",{className:"text-sm text-primary",children:u.email_principal})]})]}),u.direccion&&r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Direccin"}),r.jsx("p",{className:"text-sm",children:u.direccion}),r.jsx("p",{className:"text-sm text-muted-foreground",children:[u.ciudad,u.estado,u.codigo_postal].filter(Boolean).join(", ")})]}),u.notas&&r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Notas"}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:u.notas})]}),r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground mb-2 block",children:"Financiamientos Asociados"}),r.jsx("div",{className:"space-y-2",children:V(u.id).map(I=>r.jsx(G,{children:r.jsx(Q,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:I.nombre}),r.jsx("p",{className:"text-sm text-muted-foreground",children:I.tipo_credito==="simple"?"Crdito Simple":I.tipo_credito==="revolvente"?"Crdito Revolvente":"Tarjeta Corporativa"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-medium",children:["$",I.saldo_actual.toLocaleString("es-MX")]}),r.jsx(_e,{variant:I.estado==="activo"?"default":"secondary",children:I.estado})]})]})})},I.id))})]})]})]})})]})}const jDe=()=>{const[e,t]=y.useState("");return r.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Registro de Financiamientos"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona prstamos, crditos y otras formas de financiamiento"})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs(Lr,{defaultValue:"registro",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-5",children:[r.jsx(Qe,{value:"registro",children:"Registro"}),r.jsx(Qe,{value:"detalle",children:"Detalle"}),r.jsx(Qe,{value:"resumen",children:"Resumen Transacciones"}),r.jsx(Qe,{value:"analitica",children:"Analtica"}),r.jsx(Qe,{value:"catalogo",children:"Catlogo"})]}),r.jsx(Je,{value:"registro",className:"space-y-6",children:e?r.jsxs("div",{className:"space-y-4",children:[r.jsx(Pe,{variant:"outline",onClick:()=>t(""),children:" Volver a seleccin"}),e==="financiamiento"&&r.jsx(dDe,{}),e==="disposicion"&&r.jsx(uDe,{}),e==="amortizacion"&&r.jsx(mDe,{}),e==="interes"&&r.jsx(fDe,{})]}):r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-6",children:[r.jsx(G,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("financiamiento"),children:r.jsxs(ne,{children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:r.jsx(li,{className:"h-8 w-8 text-primary"})})}),r.jsx(ae,{className:"text-center",children:"Nuevo Financiamiento"}),r.jsx(Me,{className:"text-center",children:"Registra un nuevo crdito, prstamo o arrendamiento"})]})}),r.jsx(G,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("disposicion"),children:r.jsxs(ne,{children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full",children:r.jsx(Xh,{className:"h-8 w-8 text-blue-600"})})}),r.jsx(ae,{className:"text-center",children:"Disposicin"}),r.jsx(Me,{className:"text-center",children:"Dispn de tu lnea de crdito revolvente"})]})}),r.jsx(G,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("amortizacion"),children:r.jsxs(ne,{children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-green-500/10 rounded-full",children:r.jsx(ps,{className:"h-8 w-8 text-green-600"})})}),r.jsx(ae,{className:"text-center",children:"Amortizacin"}),r.jsx(Me,{className:"text-center",children:"Registra el pago de una mensualidad o abono a capital"})]})}),r.jsx(G,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("interes"),children:r.jsxs(ne,{children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-red-500/10 rounded-full",children:r.jsx(Rn,{className:"h-8 w-8 text-red-600"})})}),r.jsx(ae,{className:"text-center",children:"Cargo por Intereses"}),r.jsx(Me,{className:"text-center",children:"Registra intereses ordinarios, moratorios o comisiones"})]})})]})}),r.jsx(Je,{value:"resumen",children:r.jsx(pDe,{})}),r.jsx(Je,{value:"detalle",children:r.jsx(xDe,{})}),r.jsx(Je,{value:"analitica",children:r.jsx(gDe,{})}),r.jsx(Je,{value:"catalogo",children:r.jsx(vDe,{})})]})})]})},$C=()=>{const{toast:e}=Rs(),t=Gr(),{data:n=[],isLoading:s}=it({queryKey:["accionistas"],queryFn:async()=>{const{data:l,error:c}=await ce.from("accionistas").select("*").eq("activo",!0).order("nombre");if(c)throw c;return l}}),a=Qt({mutationFn:async l=>{const{data:c}=await ce.auth.getUser();if(!c.user)throw new Error("Usuario no autenticado");const{data:d,error:u}=await ce.from("accionistas").insert([{...l,user_id:c.user.id}]).select().single();if(u)throw u;return d},onSuccess:()=>{t.invalidateQueries({queryKey:["accionistas"]}),e({title:"Accionista creado",description:"El accionista ha sido registrado exitosamente"})},onError:l=>{e({title:"Error",description:"No se pudo crear el accionista: "+l.message,variant:"destructive"})}}),o=Qt({mutationFn:async({id:l,...c})=>{const{data:d,error:u}=await ce.from("accionistas").update(c).eq("id",l).select().single();if(u)throw u;return d},onSuccess:()=>{t.invalidateQueries({queryKey:["accionistas"]}),e({title:"Accionista actualizado",description:"Los datos del accionista han sido actualizados"})},onError:l=>{e({title:"Error",description:"No se pudo actualizar el accionista: "+l.message,variant:"destructive"})}}),i=Qt({mutationFn:async l=>{const{error:c}=await ce.from("accionistas").update({activo:!1}).eq("id",l);if(c)throw c},onSuccess:()=>{t.invalidateQueries({queryKey:["accionistas"]}),e({title:"Accionista eliminado",description:"El accionista ha sido dado de baja"})},onError:l=>{e({title:"Error",description:"No se pudo eliminar el accionista: "+l.message,variant:"destructive"})}});return{accionistas:n,isLoading:s,crearAccionista:a,actualizarAccionista:o,eliminarAccionista:i}},yDe=()=>{const e=Gr();$C();const{data:t=[]}=it({queryKey:["accionistas-todos"],queryFn:async()=>{const{data:j,error:g}=await ce.from("accionistas").select("*").order("nombre");if(g)throw g;return j}}),{data:n=[],isLoading:s}=it({queryKey:["transacciones-capital"],queryFn:async()=>{const{data:j,error:g}=await ce.from("transacciones_capital").select("*").order("fecha",{ascending:!1});if(g)throw g;return j}}),a=n.map(j=>{const g=t.find(N=>N.id===j.accionista_id);return{...j,accionistaActivo:(g==null?void 0:g.activo)??!0,accionistaNombreActual:(g==null?void 0:g.nombre)??j.socio}}),o=Qt({mutationFn:async j=>{const{data:{user:g}}=await ce.auth.getUser();if(!g)throw new Error("Usuario no autenticado");const{data:N,error:_}=await ce.from("transacciones_capital").insert({user_id:g.id,tipo_movimiento:j.tipo_movimiento,fecha:j.fecha.toISOString().split("T")[0],monto:j.monto,socio:j.socio,accionista_id:j.accionista_id||null,descripcion:j.descripcion||null}).select().single();if(_)throw _;return N},onSuccess:()=>{e.invalidateQueries({queryKey:["transacciones-capital"]}),Le({title:"Registro exitoso",description:"La transaccin de capital se ha registrado correctamente"})},onError:j=>{Le({title:"Error",description:`No se pudo registrar la transaccin: ${j.message}`,variant:"destructive"})}}),i=a.filter(j=>j.estado==="activo"),l=i.filter(j=>j.tipo_movimiento==="aportacion").reduce((j,g)=>j+Number(g.monto),0),c=i.filter(j=>j.tipo_movimiento==="dividendo").reduce((j,g)=>j+Number(g.monto),0),d=l-c,u=i.filter(j=>j.tipo_movimiento==="aportacion"&&j.accionistaActivo).reduce((j,g)=>j+Number(g.monto),0),m=i.filter(j=>j.tipo_movimiento==="aportacion"&&!j.accionistaActivo).reduce((j,g)=>j+Number(g.monto),0),f=i.filter(j=>j.tipo_movimiento==="dividendo"&&j.accionistaActivo).reduce((j,g)=>j+Number(g.monto),0),h=i.filter(j=>j.tipo_movimiento==="dividendo"&&!j.accionistaActivo).reduce((j,g)=>j+Number(g.monto),0),x=u-f,p=m-h,v=i.reduce((j,g)=>{const N=g.accionista_id?`${g.accionista_id}|${g.accionistaNombreActual}|${g.accionistaActivo?"activo":"inactivo"}`:`sin_id|${g.socio}|activo`;return j[N]||(j[N]={aportaciones:0,dividendos:0,balance:0,activo:g.accionistaActivo??!0,nombreMostrar:g.accionistaNombreActual||g.socio}),g.tipo_movimiento==="aportacion"?j[N].aportaciones+=Number(g.monto):j[N].dividendos+=Number(g.monto),j[N].balance=j[N].aportaciones-j[N].dividendos,j},{});return{transacciones:a,isLoading:s,registrarTransaccion:o,totalAportaciones:l,totalDividendos:c,capitalSocialTotal:d,resumenPorSocio:v,totalAportacionesActivos:u,totalAportacionesInactivos:m,totalDividendosActivos:f,totalDividendosInactivos:h,capitalSocialActivos:x,capitalSocialInactivos:p}},Qj=e=>{const t=e||new Date().getFullYear();return it({queryKey:["estado-resultados-mensual",t],queryFn:async()=>{const n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],s=`${t}-01-01`,a=`${t}-12-31`,{data:o}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").gte("asientos_contables.fecha",s).lte("asientos_contables.fecha",a),i=new Map;o==null||o.forEach(c=>{const d=new Date(c.asientos_contables.fecha).getMonth();i.has(d)||i.set(d,[]),i.get(d).push(c)});const l=[];for(let c=0;c<12;c++){const d=i.get(c)||[];let u=0,m=0,f=0,h=0,x=0;d.forEach(A=>{const P=A.cuenta_codigo,k=A.debe||0,E=A.haber||0;P==="4001"||P==="4004"?u+=E-k:P==="4002"||P==="4003"?u-=k-E:P.startsWith("41")?u+=E-k:P==="5001"||P==="5002"?m+=k-E:P==="5003"||P==="5004"?m-=k-E:P==="5109"||P==="5110"?h+=k-E:P.startsWith("51")&&P!=="5109"&&P!=="5110"?f+=k-E:(P==="5201"||P.startsWith("51")&&parseInt(P)>=5111)&&(x+=k-E)});const p=u-m,v=p-f,j=v-h,g=j-x,N=g>0?g*.3:0,_=g-N,b=u>0?p/u*100:0,w=u>0?v/u*100:0,S=u>0?j/u*100:0,C=u>0?_/u*100:0;l.push({mes:n[c],mesNumero:c+1,ingresos:u,costos:m,gastos:f,utilidadBruta:p,ebitda:v,depreciacion:h,ebit:j,intereses:x,utilidadAntesImpuestos:g,impuestos:N,utilidadNeta:_,margenBruto:b,margenEBITDA:w,margenEBIT:S,margenNeto:C})}return l},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1})},bDe=({data:e,accionistaId:t,accionistaNombre:n})=>{const s=[];s.push({name:"Aportaciones",value:0,start:e.aportaciones,fill:"#10b981",isTotal:!1});const a=e.utilidadesHistoricas-e.dividendosHistoricos,o=a>=0;s.push({name:o?"(+) Utilidades Netas Histricas":"(-) Prdidas Netas Histricas",value:o?e.aportaciones:e.aportaciones+a,start:Math.abs(a),fill:o?"#10b981":"#ef4444",isTotal:!1});const i=e.aportaciones+a;s.push({name:"= Capital Histrico",value:0,start:i,fill:"#60a5fa",isTotal:!0});const l=e.utilidadesAnioActual>=0;s.push({name:l?"(+) Utilidades 2025":"(-) Prdidas 2025",value:l?i:i+e.utilidadesAnioActual,start:Math.abs(e.utilidadesAnioActual),fill:l?"#10b981":"#ef4444",isTotal:!1});const c=i+e.utilidadesAnioActual;s.push({name:"= Subtotal 2025",value:0,start:c,fill:"#60a5fa",isTotal:!0});const d=c-e.dividendosAnioActual;s.push({name:"(-) Dividendos 2025",value:d,start:e.dividendosAnioActual,fill:"#ef4444",isTotal:!1});const u=d;s.push({name:"= BALANCE FINAL",value:0,start:u,fill:u>=0?"#059669":"#dc2626",isTotal:!0});const m=(v,j=!1)=>{const N=`$${Math.abs(v).toLocaleString("es-MX",{minimumFractionDigits:0,maximumFractionDigits:0})}`;return j&&v<0?`-${N}`:N},f=({active:v,payload:j})=>{if(v&&j&&j.length){const g=j[0].payload,N=g.isTotal?g.start:g.name.includes("(-)")||g.name.includes("Prdidas")?-g.start:g.start;return r.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-foreground mb-1",children:g.name}),r.jsx("p",{className:`text-sm ${N>=0?"text-green-600":"text-red-600"}`,children:m(N,!0)})]})}return null},x=(()=>{const v=[];return s.forEach(j=>{j.isTotal?v.push(j.start):(v.push(j.value),v.push(j.value+j.start))}),Math.min(...v,0)})(),p=x<0?[x*1.1,"auto"]:["auto","auto"];return r.jsxs(G,{className:"border-2",children:[r.jsxs(ne,{className:"bg-muted/50",children:[r.jsxs(ae,{className:"text-xl",children:["Grfico de Cascada - ",t&&t!=="all"&&t!=="inactivos"?`Capital de ${n||"Accionista"}`:t==="inactivos"?"Capital de Socios Inactivos":"Flujo de Capital Consolidado"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualizacin del flujo de capital desde aportaciones hasta balance final"})]}),r.jsx(Q,{className:"p-6",children:r.jsx(mt,{width:"100%",height:450,children:r.jsxs(Gt,{data:s,margin:{top:20,right:30,left:60,bottom:80},barGap:8,children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(jt,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fill:"hsl(var(--foreground))",fontSize:11,fontWeight:500},interval:0}),r.jsx(gt,{domain:p,tickFormatter:v=>m(v),tick:{fill:"hsl(var(--foreground))",fontSize:11},width:80}),r.jsx(yt,{content:r.jsx(f,{})}),r.jsx(yl,{y:0,stroke:"#374151",strokeWidth:2}),r.jsx(rt,{dataKey:"value",stackId:"stack",isAnimationActive:!1,legendType:"none",children:s.map((v,j)=>r.jsx(Kt,{fill:"transparent",style:{pointerEvents:"none"}},`cell-value-${j}`))}),r.jsx(rt,{dataKey:"start",stackId:"stack",radius:[6,6,6,6],label:{position:"top",content:({x:v,y:j,width:g,value:N,index:_,height:b})=>{const w=s[_];if(!w)return null;const S=w.name.includes("(-)")||w.name.includes("Prdidas")||w.isTotal&&w.start<0,C=w.isTotal?w.start:S?-w.start:w.start;let A;w.isTotal&&w.start<0?A=Number(j)+Number(b)+20:S?A=Number(j)+Number(b)+15:A=Number(j)-5;const P=S?"hanging":"bottom";return r.jsx("text",{x:Number(v)+Number(g)/2,y:A,fill:"hsl(var(--foreground))",textAnchor:"middle",dominantBaseline:P,fontSize:10,fontWeight:"bold",children:m(C,!0)})}},children:s.map((v,j)=>r.jsx(Kt,{fill:v.fill},`cell-start-${j}`))})]})})})]})},NDe=({aportaciones:e,utilidades:t,dividendosDistribuidos:n,accionista:s,totalAportaciones:a=0})=>{const o=e+t,i=Math.max(0,o-n),l=o>0?n/o*100:0;let c=o,d=0,u=!1;return s&&s.porcentaje_participacion>0?(c=o,d=n-c,u=d>0):n>o&&(d=n-o,u=!0),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{children:["Capacidad de Dividendos",s&&` - ${s.nombre}`]})}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-4",children:[u&&r.jsxs(sr,{variant:"destructive",className:"border-2",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx(kv,{children:" Dividendos Excedidos"}),r.jsx(ar,{children:s?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"font-semibold",children:["Este accionista ha distribuido ",r.jsxs("span",{className:"text-lg",children:["$",d.toLocaleString("es-MX",{minimumFractionDigits:2})]})," ms de lo que le corresponde."]}),r.jsxs("p",{className:"text-sm mt-2",children:["Segn su participacin del ",s.porcentaje_participacion,"%, le corresponden mximo $",c.toLocaleString("es-MX",{minimumFractionDigits:2}),"pero ha distribuido $",n.toLocaleString("es-MX",{minimumFractionDigits:2}),"."]})]}):r.jsxs("p",{children:["Se han distribuido $",d.toLocaleString("es-MX",{minimumFractionDigits:2})," ms de lo que hay disponible en capital."]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Capital Total"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",o.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Aportaciones + Utilidades"})]}),s&&s.porcentaje_participacion>0&&r.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-cyan-50 to-cyan-100 dark:from-cyan-950/20 dark:to-cyan-900/20",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Le Corresponde"}),r.jsxs("p",{className:"text-2xl font-bold text-cyan-600",children:["$",c.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.porcentaje_participacion,"% de participacin"]})]}),r.jsxs("div",{className:`p-4 border rounded-lg bg-gradient-to-br ${u?"from-red-50 to-red-100 dark:from-red-950/20 dark:to-red-900/20":"from-orange-50 to-orange-100 dark:from-orange-950/20 dark:to-orange-900/20"}`,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Distribuido"}),r.jsxs("p",{className:`text-2xl font-bold ${u?"text-red-600":"text-orange-600"}`,children:["$",n.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total de dividendos pagados"})]}),r.jsxs("div",{className:`p-4 border rounded-lg bg-gradient-to-br ${u?"from-red-50 to-red-100 dark:from-red-950/20 dark:to-red-900/20":"from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20"}`,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Disponible"}),r.jsxs("p",{className:`text-2xl font-bold ${u?"text-red-600":"text-green-600"}`,children:["$",i.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u?"Sobregiro detectado":"Para distribuir"})]}),r.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/20 dark:to-purple-900/20",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"% Utilizado"}),r.jsxs("p",{className:`text-2xl font-bold ${u?"text-red-600":"text-purple-600"}`,children:[l.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Del capital disponible"})]}),r.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-950/20 dark:to-amber-900/20",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"% Disponible"}),r.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:[Math.max(0,100-l).toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Restante para distribuir"})]})]})]})})]})},wDe=()=>{const{accionistas:e,isLoading:t,crearAccionista:n,actualizarAccionista:s,eliminarAccionista:a}=$C(),o=e.reduce((W,B)=>W+(B.porcentaje_participacion||0),0),i=100-o,[l,c]=y.useState(!1),[d,u]=y.useState(null),[m,f]=y.useState(""),[h,x]=y.useState(""),[p,v]=y.useState(""),[j,g]=y.useState(""),[N,_]=y.useState(""),b=parseFloat(h)||0,w=l?!1:b>i,[S,C]=y.useState(!1),[A,P]=y.useState(null),[k,E]=y.useState([]),O=W=>{var B;c(!0),u(W.id),f(W.nombre),x(((B=W.porcentaje_participacion)==null?void 0:B.toString())||""),v(W.email||""),g(W.telefono||""),_(W.rfc||""),window.scrollTo({top:0,behavior:"smooth"})},M=()=>{c(!1),u(null),f(""),x(""),v(""),g(""),_("")},T=W=>{if(W.preventDefault(),!m.trim())return;const B=h?parseFloat(h):0;if(!l&&o+B>100){Le({title:"Error de validacin",description:`El porcentaje excede el lmite. Disponible: ${i.toFixed(2)}%`,variant:"destructive"});return}if(l&&d)s.mutate({id:d,nombre:m.trim(),porcentaje_participacion:h?parseFloat(h):0,email:p.trim()||void 0,telefono:j.trim()||void 0,rfc:N.trim()||void 0},{onSuccess:()=>{M()}});else if(e.length>0&&h&&parseFloat(h)>0){const q={nombre:m.trim(),porcentaje_participacion:parseFloat(h),email:p.trim()||void 0,telefono:j.trim()||void 0,rfc:N.trim()||void 0,activo:!0};P(q);const te=e.map(Y=>({id:Y.id,nombre:Y.nombre,porcentajeActual:Y.porcentaje_participacion,porcentajeNuevo:Y.porcentaje_participacion}));E(te),C(!0)}else n.mutate({nombre:m.trim(),porcentaje_participacion:h?parseFloat(h):0,email:p.trim()||void 0,telefono:j.trim()||void 0,rfc:N.trim()||void 0,activo:!0},{onSuccess:()=>{f(""),x(""),v(""),g(""),_("")}})},V=(W,B)=>{E(q=>q.map(te=>te.id===W?{...te,porcentajeNuevo:B}:te))},I=async()=>{const W=k.reduce((B,q)=>B+q.porcentajeNuevo,0)+((A==null?void 0:A.porcentaje_participacion)||0);if(Math.abs(W-100)>.01){Le({title:"Validacin de participacin",description:`La suma debe ser exactamente 100%. Actual: ${W.toFixed(2)}%`,variant:"destructive"});return}n.mutate(A,{onSuccess:()=>{k.forEach(B=>{B.porcentajeNuevo!==B.porcentajeActual&&s.mutate({id:B.id,porcentaje_participacion:B.porcentajeNuevo})}),f(""),x(""),v(""),g(""),_(""),C(!1),P(null),E([])}})},F=()=>{C(!1),P(null),E([])},D=k.reduce((W,B)=>W+B.porcentajeNuevo,0)+((A==null?void 0:A.porcentaje_participacion)||0),X=Math.abs(D-100)<.01;return r.jsxs(r.Fragment,{children:[r.jsx(vr,{open:S,onOpenChange:C,children:r.jsxs(mr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsxs(hr,{className:"flex items-center gap-2",children:[r.jsx(Wr,{className:"h-5 w-5 text-orange-500"}),"Dilucin de Acciones - Nuevo Accionista"]}),r.jsx(mn,{children:"Ests a punto de registrar un nuevo accionista con participacin accionaria. Esto implica una redistribucin de porcentajes entre todos los accionistas. Ajusta los porcentajes para que la suma total sea 100%."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"p-4 border-2 border-green-500 rounded-lg bg-green-50 dark:bg-green-950/20",children:[r.jsx("p",{className:"font-semibold text-lg mb-2",children:"Nuevo Accionista (Entrante)"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:A==null?void 0:A.nombre}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(A==null?void 0:A.email)||"Sin email"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[A==null?void 0:A.porcentaje_participacion,"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Participacin"})]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-lg mb-3",children:"Accionistas Actuales - Ajustar Porcentajes"}),r.jsx("div",{className:"space-y-3",children:k.map(W=>r.jsx("div",{className:"p-4 border rounded-lg bg-muted/30",children:r.jsxs("div",{className:"flex justify-between items-center gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:W.nombre}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Actual: ",W.porcentajeActual,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:`porcentaje-${W.id}`,className:"text-sm",children:"Nuevo %:"}),r.jsx(Ae,{id:`porcentaje-${W.id}`,type:"number",step:"0.01",min:"0",max:"100",value:W.porcentajeNuevo,onChange:B=>V(W.id,parseFloat(B.target.value)||0),className:"w-24"})]})]})},W.id))})]}),r.jsxs(sr,{variant:X?"default":"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx(kv,{children:X?" Suma correcta":" Suma incorrecta"}),r.jsxs(ar,{children:[r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{className:`text-xl font-bold ${X?"text-green-600":"text-red-600"}`,children:[D.toFixed(2),"%"]})]}),X?r.jsx("p",{className:"text-sm mt-2 text-green-600",children:" La distribucin es vlida"}):r.jsxs("p",{className:"text-sm mt-2",children:[" Debe ser exactamente 100% (",D>100?"excede":"falta"," ",Math.abs(100-D).toFixed(2),"%)"]})]})]})]}),r.jsxs(Th,{children:[r.jsx(Pe,{variant:"outline",onClick:F,children:"Cancelar"}),r.jsxs(Pe,{onClick:I,disabled:!X,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Confirmar Dilucin"]})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"border-2",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Estado de Participacin Societaria"})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 border rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Asignado"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[o.toFixed(2),"%"]})]}),r.jsxs("div",{className:Te("text-center p-4 border rounded-lg",i===0?"bg-green-50 dark:bg-green-950/20":"bg-orange-50 dark:bg-orange-950/20"),children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Disponible"}),r.jsxs("p",{className:Te("text-2xl font-bold",i===0?"text-green-600":"text-orange-600"),children:[i.toFixed(2),"%"]})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg bg-purple-50 dark:bg-purple-950/20",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Accionistas"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.length})]})]}),i!==0&&r.jsxs(sr,{className:"mt-4",variant:i>0?"default":"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx(kv,{children:i>0?"Participacin incompleta":"Participacin excedida"}),r.jsx(ar,{children:i>0?`Faltan ${i.toFixed(2)}% por asignar a accionistas`:`Se ha excedido el lmite en ${Math.abs(i).toFixed(2)}%`})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oU,{className:"h-5 w-5"}),l?"Editar Accionista":"Registrar Nuevo Accionista"]}),l&&r.jsx(Pe,{variant:"ghost",size:"sm",onClick:M,children:"Cancelar"})]})}),r.jsx(Q,{children:r.jsxs("form",{onSubmit:T,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre del Accionista *"}),r.jsx(Ae,{id:"nombre",placeholder:"Nombre completo",value:m,onChange:W=>f(W.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(se,{htmlFor:"porcentaje",children:["% de Participacin",!l&&r.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(Disponible: ",i.toFixed(2),"%)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ae,{id:"porcentaje",type:"number",step:"0.01",min:"0",max:l?100:i,placeholder:l?"0.00":i.toFixed(2),value:h,onChange:W=>x(W.target.value),className:Te("flex-1",w&&"border-destructive")}),!l&&i>0&&r.jsxs(Pe,{type:"button",variant:"outline",onClick:()=>x(i.toFixed(2)),children:["Asignar todo (",i.toFixed(2),"%)"]})]}),w&&r.jsxs("p",{className:"text-xs text-destructive",children:["El porcentaje excede el disponible (",i.toFixed(2),"%)"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"email",children:"Email"}),r.jsx(Ae,{id:"email",type:"email",placeholder:"correo@ejemplo.com",value:p,onChange:W=>v(W.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"telefono",children:"Telfono"}),r.jsx(Ae,{id:"telefono",placeholder:"(555) 123-4567",value:j,onChange:W=>g(W.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"rfc",children:"RFC"}),r.jsx(Ae,{id:"rfc",placeholder:"ABCD123456XYZ",value:N,onChange:W=>_(W.target.value.toUpperCase()),maxLength:13})]}),r.jsxs(Pe,{type:"submit",className:"w-full",children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),l?"Actualizar Accionista":"Registrar Accionista"]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Accionistas Registrados"})}),r.jsx(Q,{children:t?r.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Cargando accionistas..."}):e.length===0?r.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No hay accionistas registrados. Registra al menos uno para poder hacer transacciones."}):r.jsxs("div",{className:"space-y-2",children:[e.map(W=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:W.nombre}),r.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[W.porcentaje_participacion>0&&r.jsxs("span",{children:[W.porcentaje_participacion,"% participacin"]}),W.email&&r.jsx("span",{children:W.email}),W.telefono&&r.jsx("span",{children:W.telefono})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"icon",onClick:()=>O(W),children:r.jsx(Ao,{className:"h-4 w-4"})}),r.jsx(Pe,{variant:"ghost",size:"icon",onClick:()=>a.mutate(W.id),children:r.jsx(xs,{className:"h-4 w-4 text-destructive"})})]})]},W.id)),i>0&&r.jsxs("div",{className:"flex items-center justify-between p-3 border-2 border-dashed border-orange-400 rounded-lg bg-orange-50 dark:bg-orange-950/20",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-orange-700 dark:text-orange-400",children:"Sin socio asignado"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Participacin pendiente de asignar"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[i.toFixed(2),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponible"})]})]})]})})]})]})]})},_De=({asiento:e,isLoading:t})=>{if(t)return r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:r.jsx("p",{className:"text-sm",children:"Cargando asiento contable..."})});if(!e)return r.jsx("div",{className:"p-4 border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-950/20",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ht,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Asiento contable no encontrado"}),r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:"Este movimiento no tiene asiento contable asociado. Esto puede ocurrir si la transaccin fue creada antes de activar el trigger automtico."})]})]})});const n=e.detalle_asientos.reduce((o,i)=>o+Number(i.debe),0),s=e.detalle_asientos.reduce((o,i)=>o+Number(i.haber),0),a=Math.abs(n-s)<.01;return r.jsxs(G,{className:"border-l-4 border-l-blue-500",children:[r.jsxs(ne,{className:"pb-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs(ae,{className:"text-base flex items-center gap-2",children:["Asiento Contable",a?r.jsxs(_e,{variant:"outline",className:"text-green-600 border-green-600",children:[r.jsx(Hl,{className:"h-3 w-3 mr-1"}),"Cuadrado"]}):r.jsxs(_e,{variant:"destructive",children:[r.jsx(Ht,{className:"h-3 w-3 mr-1"}),"Descuadrado"]})]}),r.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[r.jsxs("span",{children:[r.jsx("strong",{children:"No. Asiento:"})," ",e.numero_asiento]}),r.jsxs("span",{children:[r.jsx("strong",{children:"Fecha:"})," ",ze(new Date(e.fecha),"dd/MM/yyyy",{locale:ht})]})]})]})}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e.descripcion})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{className:"w-[100px]",children:"Cuenta"}),r.jsx(me,{children:"Nombre de Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"DEBE"}),r.jsx(me,{className:"text-right",children:"HABER"})]})}),r.jsxs(kt,{children:[e.detalle_asientos.map(o=>{var i;return r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-mono text-sm",children:o.cuenta_codigo}),r.jsx(Z,{className:"font-medium",children:(i=o.cuenta)==null?void 0:i.nombre}),r.jsx(Z,{className:"text-muted-foreground text-sm",children:o.descripcion}),r.jsx(Z,{className:"text-right font-mono",children:o.debe>0?r.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(o.debe).toLocaleString("es-MX",{minimumFractionDigits:2})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{className:"text-right font-mono",children:o.haber>0?r.jsxs("span",{className:"text-green-600 font-semibold",children:["$",Number(o.haber).toLocaleString("es-MX",{minimumFractionDigits:2})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})})]},o.id)}),r.jsxs(Oe,{className:"font-bold bg-muted/50",children:[r.jsx(Z,{colSpan:3,className:"text-right",children:"TOTALES:"}),r.jsxs(Z,{className:"text-right text-blue-600",children:["$",n.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs(Z,{className:"text-right text-green-600",children:["$",s.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]})]})})]})},SDe=e=>it({queryKey:["asientos-capital",e],queryFn:async()=>{if(!e)return null;const{data:t,error:n}=await ce.from("asientos_contables").select(`
          id,
          numero_asiento,
          descripcion,
          fecha,
          created_at,
          detalle_asientos (
            id,
            cuenta_codigo,
            debe,
            haber,
            descripcion
          )
        `).eq("numero_asiento",`CAP-${e}`).maybeSingle();if(n)return console.error("Error fetching asiento capital:",n),null;if(!t)return null;const s=t.detalle_asientos||[],a=[...new Set(s.map(c=>c.cuenta_codigo))],{data:o}=await ce.from("cuentas").select("codigo, nombre").in("codigo",a),i=new Map((o==null?void 0:o.map(c=>[c.codigo,c.nombre]))||[]);return{...t,detalle_asientos:s.map(c=>({...c,cuenta:{nombre:i.get(c.cuenta_codigo)||c.cuenta_codigo}}))}},enabled:!!e}),CDe=({open:e,onOpenChange:t,transaccion:n})=>{const{data:s,isLoading:a}=SDe(n==null?void 0:n.id);if(!n)return null;const o=n.tipo_movimiento==="aportacion";return r.jsx(vr,{open:e,onOpenChange:t,children:r.jsxs(mr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(fr,{children:r.jsxs(hr,{className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-5 w-5"}),"Detalle de Transaccin de Capital"]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"font-medium",children:ze(new Date(n.fecha),"dd 'de' MMMM, yyyy",{locale:ht})})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zo,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Socio"}),r.jsx("p",{className:"font-medium",children:n.socio})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Monto"}),r.jsxs("p",{className:"text-xl font-bold",children:["$",Number(n.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Tipo de Movimiento"}),o?r.jsxs(_e,{className:"bg-green-500",children:[r.jsx(tr,{className:"w-3 h-3 mr-1"}),"Aportacin de Capital"]}):r.jsxs(_e,{className:"bg-red-500",children:[r.jsx(Rn,{className:"w-3 h-3 mr-1"}),"Pago de Dividendo"]})]})]})]}),n.descripcion&&r.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Descripcin"}),r.jsx("p",{className:"text-sm",children:n.descripcion})]}),n.estado==="cancelado"&&r.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 border-l-4 border-red-500 rounded",children:r.jsx("div",{className:"flex items-start gap-2",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-red-900 dark:text-red-100 mb-1",children:"Transaccin Cancelada"}),r.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[r.jsx("strong",{children:"Fecha de cancelacin:"})," ",ze(new Date(n.fecha_cancelacion),"dd/MM/yyyy HH:mm",{locale:ht})]}),r.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:[r.jsx("strong",{children:"Motivo:"})," ",n.motivo_cancelacion]})]})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Asiento Contable"}),r.jsx(_De,{asiento:s,isLoading:a})]})]})]})})},PDe=()=>{const e=Gr();return Qt({mutationFn:async({transaccionId:t,motivoCancelacion:n})=>{const{data:{session:s}}=await ce.auth.getSession();if(!s)throw new Error("No hay sesin activa");const a=await ce.functions.invoke("cancelar-transaccion-capital",{body:{transaccionId:t,motivoCancelacion:n}});if(a.error)throw new Error(a.error.message||"Error al cancelar la transaccin");return a.data},onSuccess:t=>{e.invalidateQueries({queryKey:["transacciones-capital"]}),e.invalidateQueries({queryKey:["asientos-capital"]}),Xt.success("Transaccin cancelada exitosamente",{description:`Se gener el asiento de reversin ${t.numeroAsientoReversion}`})},onError:t=>{console.error("Error al cancelar transaccin:",t),Xt.error("Error al cancelar",{description:t.message})}})},ADe=()=>{var he,ee;const{transacciones:e,isLoading:t,registrarTransaccion:n,totalAportaciones:s,totalDividendos:a,capitalSocialTotal:o,resumenPorSocio:i,totalAportacionesActivos:l,totalAportacionesInactivos:c,totalDividendosActivos:d,totalDividendosInactivos:u}=yDe(),{accionistas:m}=$C(),{data:f}=Qj(),[h,x]=y.useState("aportacion"),[p,v]=y.useState(new Date),[j,g]=y.useState(""),[N,_]=y.useState(""),[b,w]=y.useState(""),[S,C]=y.useState("all"),[A,P]=y.useState(!0),[k,E]=y.useState(null),[O,M]=y.useState(!1),[T,V]=y.useState(!1),[I,F]=y.useState(""),[D,X]=y.useState(!1),[W,B]=y.useState(null),{mutate:q,isPending:te}=PDe(),Y=z=>{E(z),M(!0)},H=z=>{E(z),V(!0),F("")},L=()=>{if(!k||!I.trim()){Xt.error("Debes proporcionar un motivo de cancelacin");return}q({transaccionId:k.id,motivoCancelacion:I.trim()},{onSuccess:()=>{V(!1),E(null),F("")}})},ue=new Date().getFullYear(),pe=(f==null?void 0:f.reduce((z,U)=>z+U.utilidadNeta,0))||0,we=z=>{const U=e.filter(ge=>ge.estado==="activo"),oe=U.filter(ge=>ge.accionista_id===z&&ge.tipo_movimiento==="aportacion").reduce((ge,je)=>ge+Number(je.monto),0),Se=U.filter(ge=>ge.accionista_id===z&&ge.tipo_movimiento==="dividendo").reduce((ge,je)=>ge+Number(je.monto),0),Ne=m.find(ge=>ge.id===z),$=(Ne==null?void 0:Ne.porcentaje_participacion)||0,ie=pe*$/100,J=oe+ie-Se;return{aportaciones:oe,utilidades:ie,dividendosDistribuidos:Se,disponible:J}},re=()=>{const z=m.find(U=>U.id===b);z&&n.mutate({tipo_movimiento:h,fecha:p,monto:parseFloat(j),socio:z.nombre,accionista_id:b,descripcion:N.trim()},{onSuccess:()=>{g(""),_(""),w(""),C(""),v(new Date)}})},de=async z=>{if(z.preventDefault(),!b||!j||parseFloat(j)<=0)return;const U=m.find(oe=>oe.id===b);if(U){if(h==="dividendo"){const{disponible:oe}=we(b),Se=parseFloat(j);if(Se>oe){B({capitalDisponible:oe,montoIntentado:Se,excedente:Se-oe,accionistaNombre:U.nombre}),X(!0);return}}re()}};return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Registro de Capital"}),r.jsx("p",{className:"text-muted-foreground",children:"Registra aportaciones de capital y distribucin de dividendos"})]}),r.jsxs(Lr,{defaultValue:"registro",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full max-w-3xl grid-cols-4",children:[r.jsx(Qe,{value:"registro",children:"Registros de Capital"}),r.jsx(Qe,{value:"resumen",children:"Resumen de Transacciones"}),r.jsx(Qe,{value:"analitica",children:"Analtica"}),r.jsx(Qe,{value:"accionistas",children:"Accionistas"})]}),r.jsx(Je,{value:"registro",className:"mt-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{className:"lg:col-span-2",children:[r.jsx(ne,{children:r.jsx(ae,{children:"Nuevo Movimiento de Capital"})}),r.jsx(Q,{children:r.jsxs("form",{onSubmit:de,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(Pe,{type:"button",variant:h==="aportacion"?"default":"outline",onClick:()=>x("aportacion"),className:"h-20 flex flex-col items-center justify-center gap-2",children:[r.jsx(tr,{className:"h-6 w-6"}),r.jsx("span",{children:"Aportacin de Capital"})]}),r.jsxs(Pe,{type:"button",variant:h==="dividendo"?"default":"outline",onClick:()=>x("dividendo"),className:"h-20 flex flex-col items-center justify-center gap-2",children:[r.jsx(Rn,{className:"h-6 w-6"}),r.jsx("span",{children:"Pago de Dividendos"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha",children:"Fecha"}),r.jsxs(wn,{children:[r.jsx(_n,{asChild:!0,children:r.jsxs(Pe,{variant:"outline",className:Te("w-full justify-start text-left font-normal",!p&&"text-muted-foreground"),children:[r.jsx(er,{className:"mr-2 h-4 w-4"}),p?ze(p,"PPP",{locale:ht}):"Seleccionar fecha"]})}),r.jsx(fn,{className:"w-auto p-0",align:"start",children:r.jsx(Nn,{mode:"single",selected:p,onSelect:z=>z&&v(z),initialFocus:!0,locale:ht})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"accionista",children:"Accionista *"}),r.jsxs(De,{value:b,onValueChange:z=>{w(z);const U=m.find(oe=>oe.id===z);C((U==null?void 0:U.nombre)||"")},children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona un accionista"})}),r.jsx($e,{children:m.length===0?r.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:'No hay accionistas registrados. Ve a la pestaa "Accionistas" para registrar uno.'}):m.map(z=>r.jsxs(le,{value:z.id,children:[z.nombre,z.porcentaje_participacion>0&&` (${z.porcentaje_participacion}%)`]},z.id))})]})]}),h==="dividendo"&&b&&(()=>{const{aportaciones:z,utilidades:U,dividendosDistribuidos:oe,disponible:Se}=we(b),Ne=m.find(ie=>ie.id===b),$=Se<0;return r.jsxs(G,{className:Te("border-2",$?"border-destructive bg-destructive/5":"border-primary bg-primary/5"),children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(ae,{className:"text-sm flex items-center gap-2",children:[$&&r.jsx(Wr,{className:"h-4 w-4 text-destructive"}),"Capital Disponible - ",Ne==null?void 0:Ne.nombre]})}),r.jsxs(Q,{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Aportaciones:"}),r.jsxs("span",{className:"font-medium",children:["$",z.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground",children:["Utilidades ",ue,":"]}),r.jsxs("span",{className:"font-medium",children:["$",U.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Distribuido:"}),r.jsxs("span",{className:"font-medium text-destructive",children:["-$",oe.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"border-t pt-2 flex justify-between items-center",children:[r.jsx("span",{className:"font-semibold",children:"Disponible:"}),r.jsxs("span",{className:Te("text-lg font-bold",$?"text-destructive":"text-primary"),children:["$",Se.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),$&&r.jsxs("div",{className:"flex items-start gap-2 mt-2 p-2 bg-destructive/10 rounded text-xs text-destructive",children:[r.jsx(Wr,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),r.jsx("p",{children:"Este accionista ya ha recibido ms dividendos de lo disponible"})]})]})]})})(),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto",children:h==="aportacion"?"Monto de Aportacin":"Monto del Dividendo"}),r.jsx(Ae,{id:"monto",type:"number",step:"0.01",placeholder:"0.00",value:j,onChange:z=>g(z.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"descripcion",children:"Descripcin / Notas"}),r.jsx(Kr,{id:"descripcion",placeholder:h==="aportacion"?"Ej: Aportacin inicial de capital social":"Ej: Distribucin de utilidades del ejercicio 2024",value:N,onChange:z=>_(z.target.value),rows:3})]}),r.jsxs(Pe,{type:"submit",className:"w-full",children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Registrar ",h==="aportacion"?"Aportacin":"Dividendo"]})]})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Informacin"})}),r.jsx(Q,{className:"space-y-4",children:h==="aportacion"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(tr,{className:"h-5 w-5 text-primary mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Aportacin de Capital"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Incrementa el capital social de la empresa. Se registra en la cuenta de capital contable."})]})]}),r.jsxs("div",{className:"p-3 bg-muted rounded-lg text-xs text-muted-foreground",children:[r.jsx("p",{className:"font-medium mb-1",children:"Registro contable:"}),r.jsx("p",{children:" Debe: Bancos / Caja"}),r.jsx("p",{children:" Haber: Capital Social"})]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Rn,{className:"h-5 w-5 text-destructive mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Pago de Dividendos"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Distribucin de utilidades a los socios. Reduce el capital contable de la empresa."})]})]}),r.jsxs("div",{className:"p-3 bg-muted rounded-lg text-xs text-muted-foreground",children:[r.jsx("p",{className:"font-medium mb-1",children:"Registro contable:"}),r.jsx("p",{children:" Debe: Utilidades Retenidas"}),r.jsx("p",{children:" Haber: Bancos / Caja"})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Historial Reciente"})}),r.jsx(Q,{children:t?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Cargando..."}):e.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay movimientos registrados"}):r.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(z=>r.jsxs("div",{className:"text-sm border-b pb-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:z.socio}),r.jsxs("span",{className:z.tipo_movimiento==="aportacion"?"text-green-600":"text-red-600",children:["$",Number(z.monto).toLocaleString()]})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:ze(new Date(z.fecha),"dd/MM/yyyy",{locale:ht})})]},z.id))})})]})]})]})}),r.jsx(Je,{value:"resumen",className:"mt-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ae,{children:"Resumen de Movimientos de Capital"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{htmlFor:"mostrar-inactivos",className:"text-sm",children:"Mostrar inactivos"}),r.jsx(Bj,{id:"mostrar-inactivos",checked:A,onCheckedChange:P})]})]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Capital Social Total"})}),r.jsxs(Q,{children:[r.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",o.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Aportaciones acumuladas"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Total Aportaciones"})}),r.jsxs(Q,{children:[r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",s.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"En el periodo"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Total Dividendos"})}),r.jsxs(Q,{children:[r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",a.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Distribuidos en el periodo"})]})]})]}),r.jsxs("div",{className:"border rounded-lg",children:[r.jsx("div",{className:"p-4 border-b bg-muted/50",children:r.jsx("h3",{className:"font-semibold",children:"Historial de Transacciones"})}),t?r.jsx("div",{className:"p-8 text-center text-muted-foreground",children:r.jsx("p",{children:"Cargando transacciones..."})}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[r.jsx("p",{children:"No hay transacciones registradas"}),r.jsx("p",{className:"text-sm mt-2",children:"Las transacciones aparecern aqu una vez que las registres"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-muted/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Fecha"}),r.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Socio"}),r.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Tipo"}),r.jsx("th",{className:"p-3 text-right text-sm font-medium",children:"Monto"}),r.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Descripcin"}),r.jsx("th",{className:"p-3 text-center text-sm font-medium",children:"Estado"}),r.jsx("th",{className:"p-3 text-center text-sm font-medium w-[120px]",children:"Acciones"})]})}),r.jsx("tbody",{children:e.map(z=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-3 text-sm",children:ze(new Date(z.fecha),"dd/MM/yyyy",{locale:ht})}),r.jsx("td",{className:"p-3 text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[z.accionistaNombreActual||z.socio,!z.accionistaActivo&&r.jsx(_e,{variant:"outline",className:"text-xs border-yellow-600 text-yellow-600",children:" Inactivo"})]})}),r.jsx("td",{className:"p-3",children:z.tipo_movimiento==="aportacion"?r.jsxs(_e,{className:"bg-green-500",children:[r.jsx(tr,{className:"w-3 h-3 mr-1"}),"Aportacin"]}):r.jsxs(_e,{className:"bg-red-500",children:[r.jsx(Rn,{className:"w-3 h-3 mr-1"}),"Dividendo"]})}),r.jsxs("td",{className:"p-3 text-right font-mono text-sm",children:["$",Number(z.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:z.descripcion||"-"}),r.jsx("td",{className:"p-3 text-center",children:z.estado==="cancelado"?r.jsx(_e,{variant:"destructive",children:"Cancelado"}):r.jsx(_e,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300 dark:bg-green-950/20 dark:text-green-400",children:"Activo"})}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>Y(z),className:"h-8 w-8 p-0",title:"Ver detalle",children:r.jsx(pi,{className:"h-4 w-4"})}),z.estado==="activo"&&r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>H(z),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Cancelar transaccin",children:r.jsx(xs,{className:"h-4 w-4"})})]})})]},z.id))})]})})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Resumen por Socio / Accionista"})}),r.jsx(Q,{children:r.jsxs("div",{className:"border rounded-lg",children:[r.jsx("div",{className:"p-4 border-b bg-muted/50",children:r.jsxs("div",{className:"grid grid-cols-4 gap-4 font-semibold text-sm",children:[r.jsx("div",{children:"Socio"}),r.jsx("div",{className:"text-right",children:"Aportaciones"}),r.jsx("div",{className:"text-right",children:"Dividendos"}),r.jsx("div",{className:"text-right",children:"Balance"})]})}),Object.keys(i).length===0?r.jsx("div",{className:"p-8 text-center text-muted-foreground",children:r.jsx("p",{children:"No hay datos disponibles"})}):r.jsx("div",{children:Object.entries(i).filter(([z,U])=>A||U.activo).map(([z,U])=>r.jsx("div",{className:Te("p-4 border-b last:border-b-0 hover:bg-muted/50",!U.activo&&"bg-yellow-50/50 dark:bg-yellow-900/10"),children:r.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{className:"font-medium flex items-center gap-2",children:[U.nombreMostrar,!U.activo&&r.jsx(_e,{variant:"outline",className:"text-xs border-yellow-600 text-yellow-600",children:" Inactivo"})]}),r.jsxs("div",{className:"text-right text-green-600",children:["$",U.aportaciones.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("div",{className:"text-right text-red-600",children:["$",U.dividendos.toLocaleString("es-MX",{minimumFractionDigits:2})]}),r.jsxs("div",{className:"text-right font-semibold",children:["$",U.balance.toLocaleString("es-MX",{minimumFractionDigits:2})]})]})},z))})]})})]})]})}),r.jsx(Je,{value:"analitica",className:"mt-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(G,{children:r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{htmlFor:"filtro-accionista",className:"whitespace-nowrap",children:"Ver anlisis de:"}),r.jsxs(De,{value:S,onValueChange:C,children:[r.jsx(ke,{id:"filtro-accionista",className:"w-full max-w-md",children:r.jsx(Fe,{placeholder:"Consolidado (Todos los accionistas)"})}),r.jsxs($e,{children:[r.jsx(le,{value:"all",children:"Consolidado (Todos los accionistas)"}),r.jsx(le,{value:"inactivos",children:" Socios Inactivos (Agrupados)"}),m.map(z=>r.jsxs(le,{value:z.id,children:[z.nombre,z.porcentaje_participacion>0&&` (${z.porcentaje_participacion}%)`]},z.id))]})]})]})})}),S==="inactivos"&&r.jsx(G,{className:"border-yellow-200 bg-yellow-50/50 dark:bg-yellow-950/20",children:r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"rounded-full bg-yellow-100 p-2",children:r.jsx(Wr,{className:"h-5 w-5 text-yellow-700"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-1",children:"Vista de Socios Inactivos"}),r.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Ests viendo el anlisis consolidado de todos los socios marcados como inactivos. Estas transacciones mantienen su trazabilidad completa en el sistema."}),r.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mt-2",children:[r.jsx("strong",{children:"Total en este grupo:"})," ",Object.values(i).filter(z=>!z.activo).length," socio(s) inactivo(s)"]})]})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(bDe,{data:{aportaciones:S==="inactivos"?c:S&&S!=="all"?e.filter(z=>z.accionista_id===S&&z.tipo_movimiento==="aportacion"&&z.estado==="activo").reduce((z,U)=>z+Number(U.monto),0):s,utilidadesHistoricas:S==="inactivos"?0:S&&S!=="all"?(()=>{const z=m.find(Se=>Se.id===S);return 0*((z==null?void 0:z.porcentaje_participacion)||0)/100})():0,dividendosHistoricos:S==="inactivos"?e.filter(z=>z.tipo_movimiento==="dividendo"&&!z.accionistaActivo&&z.estado==="activo"&&new Date(z.fecha).getFullYear()<ue).reduce((z,U)=>z+Number(U.monto),0):S&&S!=="all"?e.filter(z=>z.accionista_id===S&&z.tipo_movimiento==="dividendo"&&z.estado==="activo"&&new Date(z.fecha).getFullYear()<ue).reduce((z,U)=>z+Number(U.monto),0):e.filter(z=>z.tipo_movimiento==="dividendo"&&z.estado==="activo"&&new Date(z.fecha).getFullYear()<ue).reduce((z,U)=>z+Number(U.monto),0),utilidadesAnioActual:S==="inactivos"?0:S&&S!=="all"?(()=>{const z=m.find(oe=>oe.id===S),U=(z==null?void 0:z.porcentaje_participacion)||0;return pe*U/100})():pe,dividendosAnioActual:S==="inactivos"?e.filter(z=>z.tipo_movimiento==="dividendo"&&!z.accionistaActivo&&z.estado==="activo"&&new Date(z.fecha).getFullYear()===ue).reduce((z,U)=>z+Number(U.monto),0):S&&S!=="all"?e.filter(z=>z.accionista_id===S&&z.tipo_movimiento==="dividendo"&&z.estado==="activo"&&new Date(z.fecha).getFullYear()===ue).reduce((z,U)=>z+Number(U.monto),0):e.filter(z=>z.tipo_movimiento==="dividendo"&&z.estado==="activo"&&new Date(z.fecha).getFullYear()===ue).reduce((z,U)=>z+Number(U.monto),0)},accionistaId:S,accionistaNombre:S==="all"?void 0:S==="inactivos"?"Socios Inactivos":(he=m.find(z=>z.id===S))==null?void 0:he.nombre}),r.jsx(NDe,{aportaciones:S==="inactivos"?c:S&&S!=="all"?e.filter(z=>z.accionista_id===S&&z.tipo_movimiento==="aportacion"&&z.estado==="activo").reduce((z,U)=>z+Number(U.monto),0):s,utilidades:S==="inactivos"?0:S&&S!=="all"?(()=>{const z=m.find(oe=>oe.id===S),U=(z==null?void 0:z.porcentaje_participacion)||0;return pe*U/100})():pe,dividendosDistribuidos:S==="inactivos"?u:S&&S!=="all"?e.filter(z=>z.accionista_id===S&&z.tipo_movimiento==="dividendo"&&z.estado==="activo").reduce((z,U)=>z+Number(U.monto),0):a,accionista:S&&S!=="all"&&S!=="inactivos"?m.find(z=>z.id===S):void 0,totalAportaciones:s})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{children:["Indicadores Clave - ",S==="inactivos"?" Socios Inactivos":S&&S!=="all"?(ee=m.find(z=>z.id===S))==null?void 0:ee.nombre:"Consolidado"]})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:S==="inactivos"?"Socios Inactivos":S&&S!=="all"?"Transacciones":"Nmero de Accionistas"}),r.jsx("p",{className:"text-2xl font-bold",children:S==="inactivos"?Object.values(i).filter(z=>!z.activo).length:S&&S!=="all"?e.filter(z=>z.accionista_id===S&&z.estado==="activo").length:m.length})]}),r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"ltima Aportacin"}),r.jsx("p",{className:"text-lg font-semibold",children:(()=>{const U=(S==="inactivos"?e.filter(oe=>oe.tipo_movimiento==="aportacion"&&!oe.accionistaActivo&&oe.estado==="activo"):S&&S!=="all"?e.filter(oe=>oe.tipo_movimiento==="aportacion"&&oe.accionista_id===S&&oe.estado==="activo"):e.filter(oe=>oe.tipo_movimiento==="aportacion"&&oe.estado==="activo"))[0];return U?ze(new Date(U.fecha),"dd/MM/yyyy",{locale:ht}):"N/A"})()})]}),r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"ltimo Dividendo"}),r.jsx("p",{className:"text-lg font-semibold",children:(()=>{const U=(S==="inactivos"?e.filter(oe=>oe.tipo_movimiento==="dividendo"&&!oe.accionistaActivo&&oe.estado==="activo"):S&&S!=="all"?e.filter(oe=>oe.tipo_movimiento==="dividendo"&&oe.accionista_id===S&&oe.estado==="activo"):e.filter(oe=>oe.tipo_movimiento==="dividendo"&&oe.estado==="activo"))[0];return U?ze(new Date(U.fecha),"dd/MM/yyyy",{locale:ht}):"N/A"})()})]})]}),S&&S!=="all"&&S!=="inactivos"&&(()=>{const z=m.find(U=>U.id===S);return z?r.jsxs("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Informacin del Accionista"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[z.porcentaje_participacion>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Participacin:"}),r.jsxs("span",{className:"ml-2 font-medium",children:[z.porcentaje_participacion,"%"]})]}),z.email&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Email:"}),r.jsx("span",{className:"ml-2 font-medium",children:z.email})]}),z.telefono&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Telfono:"}),r.jsx("span",{className:"ml-2 font-medium",children:z.telefono})]}),z.rfc&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"RFC:"}),r.jsx("span",{className:"ml-2 font-medium",children:z.rfc})]})]})]}):null})()]})]})]})}),r.jsx(Je,{value:"accionistas",className:"mt-6",children:r.jsx(wDe,{})})]}),r.jsx(CDe,{open:O,onOpenChange:M,transaccion:k}),r.jsx(wa,{open:T,onOpenChange:V,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsx(Zs,{children:"Ests seguro de cancelar esta transaccin?"}),r.jsx(Js,{children:"Esta accin no se puede deshacer. Se crear un asiento de reversin para mantener la trazabilidad contable."})]}),r.jsxs("div",{className:"my-4",children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Motivo de la cancelacin ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Kr,{placeholder:"Explica por qu se cancela esta transaccin...",value:I,onChange:z=>F(z.target.value),rows:4,className:"resize-none"})]}),k&&r.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Fecha:"})," ",ze(new Date(k.fecha),"dd/MM/yyyy",{locale:ht})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Socio:"})," ",k.socio]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Monto:"})," $",Number(k.monto).toLocaleString("es-MX",{minimumFractionDigits:2})]})]}),r.jsxs(Qs,{children:[r.jsx(ta,{disabled:te,children:"Cancelar"}),r.jsx(ea,{onClick:L,disabled:te||!I.trim(),className:"bg-red-600 hover:bg-red-700",children:te?"Cancelando...":"Confirmar Cancelacin"})]})]})}),r.jsx(wa,{open:D,onOpenChange:X,children:r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsxs(Zs,{className:"flex items-center gap-2",children:[r.jsx(Wr,{className:"h-5 w-5 text-destructive"}),"Monto Excede Capital Disponible"]}),r.jsx(Js,{asChild:!0,children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{children:["El monto que intentas distribuir excede el capital disponible del accionista"," ",r.jsx("strong",{children:W==null?void 0:W.accionistaNombre}),":"]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Capital Disponible:"}),r.jsxs("span",{className:"font-semibold text-primary",children:["$",W==null?void 0:W.capitalDisponible.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Monto a Distribuir:"}),r.jsxs("span",{className:"font-semibold",children:["$",W==null?void 0:W.montoIntentado.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[r.jsx("span",{children:"Excedente:"}),r.jsxs("span",{className:"font-bold text-destructive",children:["$",W==null?void 0:W.excedente.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Deseas continuar con el registro de todos modos?"})]})})]}),r.jsxs(Qs,{children:[r.jsx(ta,{onClick:()=>{X(!1),B(null)},children:"Cancelar y Ajustar Monto"}),r.jsx(ea,{onClick:()=>{X(!1),B(null),re()},className:"bg-destructive hover:bg-destructive/90",children:"Registrar de Todos Modos"})]})]})})]})},lV=(e,t)=>it({queryKey:["utilidad-antes-impuestos",e,t],queryFn:async()=>{const n=new Date(t,e-1,1).toISOString().split("T")[0],s=new Date(t,e,0).toISOString().split("T")[0],{data:a}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").gte("asientos_contables.fecha",n).lte("asientos_contables.fecha",s);let o=0,i=0,l=0,c=0,d=0;a==null||a.forEach(x=>{const p=x.cuenta_codigo,v=(x.debe||0)-(x.haber||0);p.startsWith("4")?o+=Math.abs(v):p.startsWith("5")&&parseInt(p)>=5001&&parseInt(p)<=5099?i+=Math.abs(v):p==="5109"||p==="5110"?c+=Math.abs(v):p.startsWith("51")&&p!=="5109"&&p!=="5110"?l+=Math.abs(v):(p.startsWith("5")&&parseInt(p)>=5111&&parseInt(p)<=5199||p==="5201")&&(d+=Math.abs(v))});const h=o-i-l-c-d;return{mes:e,ano:t,utilidadAntesImpuestos:h,ingresos:o,costos:i,gastos:l,depreciacion:c,intereses:d}}}),cV=()=>{const{toast:e}=Rs(),t=Gr(),{data:n,isLoading:s}=it({queryKey:["autoridades-fiscales"],queryFn:async()=>{const{data:{user:l}}=await ce.auth.getUser();if(!l)throw new Error("Usuario no autenticado");const{data:c,error:d}=await ce.from("autoridades_fiscales").select("*").eq("user_id",l.id).eq("activo",!0).order("nombre",{ascending:!0});if(d)throw d;return c}});y.useEffect(()=>{const l=ce.channel("autoridades-changes").on("postgres_changes",{event:"*",schema:"public",table:"autoridades_fiscales"},()=>{t.invalidateQueries({queryKey:["autoridades-fiscales"]})}).subscribe();return()=>{ce.removeChannel(l)}},[t]);const a=Qt({mutationFn:async l=>{const{data:{user:c}}=await ce.auth.getUser();if(!c)throw new Error("Usuario no autenticado");const{data:d}=await ce.from("autoridades_fiscales").select("id").eq("user_id",c.id).eq("nombre",l.nombre).eq("activo",!0).single();if(d)throw new Error("Ya existe una autoridad fiscal con ese nombre");const{data:u,error:m}=await ce.from("autoridades_fiscales").insert({...l,user_id:c.id,activo:!0}).select().single();if(m)throw m;return u},onSuccess:()=>{t.invalidateQueries({queryKey:["autoridades-fiscales"]}),e({title:" Autoridad creada",description:"La autoridad fiscal se registr correctamente"})},onError:l=>{e({title:" Error al crear autoridad",description:l.message,variant:"destructive"})}}),o=Qt({mutationFn:async({id:l,...c})=>{const{error:d}=await ce.from("autoridades_fiscales").update(c).eq("id",l);if(d)throw d},onSuccess:()=>{t.invalidateQueries({queryKey:["autoridades-fiscales"]}),e({title:" Autoridad actualizada",description:"Los cambios se guardaron correctamente"})},onError:()=>{e({title:" Error al actualizar",description:"No se pudieron guardar los cambios",variant:"destructive"})}}),i=Qt({mutationFn:async l=>{const{data:c}=await ce.from("transacciones_egresos").select("id").eq("tipo_egreso","impuesto").ilike("proveedor_nombre",`%${l}%`);if(c&&c.length>0)throw new Error("No se puede eliminar una autoridad con registros de impuestos asociados");const{error:d}=await ce.from("autoridades_fiscales").update({activo:!1}).eq("id",l);if(d)throw d},onSuccess:()=>{t.invalidateQueries({queryKey:["autoridades-fiscales"]}),e({title:" Autoridad eliminada",description:"La autoridad fiscal se dio de baja correctamente"})},onError:l=>{e({title:" Error al eliminar",description:l.message,variant:"destructive"})}});return{autoridades:n||[],isLoading:s,crearAutoridad:a,actualizarAutoridad:o,eliminarAutoridad:i}},EDe=()=>{var W;const e=new Date,[t,n]=y.useState(e.getMonth()+1),[s,a]=y.useState(e.getFullYear()),[o,i]=y.useState("30"),[l,c]=y.useState(""),[d,u]=y.useState(""),[m,f]=y.useState(null),[h,x]=y.useState(!1),[p,v]=y.useState("total"),[j,g]=y.useState(""),[N,_]=y.useState(""),[b,w]=y.useState("transferencia"),[S,C]=y.useState(""),{data:A,isLoading:P}=lV(t,s),{autoridades:k}=cV();y.useEffect(()=>{(async()=>{const{data:q,error:te}=await ce.from("transacciones_impuestos").select("*").eq("mes",t).eq("ano",s).order("created_at",{ascending:!1});if(q&&q.length>0){const Y=q.reduce((H,L)=>H+Number(L.isr_real),0);f({registros:q,total_acumulado:Y,ultimo_registro:q[0]})}else f(null),c(""),u(""),v("total"),g(""),w("transferencia"),C("")})()},[t,s]);const E=(A==null?void 0:A.utilidadAntesImpuestos)||0,O=E>0?E*parseFloat(o||"0")/100:0,M=()=>{const B=new Date(s,t-1),q=new Date(e.getFullYear(),e.getMonth());return B<q},T=()=>{const B=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),q=e.getDate();return B-q},V=t===e.getMonth()+1&&s===e.getFullYear()&&T()<=5,I=async()=>{if(M()){Le({title:"Error",description:"No puedes crear registros para perodos pasados",variant:"destructive"});return}if(!l||parseFloat(l)<0){Le({title:"Error",description:"Debes ingresar el monto real de ISR",variant:"destructive"});return}if(p==="credito"&&!j){Le({title:"Error",description:"Debes ingresar la fecha de vencimiento para pago a crdito",variant:"destructive"});return}if((p==="total"||p==="parcial")&&!b){Le({title:"Error",description:"Debes seleccionar el mtodo de pago",variant:"destructive"});return}if(p==="parcial"){if(!S||parseFloat(S)<=0){Le({title:"Error",description:"Debes ingresar el monto pagado",variant:"destructive"});return}if(parseFloat(S)>parseFloat(l)){Le({title:"Error",description:"El monto pagado no puede ser mayor al ISR total",variant:"destructive"});return}if(!j){Le({title:"Error",description:"Debes ingresar la fecha de vencimiento para el saldo pendiente",variant:"destructive"});return}}let B=0;if(p==="total"?B=parseFloat(l):p==="parcial"&&(B=parseFloat(S)),B>0&&(p==="total"||p==="parcial")){if(b==="efectivo"){const{data:te}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber").eq("cuenta_codigo","1001");if(!te){Le({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"}),x(!1);return}let Y=0;if(te.forEach(H=>{Y+=(H.debe||0)-(H.haber||0)}),B>Y){Le({title:" Saldo insuficiente en efectivo",description:`Disponible: $${D(Y)} | Necesitas: $${D(B)}`,variant:"destructive"}),x(!1);return}}if(b==="transferencia"){const{data:te}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber").eq("cuenta_codigo","1002");if(!te){Le({title:" Error de validacin",description:"No se pudieron cargar los saldos disponibles. Intenta nuevamente.",variant:"destructive"}),x(!1);return}let Y=0;if(te.forEach(H=>{Y+=(H.debe||0)-(H.haber||0)}),B>Y){Le({title:" Saldo insuficiente en bancos",description:`Disponible: $${D(Y)} | Necesitas: $${D(B)}`,variant:"destructive"}),x(!1);return}}}x(!0);const q="00000000-0000-0000-0000-000000000000";try{const te=parseFloat(l)-O,Y={user_id:q,mes:t,ano:s,utilidad_antes_impuestos:E,tasa_isr:parseFloat(o),isr_calculado:O,isr_real:parseFloat(l),diferencia:te,observaciones:d||null};let H=0,L=0,ue="";p==="total"?(H=parseFloat(l),L=0,ue="contado"):p==="credito"?(H=0,L=parseFloat(l),ue="credito"):p==="parcial"&&(H=parseFloat(S),L=parseFloat(l)-parseFloat(S),ue="parcial");const pe=k.find(je=>je.id===N),we=(pe==null?void 0:pe.nombre)||"SAT - Servicio de Administracin Tributaria",re=(pe==null?void 0:pe.rfc)||"SAT970701NN3",{data:de,error:he}=await ce.from("transacciones_egresos").insert({user_id:q,tipo_egreso:"impuesto",subtipo_egreso:"ISR",descripcion:`ISR ${X[t-1]} ${s} - Pago ${m?m.registros.length+1:1}`,cuenta_codigo:"6001",monto_total:parseFloat(l),monto_pagado:H,monto_pendiente:L,tipo_pago:ue,metodo_pago:p==="total"||p==="parcial"?b:null,fecha_vencimiento:p==="credito"||p==="parcial"?j:null,proveedor_nombre:we,proveedor_rfc:re,comentarios:d}).select().single();if(he)throw he;const{data:ee,error:z}=await ce.from("transacciones_impuestos").insert(Y).select().single();if(z)throw z;const U=await F(),oe=new Date(s,t-1,1),{data:Se,error:Ne}=await ce.from("asientos_contables").insert({user_id:q,numero_asiento:U,descripcion:`ISR ${X[t-1]} ${s} - Pago ${m?m.registros.length+1:1}`,fecha:oe.toISOString().split("T")[0]}).select().single();if(Ne)throw Ne;let $;p==="total"?$=[{asiento_id:Se.id,cuenta_codigo:"6001",descripcion:`ISR ${X[t-1]} ${s} - Pago ${m?m.registros.length+1:1}`,debe:parseFloat(l),haber:0},{asiento_id:Se.id,cuenta_codigo:"1002",descripcion:`Pago ISR ${X[t-1]} ${s}`,debe:0,haber:parseFloat(l)}]:p==="credito"?$=[{asiento_id:Se.id,cuenta_codigo:"6001",descripcion:`ISR ${X[t-1]} ${s} - Pago ${m?m.registros.length+1:1}`,debe:parseFloat(l),haber:0},{asiento_id:Se.id,cuenta_codigo:"2001",descripcion:`Cuenta por pagar ISR ${X[t-1]} ${s}`,debe:0,haber:parseFloat(l)}]:$=[{asiento_id:Se.id,cuenta_codigo:"6001",descripcion:`ISR ${X[t-1]} ${s} - Pago ${m?m.registros.length+1:1}`,debe:parseFloat(l),haber:0},{asiento_id:Se.id,cuenta_codigo:"1002",descripcion:`Pago parcial ISR ${X[t-1]} ${s}`,debe:0,haber:H},{asiento_id:Se.id,cuenta_codigo:"2001",descripcion:`Saldo pendiente ISR ${X[t-1]} ${s}`,debe:0,haber:L}];const{error:ie}=await ce.from("detalle_asientos").insert($);if(ie)throw ie;let J="";p==="total"?J="El pago de ISR se registr correctamente con su asiento contable":p==="credito"?J="La cuenta por pagar de ISR se registr correctamente con su asiento contable":J="El pago parcial de ISR y su cuenta por pagar se registraron correctamente",Le({title:"Registro guardado",description:J}),c(""),u(""),v("total"),g(""),w("transferencia"),C("");const{data:ge}=await ce.from("transacciones_impuestos").select("*").eq("mes",t).eq("ano",s).order("created_at",{ascending:!1});if(ge&&ge.length>0){const je=ge.reduce((ye,Ce)=>ye+Number(Ce.isr_real),0);f({registros:ge,total_acumulado:je,ultimo_registro:ge[0]})}}catch(te){console.error("Error al guardar registro:",te),Le({title:"Error",description:"Hubo un error al guardar el registro",variant:"destructive"})}finally{x(!1)}},F=async()=>{const{data:B,error:q}=await ce.rpc("generate_asiento_number",{p_user_id:""});if(q)throw q;return B},D=B=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(B),X=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return r.jsxs("div",{className:"space-y-6",children:[M()&&!m&&r.jsxs(sr,{variant:"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx(ar,{children:"No puedes crear nuevos registros para perodos pasados. Solo puedes modificar registros existentes."})]}),V&&r.jsxs(sr,{className:"border-amber-500 bg-amber-500/10",children:[r.jsx(Lf,{className:"h-4 w-4 text-amber-600"}),r.jsxs(ar,{className:"text-amber-600 dark:text-amber-400",children:["Atencin! Faltan ",T()," das para el cierre de mes. Asegrate de registrar el ISR antes de que termine el mes."]})]}),E<0&&r.jsxs(sr,{variant:"destructive",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsxs(ar,{children:[" Este perodo tiene prdidas (",D(E),"). No se calcula ISR sobre resultados negativos. Puedes registrar un pago de $0.00 para documentar el perodo, o esperar a tener utilidades positivas."]})]}),m&&r.jsxs(sr,{className:"border-blue-500 bg-blue-500/10",children:[r.jsx(_c,{className:"h-4 w-4 text-blue-600"}),r.jsxs(ar,{className:"text-blue-600 dark:text-blue-400",children:["Has registrado un total acumulado de ",D(m.total_acumulado)," de ISR para ",X[t-1]," ",s,"(",m.registros.length," registro",m.registros.length>1?"s":"","). Puedes continuar agregando pagos adicionales."]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Perodo"}),r.jsx(Me,{children:"Selecciona el mes y ao del registro"})]}),r.jsxs(Q,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"mes",children:"Mes"}),r.jsxs(De,{value:t.toString(),onValueChange:B=>n(parseInt(B)),disabled:!0,children:[r.jsx(ke,{id:"mes",className:"bg-muted text-muted-foreground",children:r.jsx(Fe,{})}),r.jsx($e,{children:X.map((B,q)=>{const te=q+1,Y=e.getMonth()+1;return r.jsx(le,{value:te.toString(),disabled:te!==Y,children:B},te)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ano",children:"Ao"}),r.jsxs(De,{value:s.toString(),onValueChange:B=>a(parseInt(B)),disabled:!0,children:[r.jsx(ke,{id:"ano",className:"bg-muted text-muted-foreground",children:r.jsx(Fe,{})}),r.jsx($e,{children:r.jsx(le,{value:e.getFullYear().toString(),children:e.getFullYear()})})]})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(VF,{className:"h-5 w-5"}),"Clculo de ISR"]}),r.jsx(Me,{children:"Clculo automtico basado en la utilidad antes de impuestos del perodo seleccionado"})]}),r.jsx(Q,{className:"space-y-6",children:P?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando datos del perodo..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Ingresos:"}),r.jsx("span",{className:"font-semibold",children:D((A==null?void 0:A.ingresos)||0)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Costos:"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",D((A==null?void 0:A.costos)||0)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Gastos:"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",D((A==null?void 0:A.gastos)||0)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Depreciacin:"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",D((A==null?void 0:A.depreciacion)||0)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Intereses:"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",D((A==null?void 0:A.intereses)||0)]})]}),r.jsxs("div",{className:"pt-3 border-t border-border flex justify-between items-center",children:[r.jsx("span",{className:"font-semibold",children:"Utilidad Antes de Impuestos:"}),r.jsx("span",{className:"text-xl font-bold text-foreground",children:D(E)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"tasa-isr",children:"Tasa de ISR (%)"}),r.jsx(Ae,{id:"tasa-isr",type:"number",placeholder:"Ej: 30",value:o,onChange:B=>i(B.target.value),step:"0.01",min:"0",max:"100"})]}),r.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:E>0?`ISR Calculado (${o}%)`:"Sin impuesto (prdida del perodo)"}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:D(O)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:E>0?`${o}% de ${D(E)}`:"No se genera ISR con resultados negativos"})]})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Monto Total del ISR"}),r.jsx(Me,{children:"Ingresa el monto TOTAL del ISR que corresponde a este perodo (este es el importe del impuesto, no lo que pagars ahora)"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{htmlFor:"isr-real",className:"text-base font-semibold",children:"Monto TOTAL del ISR *"}),r.jsx(Pe,{type:"button",variant:"outline",size:"sm",onClick:()=>c(O.toFixed(2)),className:"text-xs",children:"Usar ISR Calculado"})]}),r.jsx(Ae,{id:"isr-real",type:"text",placeholder:"Ingresa el importe total del ISR",value:l,onChange:B=>{const q=B.target.value.replace(/,/g,"").replace(/[^\d.]/g,"");(q===""||/^\d*\.?\d*$/.test(q))&&c(q)},onBlur:B=>{const q=parseFloat(l);isNaN(q)||c(q.toFixed(2))},maxLength:20,className:"text-lg font-semibold"}),l&&!isNaN(parseFloat(l))&&r.jsx("p",{className:"text-sm font-medium text-primary",children:parseFloat(l).toLocaleString("es-MX",{style:"currency",currency:"MXN"})}),r.jsxs("p",{className:"text-xs text-muted-foreground bg-blue-50 dark:bg-blue-950/20 p-2 rounded border border-blue-200 dark:border-blue-800",children:[" ",r.jsx("strong",{children:"Importante:"})," Este es el monto total del impuesto que te corresponde pagar. En el siguiente paso elegirs cmo realizars el pago."]})]}),l&&(()=>{const B=m?m.total_acumulado:0,q=O-B,te=parseFloat(l),Y=B+te,H=Y-O;return(parseFloat(l)!==O||m)&&r.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg space-y-2",children:[r.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:r.jsx("span",{className:"font-semibold",children:"Anlisis del registro:"})}),r.jsxs("div",{className:"text-sm text-amber-600 dark:text-amber-400 space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"ISR segn clculo del perodo:"}),r.jsx("span",{className:"font-semibold",children:D(O)})]}),m&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ya has registrado (total acumulado):"}),r.jsx("span",{className:"font-semibold",children:D(B)})]}),r.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-amber-500/20",children:[r.jsxs("span",{children:["Te ",q>=0?"faltaba":"sobraba",":"]}),r.jsx("span",{className:"font-medium",children:D(Math.abs(q))})]})]}),r.jsxs("div",{className:"flex justify-between pt-1 border-t border-amber-500/20",children:[r.jsx("span",{children:"Vas a registrar ahora:"}),r.jsx("span",{className:"font-semibold",children:D(te)})]}),r.jsxs("div",{className:"flex justify-between font-semibold bg-amber-500/20 p-2 rounded",children:[r.jsx("span",{children:"Total que tendrs registrado:"}),r.jsx("span",{children:D(Y)})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t-2 border-amber-500/30",children:[r.jsx("span",{className:"font-semibold",children:"Diferencia final vs clculo:"}),r.jsxs("span",{className:"font-bold",children:[H>0?"+":"",D(H)]})]}),r.jsx("p",{className:"text-xs pt-1 italic",children:Math.abs(H)<.01?" Coincidir exactamente con el clculo":H>0?`${D(Math.abs(H))} por encima del clculo`:`${D(Math.abs(H))} por debajo del clculo`})]})]})})(),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"tipo-pago",className:"text-base font-semibold",children:"Cmo realizars el pago de este ISR? *"}),r.jsxs(De,{value:p,onValueChange:v,children:[r.jsx(ke,{id:"tipo-pago",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"total",children:" Pago Total - Pagar el 100% AHORA"}),r.jsx(le,{value:"parcial",children:" Pago Parcial - Pagar una PARTE ahora y el resto despus"}),r.jsx(le,{value:"credito",children:" A Crdito - NO pagar nada ahora (solo registrar la deuda)"})]})]})]}),p==="credito"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha-vencimiento",children:"Fecha de Vencimiento *"}),r.jsx(Ae,{id:"fecha-vencimiento",type:"date",value:j,onChange:B=>g(B.target.value)})]}),(p==="total"||p==="parcial")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo-pago",children:"Mtodo de Pago *"}),r.jsxs(De,{value:b,onValueChange:w,children:[r.jsx(ke,{id:"metodo-pago",children:r.jsx(Fe,{placeholder:"Selecciona el mtodo de pago"})}),r.jsxs($e,{children:[r.jsx(le,{value:"transferencia",children:"Transferencia"}),r.jsx(le,{value:"efectivo",children:"Efectivo"})]})]})]}),p==="parcial"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 rounded-lg border-2 border-blue-300 dark:border-blue-700",children:[r.jsx(se,{htmlFor:"monto-pagado",className:"text-base font-bold text-blue-900 dark:text-blue-100",children:" Cunto vas a pagar AHORA? *"}),r.jsx(Ae,{id:"monto-pagado",type:"text",placeholder:"Ingresa solo el monto que pagars en este momento",value:S,onChange:B=>{const q=B.target.value.replace(/,/g,"").replace(/[^\d.]/g,"");(q===""||/^\d*\.?\d*$/.test(q))&&C(q)},onBlur:B=>{const q=parseFloat(S);isNaN(q)||C(q.toFixed(2))},maxLength:20,className:"text-lg font-bold border-2"}),S&&!isNaN(parseFloat(S))&&r.jsxs("p",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:[" Pagars: ",parseFloat(S).toLocaleString("es-MX",{style:"currency",currency:"MXN"})]}),r.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 bg-white/50 dark:bg-black/20 p-2 rounded",children:" Este NO es el total del ISR, es solo lo que vas a pagar en este momento. El resto quedar como saldo pendiente."})]}),S&&l&&parseFloat(S)>0&&parseFloat(l)>0&&r.jsxs("div",{className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/20 dark:to-orange-950/20 rounded-lg border-2 border-amber-400 dark:border-amber-700",children:[r.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-100 mb-3 flex items-center gap-2",children:" Resumen del Pago Parcial"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/50 dark:bg-black/20 rounded",children:[r.jsx("span",{className:"text-sm font-medium",children:"Monto TOTAL de ISR:"}),r.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:D(parseFloat(l))})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-green-100 dark:bg-green-900/30 rounded",children:[r.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:" Pagars AHORA:"}),r.jsx("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:D(parseFloat(S))})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-red-100 dark:bg-red-900/30 rounded border-t-2 border-red-300 dark:border-red-700",children:[r.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:" Quedar PENDIENTE:"}),r.jsx("span",{className:"text-xl font-bold text-red-700 dark:text-red-400",children:D(parseFloat(l)-parseFloat(S))})]})]}),r.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-3 italic font-medium",children:" El saldo pendiente se registrar como cuenta por pagar y debers liquidarlo antes de la fecha de vencimiento."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"fecha-vencimiento-parcial",children:"Fecha de Vencimiento del Saldo *"}),r.jsx(Ae,{id:"fecha-vencimiento-parcial",type:"date",value:j,onChange:B=>g(B.target.value)})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"autoridad-fiscal",children:"Autoridad Fiscal *"}),r.jsxs(De,{value:N,onValueChange:_,children:[r.jsx(ke,{id:"autoridad-fiscal",children:r.jsx(Fe,{placeholder:"Selecciona una autoridad fiscal"})}),r.jsx($e,{children:k.length===0?r.jsxs("div",{className:"px-2 py-4 text-sm text-muted-foreground text-center",children:["No hay autoridades fiscales registradas.",r.jsx("br",{}),'Ve al tab "Catlogo" para agregar una.']}):k.map(B=>r.jsx(le,{value:B.id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ya,{className:"h-6 w-6",children:[r.jsx(ba,{src:B.logo_url||void 0}),r.jsx(Na,{className:"text-xs",children:B.nombre.substring(0,2).toUpperCase()})]}),r.jsx("span",{children:B.nombre}),B.pais!=="Mxico"&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",B.pais,")"]})]})},B.id))})]}),N&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["RFC: ",((W=k.find(B=>B.id===N))==null?void 0:W.rfc)||"N/A"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"observaciones",children:"Observaciones (opcional)"}),r.jsx(Kr,{id:"observaciones",placeholder:"Agrega notas o comentarios sobre este registro...",value:d,onChange:B=>u(B.target.value),rows:3})]}),r.jsx(Pe,{className:"w-full",onClick:I,disabled:!l||h||M()||E<=0&&parseFloat(l||"0")!==0,children:h?"Guardando...":"Guardar Nuevo Registro"})]})]})]})},MDe=()=>{var P,k,E;const e=new Date,[t,n]=y.useState([]),[s,a]=y.useState(!0),[o,i]=y.useState("todos"),[l,c]=y.useState(e.getFullYear()),[d,u]=y.useState(null),[m,f]=y.useState(!1),{data:h}=Qj(l);y.useEffect(()=>{const O=async()=>{a(!0);let T=ce.from("transacciones_impuestos").select("*").eq("ano",l);o!=="todos"&&(T=T.eq("mes",parseInt(o)));const{data:V,error:I}=await T.order("created_at",{ascending:!1});if(I)console.error("Error fetching transacciones:",I),n([]);else{const F=await Promise.all((V||[]).map(async D=>{const{data:X}=await ce.from("transacciones_egresos").select("tipo_pago, metodo_pago, monto_pagado, monto_pendiente, cuenta_codigo, created_at").eq("tipo_egreso","impuesto").eq("subtipo_egreso","ISR").ilike("descripcion",`%${p[D.mes-1]}%${D.ano}%`).order("created_at",{ascending:!1}),W=(X==null?void 0:X.find(B=>Math.abs(new Date(B.created_at).getTime()-new Date(D.created_at).getTime())<5e3))||(X==null?void 0:X[0]);return{...D,egreso:W}}));n(F)}a(!1)};O();const M=ce.channel("transacciones_impuestos_changes").on("postgres_changes",{event:"*",schema:"public",table:"transacciones_impuestos"},()=>{O()}).subscribe();return()=>{ce.removeChannel(M)}},[o,l]);const x=O=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(O),p=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],v=async O=>{const{data:M}=await ce.from("asientos_contables").select(`
        *,
        detalle_asientos (
          *,
          cuentas:cuenta_codigo (
            codigo,
            nombre
          )
        )
      `).ilike("descripcion",`%ISR%${p[O.mes-1]}%${O.ano}%`).order("created_at",{ascending:!1}).limit(1).single();M&&(u({...M,transaccion:O}),f(!0))},j=e.getMonth()+1,g=e.getFullYear(),_=(l===g?(h==null?void 0:h.slice(0,j))||[]:h||[]).reduce((O,M)=>O+M.utilidadAntesImpuestos,0),w=_>0?_*.3:0,S=t.reduce((O,M)=>O+Number(M.isr_real),0),C=S-w,A={utilidad:_,calculado:w,real:S,diferencia:C};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Filtros"}),r.jsx(Me,{children:"Filtra las transacciones por perodo"})]}),r.jsxs(Q,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"mes-filtro",children:"Mes"}),r.jsxs(De,{value:o,onValueChange:i,children:[r.jsx(ke,{id:"mes-filtro",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los meses"}),p.map((O,M)=>r.jsx(le,{value:(M+1).toString(),children:O},M+1))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ano-filtro",children:"Ao"}),r.jsxs(De,{value:l.toString(),onValueChange:O=>c(parseInt(O)),children:[r.jsx(ke,{id:"ano-filtro",children:r.jsx(Fe,{})}),r.jsx($e,{children:Array.from({length:5},(O,M)=>e.getFullYear()-M).map(O=>r.jsx(le,{value:O.toString(),children:O},O))})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-3",children:[r.jsxs(Me,{children:["Utilidad Acumulada ",l,l===g&&` (hasta ${p[j-1]})`]}),r.jsx(ae,{className:"text-2xl",children:x(A.utilidad)})]}),r.jsx(Q,{className:"pt-0",children:r.jsx("p",{className:"text-xs text-muted-foreground",children:"Calculada desde asientos contables"})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"ISR Terico (30%)"}),r.jsx(ae,{className:"text-2xl",children:x(A.calculado)})]}),r.jsx(Q,{className:"pt-0",children:r.jsx("p",{className:"text-xs text-muted-foreground",children:"Sobre utilidad acumulada del ao"})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"ISR Registrado"}),r.jsx(ae,{className:"text-2xl",children:x(A.real)})]}),r.jsx(Q,{className:"pt-0",children:r.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," pago",t.length!==1?"s":""," registrado",t.length!==1?"s":""]})})]}),r.jsxs(G,{className:`border-2 ${C>0?"border-amber-500":C<0?"border-red-500":"border-green-500"}`,children:[r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Diferencia"}),r.jsxs(ae,{className:`text-2xl ${C>0?"text-amber-600":C<0?"text-red-600":"text-green-600"}`,children:[C>0?"+":"",x(C)]})]}),r.jsx(Q,{className:"pt-0",children:r.jsxs("p",{className:"text-xs text-muted-foreground",children:[C>0&&" Has pagado ms de lo calculado",C<0&&` Falta pagar ${x(Math.abs(C))}`,C===0&&" Ests al corriente"]})})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-5 w-5"}),"Historial de Transacciones"]}),r.jsx(Me,{children:"Registro detallado mensual del ejercicio fiscal actual"})]}),r.jsx(Q,{children:s?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando transacciones..."}):t.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay transacciones registradas"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Perodo"}),r.jsx(me,{className:"text-right",children:"Utilidad"}),r.jsx(me,{className:"text-right",children:"Tasa"}),r.jsx(me,{className:"text-right",children:"ISR Calculado"}),r.jsx(me,{className:"text-right",children:"ISR Registrado"}),r.jsx(me,{children:"Tipo Pago"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{className:"text-right",children:"Monto Pagado"}),r.jsx(me,{className:"text-right",children:"Saldo Pendiente"}),r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{children:"Acciones"})]})}),r.jsx(kt,{children:t.map(O=>{var M,T,V,I,F,D,X,W,B;return r.jsxs(Oe,{className:"cursor-pointer hover:bg-muted/50",children:[r.jsxs(Z,{className:"font-medium",children:[p[O.mes-1]," ",O.ano]}),r.jsx(Z,{className:"text-right",children:x(O.utilidad_antes_impuestos)}),r.jsxs(Z,{className:"text-right",children:[O.tasa_isr,"%"]}),r.jsx(Z,{className:"text-right",children:x(O.isr_calculado)}),r.jsx(Z,{className:"text-right font-semibold",children:x(O.isr_real)}),r.jsx(Z,{children:((M=O.egreso)==null?void 0:M.tipo_pago)==="contado"?r.jsx(_e,{variant:"secondary",children:"Pago Total"}):((T=O.egreso)==null?void 0:T.tipo_pago)==="credito"?r.jsx(_e,{variant:"outline",children:"A Crdito"}):((V=O.egreso)==null?void 0:V.tipo_pago)==="parcial"?r.jsx(_e,{className:"bg-amber-500",children:"Pago Parcial"}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{children:(I=O.egreso)!=null&&I.metodo_pago?r.jsx("span",{className:"capitalize",children:O.egreso.metodo_pago}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{className:"text-right",children:(F=O.egreso)!=null&&F.monto_pagado?r.jsx("span",{className:"text-green-600 font-semibold",children:x(O.egreso.monto_pagado)}):r.jsx("span",{className:"text-muted-foreground",children:"$0.00"})}),r.jsx(Z,{className:"text-right",children:(D=O.egreso)!=null&&D.monto_pendiente&&O.egreso.monto_pendiente>0?r.jsx("span",{className:"text-red-600 font-semibold",children:x(O.egreso.monto_pendiente)}):r.jsx("span",{className:"text-muted-foreground",children:"$0.00"})}),r.jsx(Z,{children:r.jsx("span",{className:"text-xs font-mono",children:((X=O.egreso)==null?void 0:X.cuenta_codigo)||"-"})}),r.jsx(Z,{children:(W=O.egreso)!=null&&W.monto_pendiente&&O.egreso.monto_pendiente>0?r.jsx(_e,{variant:"destructive",children:"Por Pagar"}):(B=O.egreso)!=null&&B.monto_pagado&&O.egreso.monto_pagado>0?r.jsx(_e,{className:"bg-green-600",children:"Pagado"}):r.jsx(_e,{variant:"secondary",children:"Registrado"})}),r.jsx(Z,{children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>v(O),className:"h-8 w-8 p-0",children:r.jsx(pi,{className:"h-4 w-4"})})})]},O.id)})})]})})})]}),r.jsxs(G,{className:"border-blue-500/20 bg-blue-500/5",children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-sm",children:"Asientos Contables"})}),r.jsxs(Q,{className:"text-sm text-muted-foreground space-y-2",children:[r.jsx("p",{children:"Cada registro de impuesto genera automticamente un asiento contable de doble partida:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Debe:"})," Cuenta 6001 (ISR) - Monto del ISR"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Haber:"})," Cuenta 1002 (Bancos) o 2001 (Proveedores) segn el tipo de pago"]})]}),r.jsx("p",{className:"mt-3",children:"Haz clic en el cono del ojo para ver el desglose contable de cada transaccin."})]})]}),r.jsx(vr,{open:m,onOpenChange:f,children:r.jsxs(mr,{className:"max-w-3xl",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Desglose Contable"}),r.jsxs(mn,{children:["Asiento: ",d==null?void 0:d.numero_asiento," - ",d==null?void 0:d.descripcion]})]}),d&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Fecha:"}),r.jsx("p",{className:"font-medium",children:new Date(d.fecha).toLocaleDateString("es-MX")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"ISR Registrado:"}),r.jsx("p",{className:"font-medium",children:x(d.transaccion.isr_real)})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[(P=d.detalle_asientos)==null?void 0:P.map(O=>{var M;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-mono text-sm font-medium",children:O.cuenta_codigo}),r.jsx("p",{className:"text-xs text-muted-foreground",children:((M=O.cuentas)==null?void 0:M.nombre)||"N/A"})]})}),r.jsx(Z,{children:O.descripcion}),r.jsx(Z,{className:"text-right font-medium",children:O.debe>0?x(O.debe):"-"}),r.jsx(Z,{className:"text-right font-medium",children:O.haber>0?x(O.haber):"-"})]},O.id)}),r.jsxs(Oe,{className:"font-semibold bg-muted/50",children:[r.jsx(Z,{colSpan:2,children:"Total"}),r.jsx(Z,{className:"text-right",children:x(((k=d.detalle_asientos)==null?void 0:k.reduce((O,M)=>O+Number(M.debe),0))||0)}),r.jsx(Z,{className:"text-right",children:x(((E=d.detalle_asientos)==null?void 0:E.reduce((O,M)=>O+Number(M.haber),0))||0)})]})]})]})})]})]})})]})},ODe=()=>{const e=new Date().getFullYear(),t=new Date().getMonth()+1,[n,s]=y.useState(e),[a,o]=y.useState("mensual"),[i,l]=y.useState([]),[c,d]=y.useState(!0),[u]=y.useState("30"),{data:m}=lV(a==="mensual"&&n===e?t:0,n),{data:f}=Qj(e);y.useEffect(()=>{const g=async()=>{if(d(!0),a==="mensual"){const{data:b,error:w}=await ce.from("transacciones_impuestos").select("*").eq("ano",n).order("mes",{ascending:!0});if(w)console.error("Error fetching datos:",w),l([]);else{const C=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"].map((A,P)=>{const k=P+1;if(k===t&&n===e&&m){const E=m.utilidadAntesImpuestos||0,O=E>0?E*parseFloat(u)/100:0,T=(b||[]).filter(V=>V.mes===k).reduce((V,I)=>V+Number(I.isr_real),0);return{periodo:A,calculado:O,registrado:T,diferencia:T-O}}if(k<t||n<e){const E=(b||[]).filter(T=>T.mes===k);if(E.length===0)return{periodo:A,calculado:0,registrado:0,diferencia:0};const O=Number(E[0].isr_calculado),M=E.reduce((T,V)=>T+Number(V.isr_real),0);return{periodo:A,calculado:O,registrado:M,diferencia:M-O}}return{periodo:A,calculado:0,registrado:0,diferencia:0}});l(C)}}else{let b=0,w=0;if(f){const P=f.slice(0,t).reduce((k,E)=>k+E.utilidadAntesImpuestos,0);b=P>0?P*parseFloat(u)/100:0}const{data:S}=await ce.from("transacciones_impuestos").select("isr_real").eq("ano",e);S&&(w=S.reduce((P,k)=>P+Number(k.isr_real),0));const{data:C,error:A}=await ce.from("transacciones_impuestos").select("*").gte("ano",e-4).lt("ano",e);if(A)console.error("Error fetching datos:",A),l([]);else{const P=(C||[]).reduce((E,O)=>(E[O.ano]||(E[O.ano]={calculado:0,registrado:0,mesesContados:new Set}),E[O.ano].mesesContados.has(O.mes)||(E[O.ano].calculado+=Number(O.isr_calculado),E[O.ano].mesesContados.add(O.mes)),E[O.ano].registrado+=Number(O.isr_real),E),{}),k=Object.entries(P).map(([E,O])=>({periodo:E,calculado:O.calculado,registrado:O.registrado,diferencia:O.registrado-O.calculado}));k.push({periodo:e.toString(),calculado:b,registrado:w,diferencia:w-b}),k.sort((E,O)=>parseInt(E.periodo)-parseInt(O.periodo)),l(k)}}d(!1)};g();const N=ce.channel("impuestos_analitica_changes").on("postgres_changes",{event:"*",schema:"public",table:"transacciones_impuestos"},()=>{g()}).subscribe(),_=ce.channel("impuestos_asientos_changes").on("postgres_changes",{event:"*",schema:"public",table:"asientos_contables"},()=>{a==="mensual"&&n===e&&g()}).subscribe();return()=>{ce.removeChannel(N),ce.removeChannel(_)}},[n,a,e,t,m,f]);const h=g=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),x=g=>new Intl.NumberFormat("es-MX",{minimumFractionDigits:0,maximumFractionDigits:0}).format(g),p=a==="mensual"?i.reduce((g,N)=>({calculado:g.calculado+N.calculado,registrado:g.registrado+N.registrado,diferencia:g.registrado+N.registrado-(g.calculado+N.calculado)}),{calculado:0,registrado:0,diferencia:0}):i.find(g=>g.periodo===n.toString())||{calculado:0,registrado:0,diferencia:0};i.length>0&&p.diferencia/i.length;const v=i.length>0?Math.max(...i.map(g=>Math.max(g.calculado,g.registrado,Math.abs(g.diferencia)))):0,j=Math.ceil(v*1.2);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Configuracin de Vista"}),r.jsx(Me,{children:"Selecciona el perodo y tipo de anlisis"})]}),r.jsxs(Q,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"tipo-vista",children:"Tipo de Vista"}),r.jsxs(De,{value:a,onValueChange:g=>o(g),children:[r.jsx(ke,{id:"tipo-vista",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mensual"}),r.jsx(le,{value:"anual",children:"Anual"})]})]})]}),a==="mensual"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ano",children:"Ao"}),r.jsxs(De,{value:n.toString(),onValueChange:g=>s(parseInt(g)),children:[r.jsx(ke,{id:"ano",children:r.jsx(Fe,{})}),r.jsx($e,{children:Array.from({length:5},(g,N)=>e-N).map(g=>r.jsx(le,{value:g.toString(),children:g},g))})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsxs(Me,{children:["Total Calculado ",a==="mensual"?n:""]}),r.jsx(ae,{className:"text-2xl",children:h(p.calculado)})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsxs(Me,{children:["Total Registrado ",a==="mensual"?n:""]}),r.jsx(ae,{className:"text-2xl",children:h(p.registrado)})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsxs(Me,{children:["Diferencia Total ",a==="mensual"?n:""]}),r.jsxs(ae,{className:`text-2xl ${p.diferencia>0?"text-red-600":p.diferencia<0?"text-green-600":""}`,children:[p.diferencia>0?"+":"",h(p.diferencia)]})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-5 w-5"}),"Comparativa ISR Calculado vs Registrado"]}),r.jsxs(Me,{children:["Anlisis histrico ",a==="mensual"?`del ao ${n}`:"de los ltimos 5 aos"]})]}),r.jsx(Q,{children:c?r.jsx("div",{className:"h-80 flex items-center justify-center text-muted-foreground",children:"Cargando datos..."}):i.length===0?r.jsx("div",{className:"h-80 flex items-center justify-center text-muted-foreground",children:"No hay datos disponibles para el perodo seleccionado"}):r.jsx(mt,{width:"100%",height:400,children:r.jsxs($x,{data:i,children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"periodo",className:"text-xs"}),r.jsx(gt,{className:"text-xs",domain:[0,j],tickFormatter:g=>`$${(g/1e3).toFixed(0)}k`}),r.jsx(yt,{formatter:g=>h(g),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"#000000"},labelStyle:{color:"#000000",fontWeight:"bold"},itemStyle:{color:"#000000"}}),r.jsx(jr,{}),r.jsx(rt,{dataKey:"calculado",name:"ISR Calculado",fill:"hsl(var(--chart-1))",radius:[4,4,0,0],label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:g=>`$${x(g)}`}}),r.jsx(rt,{dataKey:"registrado",name:"ISR Registrado",fill:"hsl(var(--chart-2))",radius:[4,4,0,0],label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:g=>`$${x(g)}`}}),r.jsx(Wt,{type:"monotone",dataKey:"diferencia",name:"Diferencia",stroke:"hsl(var(--destructive))",strokeWidth:2,dot:{fill:"hsl(var(--destructive))",r:4},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:g=>`$${x(g)}`}})]})})})]}),i.length>0&&r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Anlisis de Diferencias"}),r.jsx(Me,{children:"Detalle de las variaciones entre ISR calculado y registrado"})]}),r.jsx(Q,{children:r.jsxs(zj,{children:[r.jsx(Vj,{asChild:!0,children:r.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-muted/50 rounded-lg hover:bg-muted transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[r.jsx("span",{className:"font-semibold",children:"Resumen Total:"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Calculado: ",h(p.calculado)]}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Registrado: ",h(p.registrado)]}),r.jsxs("span",{className:`font-semibold ${p.diferencia>0?"text-red-600":p.diferencia<0?"text-green-600":""}`,children:["Diferencia: ",p.diferencia>0?"+":"",h(p.diferencia)]})]}),r.jsx(Po,{className:"h-5 w-5 text-muted-foreground transition-transform duration-200 group-data-[state=open]:rotate-180"})]})}),r.jsx(Wj,{className:"space-y-3 mt-3",children:i.map((g,N)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[r.jsx("span",{className:"font-medium",children:g.periodo}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Calculado: ",h(g.calculado)]}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Registrado: ",h(g.registrado)]}),r.jsxs("span",{className:`font-semibold ${g.diferencia>0?"text-red-600":g.diferencia<0?"text-green-600":""}`,children:[g.diferencia>0?"+":"",h(g.diferencia)]})]})]},N))})]})})]})]})};function TDe(){var M;const{autoridades:e,crearAutoridad:t,actualizarAutoridad:n,eliminarAutoridad:s}=cV(),[a,o]=y.useState(""),[i,l]=y.useState(!1),[c,d]=y.useState(null),[u,m]=y.useState(null),[f,h]=y.useState(null),[x,p]=y.useState(!1),[v,j]=y.useState(!1),[g,N]=y.useState(null),{toast:_}=Rs(),[b,w]=y.useState({nombre:"",rfc:"",logo_url:"",pais:"Mxico",telefono:"",email:"",sitio_web:"",direccion:"",cuenta_bancaria:"",notas:""}),S=e.filter(T=>T.nombre.toLowerCase().includes(a.toLowerCase())||T.pais.toLowerCase().includes(a.toLowerCase())),C=T=>{N(T),j(!0)},A=T=>{T?(d(T),w({nombre:T.nombre,rfc:T.rfc||"",logo_url:T.logo_url||"",pais:T.pais,telefono:T.telefono||"",email:T.email||"",sitio_web:T.sitio_web||"",direccion:T.direccion||"",cuenta_bancaria:T.cuenta_bancaria||"",notas:T.notas||""}),T.logo_url&&h(T.logo_url)):(d(null),w({nombre:"",rfc:"",logo_url:"",pais:"Mxico",telefono:"",email:"",sitio_web:"",direccion:"",cuenta_bancaria:"",notas:""}),m(null),h(null)),l(!0)},P=T=>{var I;const V=(I=T.target.files)==null?void 0:I[0];if(V){if(V.size>2*1024*1024){_({title:" Archivo muy grande",description:"El logo debe pesar menos de 2MB",variant:"destructive"});return}if(!V.type.startsWith("image/")){_({title:" Tipo de archivo invlido",description:"Solo se permiten imgenes",variant:"destructive"});return}m(V);const F=new FileReader;F.onload=D=>{var X;h((X=D.target)==null?void 0:X.result)},F.readAsDataURL(V)}},k=async()=>{if(!u)return b.logo_url;try{p(!0);const T=u.name.split(".").pop(),I=`autoridades-fiscales/${`${Math.random()}.${T}`}`,{error:F}=await ce.storage.from("product-images").upload(I,u);if(F)return _({title:" Error al subir logo",description:F.message,variant:"destructive"}),null;const{data:{publicUrl:D}}=ce.storage.from("product-images").getPublicUrl(I);return _({title:" Logo subido",description:"El logo se ha guardado correctamente"}),D}catch(T){return _({title:" Error inesperado",description:T.message,variant:"destructive"}),null}finally{p(!1)}},E=async()=>{if(!b.nombre){_({title:" Campo requerido",description:"El nombre de la autoridad fiscal es obligatorio",variant:"destructive"});return}try{let T=b.logo_url;if(u){const V=await k();V&&(T=V)}c?await n.mutateAsync({id:c.id,...b,logo_url:T}):await t.mutateAsync({...b,logo_url:T}),l(!1),m(null),h(null)}catch(T){_({title:" Error al guardar",description:T.message,variant:"destructive"})}},O=["Mxico","Estados Unidos","Espaa","Reino Unido","Canad","Otro"];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Autoridades Registradas"}),r.jsx(ae,{className:"text-3xl",children:e.length})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Pas Principal"}),r.jsx(ae,{className:"text-2xl",children:e.length>0&&e.reduce((T,V)=>(T[V.pais]=(T[V.pais]||0)+1,T),{}).constructor===Object&&((M=Object.entries(e.reduce((T,V)=>(T[V.pais]=(T[V.pais]||0)+1,T),{})).sort(([,T],[,V])=>V-T)[0])==null?void 0:M[0])||"N/A"})]})}),r.jsx(G,{children:r.jsxs(ne,{className:"pb-3",children:[r.jsx(Me,{children:"Con Logo"}),r.jsx(ae,{className:"text-3xl",children:e.filter(T=>T.logo_url).length})]})})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar autoridad fiscal...",value:a,onChange:T=>o(T.target.value),className:"pl-10"})]}),r.jsxs(Pe,{onClick:()=>A(),children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Nueva Autoridad"]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Catlogo de Autoridades Fiscales"}),r.jsx(Me,{children:"Gestiona las autoridades fiscales de diferentes pases"})]}),r.jsx(Q,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Autoridad"}),r.jsx(me,{children:"RFC/Identificador"}),r.jsx(me,{children:"Pas"}),r.jsx(me,{children:"Contacto"}),r.jsx(me,{className:"text-right",children:"Acciones"})]})}),r.jsx(kt,{children:S.length===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:5,className:"text-center text-muted-foreground py-8",children:'No hay autoridades fiscales registradas. Haz clic en "Nueva Autoridad" para agregar una.'})}):S.map(T=>r.jsxs(Oe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>C(T),children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ya,{className:"h-10 w-10",children:[r.jsx(ba,{src:T.logo_url||void 0}),r.jsx(Na,{children:r.jsx(pl,{className:"h-5 w-5"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:T.nombre}),T.sitio_web&&r.jsxs("a",{href:T.sitio_web,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1",onClick:V=>V.stopPropagation(),children:[r.jsx(rA,{className:"h-3 w-3"}),"Sitio web"]})]})]})}),r.jsx(Z,{children:T.rfc?r.jsx("span",{className:"font-mono text-sm",children:T.rfc}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Sin RFC"})}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:T.pais})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-1",children:[T.telefono&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bf,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-xs",children:T.telefono})]}),T.email&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(aS,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-xs",children:T.email})]})]})}),r.jsx(Z,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"sm",onClick:V=>{V.stopPropagation(),A(T)},children:r.jsx(Ao,{className:"h-4 w-4"})}),r.jsx(Pe,{variant:"ghost",size:"sm",onClick:V=>{V.stopPropagation(),s.mutate(T.id)},children:r.jsx(xs,{className:"h-4 w-4"})})]})})]},T.id))})]})})]}),r.jsx(vr,{open:i,onOpenChange:l,children:r.jsxs(mr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:c?"Editar Autoridad Fiscal":"Nueva Autoridad Fiscal"}),r.jsx(mn,{children:c?"Modifica los datos de la autoridad fiscal":"Registra una nueva autoridad fiscal"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre de la Autoridad *"}),r.jsx(Ae,{id:"nombre",value:b.nombre,onChange:T=>w({...b,nombre:T.target.value}),placeholder:"Ej: SAT - Servicio de Administracin Tributaria"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Logo de la Autoridad"}),f&&r.jsxs("div",{className:"relative w-32 h-32 border rounded-lg overflow-hidden",children:[r.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-contain"}),r.jsx(Pe,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:()=>{m(null),h(null),w({...b,logo_url:""})},children:r.jsx(xs,{className:"h-4 w-4"})})]}),!f&&r.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:r.jsxs("label",{className:"cursor-pointer",children:[r.jsx(zf,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Haz clic para subir una imagen"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG hasta 2MB"}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:P})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"rfc",children:"RFC / Identificador Fiscal"}),r.jsx(Ae,{id:"rfc",value:b.rfc,onChange:T=>w({...b,rfc:T.target.value}),placeholder:"Ej: SAT970701NN3"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"pais",children:"Pas"}),r.jsx("select",{id:"pais",value:b.pais,onChange:T=>w({...b,pais:T.target.value}),className:"w-full h-10 px-3 py-2 text-sm rounded-md border border-input bg-background",children:O.map(T=>r.jsx("option",{value:T,children:T},T))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"telefono",children:"Telfono"}),r.jsx(Ae,{id:"telefono",value:b.telefono,onChange:T=>w({...b,telefono:T.target.value}),placeholder:"Ej: 55 5555 5555"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"email",children:"Email"}),r.jsx(Ae,{id:"email",type:"email",value:b.email,onChange:T=>w({...b,email:T.target.value}),placeholder:"Ej: contacto@sat.gob.mx"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"sitio_web",children:"Sitio Web"}),r.jsx(Ae,{id:"sitio_web",value:b.sitio_web,onChange:T=>w({...b,sitio_web:T.target.value}),placeholder:"Ej: https://www.sat.gob.mx"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"direccion",children:"Direccin"}),r.jsx(Ae,{id:"direccion",value:b.direccion,onChange:T=>w({...b,direccion:T.target.value}),placeholder:"Direccin fsica de la autoridad"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"cuenta_bancaria",children:"Cuenta Bancaria / CLABE"}),r.jsx(Ae,{id:"cuenta_bancaria",value:b.cuenta_bancaria,onChange:T=>w({...b,cuenta_bancaria:T.target.value}),placeholder:"Ej: 012180001234567890"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"notas",children:"Notas"}),r.jsx(Kr,{id:"notas",value:b.notas,onChange:T=>w({...b,notas:T.target.value}),placeholder:"Notas adicionales...",rows:3})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[r.jsx(Pe,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),r.jsx(Pe,{onClick:E,disabled:x,children:x?"Guardando...":"Guardar"})]})]})}),r.jsx(vr,{open:v,onOpenChange:j,children:r.jsx(mr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:g&&r.jsxs(r.Fragment,{children:[r.jsx(fr,{children:r.jsxs("div",{className:"flex items-start gap-4",children:[g.logo_url?r.jsx("img",{src:g.logo_url,alt:g.nombre,className:"w-16 h-16 object-contain rounded-lg border"}):r.jsx("div",{className:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center",children:r.jsx(pl,{className:"w-8 h-8 text-muted-foreground"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx(hr,{className:"text-2xl",children:g.nombre}),r.jsx(_e,{variant:"secondary",className:"mt-2",children:g.pais})]})]})}),r.jsxs("div",{className:"space-y-6 mt-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[r.jsx(On,{className:"w-4 h-4"}),"Informacin General"]}),r.jsx("div",{className:"h-px bg-border"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"RFC/Identificador:"}),r.jsx("p",{className:"font-medium mt-1",children:g.rfc||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Pas:"}),r.jsx("p",{className:"font-medium mt-1",children:g.pais})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[r.jsx(Bf,{className:"w-4 h-4"}),"Informacin de Contacto"]}),r.jsx("div",{className:"h-px bg-border"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Telfono:"}),r.jsx("p",{className:"font-medium mt-1",children:g.telefono||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Email:"}),r.jsx("p",{className:"font-medium mt-1",children:g.email||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Sitio Web:"}),g.sitio_web?r.jsxs("a",{href:g.sitio_web,target:"_blank",rel:"noopener noreferrer",className:"font-medium mt-1 flex items-center gap-2 text-primary hover:underline",children:[r.jsx(rA,{className:"w-4 h-4"}),g.sitio_web]}):r.jsx("p",{className:"font-medium mt-1",children:"No especificado"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Direccin:"}),r.jsx("p",{className:"font-medium mt-1",children:g.direccion||"No especificado"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[r.jsx(li,{className:"w-4 h-4"}),"Informacin Bancaria"]}),r.jsx("div",{className:"h-px bg-border"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Cuenta Bancaria / CLABE:"}),g.cuenta_bancaria?r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("p",{className:"font-medium font-mono",children:g.cuenta_bancaria}),r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(g.cuenta_bancaria||""),_({title:" Cuenta copiada al portapapeles"})},children:r.jsx(Qq,{className:"w-4 h-4"})})]}):r.jsx("p",{className:"font-medium mt-1",children:"No especificado"})]})]}),g.notas&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[r.jsx(On,{className:"w-4 h-4"}),"Notas"]}),r.jsx("div",{className:"h-px bg-border"}),r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:g.notas})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsxs(Pe,{variant:"outline",onClick:()=>{j(!1),A(g)},children:[r.jsx(Ao,{className:"w-4 h-4 mr-2"}),"Editar"]}),r.jsx(Pe,{onClick:()=>j(!1),children:"Cerrar"})]})]})})})]})}const kDe=()=>r.jsx("div",{className:"min-h-screen bg-background p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gestin de Impuestos"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Calcula, registra y analiza el ISR basado en la utilidad antes de impuestos"})]}),r.jsxs(Lr,{defaultValue:"registro",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-4",children:[r.jsx(Qe,{value:"registro",children:"Registro"}),r.jsx(Qe,{value:"resumen",children:"Resumen"}),r.jsx(Qe,{value:"analitica",children:"Analtica"}),r.jsx(Qe,{value:"catalogo",children:"Catlogo"})]}),r.jsx(Je,{value:"registro",className:"space-y-6 mt-6",children:r.jsx(EDe,{})}),r.jsx(Je,{value:"resumen",className:"space-y-6 mt-6",children:r.jsx(MDe,{})}),r.jsx(Je,{value:"analitica",className:"space-y-6 mt-6",children:r.jsx(ODe,{})}),r.jsx(Je,{value:"catalogo",className:"space-y-6 mt-6",children:r.jsx(TDe,{})})]})]})}),$De=(e="mensual",t)=>it({queryKey:["analytics-cuentas-por-cobrar",e,t],queryFn:async()=>{const{data:n,error:s}=await ce.from("transacciones_ingresos").select("*").gt("monto_pendiente",0).eq("estado","activo").order("created_at",{ascending:!1});if(s)throw s;const{data:a,error:o}=await ce.from("inversiones_capex").select("*").gt("monto_pendiente_venta",0).eq("estado","vendido");if(o)throw o;const{data:i,error:l}=await ce.from("detalle_asientos").select(`
          debe,
          haber,
          asientos_contables!inner(fecha)
        `).eq("cuenta_codigo","1003").order("asientos_contables(fecha)",{ascending:!0});if(l)throw l;const c=(a||[]).map(k=>({id:k.id,cliente_nombre:k.comprador_nombre,monto_pendiente:k.monto_pendiente_venta||0,monto_neto:k.valor_venta||0,monto_pagado:k.monto_pagado_venta||0,fecha_vencimiento:k.fecha_vencimiento_venta,created_at:k.fecha_baja||k.created_at,updated_at:k.updated_at,descripcion:`Venta de activo: ${k.producto_nombre}`,dias_vencimiento:null}));let d=[...n||[],...c];t&&t!=="todos"&&(d=d.filter(k=>(k.cliente_nombre||"Sin nombre")===t));const u=new Date,m=d.map(k=>{let E=null;if(k.fecha_vencimiento){const O=new Date(k.fecha_vencimiento);E=Math.floor((u.getTime()-O.getTime())/(1e3*60*60*24))}return{...k,dias_vencimiento:E}}),f=m.reduce((k,E)=>k+E.monto_pendiente,0),h=new Set(m.map(k=>k.cliente_nombre||"Sin nombre")).size,x=f/(m.length||1),p=m.reduce((k,E)=>{const O=E.cliente_nombre||"Sin nombre";return k[O]||(k[O]={monto:0,cantidad:0}),k[O].monto+=E.monto_pendiente,k[O].cantidad+=1,k},{}),v=Object.entries(p).map(([k,E])=>({cliente:k,...E})).sort((k,E)=>E.monto-k.monto).slice(0,10),g=[{rango:"0-30 das",min:0,max:30},{rango:"31-60 das",min:31,max:60},{rango:"61-90 das",min:61,max:90},{rango:"90+ das",min:91,max:1/0}].map(k=>{const E=m.filter(O=>O.dias_vencimiento!==null&&O.dias_vencimiento>=k.min&&O.dias_vencimiento<=k.max);return{rango:k.rango,monto:E.reduce((O,M)=>O+M.monto_pendiente,0),cantidad:E.length}}),_=[{rango:"Sin vencimiento",min:null,max:null},{rango:"Vencido 1-15 das",min:1,max:15},{rango:"Vencido 16-30 das",min:16,max:30},{rango:"Vencido 31-60 das",min:31,max:60},{rango:"Vencido 61-90 das",min:61,max:90},{rango:"Vencido +90 das",min:91,max:1/0}].map(k=>{const E=m.filter(O=>{if(k.min===null&&k.max===null)return O.dias_vencimiento===null||O.dias_vencimiento!==null&&O.dias_vencimiento<0;if(O.dias_vencimiento===null)return!1;const M=O.dias_vencimiento;return M>=k.min&&M<=k.max});return{rango:k.rango,monto:E.reduce((O,M)=>O+M.monto_pendiente,0),cantidad:E.length,min:k.min,max:k.max}}),b=[],w=k=>{const E=new Date(k);E.setHours(23,59,59,999);const M=(i||[]).filter(T=>new Date(T.asientos_contables.fecha)<=E).reduce((T,V)=>T+(V.debe-V.haber),0);return Math.max(0,M)};if(e==="mensual"){const k=new Date,E=k.getFullYear(),O=k.getMonth(),M=k.getDate();for(let T=1;T<=M;T++){const V=new Date(E,O,T,23,59,59,999),I=w(V);b.push({fecha:V.toLocaleDateString("es-ES",{day:"2-digit",month:"short"}),saldo:Math.max(0,I)})}}else if(e==="anual"){const k=new Date,E=k.getFullYear(),O=k.getMonth();for(let M=0;M<=O;M++){const T=new Date(E,M+1,0,23,59,59,999),V=w(T);b.push({fecha:T.toLocaleDateString("es-ES",{month:"short",year:"2-digit"}),saldo:Math.max(0,V)})}}const S=m.reduce((k,E)=>{const O=E.cliente_nombre||"Sin nombre";k[O]||(k[O]={sinVencimiento:0,vencido1_15:0,vencido16_30:0,vencido31_60:0,vencido61_90:0,vencidoMas90:0,total:0});const M=E.monto_pendiente;if(E.dias_vencimiento===null||E.dias_vencimiento<0)k[O].sinVencimiento+=M;else{const T=E.dias_vencimiento;T>=1&&T<=15?k[O].vencido1_15+=M:T>=16&&T<=30?k[O].vencido16_30+=M:T>=31&&T<=60?k[O].vencido31_60+=M:T>=61&&T<=90?k[O].vencido61_90+=M:k[O].vencidoMas90+=M}return k[O].total+=M,k},{}),C=Object.entries(S).map(([k,E])=>({cliente:k,...E})).sort((k,E)=>E.total-k.total),A=6,P=[];for(let k=A-1;k>=0;k--){const E=new Date;E.setMonth(E.getMonth()-k);const O=E.getFullYear(),M=E.getMonth(),T=m.filter(I=>{const F=new Date(I.created_at);return F.getFullYear()===O&&F.getMonth()===M}),V=E.toLocaleDateString("es-ES",{month:"short",year:"2-digit"});P.push({mes:V,monto:T.reduce((I,F)=>I+F.monto_pendiente,0)})}return{totalPendiente:f,totalClientes:h,promedioDeuda:x,cuentasPorCliente:v,agingAnalysis:g,tendenciaMensual:P,agingAnalysisDetailed:_,historicoCxC:b,cxcPorClienteApilado:C}}}),DDe=()=>it({queryKey:["cuentas-por-cobrar-detalle"],queryFn:async()=>{const{data:e,error:t}=await ce.from("transacciones_ingresos").select("*").gt("monto_pendiente",0).eq("estado","activo").order("fecha_vencimiento",{ascending:!0,nullsFirst:!1});if(t)throw t;const{data:n,error:s}=await ce.from("inversiones_capex").select("*").gt("monto_pendiente_venta",0).eq("estado","vendido");if(s)throw s;const a=(n||[]).map(l=>({id:l.id,cliente_nombre:l.comprador_nombre,monto_pendiente:l.monto_pendiente_venta||0,monto_neto:l.valor_venta||0,monto_pagado:l.monto_pagado_venta||0,fecha_vencimiento:l.fecha_vencimiento_venta,created_at:l.fecha_baja||l.created_at,updated_at:l.updated_at,descripcion:`Venta de activo: ${l.producto_nombre}`,tipo_ingreso:"venta_activo",cuenta_principal_codigo:"4103",metodo_pago:l.metodo_pago_venta,tipo_pago:l.tipo_pago_venta,cliente_telefono:l.comprador_telefono,cliente_email:l.comprador_email,cliente_rfc:l.comprador_rfc,comentarios:l.motivo_baja,estado:"activo",motivo_cancelacion:null,fecha_cancelacion:null,transaccion_cancelacion_id:null,subcuenta_id:null,monto_total:l.valor_venta||0,monto_descuento:0,user_id:l.user_id})),o=[...e||[],...a],i=new Date;return o.map(l=>{let c=0,d="Al da";if(l.fecha_vencimiento){const u=new Date(l.fecha_vencimiento);c=Math.floor((i.getTime()-u.getTime())/(1e3*60*60*24)),c>90?d="Muy vencida":c>30||c>=1?d="Vencida":c<0&&(d="Por vencer")}else c=0,d="Sin fecha lmite";return{...l,diasVencimiento:c,estado:d}})}}),px={primary:"hsl(var(--chart-1))",secondary:"hsl(var(--chart-2))",accent:"hsl(var(--chart-3))",destructive:"hsl(var(--destructive))",warning:"hsl(var(--warning))",success:"hsl(var(--success))"},Vk=e=>{const{x:t,y:n,width:s,height:a,index:o,filtroAntiguedad:i,dataFiltradaCliente:l,formatearConPreferenciasAnalitica:c}=e;if(!l||!l[o])return null;const d=l[o],u=i==="todos"?d.total:d[i]||0,m=t+s+8,f=n+a/2;return r.jsx("text",{x:m,y:f,fill:"hsl(var(--foreground))",fontSize:"11",fontWeight:"600",textAnchor:"start",dominantBaseline:"middle",children:c(u)})},FDe=()=>{var wt,pt,Be,Ye,ft,Bt,_t,Zt,pn;const[e,t]=y.useState(""),[n,s]=y.useState("lista"),[a,o]=y.useState(!1),[i,l]=y.useState(null),[c,d]=y.useState(""),[u,m]=y.useState(""),[f,h]=y.useState("todos"),[x,p]=y.useState("mensual"),[v,j]=y.useState("todos"),[g,N]=y.useState(""),[_,b]=y.useState("todos"),[w,S]=y.useState("todos"),[C,A]=y.useState("ninguno"),[P,k]=y.useState("todos"),[E,O]=y.useState("todos"),[M,T]=y.useState("todos"),[V,I]=y.useState("todos"),[F,D]=y.useState("todos"),[X,W]=y.useState("todos"),[B,q]=y.useState("ninguno"),[te,Y]=y.useState(!1),[H,L]=y.useState(null),[ue,pe]=y.useState(new Set),[we,re]=y.useState(!1),[de,he]=y.useState(null),[ee,z]=y.useState("normal"),[U,oe]=y.useState(2),Se=fe=>{let be=fe,tt="";return ee==="miles"?(be=fe/1e3,tt="K"):ee==="millones"&&(be=fe/1e6,tt="M"),`$${be.toLocaleString("en-US",{minimumFractionDigits:U,maximumFractionDigits:U})}${tt}`},{data:Ne,isLoading:$}=it({queryKey:["todas-transacciones-ingresos"],queryFn:async()=>{const{data:fe,error:be}=await ce.from("transacciones_ingresos").select("*").order("created_at",{ascending:!1});if(be)throw be;return fe||[]}}),ie=Gr();y.useEffect(()=>{const fe=ce.channel("cuentas-por-cobrar-ingresos").on("postgres_changes",{event:"*",schema:"public",table:"transacciones_ingresos"},()=>{ie.invalidateQueries({queryKey:["cuentas-por-cobrar-detalle"]}),ie.invalidateQueries({queryKey:["analytics-cuentas-por-cobrar"]})}).subscribe(),be=ce.channel("cuentas-por-cobrar-inversiones").on("postgres_changes",{event:"*",schema:"public",table:"inversiones_capex",filter:"estado=eq.vendido"},()=>{ie.invalidateQueries({queryKey:["cuentas-por-cobrar-detalle"]}),ie.invalidateQueries({queryKey:["analytics-cuentas-por-cobrar"]})}).subscribe();return()=>{ce.removeChannel(fe),ce.removeChannel(be)}},[ie]);const{data:J,isLoading:ge}=$De(x,v),{data:je,isLoading:ye}=DDe(),Ce=Array.from(new Set((je==null?void 0:je.map(fe=>fe.cliente_nombre||"Sin nombre").filter(Boolean))||[])).sort(),{data:We,isLoading:$t}=it({queryKey:["asientos-contables-transaccion",H],queryFn:async()=>{if(!H)return null;const{data:fe,error:be}=await ce.from("asientos_contables").select(`
          *,
          detalle_asientos (
            *,
            cuentas:cuenta_codigo (
              codigo,
              nombre,
              estado_financiero,
              grupo
            ),
            subcuentas (
              id,
              nombre
            )
          )
        `).eq("transaccion_ingreso_id",H).single();return be?(console.error("Error fetching asiento:",be),null):fe},enabled:!!H&&te}),{data:nr,isLoading:en}=it({queryKey:["historial-pagos",de],queryFn:async()=>{if(!de)return[];const{data:fe,error:be}=await ce.from("transacciones_cobros_pagos").select("*").eq("referencia_id",de).eq("tipo_transaccion","cobro").order("fecha",{ascending:!1});if(be)return console.error("Error fetching historial:",be),[];if(!(fe==null?void 0:fe.some(dt=>{var Jt;return(Jt=dt.descripcion)==null?void 0:Jt.includes("Pago inicial")}))){const{data:dt,error:Jt}=await ce.from("transacciones_ingresos").select("*").eq("id",de).single();if(!Jt&&dt&&dt.monto_pagado>0)return[{id:`inicial-${de}`,user_id:dt.user_id,tipo_transaccion:"cobro",referencia_id:de,referencia_tabla:"transacciones_ingresos",monto:dt.monto_pagado,metodo_pago:dt.metodo_pago,fecha:new Date(dt.created_at).toISOString().split("T")[0],descripcion:`Pago inicial - ${dt.descripcion}`,created_at:dt.created_at,updated_at:dt.created_at,_es_pago_inicial:!0},...fe||[]]}return fe||[]},enabled:!!de&&we}),Ee=Qt({mutationFn:async({cuentaId:fe,monto:be,metodo:tt,tipoRegistro:dt})=>{const Jt=je==null?void 0:je.find(Rl=>Rl.id===fe);if(!Jt)throw new Error("Cuenta no encontrada");const Er=(Jt.monto_pendiente||0)-be,bs=(Jt.monto_pagado||0)+be;if(dt==="venta_activo"){const{error:Rl}=await ce.from("inversiones_capex").update({monto_pendiente_venta:Math.max(0,Er),monto_pagado_venta:bs,tipo_pago_venta:Er<=0?"contado":"parcial"}).eq("id",fe);if(Rl)throw Rl}else{const{error:Rl}=await ce.from("transacciones_ingresos").update({monto_pendiente:Math.max(0,Er),monto_pagado:bs,tipo_pago:Er<=0?"contado":"parcial"}).eq("id",fe);if(Rl)throw Rl}const{data:{user:Zn}}=await ce.auth.getUser();if(!Zn)throw new Error("Usuario no autenticado");const Zj=dt==="venta_activo"?"inversiones_capex":"transacciones_ingresos",{error:IC}=await ce.from("transacciones_cobros_pagos").insert({user_id:Zn.id,tipo_transaccion:"cobro",referencia_id:fe,referencia_tabla:Zj,monto:be,metodo_pago:tt,fecha:new Date().toISOString().split("T")[0],descripcion:`Cobro de ${Jt.cliente_nombre||"Cliente"}: ${Jt.descripcion}`});if(IC)throw IC;return{cuentaId:fe,monto:be,metodo:tt}},onSuccess:()=>{ie.invalidateQueries({queryKey:["cuentas-por-cobrar-detalle"]}),ie.invalidateQueries({queryKey:["analytics-cuentas-por-cobrar"]}),Xt.success("Pago registrado exitosamente"),o(!1),Re()},onError:fe=>{Xt.error("Error al registrar el pago: "+fe.message)}}),He=(()=>{let fe=(je==null?void 0:je.filter(be=>{var tt,dt,Jt,Er,bs;return((tt=be.cliente_nombre)==null?void 0:tt.toLowerCase().includes(e.toLowerCase()))||((dt=be.descripcion)==null?void 0:dt.toLowerCase().includes(e.toLowerCase()))||((Jt=be.cliente_telefono)==null?void 0:Jt.toLowerCase().includes(e.toLowerCase()))||((Er=be.cliente_email)==null?void 0:Er.toLowerCase().includes(e.toLowerCase()))||((bs=be.cliente_rfc)==null?void 0:bs.toLowerCase().includes(e.toLowerCase()))}))||[];if(_!=="todos"&&(fe=fe.filter(be=>be.cliente_nombre===_)),w!=="todos"){const be=new Date;fe=fe.filter(tt=>w==="vencida"?tt.fecha_vencimiento&&new Date(tt.fecha_vencimiento)<be:w==="porVencer"?tt.fecha_vencimiento&&new Date(tt.fecha_vencimiento)>=be:w==="sinVencimiento"?!tt.fecha_vencimiento:w==="cobrado"?tt.monto_pendiente===0:!0)}return C==="menorMayor"?fe=[...fe].sort((be,tt)=>(be.monto_pendiente||0)-(tt.monto_pendiente||0)):C==="mayorMenor"&&(fe=[...fe].sort((be,tt)=>(tt.monto_pendiente||0)-(be.monto_pendiente||0))),fe})(),Vt=He.reduce((fe,be)=>fe+(be.monto_pendiente||0),0),At=He.filter(fe=>fe.fecha_vencimiento&&new Date(fe.fecha_vencimiento)<new Date).length,R=He.filter(fe=>fe.fecha_vencimiento&&new Date(fe.fecha_vencimiento)>=new Date).length,xe=fe=>{l(fe),d(""),m(""),o(!0)},Re=()=>{l(null),d(""),m("")},Ve=()=>{if(!i||!c||!u){Xt.error("Por favor completa todos los campos");return}const fe=parseFloat(c);if(isNaN(fe)||fe<=0){Xt.error("El monto debe ser un nmero vlido mayor a 0");return}if(fe>(i.monto_pendiente||0)){Xt.error("El monto no puede ser mayor al monto pendiente");return}const be=i.tipo_ingreso==="venta_activo"?"venta_activo":"ingreso";Ee.mutate({cuentaId:i.id,monto:fe,metodo:u,tipoRegistro:be})},Xe=(fe,be)=>be===0?r.jsx(_e,{variant:"secondary",children:"Cobrado"}):fe?new Date(fe)<new Date?r.jsx(_e,{variant:"destructive",children:"Vencida"}):r.jsx(_e,{variant:"default",children:"Por vencer"}):r.jsx(_e,{variant:"outline",children:"Sin vencimiento"}),nt=(()=>{const fe=new Map;return He.forEach(be=>{const tt=be.cliente_nombre||"Sin cliente asignado";fe.has(tt)||fe.set(tt,{cliente:tt,facturas:[],totalPendiente:0,totalOriginal:0,totalPagado:0,contacto:{telefono:be.cliente_telefono,email:be.cliente_email,rfc:be.cliente_rfc}});const dt=fe.get(tt);dt.facturas.push(be),dt.totalPendiente+=be.monto_pendiente||0,dt.totalOriginal+=be.monto_total||0,dt.totalPagado+=be.monto_pagado||0}),Array.from(fe.values())})(),st=fe=>{const be=new Set(ue);be.has(fe)?be.delete(fe):be.add(fe),pe(be)},Nt=fe=>{he(fe),re(!0)};return ye?r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-muted-foreground",children:"Cargando cuentas por cobrar..."})})}):r.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cuentas por Cobrar"}),r.jsx("p",{className:"text-muted-foreground",children:"Gestiona y da seguimiento a las cuentas pendientes de cobro"})]})}),r.jsxs(Lr,{value:n,onValueChange:s,className:"space-y-6",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-3",children:[r.jsxs(Qe,{value:"lista",className:"flex items-center gap-2",children:[r.jsx(Zo,{className:"h-4 w-4"}),"Lista de Cuentas"]}),r.jsxs(Qe,{value:"transacciones",className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Resumen de Transacciones"]}),r.jsxs(Qe,{value:"analiticas",className:"flex items-center gap-2",children:[r.jsx(Ku,{className:"h-4 w-4"}),"Analticas"]})]}),r.jsxs(Je,{value:"lista",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total por Cobrar"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:Ke(Vt)})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Cuentas Vencidas"}),r.jsx(Ht,{className:"h-4 w-4 text-destructive"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-destructive",children:At})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Por Vencer"}),r.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:R})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total Cuentas"}),r.jsx(Zo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:He.length})})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"h-5 w-5"}),"Filtrar Cuentas"]})}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx(se,{htmlFor:"busqueda-general",className:"mb-2 block",children:"Bsqueda General"}),r.jsx(Ae,{id:"busqueda-general",placeholder:"Buscar por cliente, descripcin, telfono, email o RFC...",value:e,onChange:fe=>t(fe.target.value)})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-cliente",className:"mb-2 block",children:"Cliente"}),r.jsxs(De,{value:_,onValueChange:b,children:[r.jsx(ke,{id:"filtro-cliente",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los clientes"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los clientes"}),Array.from(new Set((je||[]).map(fe=>fe.cliente_nombre).filter(Boolean))).sort().map(fe=>r.jsx(le,{value:fe,children:fe},fe))]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-estado",className:"mb-2 block",children:"Estado"}),r.jsxs(De,{value:w,onValueChange:S,children:[r.jsx(ke,{id:"filtro-estado",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los estados"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los estados"}),r.jsx(le,{value:"vencida",children:"Vencida"}),r.jsx(le,{value:"porVencer",children:"Por vencer"}),r.jsx(le,{value:"sinVencimiento",children:"Sin vencimiento"}),r.jsx(le,{value:"cobrado",children:"Cobrado"})]})]})]}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx(se,{htmlFor:"orden-monto",className:"mb-2 block",children:"Ordenar por Monto"}),r.jsxs(De,{value:C,onValueChange:A,children:[r.jsx(ke,{id:"orden-monto",className:"bg-background",children:r.jsx(Fe,{placeholder:"Sin ordenar"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"ninguno",children:"Sin ordenar"}),r.jsx(le,{value:"menorMayor",children:"Menor a Mayor"}),r.jsx(le,{value:"mayorMenor",children:"Mayor a Menor"})]})]})]}),r.jsx("div",{className:"lg:col-span-2 flex items-end",children:r.jsx(Pe,{variant:"outline",onClick:()=>{t(""),b("todos"),S("todos"),A("ninguno")},className:"w-full",children:"Limpiar Filtros"})})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Listado de Cuentas por Cobrar"})}),r.jsx(Q,{children:nt.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No se encontraron cuentas por cobrar."})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{className:"w-[50px]"}),r.jsx(me,{children:"Cliente"}),r.jsx(me,{children:"Informacin de Contacto"}),r.jsx(me,{children:"Total Pendiente"}),r.jsx(me,{children:"Facturas"})]})}),r.jsx(kt,{children:nt.map(fe=>r.jsxs(r.Fragment,{children:[r.jsxs(Oe,{className:"bg-muted/50 hover:bg-muted cursor-pointer font-medium",onClick:()=>st(fe.cliente),children:[r.jsx(Z,{children:ue.has(fe.cliente)?r.jsx(Po,{className:"w-5 h-5"}):r.jsx(Ua,{className:"w-5 h-5"})}),r.jsx(Z,{className:"font-semibold",children:fe.cliente}),r.jsx(Z,{className:"min-w-[200px]",children:r.jsxs("div",{className:"space-y-1",children:[fe.contacto.telefono&&r.jsxs("div",{className:"text-sm",children:[" ",fe.contacto.telefono]}),fe.contacto.email&&r.jsxs("div",{className:"text-sm",children:[" ",fe.contacto.email]}),fe.contacto.rfc&&r.jsxs("div",{className:"text-sm",children:[" ",fe.contacto.rfc]}),!fe.contacto.telefono&&!fe.contacto.email&&!fe.contacto.rfc&&r.jsx("span",{className:"text-muted-foreground text-sm",children:"Sin informacin de contacto"})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-lg font-bold text-primary",children:Ke(fe.totalPendiente)}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",Ke(fe.totalOriginal)]}),fe.totalPagado>0&&r.jsxs("div",{className:"text-sm text-success",children:["Pagado: ",Ke(fe.totalPagado)]})]})}),r.jsx(Z,{children:r.jsxs(_e,{variant:"outline",children:[fe.facturas.length," ",fe.facturas.length===1?"factura":"facturas"]})})]},`cliente-${fe.cliente}`),ue.has(fe.cliente)&&fe.facturas.map(be=>r.jsxs(Oe,{className:"bg-background",children:[r.jsx(Z,{}),r.jsx(Z,{colSpan:5,children:r.jsx("div",{className:"pl-4 border-l-2 border-primary/30 ml-4",children:r.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[r.jsxs("div",{className:"col-span-3",children:[r.jsx("div",{className:"font-medium",children:be.descripcion}),r.jsx("div",{className:"text-xs text-muted-foreground",children:ze(new Date(be.created_at),"dd/MM/yyyy",{locale:ht})})]}),r.jsx("div",{className:"col-span-3",children:r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total:"}),r.jsx("span",{className:"font-medium",children:Ke(be.monto_total)})]}),be.monto_descuento&&be.monto_descuento>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Descuento:"}),r.jsxs("span",{className:"text-destructive",children:["-",Ke(be.monto_descuento)]})]}),be.monto_pagado>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Pagado:"}),r.jsx("span",{className:"text-success",children:Ke(be.monto_pagado)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-1",children:[r.jsx("span",{className:"font-medium",children:"Pendiente:"}),r.jsx("span",{className:"font-bold text-primary",children:Ke(be.monto_pendiente||0)})]})]})}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx(_e,{variant:be.tipo_pago==="contado"?"default":be.tipo_pago==="parcial"?"secondary":"outline",children:be.tipo_pago==="contado"?"Contado":be.tipo_pago==="parcial"?"Parcial":"Crdito"}),be.metodo_pago&&r.jsx("div",{className:"text-xs text-muted-foreground",children:be.metodo_pago==="efectivo"?"Efectivo":"Tarjeta/Banco"})]})}),r.jsx("div",{className:"col-span-2",children:be.fecha_vencimiento?r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-medium",children:ze(new Date(be.fecha_vencimiento),"dd/MM/yyyy",{locale:ht})}),r.jsx("div",{className:"text-xs",children:(()=>{const tt=new Date,Jt=new Date(be.fecha_vencimiento).getTime()-tt.getTime(),Er=Math.ceil(Jt/(1e3*60*60*24));return Er<0?r.jsxs("span",{className:"text-destructive font-medium",children:["Vencida hace ",Math.abs(Er)," da(s)"]}):Er===0?r.jsx("span",{className:"text-warning font-medium",children:"Vence hoy"}):Er<=7?r.jsxs("span",{className:"text-warning font-medium",children:["Vence en ",Er," da(s)"]}):r.jsxs("span",{className:"text-muted-foreground",children:["Vence en ",Er," da(s)"]})})()}),Xe(be.fecha_vencimiento,be.monto_pendiente||0)]}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"Sin fecha lmite"})}),r.jsxs("div",{className:"col-span-2 flex gap-2",children:[r.jsx(Pe,{size:"sm",variant:"outline",onClick:()=>Nt(be.id),title:"Ver historial de pagos",children:r.jsx(TN,{className:"w-4 h-4"})}),r.jsx(Pe,{size:"sm",variant:"default",onClick:()=>xe(be),disabled:be.monto_pendiente<=0,children:"Pagar"})]})]})})})]},be.id))]}))})]})})})]})]}),r.jsx(Je,{value:"transacciones",className:"space-y-6",children:$?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-muted-foreground",children:"Cargando transacciones..."})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total Transacciones"}),r.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:(Ne==null?void 0:Ne.length)||0})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Completamente Pagadas"}),r.jsx(_c,{className:"h-4 w-4 text-success"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-success",children:(Ne==null?void 0:Ne.filter(fe=>fe.monto_pendiente===0).length)||0})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Pagos Parciales"}),r.jsx(Lf,{className:"h-4 w-4 text-warning"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-warning",children:(Ne==null?void 0:Ne.filter(fe=>fe.monto_pendiente>0&&fe.monto_pagado>0).length)||0})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Sin Pagar"}),r.jsx(Ht,{className:"h-4 w-4 text-destructive"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-destructive",children:(Ne==null?void 0:Ne.filter(fe=>fe.monto_pagado===0&&fe.monto_pendiente>0).length)||0})})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-5 w-5"}),"Historial Completo de Transacciones"]}),r.jsx(Me,{children:"Trazabilidad de todas las transacciones de ingresos, desde su creacin hasta su liquidacin"})]}),r.jsxs(Q,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-mes-transaccion",className:"mb-2 block",children:"Mes"}),r.jsxs(De,{value:P,onValueChange:k,children:[r.jsx(ke,{id:"filtro-mes-transaccion",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los meses"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los meses"}),r.jsx(le,{value:"1",children:"Enero"}),r.jsx(le,{value:"2",children:"Febrero"}),r.jsx(le,{value:"3",children:"Marzo"}),r.jsx(le,{value:"4",children:"Abril"}),r.jsx(le,{value:"5",children:"Mayo"}),r.jsx(le,{value:"6",children:"Junio"}),r.jsx(le,{value:"7",children:"Julio"}),r.jsx(le,{value:"8",children:"Agosto"}),r.jsx(le,{value:"9",children:"Septiembre"}),r.jsx(le,{value:"10",children:"Octubre"}),r.jsx(le,{value:"11",children:"Noviembre"}),r.jsx(le,{value:"12",children:"Diciembre"})]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-ano-transaccion",className:"mb-2 block",children:"Ao"}),r.jsxs(De,{value:E,onValueChange:O,children:[r.jsx(ke,{id:"filtro-ano-transaccion",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los aos"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los aos"}),Array.from(new Set((Ne||[]).map(fe=>new Date(fe.created_at).getFullYear()))).sort((fe,be)=>be-fe).map(fe=>r.jsx(le,{value:fe.toString(),children:fe},fe))]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-cliente-transaccion",className:"mb-2 block",children:"Cliente"}),r.jsxs(De,{value:X,onValueChange:W,children:[r.jsx(ke,{id:"filtro-cliente-transaccion",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los clientes"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los clientes"}),Array.from(new Set((Ne||[]).map(fe=>fe.cliente_nombre).filter(Boolean))).sort().map(fe=>r.jsx(le,{value:fe,children:fe},fe))]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-tipo-ingreso",className:"mb-2 block",children:"Tipo de Ingreso"}),r.jsxs(De,{value:F,onValueChange:D,children:[r.jsx(ke,{id:"filtro-tipo-ingreso",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los tipos"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los tipos"}),Array.from(new Set((Ne||[]).map(fe=>fe.tipo_ingreso))).sort().map(fe=>r.jsx(le,{value:fe,children:fe},fe))]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-estado-transaccion",className:"mb-2 block",children:"Estado"}),r.jsxs(De,{value:M,onValueChange:T,children:[r.jsx(ke,{id:"filtro-estado-transaccion",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los estados"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los estados"}),r.jsx(le,{value:"completado",children:"Completado"}),r.jsx(le,{value:"enProgreso",children:"En Progreso"}),r.jsx(le,{value:"sinPagar",children:"Sin Pagar"})]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"filtro-metodo-pago",className:"mb-2 block",children:"Mtodo de Pago"}),r.jsxs(De,{value:V,onValueChange:I,children:[r.jsx(ke,{id:"filtro-metodo-pago",className:"bg-background",children:r.jsx(Fe,{placeholder:"Todos los mtodos"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los mtodos"}),Array.from(new Set((Ne||[]).map(fe=>fe.metodo_pago).filter(Boolean))).sort().map(fe=>r.jsx(le,{value:fe,children:fe},fe))]})]})]}),r.jsxs("div",{children:[r.jsx(se,{htmlFor:"orden-monto-transaccion",className:"mb-2 block",children:"Ordenar por Monto"}),r.jsxs(De,{value:B,onValueChange:q,children:[r.jsx(ke,{id:"orden-monto-transaccion",className:"bg-background",children:r.jsx(Fe,{placeholder:"Sin ordenar"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"ninguno",children:"Sin ordenar (Por fecha)"}),r.jsx(le,{value:"menorMayor",children:"Menor a Mayor"}),r.jsx(le,{value:"mayorMenor",children:"Mayor a Menor"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(Pe,{variant:"outline",onClick:()=>{k("todos"),O("todos"),T("todos"),I("todos"),D("todos"),W("todos"),q("ninguno")},className:"w-full",children:"Limpiar Filtros"})})]}),(()=>{let fe=Ne||[];return P!=="todos"&&(fe=fe.filter(be=>new Date(be.created_at).getMonth()+1===parseInt(P))),E!=="todos"&&(fe=fe.filter(be=>new Date(be.created_at).getFullYear()===parseInt(E))),X!=="todos"&&(fe=fe.filter(be=>be.cliente_nombre===X)),F!=="todos"&&(fe=fe.filter(be=>be.tipo_ingreso===F)),M!=="todos"&&(fe=fe.filter(be=>M==="completado"?be.monto_pendiente===0:M==="enProgreso"?be.monto_pendiente>0&&be.monto_pagado>0:M==="sinPagar"?be.monto_pagado===0&&be.monto_pendiente>0:!0)),V!=="todos"&&(fe=fe.filter(be=>be.metodo_pago===V)),B==="menorMayor"?fe=[...fe].sort((be,tt)=>be.monto_neto-tt.monto_neto):B==="mayorMenor"&&(fe=[...fe].sort((be,tt)=>tt.monto_neto-be.monto_neto)),!fe||fe.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:Ne&&Ne.length>0?"No se encontraron transacciones con los filtros seleccionados.":"No hay transacciones registradas."})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha Creacin"}),r.jsx(me,{children:"Cliente"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Tipo Ingreso"}),r.jsx(me,{className:"text-right",children:"Monto Total"}),r.jsx(me,{className:"text-right",children:"Descuento"}),r.jsx(me,{className:"text-right",children:"Monto Neto"}),r.jsx(me,{className:"text-right",children:"Pagado"}),r.jsx(me,{className:"text-right",children:"Pendiente"}),r.jsx(me,{children:"Tipo Pago"}),r.jsx(me,{children:"Mtodo Pago"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{children:"Progreso"}),r.jsx(me,{className:"text-center",children:"Detalle Contable"})]})}),r.jsx(kt,{children:fe.map(be=>{const tt=be.monto_neto>0?be.monto_pagado/be.monto_neto*100:0;return r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-medium",children:ze(new Date(be.created_at),"dd MMM yyyy HH:mm",{locale:ht})}),r.jsx(Z,{children:be.cliente_nombre||"Sin especificar"}),r.jsx(Z,{className:"max-w-[200px] truncate",children:be.descripcion}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",className:"capitalize",children:be.tipo_ingreso})}),r.jsx(Z,{className:"text-right font-medium",children:Ke(be.monto_total)}),r.jsx(Z,{className:"text-right",children:be.monto_descuento>0?r.jsxs("span",{className:"text-destructive",children:["-",Ke(be.monto_descuento)]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{className:"text-right font-semibold",children:Ke(be.monto_neto)}),r.jsx(Z,{className:"text-right",children:r.jsx("span",{className:"text-success font-semibold",children:Ke(be.monto_pagado)})}),r.jsx(Z,{className:"text-right",children:be.monto_pendiente>0?r.jsx("span",{className:"text-destructive font-semibold",children:Ke(be.monto_pendiente)}):r.jsx("span",{className:"text-muted-foreground",children:"$0"})}),r.jsx(Z,{children:be.tipo_pago==="contado"?r.jsx(_e,{variant:"secondary",children:"Contado"}):be.tipo_pago==="credito"?r.jsx(_e,{variant:"outline",children:"Crdito"}):r.jsx(_e,{className:"bg-amber-500",children:"Parcial"})}),r.jsx(Z,{className:"capitalize",children:be.metodo_pago||"-"}),r.jsx(Z,{children:be.monto_pendiente===0?r.jsx(_e,{className:"bg-success",children:"Completado"}):be.monto_pagado>0?r.jsx(_e,{className:"bg-warning",children:"En Progreso"}):r.jsx(_e,{variant:"destructive",children:"Sin Pagar"})}),r.jsx(Z,{className:"min-w-[150px]",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{children:[tt.toFixed(0),"%"]}),r.jsx("span",{className:"text-muted-foreground",children:be.monto_pagado>0&&be.monto_pendiente>0?"Parcial":be.monto_pendiente===0?"Completo":"Sin pago"})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all ${tt===100?"bg-success":tt>0?"bg-warning":"bg-destructive"}`,style:{width:`${tt}%`}})})]})}),r.jsx(Z,{className:"text-center",children:r.jsxs(Pe,{variant:"outline",size:"sm",onClick:()=>{L(be.id),Y(!0)},children:[r.jsx(pi,{className:"h-4 w-4 mr-1"}),"Ver Detalle"]})})]},be.id)})})]})})})()]})]})]})}),r.jsx(Je,{value:"analiticas",className:"space-y-6",children:ge?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-muted-foreground",children:"Cargando analticas..."})}):J?r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsx(Q,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{className:"text-sm font-medium whitespace-nowrap",children:"Filtrar por Cliente:"}),r.jsxs(De,{value:v,onValueChange:j,children:[r.jsx(ke,{className:"w-[300px]",children:r.jsx(Fe,{placeholder:"Todos los clientes"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"todos",children:"Todos los clientes"}),Ce.map(fe=>r.jsx(le,{value:fe,children:fe},fe))]})]})]})})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total por Cobrar"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:Ke(J.totalPendiente)})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total Clientes"}),r.jsx(Gu,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:J.totalClientes})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Promedio por Cliente"}),r.jsx(Hh,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["$",J.promedioDeuda.toLocaleString("es-CO",{maximumFractionDigits:0})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Cuentas Vencidas"}),r.jsx(Lf,{className:"h-4 w-4 text-destructive"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-destructive",children:((J==null?void 0:J.agingAnalysisDetailed)||[]).filter(fe=>fe.min>=1).reduce((fe,be)=>fe+be.cantidad,0)})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Formato Nmeros"}),r.jsx(o0,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{className:"space-y-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-xs",children:"Escala"}),r.jsxs(De,{value:ee,onValueChange:fe=>z(fe),children:[r.jsx(ke,{className:"h-8 text-xs",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"normal",children:"Normal"}),r.jsx(le,{value:"miles",children:"Miles (K)"}),r.jsx(le,{value:"millones",children:"Millones (M)"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-xs",children:"Decimales"}),r.jsxs(De,{value:U.toString(),onValueChange:fe=>oe(parseInt(fe)),children:[r.jsx(ke,{className:"h-8 text-xs",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"0",children:"0"}),r.jsx(le,{value:"1",children:"1"}),r.jsx(le,{value:"2",children:"2"})]})]})]})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Anlisis de Antigedad de Cuentas por Cobrar"})}),r.jsx(Q,{children:(()=>{const be=[0,Math.max(...((J==null?void 0:J.agingAnalysisDetailed)||[]).map(tt=>tt.monto),1)*1.2];return r.jsx(mt,{width:"100%",height:350,children:r.jsxs(Gt,{data:(J==null?void 0:J.agingAnalysisDetailed)||[],children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(jt,{dataKey:"rango",stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},angle:-45,textAnchor:"end",height:100}),r.jsx(gt,{domain:be,stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},tickFormatter:tt=>Se(tt)}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:tt=>[Se(tt),"Monto"],labelFormatter:tt=>`${tt}`}),r.jsx(rt,{dataKey:"monto",fill:px.primary,radius:[8,8,0,0],children:r.jsx(Et,{dataKey:"monto",position:"top",formatter:tt=>Se(tt),style:{fontSize:"11px",fontWeight:"bold",fill:"hsl(var(--foreground))"}})})]})})})()})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ae,{children:"Histrico de Cuentas por Cobrar"}),r.jsxs(De,{value:x,onValueChange:fe=>p(fe),children:[r.jsx(ke,{className:"w-[180px]",children:r.jsx(Fe,{placeholder:"Selecciona perodo"})}),r.jsxs($e,{className:"bg-background z-50",children:[r.jsx(le,{value:"mensual",children:"Mensual (Mes actual)"}),r.jsx(le,{value:"anual",children:"Anual (Ao actual)"})]})]})]})}),r.jsx(Q,{children:(()=>{const be=[0,Math.max(...((J==null?void 0:J.historicoCxC)||[]).map(tt=>tt.saldo),1)*1.2];return r.jsx(mt,{width:"100%",height:350,children:r.jsxs(bl,{data:(J==null?void 0:J.historicoCxC)||[],children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(jt,{dataKey:"fecha",stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{domain:be,stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},tickFormatter:tt=>`$${tt.toLocaleString("es-MX",{maximumFractionDigits:0})}`}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"},formatter:tt=>[`$${tt.toLocaleString("es-MX",{minimumFractionDigits:0,maximumFractionDigits:0})}`,"Saldo CxC"],labelStyle:{color:"hsl(var(--foreground))"}}),r.jsx(Wt,{type:"monotone",dataKey:"saldo",stroke:px.primary,strokeWidth:3,dot:{fill:px.primary,r:4},label:{position:"top",fill:"hsl(var(--foreground))",fontSize:12,formatter:tt=>`$${tt.toLocaleString("es-MX",{maximumFractionDigits:0})}`}})]})})})()})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ae,{children:"Cuentas por Cobrar por Cliente (Apilado por Antigedad)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Deuda:"}),r.jsx(_e,{variant:"default",className:"text-lg px-3 py-1",children:Se(((J==null?void 0:J.cxcPorClienteApilado)||[]).reduce((fe,be)=>fe+be.total,0))})]})]})}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{htmlFor:"filtro-antiguedad",children:"Filtrar por antigedad:"}),r.jsxs(De,{value:f,onValueChange:h,children:[r.jsx(ke,{id:"filtro-antiguedad",className:"w-[240px]",children:r.jsx(Fe,{placeholder:"Selecciona categora"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"sinVencimiento",children:"Sin vencimiento"}),r.jsx(le,{value:"vencido1_15",children:"Vencido 1-15 das"}),r.jsx(le,{value:"vencido16_30",children:"Vencido 16-30 das"}),r.jsx(le,{value:"vencido31_60",children:"Vencido 31-60 das"}),r.jsx(le,{value:"vencido61_90",children:"Vencido 61-90 das"}),r.jsx(le,{value:"vencidoMas90",children:"Vencido +90 das"})]})]})]}),(()=>{const fe=f==="todos"?(J==null?void 0:J.cxcPorClienteApilado)||[]:((J==null?void 0:J.cxcPorClienteApilado)||[]).filter(dt=>dt[f]>0).sort((dt,Jt)=>(Jt[f]||0)-(dt[f]||0)),tt=[0,Math.max(...f==="todos"?fe.map(dt=>dt.total):fe.map(dt=>dt[f]||0),1)*1.2];return r.jsx(mt,{width:"100%",height:Math.max(400,fe.length*40),children:r.jsxs(Gt,{data:fe,layout:"vertical",margin:{left:100,right:80},children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(jt,{type:"number",domain:tt,stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},tickFormatter:dt=>Se(dt)}),r.jsx(gt,{type:"category",dataKey:"cliente",stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},width:90}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",padding:"12px"},formatter:(dt,Jt)=>{const Er={sinVencimiento:"Sin vencimiento",vencido1_15:"Vencido 1-15 das",vencido16_30:"Vencido 16-30 das",vencido31_60:"Vencido 31-60 das",vencido61_90:"Vencido 61-90 das",vencidoMas90:"Vencido +90 das"};return[Se(dt),Er[Jt]||Jt]},labelFormatter:dt=>(((J==null?void 0:J.cxcPorClienteApilado)||[]).find(Jt=>Jt.cliente===dt),dt),content:({active:dt,payload:Jt,label:Er})=>{if(dt&&Jt&&Jt.length){const bs=((J==null?void 0:J.cxcPorClienteApilado)||[]).find(Zn=>Zn.cliente===Er);return r.jsxs("div",{className:"bg-background border border-border rounded-lg p-3 shadow-lg",children:[r.jsx("div",{className:"font-bold mb-2 pb-2 border-b border-border",children:Er}),Jt.map((Zn,Zj)=>Zn.value>0&&r.jsxs("div",{className:"flex justify-between gap-4 py-1",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:Zn.color}}),Zn.name,":"]}),r.jsx("span",{className:"font-medium",children:Se(Zn.value)})]},Zj)),r.jsxs("div",{className:"flex justify-between gap-4 pt-2 mt-2 border-t border-border font-bold text-primary",children:[r.jsx("span",{children:"TOTAL:"}),r.jsx("span",{children:Se((bs==null?void 0:bs.total)||0)})]})]})}return null}}),(()=>{const dt={sinVencimiento:{fill:"hsl(var(--chart-1))",name:"Sin vencimiento"},vencido1_15:{fill:"hsl(var(--chart-2))",name:"Vencido 1-15 das"},vencido16_30:{fill:"hsl(var(--chart-3))",name:"Vencido 16-30 das"},vencido31_60:{fill:"hsl(var(--warning))",name:"Vencido 31-60 das"},vencido61_90:{fill:"hsl(222 47% 55%)",name:"Vencido 61-90 das"},vencidoMas90:{fill:"hsl(var(--destructive))",name:"Vencido +90 das"}};return f==="todos"?r.jsxs(r.Fragment,{children:[r.jsx(rt,{dataKey:"sinVencimiento",stackId:"a",fill:dt.sinVencimiento.fill,name:dt.sinVencimiento.name}),r.jsx(rt,{dataKey:"vencido1_15",stackId:"a",fill:dt.vencido1_15.fill,name:dt.vencido1_15.name}),r.jsx(rt,{dataKey:"vencido16_30",stackId:"a",fill:dt.vencido16_30.fill,name:dt.vencido16_30.name}),r.jsx(rt,{dataKey:"vencido31_60",stackId:"a",fill:dt.vencido31_60.fill,name:dt.vencido31_60.name}),r.jsx(rt,{dataKey:"vencido61_90",stackId:"a",fill:dt.vencido61_90.fill,name:dt.vencido61_90.name}),r.jsx(rt,{dataKey:"vencidoMas90",stackId:"a",fill:dt.vencidoMas90.fill,name:dt.vencidoMas90.name,children:r.jsx(Et,{position:"right",content:Jt=>r.jsx(Vk,{...Jt,filtroAntiguedad:f,dataFiltradaCliente:fe,formatearConPreferenciasAnalitica:Se})})})]}):r.jsx(rt,{dataKey:f,fill:dt[f].fill,name:dt[f].name,children:r.jsx(Et,{position:"right",content:Jt=>r.jsx(Vk,{...Jt,filtroAntiguedad:f,dataFiltradaCliente:fe,formatearConPreferenciasAnalitica:Se})})})})()]})})})()]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ae,{children:"Vencimientos por Cliente"}),r.jsxs(De,{value:g,onValueChange:N,children:[r.jsx(ke,{className:"w-[300px]",children:r.jsx(Fe,{placeholder:"Selecciona un cliente"})}),r.jsx($e,{children:((J==null?void 0:J.cxcPorClienteApilado)||[]).map(fe=>r.jsxs(le,{value:fe.cliente,children:[fe.cliente," - ",Ke(fe.total)]},fe.cliente))})]})]})}),r.jsx(Q,{children:g?r.jsx(mt,{width:"100%",height:350,children:r.jsxs(Gt,{data:(()=>{const fe=((J==null?void 0:J.cxcPorClienteApilado)||[]).find(be=>be.cliente===g);return fe?[{rango:"Sin vencimiento",monto:fe.sinVencimiento||0},{rango:"Vencido 1-15 das",monto:fe.vencido1_15||0},{rango:"Vencido 16-30 das",monto:fe.vencido16_30||0},{rango:"Vencido 31-60 das",monto:fe.vencido31_60||0},{rango:"Vencido 61-90 das",monto:fe.vencido61_90||0},{rango:"Vencido +90 das",monto:fe.vencidoMas90||0}]:[]})(),children:[r.jsx(Lt,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(jt,{dataKey:"rango",stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},angle:-45,textAnchor:"end",height:100}),r.jsx(gt,{stroke:"hsl(var(--foreground))",tick:{fill:"hsl(var(--foreground))"},tickFormatter:fe=>`$${(fe/1e3).toFixed(0)}k`}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:fe=>[Ke(fe),"Monto"],labelFormatter:fe=>`${fe}`}),r.jsx(rt,{dataKey:"monto",fill:px.primary,radius:[8,8,0,0],label:{position:"top",fill:"hsl(var(--foreground))",formatter:fe=>Ke(fe)}})]})}):r.jsx("div",{className:"flex items-center justify-center h-[350px]",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx(Zo,{className:"h-12 w-12 mx-auto text-muted-foreground"}),r.jsx("p",{className:"text-muted-foreground",children:"Selecciona un cliente para ver el desglose de sus vencimientos"})]})})})]})]}):r.jsx(G,{children:r.jsx(Q,{className:"py-10",children:r.jsx("p",{className:"text-center text-muted-foreground",children:"No hay datos disponibles para mostrar analticas."})})})})]})]}),r.jsx(vr,{open:te,onOpenChange:Y,children:r.jsxs(mr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsxs(hr,{className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-5 w-5"}),"Detalle Contable - Asiento Generado"]}),r.jsx(mn,{children:"Consulta las cuentas afectadas en la balanza de comprobacin"})]}),$t?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"text-muted-foreground",children:"Cargando detalle contable..."})}):We?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{className:"text-lg",children:"Informacin del Asiento"})}),r.jsxs(Q,{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Nmero de Asiento"}),r.jsx("p",{className:"font-mono font-semibold",children:We.numero_asiento})]}),r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Fecha"}),r.jsx("p",{className:"font-medium",children:ze(new Date(We.fecha),"dd 'de' MMMM, yyyy",{locale:ht})})]})]}),r.jsxs("div",{children:[r.jsx(se,{className:"text-muted-foreground",children:"Descripcin"}),r.jsx("p",{className:"font-medium",children:We.descripcion})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{className:"text-lg",children:"Movimientos Contables (Debe y Haber)"}),r.jsx(Me,{children:"Cuentas afectadas en la balanza de comprobacin"})]}),r.jsxs(Q,{children:[r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{children:"Subcuenta"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsx(kt,{children:(wt=We.detalle_asientos)==null?void 0:wt.map(fe=>{var be,tt,dt;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-semibold",children:(be=fe.cuentas)==null?void 0:be.codigo}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(tt=fe.cuentas)==null?void 0:tt.nombre}),r.jsx(_e,{variant:"outline",className:"mt-1 text-xs",children:(dt=fe.cuentas)==null?void 0:dt.grupo})]})}),r.jsx(Z,{children:fe.subcuentas?r.jsx(_e,{variant:"secondary",className:"text-xs",children:fe.subcuentas.nombre}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),r.jsx(Z,{className:"max-w-[200px]",children:r.jsx("p",{className:"text-sm",children:fe.descripcion||"-"})}),r.jsx(Z,{className:"text-right",children:fe.debe>0?r.jsx("span",{className:"font-semibold text-primary",children:Ke(fe.debe)}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(Z,{className:"text-right",children:fe.haber>0?r.jsx("span",{className:"font-semibold text-secondary",children:Ke(fe.haber)}):r.jsx("span",{className:"text-muted-foreground",children:"-"})})]},fe.id)})})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[r.jsx("span",{children:"Total Debe:"}),r.jsx("span",{className:"text-primary",children:Ke(((pt=We.detalle_asientos)==null?void 0:pt.reduce((fe,be)=>fe+(be.debe||0),0))||0)})]}),r.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[r.jsx("span",{children:"Total Haber:"}),r.jsx("span",{className:"text-secondary",children:Ke(((Be=We.detalle_asientos)==null?void 0:Be.reduce((fe,be)=>fe+(be.haber||0),0))||0)})]}),r.jsxs("div",{className:"flex justify-between items-center font-bold text-lg pt-2 border-t",children:[r.jsx("span",{children:"Diferencia (Debe - Haber):"}),r.jsx("span",{className:Math.abs((((Ye=We.detalle_asientos)==null?void 0:Ye.reduce((fe,be)=>fe+(be.debe||0),0))||0)-(((ft=We.detalle_asientos)==null?void 0:ft.reduce((fe,be)=>fe+(be.haber||0),0))||0))<.01?"text-success":"text-destructive",children:Ke((((Bt=We.detalle_asientos)==null?void 0:Bt.reduce((fe,be)=>fe+(be.debe||0),0))||0)-(((_t=We.detalle_asientos)==null?void 0:_t.reduce((fe,be)=>fe+(be.haber||0),0))||0))})]}),Math.abs((((Zt=We.detalle_asientos)==null?void 0:Zt.reduce((fe,be)=>fe+(be.debe||0),0))||0)-(((pn=We.detalle_asientos)==null?void 0:pn.reduce((fe,be)=>fe+(be.haber||0),0))||0))<.01&&r.jsxs("div",{className:"flex items-center gap-2 text-success text-sm mt-2",children:[r.jsx(_c,{className:"h-4 w-4"}),r.jsx("span",{children:"El asiento est balanceado correctamente"})]})]})]})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-muted-foreground",children:"No se encontr asiento contable para esta transaccin."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"El asiento puede no haberse generado automticamente."})]})]})}),r.jsx(vr,{open:a,onOpenChange:o,children:r.jsxs(mr,{className:"max-w-md",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Registrar Pago"}),r.jsx(mn,{children:i&&r.jsxs(r.Fragment,{children:["Cliente: ",i.cliente_nombre,r.jsx("br",{}),"Monto pendiente: $",(i.monto_pendiente||0).toLocaleString()]})})]}),r.jsxs("div",{className:"space-y-4 pt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"metodo-pago",children:"Mtodo de Pago"}),r.jsxs(De,{value:u,onValueChange:m,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Selecciona el mtodo de pago"})}),r.jsxs($e,{children:[r.jsx(le,{value:"efectivo",children:"Efectivo"}),r.jsx(le,{value:"bancos",children:"Transferencia/Tarjeta"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto-pago",children:"Monto del Pago"}),r.jsx(Ae,{id:"monto-pago",type:"number",placeholder:"0.00",value:c,onChange:fe=>d(fe.target.value),min:"0",max:(i==null?void 0:i.monto_pendiente)||0,step:"0.01"}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Mximo: $",((i==null?void 0:i.monto_pendiente)||0).toLocaleString()]})]}),c&&i&&r.jsxs("div",{className:"bg-muted p-3 rounded-lg space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Monto actual pendiente:"}),r.jsxs("span",{className:"font-medium",children:["$",(i.monto_pendiente||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Monto a pagar:"}),r.jsxs("span",{className:"font-medium text-primary",children:["$",parseFloat(c||"0").toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-1 border-t",children:[r.jsx("span",{children:"Quedar pendiente:"}),r.jsxs("span",{children:["$",Math.max(0,(i.monto_pendiente||0)-parseFloat(c||"0")).toLocaleString()]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(Pe,{onClick:Ve,disabled:Ee.isPending||!c||!u,className:"flex-1",children:Ee.isPending?"Procesando...":"Registrar Pago"}),r.jsx(Pe,{type:"button",variant:"outline",onClick:()=>o(!1),disabled:Ee.isPending,children:"Cancelar"})]})]})]})}),r.jsx(vr,{open:we,onOpenChange:re,children:r.jsxs(mr,{className:"max-w-3xl",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Historial de Pagos"}),r.jsx(mn,{children:de&&(()=>{const fe=He.find(be=>be.id===de);return fe?r.jsxs(r.Fragment,{children:["Cliente: ",fe.cliente_nombre||"Sin especificar",r.jsx("br",{}),"Descripcin: ",fe.descripcion,r.jsx("br",{}),"Monto Total: ",Ke(fe.monto_total),r.jsx("br",{}),"Monto Pendiente: ",Ke(fe.monto_pendiente||0)]}):null})()})]}),r.jsxs("div",{className:"space-y-4 pt-4",children:[en?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando historial..."}):!nr||nr.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:r.jsx(TN,{className:"w-8 h-8 text-muted-foreground"})}),r.jsx("p",{className:"text-muted-foreground",children:"No hay pagos registrados para esta factura."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid gap-3",children:nr.map((fe,be)=>r.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"space-y-2 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-semibold text-sm",children:nr.length-be}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-lg",children:Ke(fe.monto)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:ze(new Date(fe.fecha),"dd 'de' MMMM 'de' yyyy",{locale:ht})})]})]}),r.jsxs("div",{className:"pl-11 space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Mtodo:"}),r.jsx(_e,{variant:"outline",children:fe.metodo_pago==="efectivo"?" Efectivo":" Tarjeta/Banco"}),fe._es_pago_inicial&&r.jsx(_e,{variant:"secondary",className:"ml-2",children:" Pago Inicial"})]}),fe.descripcion&&r.jsx("div",{className:"text-sm text-muted-foreground",children:fe.descripcion}),r.jsxs("div",{className:"text-xs text-muted-foreground pt-1",children:["Registrado: ",ze(new Date(fe.created_at),"dd/MM/yyyy HH:mm",{locale:ht})]})]})]})})},fe.id))}),r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total de pagos realizados:"}),r.jsx("span",{className:"font-semibold",children:nr.length})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Monto total pagado:"}),r.jsx("span",{className:"text-lg font-bold text-success",children:Ke(nr.reduce((fe,be)=>fe+be.monto,0))})]})]})})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(Pe,{variant:"outline",onClick:()=>re(!1),children:"Cerrar"})})]})]})})]})};var DC="Progress",FC=100,[IDe,TFe]=hn(DC),[RDe,LDe]=IDe(DC),dV=y.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:o=BDe,...i}=e;(a||a===0)&&!Wk(a)&&console.error(zDe(`${a}`,"Progress"));const l=Wk(a)?a:FC;s!==null&&!qk(s,l)&&console.error(VDe(`${s}`,"Progress"));const c=qk(s,l)?s:null,d=Bv(c)?o(c,l):void 0;return r.jsx(RDe,{scope:n,value:c,max:l,children:r.jsx(Ze.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Bv(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":fV(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});dV.displayName=DC;var uV="ProgressIndicator",mV=y.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=LDe(uV,n);return r.jsx(Ze.div,{"data-state":fV(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});mV.displayName=uV;function BDe(e,t){return`${Math.round(e/t*100)}%`}function fV(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Bv(e){return typeof e=="number"}function Wk(e){return Bv(e)&&!isNaN(e)&&e>0}function qk(e,t){return Bv(e)&&!isNaN(e)&&e<=t&&e>=0}function zDe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${FC}\`.`}function VDe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${FC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var hV=dV,WDe=mV;const pV=y.forwardRef(({className:e,value:t,...n},s)=>r.jsx(hV,{ref:s,className:Te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(WDe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));pV.displayName=hV.displayName;const qDe=()=>it({queryKey:["cuentas-por-pagar-agrupadas"],queryFn:async()=>{const{data:e,error:t}=await ce.from("transacciones_egresos").select("*").eq("estado","activo").gt("monto_pendiente",0);if(t)throw t;const{data:n,error:s}=await ce.from("inversiones_capex").select("*").gt("monto_pendiente",0);if(s)throw s;const a=[],o=[],i=[];e==null||e.forEach(u=>{const m={id:u.id,descripcion:u.descripcion,monto_total:u.monto_total,monto_pagado:u.monto_pagado,monto_pendiente:u.monto_pendiente||0,fecha_vencimiento:u.fecha_vencimiento,created_at:u.created_at,tipo_pago:u.tipo_pago,metodo_pago:u.metodo_pago,estado:u.estado,tipo_transaccion:"egreso",proveedor_nombre:u.proveedor_nombre,proveedor_email:u.proveedor_email,proveedor_telefono:u.proveedor_telefono,proveedor_rfc:u.proveedor_rfc};u.tipo_egreso==="compra_inventario"||u.tipo_egreso==="costo"?a.push(m):u.cuenta_codigo==="2003"?i.push(m):o.push(m)});const l=(n==null?void 0:n.map(u=>({id:u.id,descripcion:u.descripcion||u.producto_nombre,monto_total:u.valor_total,monto_pagado:u.monto_pagado,monto_pendiente:u.monto_pendiente||0,fecha_vencimiento:u.fecha_vencimiento,created_at:u.created_at,tipo_pago:u.tipo_pago,metodo_pago:u.metodo_pago,estado:u.estado,tipo_transaccion:"capex",proveedor_nombre:u.proveedor_nombre,proveedor_email:u.proveedor_email,proveedor_telefono:u.proveedor_telefono,proveedor_rfc:u.proveedor_rfc})))||[],c=u=>{const m=new Map;return u.forEach(f=>{const h=f.proveedor_nombre||"Sin proveedor";m.has(h)||m.set(h,{nombre:h,email:f.proveedor_email,telefono:f.proveedor_telefono,rfc:f.proveedor_rfc,totalPendiente:0,totalFacturas:0,facturas:[]});const x=m.get(h);x.totalPendiente+=f.monto_pendiente,x.totalFacturas+=1,x.facturas.push(f)}),Array.from(m.values()).sort((f,h)=>h.totalPendiente-f.totalPendiente)};return[{id:"inventario",nombre:"Compras de Inventario",descripcion:"Compras de mercanca y productos",icon:Zr,color:"hsl(var(--chart-1))",totalPendiente:a.reduce((u,m)=>u+m.monto_pendiente,0),totalFacturas:a.length,totalProveedores:new Set(a.map(u=>u.proveedor_nombre)).size,proveedores:c(a)},{id:"capex",nombre:"Inversiones CAPEX",descripcion:"Inversiones en activos fijos",icon:pl,color:"hsl(var(--chart-2))",totalPendiente:l.reduce((u,m)=>u+m.monto_pendiente,0),totalFacturas:l.length,totalProveedores:new Set(l.map(u=>u.proveedor_nombre)).size,proveedores:c(l)},{id:"operativos",nombre:"Gastos Operativos",descripcion:"Gastos operativos del negocio",icon:oS,color:"hsl(var(--chart-3))",totalPendiente:o.reduce((u,m)=>u+m.monto_pendiente,0),totalFacturas:o.length,totalProveedores:new Set(o.map(u=>u.proveedor_nombre)).size,proveedores:c(o)},{id:"acreedores",nombre:"Acreedores Diversos",descripcion:"Otras cuentas por pagar",icon:Gu,color:"hsl(var(--chart-4))",totalPendiente:i.reduce((u,m)=>u+m.monto_pendiente,0),totalFacturas:i.length,totalProveedores:new Set(i.map(u=>u.proveedor_nombre)).size,proveedores:c(i)}]}}),xV=(e="mensual",t)=>it({queryKey:["analytics-cuentas-por-pagar",e,t],queryFn:async()=>{const{data:n,error:s}=await ce.from("transacciones_egresos").select("*").gt("monto_pendiente",0).eq("estado","activo").order("created_at",{ascending:!1});if(s)throw s;const{data:a,error:o}=await ce.from("inversiones_capex").select("*").gt("monto_pendiente",0).in("estado",["activo","vendido"]).order("created_at",{ascending:!1});if(o)throw o;const i=[...n||[],...(a||[]).map(A=>({id:A.id,proveedor_nombre:A.proveedor_nombre,monto_pendiente:A.monto_pendiente||0,fecha_vencimiento:A.fecha_vencimiento,created_at:A.created_at,descripcion:A.producto_nombre,user_id:A.user_id}))],l=new Date,c=i.map(A=>{let P=0;if(A.fecha_vencimiento){const k=new Date(A.fecha_vencimiento);P=Math.floor((l.getTime()-k.getTime())/(1e3*60*60*24))}else{const k=new Date(A.created_at);P=Math.floor((l.getTime()-k.getTime())/(1e3*60*60*24))}return{...A,dias_vencimiento:P}}),d=c.reduce((A,P)=>A+P.monto_pendiente,0),u=new Set(c.map(A=>A.proveedor_nombre||"Sin nombre")).size,m=d/(c.length||1),f=c.reduce((A,P)=>{const k=P.proveedor_nombre||"Sin nombre";return A[k]||(A[k]={monto:0,cantidad:0}),A[k].monto+=P.monto_pendiente,A[k].cantidad+=1,A},{}),h=Object.entries(f).map(([A,P])=>({proveedor:A,...P})).sort((A,P)=>P.monto-A.monto).slice(0,10),p=[{rango:"0-30 das",min:0,max:30},{rango:"31-60 das",min:31,max:60},{rango:"61-90 das",min:61,max:90},{rango:"90+ das",min:91,max:1/0}].map(A=>{const P=c.filter(k=>(k.dias_vencimiento||0)>=A.min&&(k.dias_vencimiento||0)<=A.max);return{rango:A.rango,monto:P.reduce((k,E)=>k+E.monto_pendiente,0),cantidad:P.length}}),v=6,j=[];for(let A=v-1;A>=0;A--){const P=new Date;P.setMonth(P.getMonth()-A);const k=P.getFullYear(),E=P.getMonth(),O=c.filter(T=>{const V=new Date(T.created_at);return V.getFullYear()===k&&V.getMonth()===E}),M=P.toLocaleDateString("es-ES",{month:"short",year:"2-digit"});j.push({mes:M,monto:O.reduce((T,V)=>T+V.monto_pendiente,0)})}const g=[{rango:"Sin vencimiento",min:null,max:0},{rango:"Vencido 1-15 das",min:1,max:15},{rango:"Vencido 16-30 das",min:16,max:30},{rango:"Vencido 31-60 das",min:31,max:60},{rango:"Vencido 61-90 das",min:61,max:90},{rango:"Vencido +90 das",min:91,max:null}],N=g.map(A=>{const P=c.filter(k=>{const E=k.dias_vencimiento||0;return A.min===null?E<=(A.max||0):A.max===null?E>=A.min:E>=A.min&&E<=A.max});return{rango:A.rango,monto:P.reduce((k,E)=>k+E.monto_pendiente,0),cantidad:P.length,min:A.min,max:A.max}}),{data:_}=await ce.from("detalle_asientos").select("*, asientos_contables!inner(fecha)").in("cuenta_codigo",["2001","2002"]).order("asientos_contables(fecha)",{ascending:!0}),b=[];if(e==="mensual")for(let A=29;A>=0;A--){const P=new Date;P.setDate(P.getDate()-A);const k=P.toLocaleDateString("es-ES",{day:"numeric",month:"short"}),E=(_||[]).filter(O=>new Date(O.asientos_contables.fecha)<=P).reduce((O,M)=>O+(M.haber||0)-(M.debe||0),0);b.push({fecha:k,saldo:E})}else for(let A=11;A>=0;A--){const P=new Date;P.setMonth(P.getMonth()-A);const k=P.toLocaleDateString("es-ES",{month:"short",year:"2-digit"}),E=(_||[]).filter(O=>new Date(O.asientos_contables.fecha)<=new Date(P.getFullYear(),P.getMonth()+1,0)).reduce((O,M)=>O+(M.haber||0)-(M.debe||0),0);b.push({fecha:k,saldo:E})}const S=Array.from(new Set(c.map(A=>A.proveedor_nombre||"Sin nombre"))).map(A=>{const P=c.filter(F=>(F.proveedor_nombre||"Sin nombre")===A),k=P.filter(F=>(F.dias_vencimiento||0)<=0).reduce((F,D)=>F+D.monto_pendiente,0),E=P.filter(F=>{const D=F.dias_vencimiento||0;return D>=1&&D<=15}).reduce((F,D)=>F+D.monto_pendiente,0),O=P.filter(F=>{const D=F.dias_vencimiento||0;return D>=16&&D<=30}).reduce((F,D)=>F+D.monto_pendiente,0),M=P.filter(F=>{const D=F.dias_vencimiento||0;return D>=31&&D<=60}).reduce((F,D)=>F+D.monto_pendiente,0),T=P.filter(F=>{const D=F.dias_vencimiento||0;return D>=61&&D<=90}).reduce((F,D)=>F+D.monto_pendiente,0),V=P.filter(F=>(F.dias_vencimiento||0)>=91).reduce((F,D)=>F+D.monto_pendiente,0),I=k+E+O+M+T+V;return{proveedor:A,sinVencimiento:k,vencido1_15:E,vencido16_30:O,vencido31_60:M,vencido61_90:T,vencidoMas90:V,total:I}}).filter(A=>A.total>0).sort((A,P)=>P.total-A.total).slice(0,10);let C=N;if(t&&t!=="todos"){const A=c.filter(P=>(P.proveedor_nombre||"Sin nombre")===t);C=g.map(P=>{const k=A.filter(E=>{const O=E.dias_vencimiento||0;return P.min===null?O<=(P.max||0):P.max===null?O>=P.min:O>=P.min&&O<=P.max});return{rango:P.rango,monto:k.reduce((E,O)=>E+O.monto_pendiente,0),cantidad:k.length,min:P.min,max:P.max}})}return{totalPendiente:d,totalProveedores:u,promedioDeuda:m,cuentasPorProveedor:h,agingAnalysis:p,tendenciaMensual:j,agingAnalysisDetailed:C,historicoCxP:b,cxpPorProveedorApilado:S}}}),gV=()=>it({queryKey:["cuentas-por-pagar-detalle"],queryFn:async()=>{const{data:e,error:t}=await ce.from("transacciones_egresos").select("*").gt("monto_pendiente",0).order("fecha_vencimiento",{ascending:!0,nullsFirst:!1});if(t)throw t;const n=new Date;return(e||[]).map(s=>{let a=0,o="Al da";if(s.fecha_vencimiento){const i=new Date(s.fecha_vencimiento);a=Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24)),a>90?o="Muy vencida":a>30?o="Vencida":a>0&&(o="Por vencer")}else{const i=new Date(s.created_at);a=Math.floor((n.getTime()-i.getTime())/(1e3*60*60*24)),o="Sin fecha lmite"}return{...s,diasVencimiento:a,estado:o}})}}),Cn={sinVencimiento:"hsl(var(--chart-1))",vencido1_15:"hsl(var(--chart-2))",vencido16_30:"hsl(var(--chart-3))",vencido31_60:"hsl(var(--chart-4))",vencido61_90:"hsl(var(--chart-5))",vencidoMas90:"hsl(var(--destructive))"};function UDe(){var N;const[e,t]=y.useState("normal"),[n,s]=y.useState(2),[a,o]=y.useState("mensual"),[i,l]=y.useState("todos"),[c,d]=y.useState(["all"]),{data:u,isLoading:m}=xV(a,i);gV();const f=_=>{if(_==null)return"$0.00";let b=_;return e==="miles"&&(b=_/1e3),e==="millones"&&(b=_/1e6),"$"+b.toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n})},h=_=>{let b=_;return e==="miles"&&(b=_/1e3),e==="millones"&&(b=_/1e6),b.toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n})};if(m)return r.jsxs("div",{className:"space-y-6",children:[r.jsx(gr,{className:"h-[200px] w-full"}),r.jsx(gr,{className:"h-[400px] w-full"})]});if(!u)return r.jsx(G,{children:r.jsx(Q,{className:"py-10",children:r.jsx("p",{className:"text-center text-muted-foreground",children:"No hay datos de cuentas por pagar disponibles"})})});const x=u.agingAnalysisDetailed.filter(_=>_.min!==null&&_.min>0).reduce((_,b)=>_+b.cantidad,0),p=((N=u==null?void 0:u.cxpPorProveedorApilado)==null?void 0:N.map(_=>_.proveedor).filter(Boolean))||[],v=_=>{if(_==="all")d(["all"]);else{const b=c.includes(_)?c.filter(w=>w!==_&&w!=="all"):[...c.filter(w=>w!=="all"),_];d(b.length===0?["all"]:b)}},j=c.includes("all")?u.cxpPorProveedorApilado.map(_=>({..._,total:(_.sinVencimiento||0)+(_.vencido1_15||0)+(_.vencido16_30||0)+(_.vencido31_60||0)+(_.vencido61_90||0)+(_.vencidoMas90||0)})):u.cxpPorProveedorApilado.map(_=>{const b={proveedor:_.proveedor};let w=0;return c.includes("sinVencimiento")&&(b.sinVencimiento=_.sinVencimiento,w+=_.sinVencimiento||0),c.includes("vencido1_15")&&(b.vencido1_15=_.vencido1_15,w+=_.vencido1_15||0),c.includes("vencido16_30")&&(b.vencido16_30=_.vencido16_30,w+=_.vencido16_30||0),c.includes("vencido31_60")&&(b.vencido31_60=_.vencido31_60,w+=_.vencido31_60||0),c.includes("vencido61_90")&&(b.vencido61_90=_.vencido61_90,w+=_.vencido61_90||0),c.includes("vencidoMas90")&&(b.vencidoMas90=_.vencidoMas90,w+=_.vencidoMas90||0),b.total=w,b}),g=[Cn.sinVencimiento,Cn.vencido1_15,Cn.vencido16_30,Cn.vencido31_60,Cn.vencido61_90,Cn.vencidoMas90];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Analticas de Cuentas por Pagar"}),r.jsx("p",{className:"text-muted-foreground",children:"Anlisis detallado de deudas con proveedores"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total por Pagar"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(u.totalPendiente)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Saldo total pendiente"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total Proveedores"}),r.jsx(Gu,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:u.totalProveedores}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Proveedores activos"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Promedio por Proveedor"}),r.jsx(Hh,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(u.promedioDeuda)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Deuda promedio"})]})]}),r.jsxs(G,{className:"border-destructive/50",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Cuentas Vencidas"}),r.jsx(Wr,{className:"h-4 w-4 text-destructive"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-destructive",children:x}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Requieren atencin"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Formato de Nmeros"}),r.jsx(o0,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{className:"space-y-2",children:[r.jsxs(De,{value:e,onValueChange:_=>t(_),children:[r.jsx(ke,{className:"h-8",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"normal",children:"Normal"}),r.jsx(le,{value:"miles",children:"Miles"}),r.jsx(le,{value:"millones",children:"Millones"})]})]}),r.jsxs(De,{value:n.toString(),onValueChange:_=>s(parseInt(_)),children:[r.jsx(ke,{className:"h-8",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"0",children:"0 decimales"}),r.jsx(le,{value:"1",children:"1 decimal"}),r.jsx(le,{value:"2",children:"2 decimales"})]})]})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Antigedad de Cuentas por Pagar"}),r.jsx(Me,{children:"Distribucin por das de vencimiento"})]}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:350,children:r.jsxs(Gt,{data:u.agingAnalysisDetailed,children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"rango",className:"text-xs",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{className:"text-xs"}),r.jsx(yt,{formatter:_=>f(_),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),r.jsxs(rt,{dataKey:"monto",radius:[8,8,0,0],children:[u.agingAnalysisDetailed.map((_,b)=>r.jsx(Kt,{fill:g[b]},`cell-${b}`)),r.jsx(Et,{dataKey:"monto",position:"top",formatter:_=>h(_),className:"text-xs fill-foreground"})]})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Histrico de Cuentas por Pagar"}),r.jsx(Me,{children:"Evolucin del saldo en el tiempo"})]}),r.jsxs(De,{value:a,onValueChange:_=>o(_),children:[r.jsx(ke,{className:"w-[140px]",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mensual"}),r.jsx(le,{value:"anual",children:"Anual"})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:350,children:r.jsxs(DSe,{data:u.historicoCxP,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorSaldo",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"fecha",className:"text-xs",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{className:"text-xs"}),r.jsx(yt,{formatter:_=>f(_),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),r.jsx(ji,{type:"monotone",dataKey:"saldo",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorSaldo)",children:r.jsx(Et,{dataKey:"saldo",position:"top",formatter:_=>h(_),className:"text-xs fill-foreground"})})]})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Cuentas por Pagar por Proveedor"}),r.jsx(Me,{children:"Apilado por antigedad de saldos"}),r.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-all",checked:c.includes("all"),onCheckedChange:()=>v("all")}),r.jsx(se,{htmlFor:"cat-all",className:"text-sm cursor-pointer",children:"Todas"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-sin",checked:c.includes("sinVencimiento")||c.includes("all"),onCheckedChange:()=>v("sinVencimiento")}),r.jsxs(se,{htmlFor:"cat-sin",className:"text-sm cursor-pointer flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:Cn.sinVencimiento}}),"Sin vencimiento"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-1-15",checked:c.includes("vencido1_15")||c.includes("all"),onCheckedChange:()=>v("vencido1_15")}),r.jsxs(se,{htmlFor:"cat-1-15",className:"text-sm cursor-pointer flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:Cn.vencido1_15}}),"1-15 das"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-16-30",checked:c.includes("vencido16_30")||c.includes("all"),onCheckedChange:()=>v("vencido16_30")}),r.jsxs(se,{htmlFor:"cat-16-30",className:"text-sm cursor-pointer flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:Cn.vencido16_30}}),"16-30 das"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-31-60",checked:c.includes("vencido31_60")||c.includes("all"),onCheckedChange:()=>v("vencido31_60")}),r.jsxs(se,{htmlFor:"cat-31-60",className:"text-sm cursor-pointer flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:Cn.vencido31_60}}),"31-60 das"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-61-90",checked:c.includes("vencido61_90")||c.includes("all"),onCheckedChange:()=>v("vencido61_90")}),r.jsxs(se,{htmlFor:"cat-61-90",className:"text-sm cursor-pointer flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:Cn.vencido61_90}}),"61-90 das"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{id:"cat-90plus",checked:c.includes("vencidoMas90")||c.includes("all"),onCheckedChange:()=>v("vencidoMas90")}),r.jsxs(se,{htmlFor:"cat-90plus",className:"text-sm cursor-pointer flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:Cn.vencidoMas90}}),"+90 das"]})]})]})]}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:j,layout:"vertical",children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{type:"number",className:"text-xs"}),r.jsx(gt,{dataKey:"proveedor",type:"category",width:150,className:"text-xs"}),r.jsx(yt,{formatter:_=>f(_),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),r.jsx(jr,{}),(c.includes("all")||c.includes("sinVencimiento"))&&r.jsx(rt,{dataKey:"sinVencimiento",stackId:"a",fill:Cn.sinVencimiento,name:"Sin vencimiento"}),(c.includes("all")||c.includes("vencido1_15"))&&r.jsx(rt,{dataKey:"vencido1_15",stackId:"a",fill:Cn.vencido1_15,name:"1-15 das"}),(c.includes("all")||c.includes("vencido16_30"))&&r.jsx(rt,{dataKey:"vencido16_30",stackId:"a",fill:Cn.vencido16_30,name:"16-30 das"}),(c.includes("all")||c.includes("vencido31_60"))&&r.jsx(rt,{dataKey:"vencido31_60",stackId:"a",fill:Cn.vencido31_60,name:"31-60 das"}),(c.includes("all")||c.includes("vencido61_90"))&&r.jsx(rt,{dataKey:"vencido61_90",stackId:"a",fill:Cn.vencido61_90,name:"61-90 das"}),(c.includes("all")||c.includes("vencidoMas90"))&&r.jsx(rt,{dataKey:"vencidoMas90",stackId:"a",fill:Cn.vencidoMas90,name:"+90 das"}),r.jsx(rt,{dataKey:"total",fill:"transparent",name:"Total",legendType:"none",children:r.jsx(Et,{dataKey:"total",position:"right",formatter:_=>f(_),className:"text-xs fill-foreground font-semibold",offset:5,style:{dominantBaseline:"middle"}})})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Vencimientos por Proveedor"}),r.jsx(Me,{children:"Antigedad de deudas del proveedor seleccionado"})]}),r.jsxs(De,{value:i,onValueChange:l,children:[r.jsx(ke,{className:"w-[220px]",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los proveedores"}),p.map(_=>r.jsx(le,{value:_,children:_},_))]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:350,children:r.jsxs(Gt,{data:u.agingAnalysisDetailed,children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"rango",className:"text-xs",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{className:"text-xs"}),r.jsx(yt,{formatter:_=>f(_),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))"}}),r.jsxs(rt,{dataKey:"monto",radius:[8,8,0,0],children:[u.agingAnalysisDetailed.map((_,b)=>r.jsx(Kt,{fill:g[b]},`cell-${b}`)),r.jsx(Et,{dataKey:"monto",position:"top",formatter:_=>h(_),className:"text-xs fill-foreground"})]})]})})})]})]})}const KDe=()=>{var He,Vt,At;const[e,t]=y.useState("lista"),[n,s]=y.useState(null),[a,o]=y.useState(new Set),[i,l]=y.useState(""),[c,d]=y.useState(!1),[u,m]=y.useState(null),[f,h]=y.useState(""),[x,p]=y.useState(""),[v,j]=y.useState(!1),[g,N]=y.useState("todos"),[_,b]=y.useState("todos"),[w,S]=y.useState("todos"),[C,A]=y.useState("todos"),[P,k]=y.useState("todos"),[E,O]=y.useState("todos"),[M,T]=y.useState("ninguno"),[V,I]=y.useState(!1),[F,D]=y.useState(null),[X,W]=y.useState(null);y.useState("normal"),y.useState(2);const{data:B,isLoading:q}=qDe();xV(),gV();const{data:te}=Dl(),Y=Gr(),{data:H,isLoading:L}=it({queryKey:["todas-transacciones-cxp"],queryFn:async()=>{const{data:{user:R}}=await ce.auth.getUser();if(!R)throw new Error("Usuario no autenticado");const{data:xe,error:Re}=await ce.from("transacciones_egresos").select("*").eq("user_id",R.id).eq("estado","activo").order("created_at",{ascending:!1});if(Re)throw Re;const{data:Ve,error:Xe}=await ce.from("inversiones_capex").select("*").eq("user_id",R.id).eq("estado","activo").order("created_at",{ascending:!1});if(Xe)throw Xe;const{data:nt,error:st}=await ce.from("transacciones_cobros_pagos").select("*").eq("user_id",R.id).eq("tipo_transaccion","pago").order("created_at",{ascending:!1});if(st)throw st;const Nt=(xe||[]).map(Be=>({id:Be.id,created_at:Be.created_at,fecha:Be.created_at,proveedor_nombre:Be.proveedor_nombre||"Sin especificar",descripcion:Be.descripcion,tipo:Be.tipo_egreso,subtipo:Be.subtipo_egreso||"-",monto_total:Be.monto_total,monto_pagado:Be.monto_pagado,monto_pendiente:Be.monto_pendiente||0,tipo_pago:Be.tipo_pago,metodo_pago:Be.metodo_pago||"-",fecha_vencimiento:Be.fecha_vencimiento,estado:Be.estado,fuente:"egreso"})),wt=(Ve||[]).map(Be=>({id:Be.id,created_at:Be.created_at,fecha:Be.fecha_adquisicion,proveedor_nombre:Be.proveedor_nombre||"Sin especificar",descripcion:Be.producto_nombre+(Be.descripcion?` - ${Be.descripcion}`:""),tipo:"Inversin CAPEX",subtipo:Be.categoria_activo,monto_total:Be.valor_total,monto_pagado:Be.monto_pagado,monto_pendiente:Be.monto_pendiente||0,tipo_pago:Be.tipo_pago,metodo_pago:Be.metodo_pago||"-",fecha_vencimiento:Be.fecha_vencimiento,estado:Be.estado,fuente:"capex"})),pt=(nt||[]).map(Be=>{var Ye,ft;return{id:Be.id,created_at:Be.created_at,fecha:Be.fecha,proveedor_nombre:((Ye=Be.descripcion)==null?void 0:Ye.split(": ")[1])||((ft=Be.descripcion)==null?void 0:ft.replace("Pago a ",""))||"Pago CxP",descripcion:Be.descripcion||"Pago a proveedor",tipo:"Pago CxP",subtipo:"Pago posterior",monto_total:Be.monto,monto_pagado:Be.monto,monto_pendiente:0,tipo_pago:"pago",metodo_pago:Be.metodo_pago||"-",fecha_vencimiento:null,estado:"activo",fuente:"pago_cxp"}});return[...Nt,...wt,...pt].sort((Be,Ye)=>new Date(Ye.created_at).getTime()-new Date(Be.created_at).getTime())}}),{data:ue,isLoading:pe}=it({queryKey:["asiento-contable-cxp",F,X],queryFn:async()=>{if(!F||!X)return null;let R="";if(X==="egreso")R=`EGR-${F}`;else if(X==="capex")R=`INV-${F}`;else if(X==="pago_cxp"){const{data:Ve}=await ce.from("transacciones_cobros_pagos").select("created_at").eq("id",F).single();if(!Ve)return null;const{data:Xe}=await ce.from("asientos_contables").select(`
            *,
            detalle_asientos (
              *,
              cuentas:cuenta_codigo (nombre)
            )
          `).ilike("numero_asiento","PAG-CXP-%").order("created_at",{ascending:!1}).limit(100);return(Xe==null?void 0:Xe.find(st=>Math.abs(new Date(st.created_at).getTime()-new Date(Ve.created_at).getTime())<5e3))||null}const{data:xe,error:Re}=await ce.from("asientos_contables").select(`
          *,
          detalle_asientos (
            *,
            cuentas:cuenta_codigo (nombre)
          )
        `).eq("numero_asiento",R).single();return Re?null:xe},enabled:!!F&&!!X&&V});y.useEffect(()=>{const R=ce.channel("cuentas-por-pagar-changes").on("postgres_changes",{event:"*",schema:"public",table:"transacciones_egresos"},()=>{Y.invalidateQueries({queryKey:["cuentas-por-pagar-agrupadas"]}),Y.invalidateQueries({queryKey:["todas-transacciones-cxp"]}),Y.invalidateQueries({queryKey:["analytics-cuentas-por-pagar-consolidadas"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inversiones_capex"},()=>{Y.invalidateQueries({queryKey:["cuentas-por-pagar-agrupadas"]}),Y.invalidateQueries({queryKey:["todas-transacciones-cxp"]}),Y.invalidateQueries({queryKey:["analytics-cuentas-por-pagar-consolidadas"]})}).on("postgres_changes",{event:"*",schema:"public",table:"transacciones_cobros_pagos"},()=>{Y.invalidateQueries({queryKey:["cuentas-por-pagar-agrupadas"]}),Y.invalidateQueries({queryKey:["todas-transacciones-cxp"]}),Y.invalidateQueries({queryKey:["analytics-cuentas-por-pagar-consolidadas"]})}).subscribe();return()=>{ce.removeChannel(R)}},[Y]);const{data:we}=it({queryKey:["historial-pagos-cxp",u==null?void 0:u.id],queryFn:async()=>{if(!u)return[];const{data:R}=await ce.from("transacciones_cobros_pagos").select("*").eq("referencia_id",u.id).eq("tipo_transaccion","pago").order("fecha",{ascending:!1}),xe=(R||[]).reduce((Xe,nt)=>Xe+(nt.monto||0),0),Re=u.monto_pagado-xe,Ve=[...R||[]];return Re>.01&&Ve.push({id:"pago-inicial",fecha:u.created_at,monto:Re,metodo_pago:u.metodo_pago||"N/A",descripcion:"Pago inicial / Anticipo",es_pago_inicial:!0}),Ve.sort((Xe,nt)=>new Date(nt.fecha).getTime()-new Date(Xe.fecha).getTime())},enabled:!!u&&v}),re=Qt({mutationFn:async({facturaId:R,monto:xe,metodo:Re,tipo:Ve})=>{const Xe=u;if(!Xe)throw new Error("Factura no encontrada");const nt=(Xe.monto_pendiente||0)-xe,st=(Xe.monto_pagado||0)+xe;let Nt,wt="";if(Ve==="egreso"?(Nt=(await ce.from("transacciones_egresos").update({monto_pendiente:Math.max(0,nt),monto_pagado:st,tipo_pago:nt<=0?"contado":"parcial"}).eq("id",R)).error,wt="transacciones_egresos"):Ve==="capex"&&(Nt=(await ce.from("inversiones_capex").update({monto_pendiente:Math.max(0,nt),monto_pagado:st,tipo_pago:nt<=0?"total":"parcial"}).eq("id",R)).error,wt="inversiones_capex"),Nt)throw Nt;const{data:{user:pt}}=await ce.auth.getUser();if(!pt)throw new Error("Usuario no autenticado");const{error:Be}=await ce.from("transacciones_cobros_pagos").insert({user_id:pt.id,tipo_transaccion:"pago",referencia_id:R,referencia_tabla:wt,monto:xe,metodo_pago:Re,fecha:new Date().toISOString().split("T")[0],descripcion:`Pago a ${Xe.proveedor_nombre||"Proveedor"}: ${Xe.descripcion}`});if(Be)throw Be;const Ye=`PAG-CXP-${Date.now()}`,{data:ft,error:Bt}=await ce.from("asientos_contables").insert({user_id:pt.id,numero_asiento:Ye,descripcion:`Pago a ${Xe.proveedor_nombre||"Proveedor"}: ${Xe.descripcion}`,fecha:new Date().toISOString().split("T")[0]}).select().single();if(Bt)throw Bt;const{error:_t}=await ce.from("detalle_asientos").insert([{asiento_id:ft.id,cuenta_codigo:"2001",debe:xe,haber:0,descripcion:`Pago a ${Xe.proveedor_nombre||"Proveedor"}`},{asiento_id:ft.id,cuenta_codigo:Re==="efectivo"?"1001":"1002",debe:0,haber:xe,descripcion:`Pago en ${Re==="efectivo"?"efectivo":"transferencia/bancos"}`}]);if(_t)throw _t;return{facturaId:R,monto:xe,metodo:Re,tipo:Ve}},onSuccess:()=>{Y.invalidateQueries({queryKey:["cuentas-por-pagar-agrupadas"]}),Y.invalidateQueries({queryKey:["todas-transacciones-cxp"]}),Y.invalidateQueries({queryKey:["analytics-cuentas-por-pagar"]}),Y.invalidateQueries({queryKey:["analytics-cuentas-por-pagar-consolidadas"]}),Y.invalidateQueries({queryKey:["cuentas-por-pagar-detalle"]}),Y.invalidateQueries({queryKey:["historial-pagos-cxp"]}),Y.invalidateQueries({queryKey:["saldos-disponibles"]}),Y.invalidateQueries({queryKey:["asientos-balanza"]}),Y.invalidateQueries({queryKey:["resumen-transacciones"]}),Xt.success("Pago registrado exitosamente"),d(!1),z()},onError:R=>{Xt.error("Error al registrar el pago: "+R.message)}}),de=R=>{const xe=new Set(a);xe.has(R)?xe.delete(R):xe.add(R),o(xe)},he=R=>{m(R),h(""),p(""),d(!0)},ee=R=>{m(R),j(!0)},z=()=>{m(null),h(""),p("")},U=async()=>{var xe,Re;if(!u||!f||!x){Xt.error("Por favor completa todos los campos");return}const R=parseFloat(f);if(isNaN(R)||R<=0){Xt.error("El monto debe ser un nmero vlido mayor a 0");return}if(R>(u.monto_pendiente||0)){Xt.error("El monto no puede ser mayor al monto pendiente");return}if(x==="efectivo"){const{data:Ve}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(user_id)").eq("cuenta_codigo","1001").eq("asientos_contables.user_id",(xe=(await ce.auth.getUser()).data.user)==null?void 0:xe.id);let Xe=0;if(Ve==null||Ve.forEach(nt=>{Xe+=(nt.debe||0)-(nt.haber||0)}),R>Xe){Xt.error(`Saldo insuficiente en efectivo. Disponible: ${Ke(Xe)}`);return}}if(x==="transferencia"){const{data:Ve}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(user_id)").eq("cuenta_codigo","1002").eq("asientos_contables.user_id",(Re=(await ce.auth.getUser()).data.user)==null?void 0:Re.id);let Xe=0;if(Ve==null||Ve.forEach(nt=>{Xe+=(nt.debe||0)-(nt.haber||0)}),R>Xe){Xt.error(`Saldo insuficiente en bancos. Disponible: ${Ke(Xe)}`);return}}re.mutate({facturaId:u.id,monto:R,metodo:x,tipo:u.tipo_transaccion})},oe=(R,xe)=>xe===0?r.jsx(_e,{variant:"secondary",children:"Pagado"}):R?new Date(R)<new Date?r.jsx(_e,{variant:"destructive",children:"Vencida"}):r.jsx(_e,{variant:"default",children:"Por vencer"}):r.jsx(_e,{variant:"outline",children:"Sin vencimiento"}),Se=B==null?void 0:B.find(R=>R.id===n),Ne=(Se==null?void 0:Se.proveedores.filter(R=>{var xe,Re,Ve;return R.nombre.toLowerCase().includes(i.toLowerCase())||((xe=R.email)==null?void 0:xe.toLowerCase().includes(i.toLowerCase()))||((Re=R.telefono)==null?void 0:Re.toLowerCase().includes(i.toLowerCase()))||((Ve=R.rfc)==null?void 0:Ve.toLowerCase().includes(i.toLowerCase()))}))||[],$=(B==null?void 0:B.reduce((R,xe)=>R+xe.totalFacturas,0))||0,ie=(B==null?void 0:B.reduce((R,xe)=>R+xe.totalPendiente,0))||0,J=(B==null?void 0:B.flatMap(R=>R.proveedores.flatMap(xe=>xe.facturas)))||[],ge=new Date,je=J.filter(R=>R.fecha_vencimiento&&new Date(R.fecha_vencimiento)<ge).length,ye=J.filter(R=>R.fecha_vencimiento&&new Date(R.fecha_vencimiento)>=ge).length,Ce=y.useMemo(()=>{if(!H)return[];let R=[...H];return g!=="todos"&&(R=R.filter(xe=>new Date(xe.created_at).getMonth()+1===parseInt(g))),_!=="todos"&&(R=R.filter(xe=>new Date(xe.created_at).getFullYear()===parseInt(_))),w!=="todos"&&(R=R.filter(xe=>xe.proveedor_nombre===w)),C!=="todos"&&(R=R.filter(xe=>xe.tipo===C)),P!=="todos"&&(P==="completado"?R=R.filter(xe=>xe.monto_pendiente===0):P==="enProgreso"?R=R.filter(xe=>xe.monto_pendiente>0&&xe.monto_pagado>0):P==="sinPagar"&&(R=R.filter(xe=>xe.monto_pagado===0&&xe.monto_pendiente>0))),E!=="todos"&&(R=R.filter(xe=>xe.metodo_pago===E)),M==="menor"?R.sort((xe,Re)=>xe.monto_total-Re.monto_total):M==="mayor"&&R.sort((xe,Re)=>Re.monto_total-xe.monto_total),R},[H,g,_,w,C,P,E,M]),We=y.useMemo(()=>{if(!H)return[];const R=new Set(H.map(xe=>xe.proveedor_nombre));return Array.from(R).sort()},[H]),$t=y.useMemo(()=>{if(!H)return[];const R=new Set(H.map(xe=>xe.tipo));return Array.from(R).sort((xe,Re)=>xe==="Pago CxP"?-1:Re==="Pago CxP"?1:xe.localeCompare(Re))},[H]),nr=()=>{N("todos"),b("todos"),S("todos"),A("todos"),k("todos"),O("todos"),T("ninguno")},en=R=>R.monto_pendiente===0?"completado":R.monto_pagado>0?"enProgreso":"sinPagar",Ee=R=>R.monto_total===0?0:R.monto_pagado/R.monto_total*100;return q?r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-muted-foreground",children:"Cargando cuentas por pagar..."})})}):r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cuentas por Pagar"}),r.jsx("p",{className:"text-muted-foreground",children:"Gestiona y da seguimiento a las cuentas pendientes de pago"})]})}),r.jsxs(Lr,{value:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-3",children:[r.jsxs(Qe,{value:"lista",className:"flex items-center gap-2",children:[r.jsx(pl,{className:"h-4 w-4"}),"Lista de Cuentas"]}),r.jsxs(Qe,{value:"transacciones",className:"flex items-center gap-2",children:[r.jsx(On,{className:"h-4 w-4"}),"Resumen de Transacciones"]}),r.jsxs(Qe,{value:"analiticas",className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4"}),"Analticas"]})]}),r.jsxs(Je,{value:"lista",className:"space-y-6",children:[n&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(Pe,{variant:"outline",onClick:()=>{s(null),o(new Set),l("")},className:"flex items-center gap-2",children:[r.jsx(Rf,{className:"h-4 w-4"}),"Regresar al men"]}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",Se==null?void 0:Se.nombre]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total por Pagar"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:Ke(ie)})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Cuentas Vencidas"}),r.jsx(Ht,{className:"h-4 w-4 text-destructive"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold text-destructive",children:je})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Por Vencer"}),r.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:ye})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total Cuentas"}),r.jsx(On,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsx("div",{className:"text-2xl font-bold",children:$})})]})]}),!n&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B==null?void 0:B.map(R=>{const xe=R.icon;return r.jsxs(G,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>s(R.id),children:[r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${R.color}15`},children:r.jsx(xe,{className:"h-6 w-6",style:{color:R.color}})}),r.jsx(ae,{className:"text-base",children:R.nombre})]}),r.jsx(Me,{className:"text-xs",children:R.descripcion})]}),r.jsxs(Q,{className:"space-y-3",children:[r.jsx("div",{className:"text-3xl font-bold",children:Ke(R.totalPendiente)}),r.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Facturas pendientes"}),r.jsx(_e,{variant:"secondary",children:R.totalFacturas})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Proveedores"}),r.jsx(_e,{variant:"outline",children:R.totalProveedores})]})]})]})]},R.id)})}),n&&Se&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(G,{children:r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${Se.color}15`},children:(()=>{const R=Se.icon;return r.jsx(R,{className:"h-6 w-6",style:{color:Se.color}})})()}),r.jsxs("div",{children:[r.jsx(ae,{children:Se.nombre}),r.jsx(Me,{children:Se.descripcion})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold",children:Ke(Se.totalPendiente)}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[Se.totalFacturas," facturas  ",Se.totalProveedores," proveedores"]})]})]})})}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar proveedor por nombre, email, telfono o RFC...",value:i,onChange:R=>l(R.target.value),className:"pl-9"})]})}),r.jsx(G,{children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{className:"w-[50px]"}),r.jsx(me,{children:"Proveedor"}),r.jsx(me,{children:"Informacin de Contacto"}),r.jsx(me,{className:"text-right",children:"Total Pendiente"}),r.jsx(me,{className:"text-center",children:"Facturas"})]})}),r.jsx(kt,{children:Ne.length===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No se encontraron proveedores"})}):Ne.map(R=>r.jsxs(r.Fragment,{children:[r.jsxs(Oe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>de(R.nombre),children:[r.jsx(Z,{children:a.has(R.nombre)?r.jsx(Po,{className:"h-4 w-4"}):r.jsx(Ua,{className:"h-4 w-4"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"font-medium",children:R.nombre}),R.rfc&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["RFC: ",R.rfc]})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-1 text-sm",children:[R.email&&r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(aS,{className:"h-3 w-3"}),R.email]}),R.telefono&&r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(Bf,{className:"h-3 w-3"}),R.telefono]})]})}),r.jsx(Z,{className:"text-right",children:r.jsx("div",{className:"font-bold",children:Ke(R.totalPendiente)})}),r.jsx(Z,{className:"text-center",children:r.jsxs(_e,{variant:"secondary",children:[R.totalFacturas," ",R.totalFacturas===1?"factura":"facturas"]})})]},R.nombre),a.has(R.nombre)&&R.facturas.map(xe=>r.jsxs(Oe,{className:"bg-muted/30",children:[r.jsx(Z,{}),r.jsx(Z,{colSpan:4,children:r.jsx("div",{className:"pl-8 py-2",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(On,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:xe.descripcion}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(er,{className:"h-3 w-3"}),ze(new Date(xe.created_at),"d 'de' MMMM, yyyy",{locale:ht})]}),xe.fecha_vencimiento&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Lf,{className:"h-3 w-3"}),"Vence: ",ze(new Date(xe.fecha_vencimiento),"d 'de' MMMM, yyyy",{locale:ht})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm pl-8",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Total: "}),r.jsx("span",{className:"font-medium",children:Ke(xe.monto_total)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Pagado: "}),r.jsx("span",{className:"font-medium text-success",children:Ke(xe.monto_pagado)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Pendiente: "}),r.jsx("span",{className:"font-bold text-destructive",children:Ke(xe.monto_pendiente)})]}),r.jsx("div",{children:oe(xe.fecha_vencimiento,xe.monto_pendiente)})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Pe,{variant:"outline",size:"sm",onClick:Re=>{Re.stopPropagation(),ee(xe)},children:[r.jsx(TN,{className:"h-4 w-4 mr-2"}),"Historial"]}),r.jsxs(Pe,{size:"sm",onClick:Re=>{Re.stopPropagation(),he(xe)},disabled:xe.monto_pendiente<=0,children:[r.jsx(li,{className:"h-4 w-4 mr-2"}),"Pagar"]})]})]})})})]},xe.id))]}))})]})})]})]}),r.jsxs(Je,{value:"transacciones",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[r.jsxs(G,{className:"bg-card/50 backdrop-blur",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Total Transacciones"}),r.jsx(On,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(H==null?void 0:H.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Facturas y pagos"})]})]}),r.jsxs(G,{className:"bg-card/50 backdrop-blur",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Completamente Pagadas"}),r.jsx(_c,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:(H==null?void 0:H.filter(R=>R.monto_pendiente===0&&R.fuente!=="pago_cxp").length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Facturas completadas"})]})]}),r.jsxs(G,{className:"bg-card/50 backdrop-blur",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Pagos Parciales"}),r.jsx(Lf,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(H==null?void 0:H.filter(R=>R.monto_pendiente>0&&R.monto_pagado>0&&R.fuente!=="pago_cxp").length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"En progreso"})]})]}),r.jsxs(G,{className:"bg-card/50 backdrop-blur",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Sin Pagar"}),r.jsx(Ht,{className:"h-4 w-4 text-destructive"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-destructive",children:(H==null?void 0:H.filter(R=>R.monto_pagado===0&&R.monto_pendiente>0&&R.fuente!=="pago_cxp").length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Pendientes"})]})]}),r.jsxs(G,{className:"bg-primary/10 backdrop-blur border-primary/20",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Pagos CxP"}),r.jsx(tA,{className:"h-4 w-4 text-primary"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:(H==null?void 0:H.filter(R=>R.fuente==="pago_cxp").length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:Ke((H==null?void 0:H.filter(R=>R.fuente==="pago_cxp").reduce((R,xe)=>R+xe.monto_total,0))||0)})]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsx(ae,{children:"Filtros"})}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Mes"}),r.jsxs(De,{value:g,onValueChange:N,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los meses"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los meses"}),Array.from({length:12},(R,xe)=>r.jsx(le,{value:String(xe+1),children:new Date(2024,xe,1).toLocaleDateString("es-MX",{month:"long"})},xe+1))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Ao"}),r.jsxs(De,{value:_,onValueChange:b,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los aos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los aos"}),Array.from({length:5},(R,xe)=>{const Re=new Date().getFullYear()-xe;return r.jsx(le,{value:String(Re),children:Re},Re)})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Proveedor"}),r.jsxs(De,{value:w,onValueChange:S,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los proveedores"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los proveedores"}),We.map(R=>r.jsx(le,{value:R,children:R},R))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Tipo"}),r.jsxs(De,{value:C,onValueChange:A,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los tipos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los tipos"}),$t.map(R=>r.jsx(le,{value:R,children:R},R))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Estado"}),r.jsxs(De,{value:P,onValueChange:k,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los estados"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los estados"}),r.jsx(le,{value:"completado",children:"Completado"}),r.jsx(le,{value:"enProgreso",children:"En Progreso"}),r.jsx(le,{value:"sinPagar",children:"Sin Pagar"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Mtodo de Pago"}),r.jsxs(De,{value:E,onValueChange:O,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los mtodos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los mtodos"}),r.jsx(le,{value:"efectivo",children:"Efectivo"}),r.jsx(le,{value:"transferencia",children:"Transferencia"}),r.jsx(le,{value:"tarjeta",children:"Tarjeta"}),r.jsx(le,{value:"-",children:"No especificado"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Ordenar por Monto"}),r.jsxs(De,{value:M,onValueChange:T,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Sin orden"})}),r.jsxs($e,{children:[r.jsx(le,{value:"ninguno",children:"Sin orden"}),r.jsx(le,{value:"menor",children:"Menor a Mayor"}),r.jsx(le,{value:"mayor",children:"Mayor a Menor"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:""}),r.jsxs(Pe,{variant:"outline",className:"w-full",onClick:nr,children:[r.jsx(Yh,{className:"h-4 w-4 mr-2"}),"Limpiar Filtros"]})]})]})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs(ae,{children:["Transacciones (",Ce.length,")"]})}),r.jsx(Q,{children:L?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"Cargando transacciones..."})}):Ce.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No hay transacciones que coincidan con los filtros"})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Proveedor"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{children:"Tipo"}),r.jsx(me,{children:"Subtipo"}),r.jsx(me,{className:"text-right",children:"Monto Total"}),r.jsx(me,{className:"text-right",children:"Pagado"}),r.jsx(me,{className:"text-right",children:"Pendiente"}),r.jsx(me,{children:"Tipo Pago"}),r.jsx(me,{children:"Mtodo"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{children:"Progreso"}),r.jsx(me,{className:"text-center",children:"Detalle"})]})}),r.jsx(kt,{children:Ce.map(R=>{const xe=en(R),Re=Ee(R);return r.jsxs(Oe,{children:[r.jsx(Z,{className:"whitespace-nowrap",children:ze(new Date(R.created_at),"dd MMM yyyy HH:mm",{locale:ht})}),r.jsx(Z,{children:R.proveedor_nombre}),r.jsx(Z,{className:"max-w-xs truncate",children:R.descripcion}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:R.tipo})}),r.jsx(Z,{children:R.subtipo}),r.jsx(Z,{className:"text-right font-medium",children:Ke(R.monto_total)}),r.jsx(Z,{className:"text-right text-green-600",children:Ke(R.monto_pagado)}),r.jsx(Z,{className:"text-right text-destructive",children:Ke(R.monto_pendiente)}),r.jsx(Z,{children:r.jsx(_e,{variant:R.tipo_pago==="contado"?"default":R.tipo_pago==="credito"?"secondary":"outline",children:R.tipo_pago})}),r.jsx(Z,{className:"capitalize",children:R.metodo_pago}),r.jsx(Z,{children:r.jsx(_e,{variant:xe==="completado"?"default":xe==="enProgreso"?"secondary":"destructive",children:xe==="completado"?"Completado":xe==="enProgreso"?"En Progreso":"Sin Pagar"})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pV,{value:Re,className:"w-16"}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[Re.toFixed(0),"%"]})]})}),r.jsx(Z,{className:"text-center",children:r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>{D(R.id),W(R.fuente),I(!0)},children:r.jsx(pi,{className:"h-4 w-4"})})})]},R.id)})})]})})})]})]}),r.jsx(Je,{value:"analiticas",className:"space-y-6",children:r.jsx(UDe,{})})]}),r.jsx(vr,{open:c,onOpenChange:d,children:r.jsxs(mr,{children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Registrar Pago"}),r.jsxs(mn,{children:["Registra un pago para ",(u==null?void 0:u.proveedor_nombre)||"este proveedor"]})]}),u&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Monto total:"}),r.jsx("span",{className:"font-medium",children:Ke(u.monto_total)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Pagado:"}),r.jsx("span",{className:"font-medium text-success",children:Ke(u.monto_pagado)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Pendiente:"}),r.jsx("span",{className:"font-bold text-destructive",children:Ke(u.monto_pendiente)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"monto",children:"Monto a pagar"}),r.jsx(Ae,{id:"monto",type:"number",placeholder:"0.00",value:f,onChange:R=>h(R.target.value),max:u.monto_pendiente})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{children:"Mtodo de pago"}),r.jsxs(Hn,{value:x,onValueChange:p,className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(It,{value:"efectivo",id:"efectivo"}),r.jsxs(se,{htmlFor:"efectivo",className:"cursor-pointer flex items-center gap-2",children:[r.jsx(tA,{className:"h-4 w-4"}),r.jsx("span",{children:"Efectivo"})]})]}),r.jsxs("span",{className:Te("font-medium text-sm",te!=null&&te.efectivo&&te.efectivo>=Number(f||0)?"text-green-600":"text-destructive"),children:["Disponible: ",Ke((te==null?void 0:te.efectivo)||0)]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(It,{value:"transferencia",id:"transferencia"}),r.jsxs(se,{htmlFor:"transferencia",className:"cursor-pointer flex items-center gap-2",children:[r.jsx(pl,{className:"h-4 w-4"}),r.jsx("span",{children:"Transferencia / Bancos"})]})]}),r.jsxs("span",{className:Te("font-medium text-sm",te!=null&&te.bancos&&te.bancos>=Number(f||0)?"text-green-600":"text-destructive"),children:["Disponible: ",Ke((te==null?void 0:te.bancos)||0)]})]})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[r.jsx(Pe,{variant:"outline",onClick:()=>{d(!1),z()},children:"Cancelar"}),r.jsx(Pe,{onClick:U,disabled:re.isPending,children:re.isPending?"Registrando...":"Registrar Pago"})]})]})]})}),r.jsx(vr,{open:v,onOpenChange:j,children:r.jsxs(mr,{className:"max-w-2xl",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:"Historial de Pagos"}),r.jsxs(mn,{children:["Pagos realizados para: ",u==null?void 0:u.descripcion]})]}),r.jsxs("div",{className:"space-y-4",children:[u&&r.jsxs("div",{className:"p-4 bg-muted rounded-lg grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Monto Total"}),r.jsx("p",{className:"font-bold",children:Ke(u.monto_total)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Total Pagado"}),r.jsx("p",{className:"font-bold text-green-600",children:Ke(u.monto_pagado)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Pendiente"}),r.jsx("p",{className:"font-bold text-destructive",children:Ke(u.monto_pendiente||0)})]})]}),we&&we.length>0?r.jsx("div",{className:"space-y-2",children:we.map((R,xe)=>{var Re;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:ze(new Date(R.fecha),"d 'de' MMMM, yyyy",{locale:ht})}),R.es_pago_inicial&&r.jsx(_e,{variant:"secondary",className:"ml-2",children:"Anticipo"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(li,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:(Re=R.metodo_pago)==null?void 0:Re.replace("_"," ").replace("-"," ")})]}),R.descripcion&&r.jsx("p",{className:"text-xs text-muted-foreground",children:R.descripcion})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"font-bold text-lg text-green-600",children:Ke(R.monto)})})]},R.id||xe)})}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay pagos registrados para esta factura"})]})]})}),r.jsx(vr,{open:V,onOpenChange:I,children:r.jsxs(mr,{className:"max-w-3xl",children:[r.jsx(fr,{children:r.jsx(hr,{children:"Detalle Contable"})}),pe?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"Cargando detalle contable..."})}):ue?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Nmero de Asiento"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:ue.numero_asiento})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Fecha"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:ze(new Date(ue.fecha),"dd MMM yyyy",{locale:ht})})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Descripcin"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:ue.descripcion})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Cuenta"}),r.jsx(me,{className:"text-right",children:"Debe"}),r.jsx(me,{className:"text-right",children:"Haber"})]})}),r.jsxs(kt,{children:[(He=ue.detalle_asientos)==null?void 0:He.map(R=>{var xe;return r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:R.cuenta_codigo}),r.jsx("p",{className:"text-sm text-muted-foreground",children:((xe=R.cuentas)==null?void 0:xe.nombre)||R.descripcion})]})}),r.jsx(Z,{className:"text-right",children:R.debe>0?Ke(R.debe):"-"}),r.jsx(Z,{className:"text-right",children:R.haber>0?Ke(R.haber):"-"})]},R.id)}),r.jsxs(Oe,{className:"font-bold bg-muted/50",children:[r.jsx(Z,{children:"Total"}),r.jsx(Z,{className:"text-right",children:Ke(((Vt=ue.detalle_asientos)==null?void 0:Vt.reduce((R,xe)=>R+(xe.debe||0),0))||0)}),r.jsx(Z,{className:"text-right",children:Ke(((At=ue.detalle_asientos)==null?void 0:At.reduce((R,xe)=>R+(xe.haber||0),0))||0)})]})]})]})})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No se encontr asiento contable para esta transaccin"})})]})})]})})};function GDe(e){return{id:String(e.id??e._id??""),cliente_nombre:e.cliente_nombre??e.clienteNombre??null,descripcion:String(e.descripcion??e.concepto??""),monto_total:Number(e.monto_total??e.montoTotal??e.total??0),monto_descuento:e.monto_descuento??e.montoDescuento??null,monto_neto:Number(e.monto_neto??e.montoNeto??e.neto??0),metodo_pago:String(e.metodo_pago??e.metodoPago??e.metodo??"N/A"),estado:String(e.estado??"activo"),created_at:String(e.created_at??e.createdAt??e.fecha??new Date().toISOString())}}function HDe(){const[e,t]=y.useState(""),[n,s]=y.useState("todos"),[a,o]=y.useState("todos"),{data:i=[],isLoading:l,isError:c,error:d}=it({queryKey:["transacciones-clientes"],queryFn:async()=>{const x=await jm("/api/transacciones/ingresos?estado=activo&cliente_nombre_not_null=1&sort=created_at:desc"),p=(x==null?void 0:x.data)??x;return Array.isArray(p)?p.map(GDe):[]}}),u=y.useMemo(()=>Array.from(new Set(i.map(x=>x.cliente_nombre).filter(Boolean))).sort(),[i]),m=y.useMemo(()=>i.filter(x=>{var g;const p=e===""||((g=x.cliente_nombre)==null?void 0:g.toLowerCase().includes(e.toLowerCase()))||x.descripcion.toLowerCase().includes(e.toLowerCase()),v=a==="todos"||x.cliente_nombre===a;let j=!0;if(n!=="todos"){const N=new Date(x.created_at),_=new Date;n==="hoy"?j=N.toDateString()===_.toDateString():n==="mes"?j=N.getMonth()===_.getMonth()&&N.getFullYear()===_.getFullYear():n==="ao"&&(j=N.getFullYear()===_.getFullYear())}return p&&v&&j}),[i,e,a,n]),f=x=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(x),h=x=>{const p={activo:"default",cancelado:"destructive"};return r.jsx(_e,{variant:p[x]||"secondary",children:x})};return r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Transacciones de Clientes"}),r.jsx(Me,{children:"Resumen de todas las transacciones de ingresos asociadas a clientes"})]}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(Ae,{placeholder:"Buscar por cliente o descripcin...",value:e,onChange:x=>t(x.target.value),className:"pl-9"})]}),r.jsxs(De,{value:a,onValueChange:o,children:[r.jsx(ke,{className:"w-full md:w-[200px]",children:r.jsx(Fe,{placeholder:"Cliente"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los clientes"}),u.map(x=>r.jsx(le,{value:x,children:x},x))]})]}),r.jsxs(De,{value:n,onValueChange:s,children:[r.jsx(ke,{className:"w-full md:w-[180px]",children:r.jsx(Fe,{placeholder:"Perodo"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos"}),r.jsx(le,{value:"hoy",children:"Hoy"}),r.jsx(le,{value:"mes",children:"Este mes"}),r.jsx(le,{value:"ao",children:"Este ao"})]})]})]}),l?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando transacciones..."}):c?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No se pudieron cargar las transacciones.",r.jsx("div",{className:"text-xs opacity-70 mt-2",children:(d==null?void 0:d.message)??"Error desconocido"})]}):m.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No se encontraron transacciones"}):r.jsx("div",{className:"rounded-md border overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Cliente"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Total"}),r.jsx(me,{className:"text-right",children:"Descuento"}),r.jsx(me,{className:"text-right",children:"Neto"}),r.jsx(me,{children:"Mtodo Pago"}),r.jsx(me,{children:"Estado"})]})}),r.jsx(kt,{children:m.map(x=>r.jsxs(Oe,{children:[r.jsx(Z,{className:"whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),ze(new Date(x.created_at),"dd MMM yyyy",{locale:ht})]})}),r.jsx(Z,{className:"font-medium",children:x.cliente_nombre||"Sin nombre"}),r.jsx(Z,{className:"max-w-xs truncate",children:x.descripcion}),r.jsx(Z,{className:"text-right font-medium",children:f(x.monto_total)}),r.jsx(Z,{className:"text-right text-muted-foreground",children:x.monto_descuento?f(x.monto_descuento):"-"}),r.jsx(Z,{className:"text-right font-semibold",children:f(x.monto_neto)}),r.jsx(Z,{children:r.jsx(_e,{variant:"outline",children:x.metodo_pago})}),r.jsx(Z,{children:h(x.estado)})]},x.id))})]})}),m.length>0&&r.jsxs("div",{className:"mt-6 flex justify-end gap-8 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Total transacciones: "}),r.jsx("span",{className:"font-semibold",children:m.length})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Total neto: "}),r.jsx("span",{className:"font-semibold",children:f(m.reduce((x,p)=>x+p.monto_neto,0))})]})]})]})]})}function XDe(e){return{id:String(e.id??e._id??""),cliente_nombre:e.cliente_nombre??e.clienteNombre??null,descripcion:e.descripcion??e.concepto??"",monto_neto:Number(e.monto_neto??e.montoNeto??e.total??0),created_at:String(e.created_at??e.createdAt??e.fecha??new Date().toISOString()),estado:String(e.estado??"activo")}}function YDe(){const[e,t]=y.useState("mes"),[n,s]=y.useState("mes-acum"),[a,o]=y.useState("mes-acum"),[i,l]=y.useState("todos"),[c,d]=y.useState("ventas"),{data:u=[],isLoading:m,isError:f,error:h}=it({queryKey:["transacciones-analitica-clientes"],queryFn:async()=>{const w=await jm("/api/transacciones/ingresos?estado=activo&cliente_nombre_not_null=1&sort=created_at:asc"),S=(w==null?void 0:w.data)??w;return Array.isArray(S)?S.map(XDe):[]}}),x=y.useMemo(()=>{const w=new Date,S=dr(w),C=Va(w),A=O=>{const M=new Set(O.map(V=>V.cliente_nombre)),T=O.length;return{clientes:M.size,productos:T}},P=u.filter(O=>new Date(O.created_at).toDateString()===w.toDateString()),k=u.filter(O=>new Date(O.created_at)>=S),E=u.filter(O=>new Date(O.created_at)>=C);return{dia:A(P),mes:A(k),ao:A(E)}},[u]),p=y.useMemo(()=>{const w=new Date;if(e==="mes"){const S=dr(w);return sC({start:S,end:w}).map(A=>{const P=u.filter(E=>{const O=new Date(E.created_at);return O<=A&&O>=S}),k=new Set(P.map(E=>E.cliente_nombre));return{fecha:ze(A,"dd MMM",{locale:ht}),clientes:k.size}})}else{const S=Va(w);return aC({start:S,end:w}).map(A=>{const P=Ds(A),k=u.filter(O=>{const M=new Date(O.created_at);return M<=P&&M>=S}),E=new Set(k.map(O=>O.cliente_nombre));return{fecha:ze(A,"MMM",{locale:ht}),clientes:E.size}})}},[u,e]),v=y.useMemo(()=>{if(p.length===0)return 10;const w=Math.max(...p.map(S=>S.clientes));return Math.ceil(w*1.2)},[p]),j=y.useMemo(()=>{let w=u;const S=new Date;n==="mes-curso"?w=u.filter(A=>{const P=new Date(A.created_at);return P.getMonth()===S.getMonth()&&P.getFullYear()===S.getFullYear()}):n==="mes-acum"?w=u.filter(A=>new Date(A.created_at)>=dr(S)):n==="ao-acum"&&(w=u.filter(A=>new Date(A.created_at)>=Va(S)));const C=new Map;return w.forEach(A=>{const P=A.cliente_nombre||"Sin nombre";C.set(P,(C.get(P)||0)+1)}),Array.from(C.entries()).map(([A,P])=>({cliente:A,compras:P})).sort((A,P)=>P.compras-A.compras).slice(0,10)},[u,n]),g=y.useMemo(()=>{const w=new Set(u.map(S=>S.cliente_nombre).filter(Boolean));return Array.from(w).sort()},[u]),N=y.useMemo(()=>{let w=u;const S=new Date;a==="mes-acum"?w=u.filter(A=>new Date(A.created_at)>=dr(S)):a==="ao-acum"&&(w=u.filter(A=>new Date(A.created_at)>=Va(S))),i!=="todos"&&(w=w.filter(A=>A.cliente_nombre===i));const C=new Map;return w.forEach(A=>{const P=A.descripcion||"Sin descripcin",k=C.get(P)||{total:0,unidades:0};C.set(P,{total:k.total+A.monto_neto,unidades:k.unidades+1})}),Array.from(C.entries()).map(([A,P])=>({producto:A.length>30?A.substring(0,30)+"...":A,total:P.total,unidades:P.unidades})).sort((A,P)=>c==="ventas"?P.total-A.total:P.unidades-A.unidades).slice(0,10)},[u,a,i,c]),_=y.useMemo(()=>{if(N.length===0)return 10;const w=N.map(C=>c==="ventas"?C.total:C.unidades),S=Math.max(...w);return Math.ceil(S*1.2)},[N,c]),b=w=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(w);return m?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando analticas..."}):f?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No se pudieron cargar las analticas.",r.jsx("div",{className:"text-xs opacity-70 mt-2",children:(h==null?void 0:h.message)??"Error desconocido"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-2",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Clientes nicos"}),r.jsx(Gu,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Hoy"}),r.jsx("span",{className:"text-2xl font-bold",children:x.dia.clientes})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Mes"}),r.jsx("span",{className:"text-xl font-semibold",children:x.mes.clientes})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Ao"}),r.jsx("span",{className:"text-lg font-medium",children:x.ao.clientes})]})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Productos/Servicios Vendidos"}),r.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Hoy"}),r.jsx("span",{className:"text-2xl font-bold",children:x.dia.productos})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Mes"}),r.jsx("span",{className:"text-xl font-semibold",children:x.mes.productos})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Ao"}),r.jsx("span",{className:"text-lg font-medium",children:x.ao.productos})]})]})})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Evolucin de Clientes"}),r.jsx(Me,{children:"Nmero de clientes nicos acumulados"})]}),r.jsx(Lr,{value:e,onValueChange:w=>t(w),children:r.jsxs(Dr,{children:[r.jsx(Qe,{value:"mes",children:"Mes en curso"}),r.jsx(Qe,{value:"ao",children:"Ao"})]})})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:300,children:r.jsxs(bl,{data:p,children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"fecha",className:"text-xs"}),r.jsx(gt,{className:"text-xs",domain:[0,v]}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),r.jsx(jr,{}),r.jsx(Wt,{type:"monotone",dataKey:"clientes",stroke:"hsl(var(--primary))",strokeWidth:2,name:"Clientes",dot:{fill:"hsl(var(--primary))"},children:r.jsx(Et,{dataKey:"clientes",position:"top",className:"text-xs fill-foreground font-medium",offset:8})})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Clientes por Nmero de Compras"}),r.jsx(Me,{children:"Top 10 clientes ordenados por actividad"})]}),r.jsxs(De,{value:n,onValueChange:w=>s(w),children:[r.jsx(ke,{className:"w-[180px]",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mes-curso",children:"Mes en curso"}),r.jsx(le,{value:"mes-acum",children:"Mes acumulado"}),r.jsx(le,{value:"ao-acum",children:"Ao acumulado"})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:j,layout:"vertical",children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{type:"number",className:"text-xs"}),r.jsx(gt,{dataKey:"cliente",type:"category",width:150,className:"text-xs"}),r.jsx(yt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),r.jsx(rt,{dataKey:"compras",fill:"hsl(var(--primary))",name:"Compras",children:r.jsx(Et,{dataKey:"compras",position:"right",className:"text-xs fill-foreground font-medium",offset:5})})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Ventas por Producto por Cliente"}),r.jsx(Me,{children:"Total de ventas por producto"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs(De,{value:i,onValueChange:l,children:[r.jsx(ke,{className:"w-full sm:w-[200px]",children:r.jsx(Fe,{placeholder:"Seleccionar cliente"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los clientes"}),g.map(w=>r.jsx(le,{value:w,children:w},w))]})]}),r.jsxs(De,{value:a,onValueChange:w=>o(w),children:[r.jsx(ke,{className:"w-full sm:w-[180px]",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mes-acum",children:"Mes acumulado"}),r.jsx(le,{value:"ao-acum",children:"Ao acumulado"})]})]}),r.jsx(Lr,{value:c,onValueChange:w=>d(w),children:r.jsxs(Dr,{children:[r.jsx(Qe,{value:"ventas",children:"Ventas ($)"}),r.jsx(Qe,{value:"unidades",children:"Unidades"})]})})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:N,children:[r.jsx(Lt,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(jt,{dataKey:"producto",className:"text-xs",angle:-45,textAnchor:"end",height:120}),r.jsx(gt,{className:"text-xs",domain:[0,_],tickFormatter:w=>c==="ventas"?b(w):w.toString()}),r.jsx(yt,{formatter:w=>c==="ventas"?b(w):w.toString(),contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),r.jsx(rt,{dataKey:c==="ventas"?"total":"unidades",fill:"hsl(var(--primary))",name:c==="ventas"?"Total Ventas":"Unidades Vendidas",children:r.jsx(Et,{dataKey:c==="ventas"?"total":"unidades",position:"top",formatter:w=>c==="ventas"?b(w):w.toString(),className:"text-xs fill-foreground font-medium",offset:5})})]})})})]})]})}const QDe=()=>{const[e,t]=y.useState(""),[n,s]=y.useState(null),[a,o]=y.useState(!1),[i,l]=y.useState({nombre:"",email:"",telefono:"",rfc:"",direccion:"",ciudad:"",estado:"",codigo_postal:"",activo:!0}),c=Gr(),{data:d=[],isLoading:u,error:m}=it({queryKey:["clientes"],queryFn:async()=>{const{data:b,error:w}=await ce.from("clientes").select("*").order("nombre",{ascending:!0});if(w)throw w;const{data:S,error:C}=await ce.from("transacciones_ingresos").select(`
          cliente_nombre,
          cliente_email,
          cliente_telefono,
          cliente_rfc,
          created_at
        `).not("cliente_nombre","is",null).order("created_at",{ascending:!1});if(C)throw C;const A=new Map;S==null||S.forEach(T=>{const V=`${T.cliente_nombre}_${T.cliente_email}_${T.cliente_telefono}`.toLowerCase();A.has(V)||A.set(V,{id:`tx-${Math.random().toString(36).substr(2,9)}`,nombre:T.cliente_nombre||"",email:T.cliente_email||"",telefono:T.cliente_telefono||"",rfc:T.cliente_rfc||"",direccion:"",ciudad:"",estado:"",codigo_postal:"",activo:!0,created_at:T.created_at,updated_at:T.created_at,source:"transaction"})});const P=Array.from(A.values()),k=(b||[]).map(T=>({...T,source:"dedicated"})),E=new Set(k.map(T=>`${T.nombre}_${T.email}_${T.telefono}`.toLowerCase())),O=P.filter(T=>{const V=`${T.nombre}_${T.email}_${T.telefono}`.toLowerCase();return!E.has(V)});return[...k,...O].sort((T,V)=>T.nombre.localeCompare(V.nombre))}}),f=Qt({mutationFn:async b=>{const{data:w,error:S}=await ce.from("clientes").insert([{...b,user_id:"00000000-0000-0000-0000-000000000000"}]).select().single();if(S)throw S;return w},onSuccess:()=>{c.invalidateQueries({queryKey:["clientes"]}),Xt.success("Cliente creado exitosamente"),p(),o(!1)},onError:b=>{b.code==="23505"?b.message.includes("email")?Xt.error("Ya existe un cliente con ese email"):b.message.includes("telefono")?Xt.error("Ya existe un cliente con ese telfono"):b.message.includes("rfc")?Xt.error("Ya existe un cliente con ese RFC"):Xt.error("Ya existe un cliente con esos datos"):Xt.error("Error al crear cliente: "+b.message)}}),h=Qt({mutationFn:async({id:b,data:w})=>{const{data:S,error:C}=await ce.from("clientes").update(w).eq("id",b).select().single();if(C)throw C;return S},onSuccess:()=>{c.invalidateQueries({queryKey:["clientes"]}),Xt.success("Cliente actualizado exitosamente"),p(),o(!1),s(null)},onError:b=>{b.code==="23505"?b.message.includes("email")?Xt.error("Ya existe un cliente con ese email"):b.message.includes("telefono")?Xt.error("Ya existe un cliente con ese telfono"):b.message.includes("rfc")?Xt.error("Ya existe un cliente con ese RFC"):Xt.error("Ya existe un cliente con esos datos"):Xt.error("Error al actualizar cliente: "+b.message)}}),x=Qt({mutationFn:async b=>{const{error:w}=await ce.from("clientes").delete().eq("id",b);if(w)throw w},onSuccess:()=>{c.invalidateQueries({queryKey:["clientes"]}),Xt.success("Cliente eliminado exitosamente")},onError:b=>{Xt.error("Error al eliminar cliente: "+b.message)}}),p=()=>{l({nombre:"",email:"",telefono:"",rfc:"",direccion:"",ciudad:"",estado:"",codigo_postal:"",activo:!0})},v=()=>{p(),s(null),o(!0)},j=b=>{l({nombre:b.nombre,email:b.email||"",telefono:b.telefono||"",rfc:b.rfc||"",direccion:b.direccion||"",ciudad:b.ciudad||"",estado:b.estado||"",codigo_postal:b.codigo_postal||"",activo:b.activo}),s(b),o(!0)},g=b=>{if(b.preventDefault(),!i.nombre.trim()){Xt.error("El nombre es requerido");return}n?h.mutate({id:n.id,data:i}):f.mutate(i)},N=(b,w)=>{window.confirm(`Ests seguro de que deseas eliminar el cliente "${w}"?`)&&x.mutate(b)},_=d.filter(b=>b.nombre.toLowerCase().includes(e.toLowerCase())||b.email&&b.email.toLowerCase().includes(e.toLowerCase())||b.telefono&&b.telefono.includes(e)||b.rfc&&b.rfc.toLowerCase().includes(e.toLowerCase()));return u?r.jsx("div",{className:"p-6",children:"Cargando clientes..."}):m?r.jsx("div",{className:"p-6 text-destructive",children:"Error al cargar clientes"}):r.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-6 border-b bg-background",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[r.jsx(Gu,{className:"h-8 w-8"}),"Base de Datos de Clientes"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona la informacin de todos tus clientes"})]}),r.jsxs(vr,{open:a,onOpenChange:o,children:[r.jsx(Hc,{asChild:!0,children:r.jsxs(Pe,{onClick:v,className:"gap-2",children:[r.jsx(as,{className:"h-4 w-4"}),"Nuevo Cliente"]})}),r.jsxs(mr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:n?"Editar Cliente":"Nuevo Cliente"}),r.jsx(mn,{children:n?"Modifica los datos del cliente":"Registra un nuevo cliente en el sistema"})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre *"}),r.jsx(Ae,{id:"nombre",value:i.nombre,onChange:b=>l(w=>({...w,nombre:b.target.value})),placeholder:"Nombre completo del cliente",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"email",children:"Email"}),r.jsx(Ae,{id:"email",type:"email",value:i.email,onChange:b=>l(w=>({...w,email:b.target.value})),placeholder:"correo@ejemplo.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"telefono",children:"Telfono"}),r.jsx(Ae,{id:"telefono",value:i.telefono,onChange:b=>l(w=>({...w,telefono:b.target.value})),placeholder:"555-123-4567"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"rfc",children:"RFC"}),r.jsx(Ae,{id:"rfc",value:i.rfc,onChange:b=>l(w=>({...w,rfc:b.target.value.toUpperCase()})),placeholder:"XAXX010101000",maxLength:13})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"direccion",children:"Direccin"}),r.jsx(Kr,{id:"direccion",value:i.direccion,onChange:b=>l(w=>({...w,direccion:b.target.value})),placeholder:"Calle, nmero, colonia...",rows:2})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ciudad",children:"Ciudad"}),r.jsx(Ae,{id:"ciudad",value:i.ciudad,onChange:b=>l(w=>({...w,ciudad:b.target.value})),placeholder:"Ciudad"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"estado",children:"Estado"}),r.jsx(Ae,{id:"estado",value:i.estado,onChange:b=>l(w=>({...w,estado:b.target.value})),placeholder:"Estado"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"codigo_postal",children:"Cdigo Postal"}),r.jsx(Ae,{id:"codigo_postal",value:i.codigo_postal,onChange:b=>l(w=>({...w,codigo_postal:b.target.value})),placeholder:"12345",maxLength:5})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bj,{id:"activo",checked:i.activo,onCheckedChange:b=>l(w=>({...w,activo:b}))}),r.jsx(se,{htmlFor:"activo",children:"Cliente activo"})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsxs(Pe,{type:"submit",disabled:f.isPending||h.isPending,children:[n?"Actualizar":"Crear"," Cliente"]}),r.jsx(Pe,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"})]})]})]})]})]})}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs(Lr,{defaultValue:"base-datos",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-3 mb-6",children:[r.jsx(Qe,{value:"base-datos",children:"Base de Datos"}),r.jsx(Qe,{value:"transacciones",children:"Transacciones"}),r.jsx(Qe,{value:"analitica",children:"Analtica"})]}),r.jsx(Je,{value:"base-datos",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(Ae,{placeholder:"Buscar por nombre, email, telfono o RFC...",value:e,onChange:b=>t(b.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(G,{className:"p-3",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:d.length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Clientes"})]})}),r.jsx(G,{className:"p-3",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(b=>b.source==="dedicated").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"En Base de Datos"})]})}),r.jsx(G,{className:"p-3",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.filter(b=>b.source==="transaction").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"De Ventas"})]})})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Lista de Clientes"}),r.jsx(Me,{children:'Administra todos los clientes registrados. Los clientes de "Ventas" provienen de transacciones registradas y pueden ser convertidos a registros permanentes.'})]}),r.jsx(Q,{children:_.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e?"No se encontraron clientes con ese criterio":"No hay clientes registrados"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Nombre"}),r.jsx(me,{children:"Email"}),r.jsx(me,{children:"Telfono"}),r.jsx(me,{children:"RFC"}),r.jsx(me,{children:"Origen"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{children:"Acciones"})]})}),r.jsx(kt,{children:_.map(b=>r.jsxs(Oe,{children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:b.nombre}),!b.activo&&r.jsx(_e,{variant:"secondary",children:"Inactivo"})]})}),r.jsx(Z,{children:b.email||"-"}),r.jsx(Z,{children:b.telefono||"-"}),r.jsx(Z,{children:b.rfc||"-"}),r.jsx(Z,{children:r.jsx(_e,{variant:b.source==="dedicated"?"default":"outline",children:b.source==="dedicated"?"Base de Datos":"Ventas"})}),r.jsx(Z,{children:r.jsx(_e,{variant:b.activo?"default":"secondary",children:b.activo?"Activo":"Inactivo"})}),r.jsx(Z,{children:r.jsx("div",{className:"flex gap-2",children:b.source==="dedicated"?r.jsxs(r.Fragment,{children:[r.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>j(b),children:r.jsx(Ao,{className:"h-4 w-4"})}),r.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>N(b.id,b.nombre),className:"text-destructive hover:text-destructive",children:r.jsx(xs,{className:"h-4 w-4"})})]}):r.jsxs(Pe,{variant:"outline",size:"sm",onClick:()=>{l({nombre:b.nombre,email:b.email||"",telefono:b.telefono||"",rfc:b.rfc||"",direccion:"",ciudad:"",estado:"",codigo_postal:"",activo:!0}),s(null),o(!0)},className:"text-green-600 hover:text-green-700",children:[r.jsx(Ao,{className:"h-4 w-4 mr-1"}),"Editar"]})})})]},b.id))})]})})})]})]})}),r.jsx(Je,{value:"transacciones",children:r.jsx(HDe,{})}),r.jsx(Je,{value:"analitica",children:r.jsx(YDe,{})})]})})]})},ZDe=()=>{const[e,t]=y.useState({totalProveedores:0,proveedoresActivos:0,totalTransacciones:0,montoTotalGastado:0,topProveedores:[]}),[n,s]=y.useState(!0),a=async()=>{try{s(!0);const{count:o}=await ce.from("proveedores").select("*",{count:"exact",head:!0}),{count:i}=await ce.from("proveedores").select("*",{count:"exact",head:!0}).eq("activo",!0),{data:l}=await ce.from("transacciones_egresos").select("proveedor_id, proveedor_nombre, monto_total").not("proveedor_id","is",null),c=(l==null?void 0:l.length)||0,d=(l==null?void 0:l.reduce((f,h)=>f+(h.monto_total||0),0))||0,u=new Map;l==null||l.forEach(f=>{if(f.proveedor_id&&f.proveedor_nombre){const h=u.get(f.proveedor_id);h?(h.total_transacciones+=1,h.monto_total+=f.monto_total||0):u.set(f.proveedor_id,{proveedor_id:f.proveedor_id,proveedor_nombre:f.proveedor_nombre,total_transacciones:1,monto_total:f.monto_total||0})}});const m=Array.from(u.values()).sort((f,h)=>h.monto_total-f.monto_total).slice(0,5);t({totalProveedores:o||0,proveedoresActivos:i||0,totalTransacciones:c,montoTotalGastado:d,topProveedores:m})}catch(o){console.error("Error fetching provider stats:",o)}finally{s(!1)}};return y.useEffect(()=>{a();const o=ce.channel("proveedores-analytics-changes").on("postgres_changes",{event:"*",schema:"public",table:"proveedores"},()=>a()).on("postgres_changes",{event:"*",schema:"public",table:"transacciones_egresos"},()=>a()).subscribe();return()=>{ce.removeChannel(o)}},[]),{stats:e,loading:n,refetch:a}};function JDe(){const[e,t]=y.useState(""),[n,s]=y.useState("todos"),[a,o]=y.useState("todos"),{data:i,isLoading:l}=it({queryKey:["transacciones-proveedores"],queryFn:async()=>{const{data:x,error:p}=await ce.from("transacciones_egresos").select("*").eq("estado","activo").order("created_at",{ascending:!1});if(p)throw p;return x}}),c=Array.from(new Set(i==null?void 0:i.map(x=>x.proveedor_nombre).filter(x=>x!==null&&x!==""))).sort(),d=i==null?void 0:i.filter(x=>{var g;const p=!e||((g=x.proveedor_nombre)==null?void 0:g.toLowerCase().includes(e.toLowerCase()))||x.descripcion.toLowerCase().includes(e.toLowerCase()),v=a==="todos"||x.proveedor_nombre===a;let j=!0;if(n!=="todos"){const N=new Date(x.created_at);n==="hoy"?j=jB(N):n==="mes"?j=Y1(N):n==="ao"&&(j=vB(N))}return p&&v&&j}),u=x=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(x),m=x=>{const p={activo:"default",pagado:"secondary",pendiente:"outline",cancelado:"destructive"};return r.jsx(_e,{variant:p[x]||"default",children:x})},f=(d==null?void 0:d.length)||0,h=(d==null?void 0:d.reduce((x,p)=>x+p.monto_total,0))||0;return r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Resumen de Transacciones con Proveedores"}),r.jsx(Me,{children:"Visualiza y filtra todas las transacciones de egresos registradas con proveedores"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar por proveedor o descripcin...",value:e,onChange:x=>t(x.target.value),className:"pl-9"})]}),r.jsxs(De,{value:a,onValueChange:o,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los proveedores"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los proveedores"}),c.map(x=>r.jsx(le,{value:x,children:x},x))]})]}),r.jsxs(De,{value:n,onValueChange:s,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los perodos"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los perodos"}),r.jsx(le,{value:"hoy",children:"Hoy"}),r.jsx(le,{value:"mes",children:"Este mes"}),r.jsx(le,{value:"ao",children:"Este ao"})]})]})]}),l?r.jsx("div",{className:"flex justify-center items-center py-8",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin text-primary"})}):d&&d.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"rounded-md border",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Fecha"}),r.jsx(me,{children:"Proveedor"}),r.jsx(me,{children:"Descripcin"}),r.jsx(me,{className:"text-right",children:"Total"}),r.jsx(me,{className:"text-right",children:"Pagado"}),r.jsx(me,{className:"text-right",children:"Pendiente"}),r.jsx(me,{children:"Mtodo Pago"}),r.jsx(me,{children:"Estado"})]})}),r.jsx(kt,{children:d.map(x=>r.jsxs(Oe,{children:[r.jsx(Z,{children:ze(new Date(x.created_at),"dd/MM/yyyy",{locale:ht})}),r.jsx(Z,{className:"font-medium",children:x.proveedor_nombre||"Sin proveedor"}),r.jsx(Z,{children:x.descripcion}),r.jsx(Z,{className:"text-right font-medium",children:u(x.monto_total)}),r.jsx(Z,{className:"text-right",children:u(x.monto_pagado)}),r.jsx(Z,{className:"text-right",children:u(x.monto_pendiente||0)}),r.jsx(Z,{children:x.metodo_pago||"N/A"}),r.jsx(Z,{children:m(x.estado)})]},x.id))})]})}),r.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total de transacciones: ",r.jsx("span",{className:"font-semibold text-foreground",children:f})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Monto total: ",r.jsx("span",{className:"font-semibold text-foreground",children:u(h)})]})]})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No se encontraron transacciones con los filtros seleccionados."})]})]})}function eFe(){const[e,t]=y.useState("mensual"),[n,s]=y.useState("mes_actual"),[a,o]=y.useState("mensual"),[i,l]=y.useState("todos"),[c,d]=y.useState("gastos"),{data:u,isLoading:m}=it({queryKey:["transacciones-egresos-analytics"],queryFn:async()=>{const{data:b,error:w}=await ce.from("transacciones_egresos").select("*").eq("estado","activo").not("proveedor_nombre","is",null).order("created_at",{ascending:!0});if(w)throw w;return b}}),f=y.useMemo(()=>{if(!u)return{hoy:{proveedores:0,productos:0},mes:{proveedores:0,productos:0},ao:{proveedores:0,productos:0}};const b=u.filter(C=>jB(new Date(C.created_at))),w=u.filter(C=>Y1(new Date(C.created_at))),S=u.filter(C=>vB(new Date(C.created_at)));return{hoy:{proveedores:new Set(b.map(C=>C.proveedor_nombre)).size,productos:b.reduce((C,A)=>C+(A.cantidad||1),0)},mes:{proveedores:new Set(w.map(C=>C.proveedor_nombre)).size,productos:w.reduce((C,A)=>C+(A.cantidad||1),0)},ao:{proveedores:new Set(S.map(C=>C.proveedor_nombre)).size,productos:S.reduce((C,A)=>C+(A.cantidad||1),0)}}},[u]),h=y.useMemo(()=>{if(!u||u.length===0)return[];const b=new Date;let w=[];return e==="mensual"?w=sC({start:dr(b),end:Ds(b)}):w=aC({start:Va(b),end:Oh(b)}),w.map(S=>{const C=u.filter(P=>new Date(P.created_at)<=S).map(P=>P.proveedor_nombre),A=new Set(C).size;return{periodo:e==="mensual"?ze(S,"d MMM",{locale:ht}):ze(S,"MMM",{locale:ht}),proveedores:A}})},[u,e]),x=y.useMemo(()=>{if(h.length===0)return 10;const b=Math.max(...h.map(w=>w.proveedores));return Math.ceil(b*1.2)},[h]),p=y.useMemo(()=>{if(!u)return[];let b=u;n==="mes_actual"?b=u.filter(S=>Y1(new Date(S.created_at))):n==="mes_acumulado"&&(b=u.filter(S=>new Date(S.created_at)<=Ds(new Date)));const w=new Map;return b.forEach(S=>{const C=S.proveedor_nombre||"Sin proveedor";w.set(C,(w.get(C)||0)+1)}),Array.from(w.entries()).map(([S,C])=>({proveedor:S,compras:C})).sort((S,C)=>C.compras-S.compras).slice(0,10)},[u,n]),v=y.useMemo(()=>{if(p.length===0)return 10;const b=Math.max(...p.map(w=>w.compras));return Math.ceil(b*1.2)},[p]),j=y.useMemo(()=>u?Array.from(new Set(u.map(b=>b.proveedor_nombre).filter(Boolean))).sort():[],[u]),g=y.useMemo(()=>{if(!u)return[];let b=u;i!=="todos"&&(b=b.filter(S=>S.proveedor_nombre===i)),a==="mensual"?b=b.filter(S=>new Date(S.created_at)<=Ds(new Date)):b=b.filter(S=>new Date(S.created_at)<=Oh(new Date));const w=new Map;return b.forEach(S=>{const C=S.descripcion||"Sin descripcin",A=w.get(C)||{total:0,unidades:0};w.set(C,{total:A.total+S.monto_total,unidades:A.unidades+(S.cantidad||1)})}),Array.from(w.entries()).map(([S,C])=>({producto:S,...C})).sort((S,C)=>c==="gastos"?C.total-S.total:C.unidades-S.unidades).slice(0,10)},[u,a,i,c]),N=y.useMemo(()=>{if(g.length===0)return 10;const b=g.map(S=>c==="gastos"?S.total:S.unidades),w=Math.max(...b);return Math.ceil(w*1.2)},[g,c]),_=b=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0,maximumFractionDigits:0}).format(b);return m?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(Vr,{className:"h-8 w-8 animate-spin text-primary"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Proveedores nicos"}),r.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.hoy.proveedores}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Hoy"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.mes.proveedores}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Este mes"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.ao.proveedores}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Este ao"})]})]})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Productos/Servicios Comprados"}),r.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.hoy.productos}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Hoy"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.mes.productos}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Este mes"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.ao.productos}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Este ao"})]})]})})]})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Evolucin de Proveedores"}),r.jsx(Me,{children:"Crecimiento acumulado de proveedores nicos"})]}),r.jsxs(De,{value:e,onValueChange:b=>t(b),children:[r.jsx(ke,{className:"w-[180px]",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mes en curso"}),r.jsx(le,{value:"anual",children:"Ao en curso"})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:300,children:r.jsxs(bl,{data:h,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"periodo",className:"text-xs"}),r.jsx(gt,{className:"text-xs",domain:[0,x]}),r.jsx(yt,{}),r.jsx(Wt,{type:"monotone",dataKey:"proveedores",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{r:4},children:r.jsx(Et,{dataKey:"proveedores",position:"top",className:"text-xs fill-foreground"})})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Top Proveedores por Nmero de Compras"}),r.jsx(Me,{children:"Proveedores con mayor nmero de transacciones"})]}),r.jsxs(De,{value:n,onValueChange:b=>s(b),children:[r.jsx(ke,{className:"w-[180px]",children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mes_actual",children:"Mes actual"}),r.jsx(le,{value:"mes_acumulado",children:"Mes acumulado"}),r.jsx(le,{value:"ao_acumulado",children:"Ao acumulado"})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:p,layout:"vertical",children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{type:"number",className:"text-xs",domain:[0,v]}),r.jsx(gt,{dataKey:"proveedor",type:"category",width:150,className:"text-xs"}),r.jsx(yt,{}),r.jsx(rt,{dataKey:"compras",fill:"hsl(var(--primary))",children:r.jsx(Et,{dataKey:"compras",position:"right",className:"text-xs fill-foreground"})})]})})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Compras por Producto por Proveedor"}),r.jsx(Me,{children:"Anlisis de compras por producto/servicio"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(De,{value:i,onValueChange:l,children:[r.jsx(ke,{children:r.jsx(Fe,{placeholder:"Todos los proveedores"})}),r.jsxs($e,{children:[r.jsx(le,{value:"todos",children:"Todos los proveedores"}),j.map(b=>r.jsx(le,{value:b,children:b},b))]})]}),r.jsxs(De,{value:a,onValueChange:b=>o(b),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"mensual",children:"Mensual acumulado"}),r.jsx(le,{value:"anual",children:"Anual acumulado"})]})]}),r.jsxs(De,{value:c,onValueChange:b=>d(b),children:[r.jsx(ke,{children:r.jsx(Fe,{})}),r.jsxs($e,{children:[r.jsx(le,{value:"gastos",children:"Gastos ($)"}),r.jsx(le,{value:"unidades",children:"Unidades"})]})]})]})]})}),r.jsx(Q,{children:r.jsx(mt,{width:"100%",height:400,children:r.jsxs(Gt,{data:g,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"producto",className:"text-xs",angle:-45,textAnchor:"end",height:120}),r.jsx(gt,{className:"text-xs",domain:[0,N],tickFormatter:b=>c==="gastos"?_(b):b.toString()}),r.jsx(yt,{formatter:b=>c==="gastos"?_(b):b}),r.jsx(rt,{dataKey:c==="gastos"?"total":"unidades",fill:"hsl(var(--primary))",children:r.jsx(Et,{dataKey:c==="gastos"?"total":"unidades",position:"top",className:"text-xs fill-foreground",formatter:b=>c==="gastos"?_(b):b})})]})})})]})]})}const tFe=()=>{var F;const{proveedores:e,loading:t,createProveedor:n,updateProveedor:s,deleteProveedor:a}=Oj(),{stats:o,loading:i}=ZDe(),[l,c]=y.useState(""),[d,u]=y.useState(!1),[m,f]=y.useState(null),[h,x]=y.useState(""),[p,v]=y.useState(""),[j,g]=y.useState(""),[N,_]=y.useState(""),[b,w]=y.useState(""),[S,C]=y.useState(""),[A,P]=y.useState(""),[k,E]=y.useState(""),O=()=>{x(""),v(""),g(""),_(""),w(""),C(""),P(""),E(""),f(null)},M=D=>{f(D),x(D.nombre),v(D.telefono||""),g(D.email||""),_(D.rfc||""),w(D.direccion||""),C(D.ciudad||""),P(D.estado||""),E(D.codigo_postal||""),u(!0)},T=async D=>{if(D.preventDefault(),!h.trim()){Le({title:" Campo requerido",description:"El nombre del proveedor es obligatorio",variant:"destructive"});return}const X={nombre:h.trim(),telefono:p.trim()||null,email:j.trim()||null,rfc:N.trim()||null,direccion:b.trim()||null,ciudad:S.trim()||null,estado:A.trim()||null,codigo_postal:k.trim()||null};try{if(m){const{error:W}=await s(m.id,X);if(W){Le({title:" Error",description:W,variant:"destructive"});return}Le({title:" Proveedor actualizado",description:"Los datos del proveedor se han actualizado correctamente"})}else{const{error:W}=await n(X);if(W){Le({title:" Error",description:W,variant:"destructive"});return}Le({title:" Proveedor registrado",description:"El proveedor se ha registrado correctamente"})}O(),u(!1)}catch(W){console.error("Error al guardar proveedor:",W),Le({title:" Error",description:"Ocurri un error al guardar el proveedor",variant:"destructive"})}},V=async D=>{if(!confirm("Ests seguro de que deseas eliminar este proveedor?"))return;const{error:X}=await a(D);if(X){Le({title:" Error",description:X,variant:"destructive"});return}Le({title:" Proveedor eliminado",description:"El proveedor se ha eliminado correctamente"})},I=e.filter(D=>D.nombre.toLowerCase().includes(l.toLowerCase())||D.rfc&&D.rfc.toLowerCase().includes(l.toLowerCase())||D.email&&D.email.toLowerCase().includes(l.toLowerCase()));return r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"p-6 border-b bg-background",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Base de Datos Proveedores"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona la informacin de tus proveedores"})]}),r.jsxs(vr,{open:d,onOpenChange:D=>{u(D),D||O()},children:[r.jsx(Hc,{asChild:!0,children:r.jsxs(Pe,{className:"gap-2",children:[r.jsx(as,{className:"h-4 w-4"}),"Nuevo Proveedor"]})}),r.jsxs(mr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(fr,{children:[r.jsx(hr,{children:m?"Editar Proveedor":"Registrar Nuevo Proveedor"}),r.jsx(mn,{children:m?"Actualiza la informacin del proveedor":"Completa los datos del nuevo proveedor"})]}),r.jsxs("form",{onSubmit:T,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(se,{htmlFor:"nombre",children:"Nombre / Razn Social *"}),r.jsx(Ae,{id:"nombre",value:h,onChange:D=>x(D.target.value),placeholder:"Nombre completo o razn social",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"telefono",children:"Telfono"}),r.jsx(Ae,{id:"telefono",value:p,onChange:D=>v(D.target.value),placeholder:"Nmero de telfono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"email",children:"Email"}),r.jsx(Ae,{id:"email",type:"email",value:j,onChange:D=>g(D.target.value),placeholder:"correo@ejemplo.com"})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(se,{htmlFor:"rfc",children:"RFC"}),r.jsx(Ae,{id:"rfc",value:N,onChange:D=>_(D.target.value.toUpperCase()),placeholder:"RFC del proveedor",maxLength:13})]}),r.jsx(Jr,{className:"md:col-span-2"}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(se,{htmlFor:"direccion",children:"Direccin"}),r.jsx(Ae,{id:"direccion",value:b,onChange:D=>w(D.target.value),placeholder:"Calle y nmero"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"ciudad",children:"Ciudad"}),r.jsx(Ae,{id:"ciudad",value:S,onChange:D=>C(D.target.value),placeholder:"Ciudad"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"estado",children:"Estado"}),r.jsx(Ae,{id:"estado",value:A,onChange:D=>P(D.target.value),placeholder:"Estado"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{htmlFor:"codigo-postal",children:"Cdigo Postal"}),r.jsx(Ae,{id:"codigo-postal",value:k,onChange:D=>E(D.target.value),placeholder:"00000",maxLength:5})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(Pe,{type:"button",variant:"outline",onClick:()=>{O(),u(!1)},children:"Cancelar"}),r.jsx(Pe,{type:"submit",children:m?"Actualizar":"Registrar"})]})]})]})]})]})}),r.jsx("div",{className:"p-6 space-y-6",children:r.jsxs(Lr,{defaultValue:"base-datos",className:"space-y-6",children:[r.jsxs(Dr,{children:[r.jsx(Qe,{value:"base-datos",children:"Base de Datos"}),r.jsx(Qe,{value:"transacciones",children:"Transacciones"}),r.jsx(Qe,{value:"analitica",children:"Analtica"})]}),r.jsxs(Je,{value:"base-datos",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Total Proveedores"})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gu,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-2xl font-bold",children:i?"...":o.totalProveedores})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.proveedoresActivos," activos"]})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Transacciones"})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(iS,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-2xl font-bold",children:i?"...":o.totalTransacciones})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total de compras registradas"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Monto Total Gastado"})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-2xl font-bold",children:i?"...":`$${o.montoTotalGastado.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"En todas las transacciones"})]})]}),r.jsxs(G,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Proveedor Principal"})}),r.jsxs(Q,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-lg font-bold truncate",children:i?"...":((F=o.topProveedores[0])==null?void 0:F.proveedor_nombre)||"N/A"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o.topProveedores[0]?`$${o.topProveedores[0].monto_total.toLocaleString("en-US",{minimumFractionDigits:2})}`:"Sin datos"})]})]})]}),!i&&o.topProveedores.length>0&&r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(tr,{className:"h-5 w-5"}),"Top 5 Proveedores por Monto"]}),r.jsx(Me,{children:"Los proveedores con mayor volumen de compras"})]}),r.jsx(Q,{children:r.jsx("div",{className:"space-y-3",children:o.topProveedores.map((D,X)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold",children:X+1}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.proveedor_nombre}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[D.total_transacciones," transacciones"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-lg",children:["$",D.monto_total.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]},D.proveedor_id))})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(pl,{className:"h-5 w-5"}),"Proveedores Registrados"]}),r.jsx(Me,{children:"Lista completa de proveedores y su informacin de contacto"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ae,{placeholder:"Buscar por nombre, RFC o email...",value:l,onChange:D=>c(D.target.value),className:"pl-10"})]})}),t?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando proveedores..."}):I.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l?"No se encontraron proveedores":"No hay proveedores registrados"}):r.jsx("div",{className:"rounded-md border",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{children:[r.jsx(me,{children:"Nombre"}),r.jsx(me,{children:"RFC"}),r.jsx(me,{children:"Contacto"}),r.jsx(me,{children:"Ubicacin"}),r.jsx(me,{children:"Estado"}),r.jsx(me,{className:"text-right",children:"Acciones"})]})}),r.jsx(kt,{children:I.map(D=>r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-medium",children:D.nombre}),r.jsx(Z,{children:D.rfc||"-"}),r.jsx(Z,{children:r.jsxs("div",{className:"text-sm",children:[D.telefono&&r.jsx("div",{children:D.telefono}),D.email&&r.jsx("div",{className:"text-muted-foreground",children:D.email}),!D.telefono&&!D.email&&"-"]})}),r.jsx(Z,{children:r.jsx("div",{className:"text-sm",children:D.ciudad&&D.estado?`${D.ciudad}, ${D.estado}`:D.ciudad||D.estado||"-"})}),r.jsx(Z,{children:r.jsx(_e,{variant:D.activo?"default":"secondary",children:D.activo?"Activo":"Inactivo"})}),r.jsx(Z,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>M(D),children:r.jsx(Ao,{className:"h-4 w-4"})}),r.jsx(Pe,{variant:"ghost",size:"sm",onClick:()=>V(D.id),children:r.jsx(xs,{className:"h-4 w-4"})})]})})]},D.id))})]})})]})]})]}),r.jsx(Je,{value:"transacciones",children:r.jsx(JDe,{})}),r.jsx(Je,{value:"analitica",children:r.jsx(eFe,{})})]})})]})},vV=()=>{var N,_,b,w,S,C,A;const e=new Date(0),t=new Date,{data:n,...s}=Il(e,t),a=(n==null?void 0:n.saldosPorCuenta)||{},o=((N=a[1001])==null?void 0:N.saldo)||0,i=((_=a[1002])==null?void 0:_.saldo)||0,l=((b=a[1003])==null?void 0:b.saldo)||0,c=((w=a[1005])==null?void 0:w.saldo)||0,d=Object.keys(a).filter(P=>P.startsWith("10")&&parseInt(P)>=1007).reduce((P,k)=>{var E;return P+(((E=a[k])==null?void 0:E.saldo)||0)},0),u=Math.abs(((S=a[2001])==null?void 0:S.saldo)||0),m=Math.abs(Object.keys(a).filter(P=>P.startsWith("21")).reduce((P,k)=>{var E;return P+(((E=a[k])==null?void 0:E.saldo)||0)},0)),f=Math.abs(((C=a[3001])==null?void 0:C.saldo)||0),h=Math.abs(((A=a[3002])==null?void 0:A.saldo)||0),x=Math.abs(Object.keys(a).filter(P=>P.startsWith("4")).reduce((P,k)=>{var E;return P+(((E=a[k])==null?void 0:E.saldo)||0)},0)),p=Object.keys(a).filter(P=>P.startsWith("5")&&parseInt(P)>=5001&&parseInt(P)<=5099).reduce((P,k)=>{var E;return P+(((E=a[k])==null?void 0:E.saldo)||0)},0),v=Object.keys(a).filter(P=>P.startsWith("5")&&parseInt(P)>=5100).reduce((P,k)=>{var E;return P+(((E=a[k])==null?void 0:E.saldo)||0)},0),j=Object.keys(a).filter(P=>P.startsWith("6")).reduce((P,k)=>{var E;return P+(((E=a[k])==null?void 0:E.saldo)||0)},0),g=x-(p+v+j);return{data:n?{caja:o,bancos:i,cuentasPorCobrar:l,inventario:c,activosFijos:d,proveedores:u,financiamientos:m,capitalSocial:f,utilidadesRetenidas:h,ingresos:x,costos:p,gastos:v,impuestos:j,utilidad:g}:void 0,...s}},rFe=(e=!0)=>it({queryKey:["ventas-productos"],enabled:e,queryFn:async()=>{const t=new Date().getFullYear(),n=new Date(t,0,1),s=new Date(t,11,31,23,59,59),{data:a,error:o}=await ce.from("movimientos_inventario").select(`
          *,
          productos (
            nombre,
            precio_venta
          )
        `).eq("tipo_movimiento","venta").gte("created_at",n.toISOString()).lte("created_at",s.toISOString()).order("created_at",{ascending:!0});if(o)throw o;const i=new Map,l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];a==null||a.forEach(m=>{var _,b;const h=new Date(m.created_at).getMonth(),x=l[h],p=((_=m.productos)==null?void 0:_.nombre)||"Sin nombre",v=((b=m.productos)==null?void 0:b.precio_venta)||0,j=Math.abs(m.cantidad),g=j*v,N=`${p}-${x}`;if(i.has(N)){const w=i.get(N);w.volumen+=j,w.monto+=g,w.tarifaPromedio=w.monto/w.volumen}else i.set(N,{producto:p,mes:x,mesNumero:h,volumen:j,monto:g,tarifaPromedio:v})});const c=Array.from(i.values());c.sort((m,f)=>m.producto!==f.producto?m.producto.localeCompare(f.producto):m.mesNumero-f.mesNumero);const d=new Map;c.forEach(m=>{d.has(m.mes)||d.set(m.mes,{mes:m.mes,mesNumero:m.mesNumero});const f=d.get(m.mes);f[`${m.producto}_volumen`]=m.volumen,f[`${m.producto}_monto`]=m.monto});const u=Array.from(d.values()).sort((m,f)=>m.mesNumero-f.mesNumero);return{ventasDetalladas:c,ventasPorMes:u,productos:Array.from(new Set(c.map(m=>m.producto)))}}}),nFe=(e,t=!0)=>{const n=new Date().getFullYear();return it({queryKey:["costos-mensuales",n],enabled:t,queryFn:async()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],a=new Date(n,0,1).toISOString(),o=new Date(n,11,31,23,59,59).toISOString(),{data:i}=await ce.from("transacciones_egresos").select("monto_total, cuenta_codigo, subcuenta_id, created_at").eq("tipo_egreso","costo").gte("created_at",a).lte("created_at",o),l=new Map;i==null||i.forEach(p=>{const v=new Date(p.created_at).getMonth();l.has(v)||l.set(v,[]),l.get(v).push(p)});const c=[],d=new Map;for(let p=0;p<12;p++){const v=l.get(p)||[],j={mes:s[p],mesNumero:p+1};let g=0;const N=new Map;for(const _ of v){const b=_.monto_total||0;if(g+=b,_.cuenta_codigo){const w=N.get(_.cuenta_codigo)||0;N.set(_.cuenta_codigo,w+b)}}N.forEach((_,b)=>{j[b]=_,d.has(b)||d.set(b,{cuenta:b,nombreCuenta:b,data:[]}),d.get(b).data.push({mes:s[p],monto:_})}),j.total=g,c.push(j)}const u=Array.from(d.keys()),{data:m}=await ce.from("cuentas").select("codigo, nombre").in("codigo",u),f=new Map((m==null?void 0:m.map(p=>[p.codigo,p.nombre]))||[]);d.forEach((p,v)=>{p.nombreCuenta=f.get(v)||v});const h=Array.from(d.values());h.forEach(p=>{s.forEach((v,j)=>{p.data.find(g=>g.mes===v)||p.data.splice(j,0,{mes:v,monto:0})})});const x=h.map(p=>({codigo:p.cuenta,nombre:p.nombreCuenta}));return{costosMensuales:c,costosPorCuenta:h,cuentas:x}},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1})},sFe=e=>{const t=new Date().getFullYear();return it({queryKey:["ingresos-mensuales-por-tipo",t],queryFn:async()=>{const n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],s=`${t}-01-01`,a=`${t}-12-31`,{data:o}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").gte("asientos_contables.fecha",s).lte("asientos_contables.fecha",a),i=new Map;o==null||o.forEach(c=>{const d=new Date(c.asientos_contables.fecha).getMonth();i.has(d)||i.set(d,[]),i.get(d).push(c)});const l=[];for(let c=0;c<12;c++){const d=i.get(c)||[];let u=0,m=0;d.forEach(f=>{const h=f.cuenta_codigo,x=f.debe||0,p=f.haber||0;h==="4001"||h==="4004"?u+=p-x:h==="4002"||h==="4003"?u-=x-p:h.startsWith("41")&&(m+=p-x)}),l.push({mes:n[c],mesNumero:c+1,ventas:Math.max(0,u),otrosIngresos:Math.max(0,m),total:Math.max(0,u+m)})}return l},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1})},aFe=e=>{const t=new Date().getFullYear();return it({queryKey:["egresos-mensuales-por-tipo",t],queryFn:async()=>{const n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],s=`${t}-01-01`,a=`${t}-12-31`,{data:o}=await ce.from("detalle_asientos").select("cuenta_codigo, debe, haber, asientos_contables!inner(fecha)").gte("asientos_contables.fecha",s).lte("asientos_contables.fecha",a),i=new Map;o==null||o.forEach(c=>{const d=new Date(c.asientos_contables.fecha).getMonth();i.has(d)||i.set(d,[]),i.get(d).push(c)});const l=[];for(let c=0;c<12;c++){const d=i.get(c)||[];let u=0,m=0;d.forEach(f=>{const h=f.cuenta_codigo,x=f.debe||0,p=f.haber||0;h==="5001"||h==="5002"?u+=x-p:h==="5003"||h==="5004"?u-=x-p:h.startsWith("51")&&h!=="5109"&&h!=="5110"&&(m+=x-p)}),l.push({mes:n[c],mesNumero:c+1,costos:Math.max(0,u),gastos:Math.max(0,m),total:Math.max(0,u+m)})}return l},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1})},oFe={light:"",dark:".dark"},jV=y.createContext(null);function yV(){const e=y.useContext(jV);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const Dn=y.forwardRef(({id:e,className:t,children:n,config:s,...a},o)=>{const i=y.useId(),l=`chart-${e||i.replace(/:/g,"")}`;return r.jsx(jV.Provider,{value:{config:s},children:r.jsxs("div",{"data-chart":l,ref:o,className:Te("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...a,children:[r.jsx(iFe,{id:l,config:s}),r.jsx(mt,{children:n})]})})});Dn.displayName="Chart";const iFe=({id:e,config:t})=>{const n=Object.entries(t).filter(([s,a])=>a.theme||a.color);return n.length?r.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(oFe).map(([s,a])=>`
${a} [data-chart=${e}] {
${n.map(([o,i])=>{var c;const l=((c=i.theme)==null?void 0:c[s])||i.color;return l?`  --color-${o}: ${l};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Vn=yt,Uo=y.forwardRef(({active:e,payload:t,className:n,indicator:s="dot",hideLabel:a=!1,hideIndicator:o=!1,label:i,labelFormatter:l,labelClassName:c,formatter:d,color:u,nameKey:m,labelKey:f},h)=>{const{config:x}=yV(),p=y.useMemo(()=>{var b;if(a||!(t!=null&&t.length))return null;const[j]=t,g=`${f||j.dataKey||j.name||"value"}`,N=s_(x,j,g),_=!f&&typeof i=="string"?((b=x[i])==null?void 0:b.label)||i:N==null?void 0:N.label;return l?r.jsx("div",{className:Te("font-medium",c),children:l(_,t)}):_?r.jsx("div",{className:Te("font-medium",c),children:_}):null},[i,l,t,a,c,x,f]);if(!e||!(t!=null&&t.length))return null;const v=t.length===1&&s!=="dot";return r.jsxs("div",{ref:h,className:Te("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:p,r.jsx("div",{className:"grid gap-1.5",children:t.map((j,g)=>{const N=`${m||j.name||j.dataKey||"value"}`,_=s_(x,j,N),b=u||j.payload.fill||j.color;return r.jsx("div",{className:Te("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",s==="dot"&&"items-center"),children:d&&(j==null?void 0:j.value)!==void 0&&j.name?d(j.value,j.name,j,g,j.payload):r.jsxs(r.Fragment,{children:[_!=null&&_.icon?r.jsx(_.icon,{}):!o&&r.jsx("div",{className:Te("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":s==="dot","w-1":s==="line","w-0 border-[1.5px] border-dashed bg-transparent":s==="dashed","my-0.5":v&&s==="dashed"}),style:{"--color-bg":b,"--color-border":b}}),r.jsxs("div",{className:Te("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[r.jsxs("div",{className:"grid gap-1.5",children:[v?p:null,r.jsx("span",{className:"text-muted-foreground",children:(_==null?void 0:_.label)||j.name})]}),j.value&&r.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:j.value.toLocaleString()})]})]})},j.dataKey)})})]})});Uo.displayName="ChartTooltip";const lFe=y.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:s="bottom",nameKey:a},o)=>{const{config:i}=yV();return n!=null&&n.length?r.jsx("div",{ref:o,className:Te("flex items-center justify-center gap-4",s==="top"?"pb-3":"pt-3",e),children:n.map(l=>{const c=`${a||l.dataKey||"value"}`,d=s_(i,l,c);return r.jsxs("div",{className:Te("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[d!=null&&d.icon&&!t?r.jsx(d.icon,{}):r.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:l.color}}),d==null?void 0:d.label]},l.value)})}):null});lFe.displayName="ChartLegend";function s_(e,t,n){if(typeof t!="object"||t===null)return;const s="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let a=n;return n in t&&typeof t[n]=="string"?a=t[n]:s&&n in s&&typeof s[n]=="string"&&(a=s[n]),a in e?e[a]:e[n]}const cFe=()=>{const[e,t]=y.useState("original"),[n,s]=y.useState("mensual"),{data:a,isLoading:o}=vV(),{data:i,isLoading:l}=Qj(),{data:c,isLoading:d}=sFe(),{data:u,isLoading:m}=aFe(),{data:f,isLoading:h}=rFe(n==="ventas"),{data:x,isLoading:p}=nFe(void 0,n==="costos"),v=(f==null?void 0:f.ventasDetalladas)||[],j=(f==null?void 0:f.ventasPorMes)||[],g=(f==null?void 0:f.productos)||[],N=(x==null?void 0:x.costosMensuales)||[];x!=null&&x.costosPorCuenta;const _=(x==null?void 0:x.cuentas)||[];if(o||l||d||m)return r.jsx("div",{className:"h-full overflow-auto p-6",children:r.jsx("div",{className:"space-y-6",children:r.jsx(G,{children:r.jsxs(Q,{className:"flex flex-col items-center justify-center p-12",children:[r.jsx(Vr,{className:"h-12 w-12 animate-spin text-primary mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cargando Anlisis Financiero"}),r.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Calculando resultados mensuales, esto puede tomar unos segundos..."})]})})})});if(!a)return null;const b=a.ingresos,w=a.costos,S=a.gastos,C=b-w,A=C-S,P=a.utilidad,k=b>0?C/b*100:0,E=b>0?A/b*100:0,O=b>0?P/b*100:0,M=a.caja+a.bancos+a.cuentasPorCobrar+a.inventario+a.activosFijos,T=a.capitalSocial+a.utilidadesRetenidas,V=M>0?P/M*100:0,I=T>0?P/T*100:0,F=b>0&&w+S>0?P/(w+S)*100:0,D=[{name:"Margen Bruto",value:k,fill:"hsl(var(--chart-1))"},{name:"Margen Operativo",value:E,fill:"hsl(var(--chart-2))"},{name:"Margen Neto",value:O,fill:"hsl(var(--chart-3))"}],X=[{name:"ROA",value:V,fill:"hsl(var(--chart-1))"},{name:"ROE",value:I,fill:"hsl(var(--chart-2))"},{name:"ROI",value:F,fill:"hsl(var(--chart-3))"}],W=[{name:"Ingresos",value:b,fill:"hsl(var(--chart-1))"},{name:"Costos",value:w,fill:"hsl(var(--chart-2))"},{name:"Gastos",value:S,fill:"hsl(var(--chart-3))"},{name:"Utilidad",value:P,fill:"hsl(var(--chart-4))"}],B=[{concepto:"Ingresos",monto:b},{concepto:"Costos",monto:-w},{concepto:"Utilidad Bruta",monto:C},{concepto:"Gastos",monto:-S},{concepto:"Utilidad Operativa",monto:A},{concepto:"Utilidad Neta",monto:P}],q=[{name:"Costos de Venta",value:w,fill:"hsl(var(--chart-2))"},{name:"Gastos Operativos",value:S,fill:"hsl(var(--chart-3))"},{name:"Utilidad Neta",value:P,fill:"hsl(var(--chart-4))"}],te=L=>{let ue=L,pe="";e==="miles"?(ue=L/1e3,pe="K"):e==="millones"&&(ue=L/1e6,pe="M");const we=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:e==="original"?0:1,maximumFractionDigits:e==="original"?0:1}).format(ue);return pe?`${we}${pe}`:we},Y=L=>`${L.toFixed(2)}%`,H=(L,ue)=>L>=ue?"text-green-600":L>=ue/2?"text-yellow-600":"text-red-600";return r.jsxs("div",{className:"h-full overflow-auto",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Anlisis Financiero de Resultados"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Anlisis detallado de rentabilidad, mrgenes y ratios financieros"})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Ingresos Totales"}),r.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:te(b)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Base de anlisis"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Utilidad Bruta"}),r.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:te(C)}),r.jsxs("p",{className:`text-xs mt-1 font-medium ${H(k,40)}`,children:["Margen: ",Y(k)]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Utilidad Operativa"}),r.jsx(Ku,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:te(A)}),r.jsxs("p",{className:`text-xs mt-1 font-medium ${H(E,20)}`,children:["Margen: ",Y(E)]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Utilidad Neta"}),r.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:te(P)}),r.jsxs("p",{className:`text-xs mt-1 font-medium ${H(O,15)}`,children:["Margen: ",Y(O)]})]})]})]}),r.jsxs(Lr,{defaultValue:"mensual",className:"w-full",onValueChange:s,children:[r.jsxs(Dr,{className:"grid w-full grid-cols-7",children:[r.jsx(Qe,{value:"mensual",children:"Estado de Resultados Mensual"}),r.jsx(Qe,{value:"ventas",children:"Ventas"}),r.jsx(Qe,{value:"margenes",children:"Mrgenes"}),r.jsx(Qe,{value:"costos",children:"Costos"}),r.jsx(Qe,{value:"rentabilidad",children:"Rentabilidad"}),r.jsx(Qe,{value:"estructura",children:"Estructura"}),r.jsx(Qe,{value:"distribucion",children:"Distribucin"})]}),r.jsx(Je,{value:"mensual",className:"space-y-4",children:l?r.jsx(gr,{className:"h-96 w-full"}):i?r.jsxs(r.Fragment,{children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Comparativo de Ingresos vs Egresos con Utilidades"}),r.jsx(Me,{children:"Barras muestran ingresos y egresos totales, lneas representan evolucin de utilidades"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{ingresos:{label:"Ingresos",color:"hsl(142, 70%, 45%)"},egresos:{label:"Egresos",color:"hsl(0, 70%, 50%)"},utilidadBruta:{label:"Utilidad Bruta",color:"hsl(220, 70%, 50%)"},ebitda:{label:"EBITDA",color:"hsl(142, 70%, 45%)"},ebit:{label:"EBIT",color:"hsl(280, 70%, 50%)"},utilidadNeta:{label:"Utilidad Neta",color:"hsl(25, 95%, 53%)"}},className:"h-[600px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs($x,{data:i==null?void 0:i.map(L=>({...L,egresos:L.costos+L.gastos})),children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{label:{value:"Monto ($)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:L,payload:ue})=>{var pe,we;return!L||!ue?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(we=(pe=ue[0])==null?void 0:pe.payload)==null?void 0:we.mes}),ue.map((re,de)=>r.jsxs("p",{className:"text-sm",style:{color:re.color},children:[re.name,": ",te(re.value)]},de))]})}}),r.jsx(jr,{}),r.jsx(rt,{dataKey:"ingresos",fill:"hsl(142, 70%, 45%)",name:"Ingresos",children:r.jsx(Et,{dataKey:"ingresos",position:"top",fill:"black",fontSize:11,fontWeight:600,formatter:L=>te(L)})}),r.jsx(rt,{dataKey:"egresos",fill:"hsl(0, 70%, 50%)",name:"Egresos",children:r.jsx(Et,{dataKey:"egresos",position:"top",fill:"black",fontSize:11,fontWeight:600,formatter:L=>te(L)})}),r.jsx(Wt,{type:"monotone",dataKey:"utilidadBruta",stroke:"hsl(220, 70%, 50%)",strokeWidth:3,name:"Utilidad Bruta",dot:{r:5},children:r.jsx(Et,{dataKey:"utilidadBruta",position:"top",fill:"black",fontSize:10,fontWeight:600,formatter:L=>te(L)})}),r.jsx(Wt,{type:"monotone",dataKey:"ebitda",stroke:"hsl(142, 70%, 45%)",strokeWidth:3,name:"EBITDA",dot:{r:5},children:r.jsx(Et,{dataKey:"ebitda",position:"top",fill:"black",fontSize:10,fontWeight:600,formatter:L=>te(L)})}),r.jsx(Wt,{type:"monotone",dataKey:"ebit",stroke:"hsl(280, 70%, 50%)",strokeWidth:3,name:"EBIT",dot:{r:5},children:r.jsx(Et,{dataKey:"ebit",position:"top",fill:"black",fontSize:10,fontWeight:600,formatter:L=>te(L)})}),r.jsx(Wt,{type:"monotone",dataKey:"utilidadNeta",stroke:"hsl(25, 95%, 53%)",strokeWidth:3,name:"Utilidad Neta",dot:{r:5},children:r.jsx(Et,{dataKey:"utilidadNeta",position:"top",fill:"black",fontSize:10,fontWeight:600,formatter:L=>te(L)})})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Desglose de Ingresos por Tipo"}),r.jsx(Me,{children:"Anlisis mensual de ventas y otros ingresos"})]}),r.jsx(Q,{children:d?r.jsx(gr,{className:"h-[400px] w-full"}):c&&c.length>0?r.jsx(Dn,{config:{ventas:{label:"Ventas",color:"hsl(142, 70%, 45%)"},otrosIngresos:{label:"Otros Ingresos",color:"hsl(220, 70%, 50%)"}},className:"h-[400px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:c,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{label:{value:"Monto ($)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:L,payload:ue})=>{var pe,we,re,de;return!L||!ue?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(we=(pe=ue[0])==null?void 0:pe.payload)==null?void 0:we.mes}),ue.map((he,ee)=>r.jsxs("p",{className:"text-sm",style:{color:he.color},children:[he.name,": ",te(he.value)]},ee)),r.jsxs("p",{className:"text-sm font-bold border-t pt-1 mt-1",children:["Total: ",te((de=(re=ue[0])==null?void 0:re.payload)==null?void 0:de.total)]})]})}}),r.jsx(jr,{}),r.jsx(rt,{dataKey:"ventas",fill:"hsl(142, 70%, 45%)",name:"Ventas",stackId:"ingresos",children:r.jsx(Et,{dataKey:"ventas",position:"inside",fill:"white",fontSize:10,fontWeight:600,formatter:L=>L>0?te(L):""})}),r.jsx(rt,{dataKey:"otrosIngresos",fill:"hsl(220, 70%, 50%)",name:"Otros Ingresos",stackId:"ingresos",children:r.jsx(Et,{dataKey:"otrosIngresos",position:"inside",fill:"white",fontSize:10,fontWeight:600,formatter:L=>L>0?te(L):""})})]})})}):r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No hay datos de ingresos disponibles"})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Desglose de Egresos por Tipo"}),r.jsx(Me,{children:"Anlisis mensual de costos y gastos"})]}),r.jsx(Q,{children:m?r.jsx(gr,{className:"h-[400px] w-full"}):u&&u.length>0?r.jsx(Dn,{config:{costos:{label:"Costos",color:"hsl(0, 70%, 50%)"},gastos:{label:"Gastos",color:"hsl(25, 95%, 53%)"}},className:"h-[400px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:u,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{label:{value:"Monto ($)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:L,payload:ue})=>{var pe,we,re,de;return!L||!ue?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(we=(pe=ue[0])==null?void 0:pe.payload)==null?void 0:we.mes}),ue.map((he,ee)=>r.jsxs("p",{className:"text-sm",style:{color:he.color},children:[he.name,": ",te(he.value)]},ee)),r.jsxs("p",{className:"text-sm font-bold border-t pt-1 mt-1",children:["Total: ",te((de=(re=ue[0])==null?void 0:re.payload)==null?void 0:de.total)]})]})}}),r.jsx(jr,{}),r.jsx(rt,{dataKey:"costos",fill:"hsl(0, 70%, 50%)",name:"Costos",stackId:"egresos",children:r.jsx(Et,{dataKey:"costos",position:"inside",fill:"white",fontSize:10,fontWeight:600,formatter:L=>L>0?te(L):""})}),r.jsx(rt,{dataKey:"gastos",fill:"hsl(25, 95%, 53%)",name:"Gastos",stackId:"egresos",children:r.jsx(Et,{dataKey:"gastos",position:"inside",fill:"white",fontSize:10,fontWeight:600,formatter:L=>L>0?te(L):""})})]})})}):r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No hay datos de egresos disponibles"})})]}),r.jsxs(G,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Estado de Resultados Mensual"}),r.jsx(Me,{children:"Anlisis mensual de ingresos, costos, gastos y utilidades del ejercicio actual"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Visualizar en:"}),r.jsxs("select",{value:e,onChange:L=>t(L.target.value),className:"px-3 py-1 border rounded-md text-sm bg-background",children:[r.jsx("option",{value:"original",children:"Original"}),r.jsx("option",{value:"miles",children:"Miles"}),r.jsx("option",{value:"millones",children:"Millones"})]})]})]})}),r.jsx(Q,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{className:"bg-muted/30",children:[r.jsx(me,{className:"font-bold py-2",children:"Concepto"}),i.map(L=>r.jsx(me,{className:"text-right min-w-[100px] font-semibold py-2",children:L.mes},L.mes)),r.jsx(me,{className:"text-right font-bold min-w-[120px] py-2",children:"Total Anual"})]})}),r.jsxs(kt,{children:[r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-bold py-2",children:"Ingresos"}),i.map(L=>r.jsx(Z,{className:"text-right py-2",children:te(L.ingresos)},L.mes)),r.jsx(Z,{className:"text-right font-bold py-2",children:te(i.reduce((L,ue)=>L+ue.ingresos,0))})]}),r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-bold py-2",children:"Costos"}),i.map(L=>r.jsxs(Z,{className:"text-right text-red-600 py-2",children:["(",te(L.costos),")"]},L.mes)),r.jsxs(Z,{className:"text-right font-bold text-red-600 py-2",children:["(",te(i.reduce((L,ue)=>L+ue.costos,0)),")"]})]}),r.jsxs(Oe,{className:"border-t-2 bg-muted/50",children:[r.jsx(Z,{className:"font-bold py-2",children:"Utilidad Bruta"}),i.map(L=>r.jsx(Z,{className:"text-right font-bold py-2",children:te(L.utilidadBruta)},L.mes)),r.jsx(Z,{className:"text-right font-bold py-2",children:te(i.reduce((L,ue)=>L+ue.utilidadBruta,0))})]}),r.jsxs(Oe,{className:"bg-muted/50",children:[r.jsx(Z,{className:"font-bold italic text-sm py-1.5",children:"Margen Bruto %"}),i.map(L=>r.jsx(Z,{className:"text-right font-semibold italic text-sm py-1.5",children:Y(L.margenBruto)},L.mes)),r.jsx(Z,{className:"text-right font-bold italic text-sm py-1.5",children:Y(i.reduce((L,ue)=>L+ue.ingresos,0)>0?i.reduce((L,ue)=>L+ue.utilidadBruta,0)/i.reduce((L,ue)=>L+ue.ingresos,0)*100:0)})]}),r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-bold py-2",children:"Gastos Operativos"}),i.map(L=>r.jsxs(Z,{className:"text-right text-red-600 py-2",children:["(",te(L.gastos),")"]},L.mes)),r.jsxs(Z,{className:"text-right font-bold text-red-600 py-2",children:["(",te(i.reduce((L,ue)=>L+ue.gastos,0)),")"]})]}),r.jsxs(Oe,{className:"border-t-2 bg-muted/50",children:[r.jsx(Z,{className:"font-bold py-2",children:"EBITDA"}),i.map(L=>r.jsx(Z,{className:"text-right font-bold py-2",children:te(L.ebitda)},L.mes)),r.jsx(Z,{className:"text-right font-bold py-2",children:te(i.reduce((L,ue)=>L+ue.ebitda,0))})]}),r.jsxs(Oe,{className:"bg-muted/50",children:[r.jsx(Z,{className:"font-bold italic text-sm py-1.5",children:"Margen EBITDA %"}),i.map(L=>r.jsx(Z,{className:"text-right font-semibold italic text-sm py-1.5",children:Y(L.margenEBITDA)},L.mes)),r.jsx(Z,{className:"text-right font-bold italic text-sm py-1.5",children:Y(i.reduce((L,ue)=>L+ue.ingresos,0)>0?i.reduce((L,ue)=>L+ue.ebitda,0)/i.reduce((L,ue)=>L+ue.ingresos,0)*100:0)})]}),r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-bold py-2",children:"Depreciacin"}),i.map(L=>r.jsxs(Z,{className:"text-right text-red-600 py-2",children:["(",te(L.depreciacion),")"]},L.mes)),r.jsxs(Z,{className:"text-right font-bold text-red-600 py-2",children:["(",te(i.reduce((L,ue)=>L+ue.depreciacion,0)),")"]})]}),r.jsxs(Oe,{className:"border-t-2 bg-muted/50",children:[r.jsx(Z,{className:"font-bold py-2",children:"EBIT (Utilidad Operativa)"}),i.map(L=>r.jsx(Z,{className:"text-right font-bold py-2",children:te(L.ebit)},L.mes)),r.jsx(Z,{className:"text-right font-bold py-2",children:te(i.reduce((L,ue)=>L+ue.ebit,0))})]}),r.jsxs(Oe,{className:"bg-muted/50",children:[r.jsx(Z,{className:"font-bold italic text-sm py-1.5",children:"Margen EBIT %"}),i.map(L=>r.jsx(Z,{className:"text-right font-semibold italic text-sm py-1.5",children:Y(L.margenEBIT)},L.mes)),r.jsx(Z,{className:"text-right font-bold italic text-sm py-1.5",children:Y(i.reduce((L,ue)=>L+ue.ingresos,0)>0?i.reduce((L,ue)=>L+ue.ebit,0)/i.reduce((L,ue)=>L+ue.ingresos,0)*100:0)})]}),r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-bold py-2",children:"Intereses"}),i.map(L=>r.jsxs(Z,{className:"text-right text-red-600 py-2",children:["(",te(L.intereses),")"]},L.mes)),r.jsxs(Z,{className:"text-right font-bold text-red-600 py-2",children:["(",te(i.reduce((L,ue)=>L+ue.intereses,0)),")"]})]}),r.jsxs(Oe,{className:"border-t-2 bg-muted/50",children:[r.jsx(Z,{className:"font-bold py-2",children:"Utilidad antes de Impuestos (EBT)"}),i.map(L=>r.jsx(Z,{className:"text-right font-bold py-2",children:te(L.utilidadAntesImpuestos)},L.mes)),r.jsx(Z,{className:"text-right font-bold py-2",children:te(i.reduce((L,ue)=>L+ue.utilidadAntesImpuestos,0))})]}),r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-bold py-2",children:"Impuestos (30%)"}),i.map(L=>r.jsxs(Z,{className:"text-right text-red-600 py-2",children:["(",te(L.impuestos),")"]},L.mes)),r.jsxs(Z,{className:"text-right font-bold text-red-600 py-2",children:["(",te(i.reduce((L,ue)=>L+ue.impuestos,0)),")"]})]}),r.jsxs(Oe,{className:"border-t-2 bg-muted/50",children:[r.jsx(Z,{className:"font-bold py-2",children:"Utilidad Neta"}),i.map(L=>r.jsx(Z,{className:"text-right font-bold py-2",children:te(L.utilidadNeta)},L.mes)),r.jsx(Z,{className:"text-right font-bold py-2",children:te(i.reduce((L,ue)=>L+ue.utilidadNeta,0))})]}),r.jsxs(Oe,{className:"bg-muted/50",children:[r.jsx(Z,{className:"font-bold italic text-sm py-1.5",children:"Margen Neto %"}),i.map(L=>r.jsx(Z,{className:"text-right font-semibold italic text-sm py-1.5",children:Y(L.margenNeto)},L.mes)),r.jsx(Z,{className:"text-right font-bold italic text-sm py-1.5",children:Y(i.reduce((L,ue)=>L+ue.ingresos,0)>0?i.reduce((L,ue)=>L+ue.utilidadNeta,0)/i.reduce((L,ue)=>L+ue.ingresos,0)*100:0)})]})]})]})})})]})]}):null}),r.jsx(Je,{value:"margenes",className:"space-y-4",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Anlisis de Mrgenes"}),r.jsx(Me,{children:"Comparacin de mrgenes de rentabilidad en cada nivel"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{value:{label:"Porcentaje",color:"hsl(var(--chart-1))"}},className:"h-[450px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:D,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"name"}),r.jsx(gt,{}),r.jsx(Vn,{content:r.jsx(Uo,{})}),r.jsx(rt,{dataKey:"value",fill:"hsl(var(--chart-1))",name:"Margen %"})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Interpretacin de Mrgenes"}),r.jsx(Me,{children:"Anlisis detallado por tipo de margen"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Margen Bruto"}),r.jsx("span",{className:`text-sm font-bold ${H(k,40)}`,children:Y(k)})]}),r.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-chart-1 h-full rounded-full transition-all",style:{width:`${Math.min(k,100)}%`}})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:k>=40?"Excelente eficiencia en costos de produccin":k>=20?"Margen moderado, revisar costos":"Margen bajo, optimizar costos urgentemente"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Margen Operativo"}),r.jsx("span",{className:`text-sm font-bold ${H(E,20)}`,children:Y(E)})]}),r.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-chart-2 h-full rounded-full transition-all",style:{width:`${Math.min(E,100)}%`}})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:E>=20?"Operacin eficiente con buenos controles":E>=10?"Operacin aceptable, mejorar eficiencia":"Gastos operativos elevados, requiere control"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Margen Neto"}),r.jsx("span",{className:`text-sm font-bold ${H(O,15)}`,children:Y(O)})]}),r.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-chart-3 h-full rounded-full transition-all",style:{width:`${Math.min(O,100)}%`}})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:O>=15?"Rentabilidad neta excelente":O>=7?"Rentabilidad aceptable":"Rentabilidad baja, revisar estructura de costos"})]})]})]})]})}),r.jsx(Je,{value:"rentabilidad",className:"space-y-4",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Ratios de Rentabilidad"}),r.jsx(Me,{children:"Indicadores clave de retorno sobre inversin"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{value:{label:"Porcentaje",color:"hsl(var(--chart-1))"}},className:"h-[450px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:X,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"name"}),r.jsx(gt,{}),r.jsx(Vn,{content:r.jsx(Uo,{})}),r.jsx(rt,{dataKey:"value",name:"Ratio %",children:X.map((L,ue)=>r.jsx(Kt,{fill:L.fill},`cell-${ue}`))})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Interpretacin de Ratios"}),r.jsx(Me,{children:"Anlisis de eficiencia y retornos"})]}),r.jsxs(Q,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"ROA (Return on Assets)"}),r.jsx("span",{className:`text-lg font-bold ${H(V,10)}`,children:Y(V)})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Utilidad generada por cada peso de activos.",V>=10?" Excelente aprovechamiento de activos.":V>=5?" Uso aceptable de activos.":" Activos subutilizados."]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"ROE (Return on Equity)"}),r.jsx("span",{className:`text-lg font-bold ${H(I,15)}`,children:Y(I)})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Retorno sobre capital de accionistas.",I>=15?" Excelente retorno para inversionistas.":I>=8?" Retorno moderado sobre inversin.":" Retorno bajo sobre capital."]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"ROI (Return on Investment)"}),r.jsx("span",{className:`text-lg font-bold ${H(F,20)}`,children:Y(F)})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Retorno sobre inversin total.",F>=20?" Inversin altamente rentable.":F>=10?" Inversin con retorno aceptable.":" Inversin con bajo retorno."]})]})]})]})]})}),r.jsx(Je,{value:"estructura",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Estructura del Estado de Resultados"}),r.jsx(Me,{children:"Flujo desde ingresos hasta utilidad neta"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{monto:{label:"Monto",color:"hsl(var(--chart-1))"}},className:"h-[400px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:B,layout:"vertical",children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{type:"number"}),r.jsx(gt,{dataKey:"concepto",type:"category",width:120}),r.jsx(Vn,{content:r.jsx(Uo,{}),formatter:L=>te(L)}),r.jsx(rt,{dataKey:"monto",fill:"hsl(var(--chart-1))",name:"Monto",children:B.map((L,ue)=>r.jsx(Kt,{fill:L.monto>=0?"hsl(var(--chart-1))":"hsl(var(--chart-2))"},`cell-${ue}`))})]})})})})]})}),r.jsx(Je,{value:"distribucion",className:"space-y-4",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Distribucin de Ingresos"}),r.jsx(Me,{children:"Cmo se distribuyen los ingresos entre costos, gastos y utilidad"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{value:{label:"Monto",color:"hsl(var(--chart-1))"}},className:"h-[450px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(dl,{children:[r.jsx(Xn,{data:q,cx:"50%",cy:"50%",labelLine:!1,label:({name:L,percent:ue})=>`${L}: ${(ue*100).toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:q.map((L,ue)=>r.jsx(Kt,{fill:L.fill},`cell-${ue}`))}),r.jsx(Vn,{content:r.jsx(Uo,{}),formatter:L=>te(L)})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Desglose Monetario"}),r.jsx(Me,{children:"Valores absolutos de cada componente"})]}),r.jsx(Q,{className:"space-y-4",children:W.map((L,ue)=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:L.name}),r.jsx("span",{className:"text-sm font-bold",children:te(L.value)})]}),r.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${L.value/b*100}%`,backgroundColor:L.fill.replace("hsl(var(","hsl(").replace(")",")")}})}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(L.value/b*100).toFixed(2),"% del total de ingresos"]})]},ue))})]})]})}),r.jsx(Je,{value:"ventas",className:"space-y-4",children:h?r.jsx(gr,{className:"h-96 w-full"}):(()=>{const L=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],ue=L.map(re=>{const de=j.find(U=>U.mes===re),he=de?{...de}:{mes:re};let ee=0,z=0;return g.forEach(U=>{const oe=he[`${U}_monto`]||0,Se=he[`${U}_volumen`]||0;ee+=oe,z+=Se}),he.totalMonto=ee,he.totalVolumen=z,g.forEach(U=>{const oe=he[`${U}_monto`]||0,Se=he[`${U}_volumen`]||0;he[`${U}_pct_monto`]=ee>0?oe/ee*100:0,he[`${U}_pct_volumen`]=z>0?Se/z*100:0,he[`${U}_precio_promedio`]=Se>0?oe/Se:0}),he.precioPromedioGeneral=z>0?ee/z:0,he}),pe=g.map(re=>{const de=v.filter(ee=>ee.producto===re),he={nombre:re};return L.forEach(ee=>{const z=de.find(U=>U.mes===ee);he[ee]={monto:(z==null?void 0:z.monto)||0,volumen:(z==null?void 0:z.volumen)||0,tarifaPromedio:(z==null?void 0:z.tarifaPromedio)||0}}),he}),we=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"];return r.jsxs(r.Fragment,{children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-2",children:[r.jsx(ae,{children:"Ventas por Producto (Monto Total)"}),r.jsx(Me,{children:"Monto individual de ventas por producto en columnas apiladas por mes"})]}),r.jsx(Q,{className:"px-2 pb-2",children:r.jsx(Dn,{config:g.reduce((re,de,he)=>(re[`${de}_monto`]={label:de,color:we[he%we.length]},re),{}),className:"h-[600px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:ue,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{tick:{fill:"hsl(var(--foreground))"},label:{value:"Monto ($)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:re,payload:de})=>{if(!re||!de||!de.length)return null;const he=de[0].payload;return r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:he.mes}),g.map(ee=>{const z=he[`${ee}_monto`];if(!z||z===0)return null;const U=we[g.indexOf(ee)%we.length];return r.jsxs("p",{className:"text-sm",style:{color:U},children:[ee,": ",te(z)]},ee)}),r.jsxs("p",{className:"text-sm font-bold border-t pt-1",children:["Total: ",te(he.totalMonto||0)]})]})}}),r.jsx(jr,{}),g.map((re,de)=>r.jsx(rt,{dataKey:`${re}_monto`,stackId:"a",fill:we[de%we.length],name:re,children:r.jsx(Et,{dataKey:`${re}_monto`,position:"center",fill:"black",fontSize:11,fontWeight:600,formatter:he=>he>0?te(he):""})},re))]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-2",children:[r.jsx(ae,{children:"Volumen de Ventas por Producto (Unidades)"}),r.jsx(Me,{children:"Cantidad de unidades vendidas por producto cada mes"})]}),r.jsx(Q,{className:"px-2 pb-2",children:r.jsx(Dn,{config:g.reduce((re,de,he)=>(re[`${de}_volumen`]={label:de,color:we[he%we.length]},re),{}),className:"h-[600px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:ue,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{tick:{fill:"hsl(var(--foreground))"},label:{value:"Unidades",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:r.jsx(Uo,{})}),r.jsx(jr,{}),g.map((re,de)=>r.jsx(rt,{dataKey:`${re}_volumen`,fill:we[de%we.length],name:re,label:{position:"center",fill:"white",fontSize:12,formatter:he=>he>0?he.toFixed(0):""}},re))]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-2",children:[r.jsx(ae,{children:"Porcentaje de Ventas por Producto (Monto)"}),r.jsx(Me,{children:"Porcentaje que representa cada producto sobre el total de ventas en dinero del mes"})]}),r.jsx(Q,{className:"px-2 pb-2",children:r.jsx(Dn,{config:g.reduce((re,de,he)=>(re[`${de}_pct_monto`]={label:de,color:we[he%we.length]},re),{}),className:"h-[600px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(bl,{data:ue,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{tick:{fill:"hsl(var(--foreground))"},label:{value:"Porcentaje (%)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:re,payload:de})=>{var he,ee;return!re||!de?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(ee=(he=de[0])==null?void 0:he.payload)==null?void 0:ee.mes}),de.map((z,U)=>r.jsxs("p",{className:"text-sm",style:{color:z.color},children:[z.name,": ",Y(z.value)]},U))]})}}),r.jsx(jr,{}),g.map((re,de)=>r.jsx(Wt,{type:"monotone",dataKey:`${re}_pct_monto`,stroke:we[de%we.length],strokeWidth:3,name:re,dot:{r:5}},re))]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-2",children:[r.jsx(ae,{children:"Porcentaje de Ventas por Producto (Volumen)"}),r.jsx(Me,{children:"Porcentaje que representa cada producto sobre el total de unidades vendidas del mes"})]}),r.jsx(Q,{className:"px-2 pb-2",children:r.jsx(Dn,{config:g.reduce((re,de,he)=>(re[`${de}_pct_volumen`]={label:de,color:we[he%we.length]},re),{}),className:"h-[600px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(bl,{data:ue,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{tick:{fill:"hsl(var(--foreground))"},label:{value:"Porcentaje (%)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:re,payload:de})=>{var he,ee;return!re||!de?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(ee=(he=de[0])==null?void 0:he.payload)==null?void 0:ee.mes}),de.map((z,U)=>r.jsxs("p",{className:"text-sm",style:{color:z.color},children:[z.name,": ",Y(z.value)]},U))]})}}),r.jsx(jr,{}),g.map((re,de)=>r.jsx(Wt,{type:"monotone",dataKey:`${re}_pct_volumen`,stroke:we[de%we.length],strokeWidth:3,name:re,dot:{r:5,fill:we[de%we.length]}},re))]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"pb-2",children:[r.jsx(ae,{children:"Ventas Totales y Ticket Promedio"}),r.jsx(Me,{children:"Comparacin del total de ventas mensuales (barras) con el ticket promedio (lnea)"})]}),r.jsx(Q,{className:"px-2 pb-2",children:r.jsx(Dn,{config:{totalMonto:{label:"Total Ventas",color:"hsl(var(--primary))"},precioPromedioGeneral:{label:"Ticket Promedio",color:"hsl(var(--destructive))"}},className:"h-[600px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs($x,{data:ue,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",tick:{fill:"hsl(var(--foreground))"}}),r.jsx(gt,{yAxisId:"left",tick:{fill:"hsl(var(--foreground))"},label:{value:"Total Ventas ($)",angle:-90,position:"insideLeft"}}),r.jsx(gt,{yAxisId:"right",orientation:"right",tick:{fill:"hsl(var(--foreground))"},label:{value:"Ticket Promedio ($)",angle:90,position:"insideRight"}}),r.jsx(Vn,{content:({active:re,payload:de})=>{var he,ee;return!re||!de?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(ee=(he=de[0])==null?void 0:he.payload)==null?void 0:ee.mes}),de.map((z,U)=>r.jsxs("p",{className:"text-sm",style:{color:z.color},children:[z.name,": ",te(z.value)]},U))]})}}),r.jsx(jr,{}),r.jsx(rt,{yAxisId:"left",dataKey:"totalMonto",fill:"hsl(var(--primary))",name:"Total Ventas"}),r.jsx(Wt,{yAxisId:"right",type:"monotone",dataKey:"precioPromedioGeneral",stroke:"hsl(var(--destructive))",strokeWidth:4,name:"Ticket Promedio",dot:{r:6}})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Resumen de Ventas por Producto y Mes"}),r.jsx(Me,{children:"Tabla detallada con productos en filas y meses en columnas"})]}),r.jsx(Q,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{className:"bg-primary/10",children:[r.jsx(me,{className:"font-bold bg-primary/20 sticky left-0 z-10",children:"Producto"}),L.map(re=>r.jsx(me,{className:"text-right min-w-[120px] font-semibold",children:re},re)),r.jsx(me,{className:"text-right font-bold bg-primary/20 min-w-[120px]",children:"Total Anual"})]})}),r.jsx(kt,{children:pe.length===0?r.jsx(Oe,{children:r.jsx(Z,{colSpan:L.length+2,className:"text-center text-muted-foreground py-8",children:"No hay datos de ventas de productos disponibles para el ao actual"})}):pe.map((re,de)=>{const he=L.reduce((z,U)=>{var oe;return z+(((oe=re[U])==null?void 0:oe.monto)||0)},0),ee=L.reduce((z,U)=>{var oe;return z+(((oe=re[U])==null?void 0:oe.volumen)||0)},0);return r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-medium bg-muted/50 sticky left-0 z-10",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:we[de%we.length]},children:re.nombre.substring(0,2).toUpperCase()}),r.jsx("span",{children:re.nombre})]})}),L.map(z=>{var U,oe;return r.jsx(Z,{className:"text-right",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-green-600 font-medium",children:te(((U=re[z])==null?void 0:U.monto)||0)}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[(((oe=re[z])==null?void 0:oe.volumen)||0).toLocaleString("es-MX",{maximumFractionDigits:0})," und"]})]})},z)}),r.jsx(Z,{className:"text-right font-bold bg-muted",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-green-600",children:te(he)}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[ee.toLocaleString("es-MX",{maximumFractionDigits:0})," und"]})]})})]},re.nombre)})})]})})})]})]})})()}),r.jsx(Je,{value:"costos",className:"space-y-4",children:p?r.jsx(gr,{className:"h-96 w-full"}):N.length>0?r.jsxs(r.Fragment,{children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Evolucin Mensual de Costos por Cuenta"}),r.jsx(Me,{children:"Anlisis de costos desglosados por cuenta contable a lo largo del ao"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:_.reduce((L,ue,pe)=>{const we=["hsl(220, 70%, 50%)","hsl(142, 70%, 45%)","hsl(0, 70%, 50%)","hsl(280, 70%, 50%)","hsl(25, 95%, 53%)","hsl(45, 93%, 47%)","hsl(340, 82%, 52%)","hsl(195, 85%, 50%)"];return L[ue.codigo]={label:ue.nombre,color:we[pe%we.length]},L},{}),className:"h-[500px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs($x,{data:N,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"mes",angle:-45,textAnchor:"end",height:80}),r.jsx(gt,{label:{value:"Monto ($)",angle:-90,position:"insideLeft"}}),r.jsx(Vn,{content:({active:L,payload:ue})=>{var pe,we,re,de;return!L||!ue?null:r.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3 space-y-1",children:[r.jsx("p",{className:"font-bold",children:(we=(pe=ue[0])==null?void 0:pe.payload)==null?void 0:we.mes}),ue.map((he,ee)=>r.jsxs("p",{className:"text-sm",style:{color:he.color},children:[he.name,": ",te(he.value)]},ee)),r.jsxs("p",{className:"text-sm font-bold border-t pt-1 mt-1",children:["Total: ",te((de=(re=ue[0])==null?void 0:re.payload)==null?void 0:de.total)]})]})}}),r.jsx(jr,{}),_.map((L,ue)=>{const pe=["hsl(220, 70%, 50%)","hsl(142, 70%, 45%)","hsl(0, 70%, 50%)","hsl(280, 70%, 50%)","hsl(25, 95%, 53%)","hsl(45, 93%, 47%)","hsl(340, 82%, 52%)","hsl(195, 85%, 50%)"];return r.jsx(Wt,{type:"monotone",dataKey:L.codigo,stroke:pe[ue%pe.length],strokeWidth:3,name:L.nombre,dot:{r:5}},L.codigo)}),r.jsx(Wt,{type:"monotone",dataKey:"total",stroke:"hsl(0, 0%, 20%)",strokeWidth:4,strokeDasharray:"5 5",name:"Total Costos",dot:{r:6}})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Detalle de Costos Mensuales por Cuenta"}),r.jsx(Me,{children:"Tabla con el desglose completo de costos por mes y cuenta contable"})]}),r.jsx(Q,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ot,{children:[r.jsx(Tt,{children:r.jsxs(Oe,{className:"bg-muted/30",children:[r.jsx(me,{className:"font-bold",children:"Mes"}),_.map(L=>r.jsx(me,{className:"text-right min-w-[120px]",children:L.nombre},L.codigo)),r.jsx(me,{className:"text-right font-bold min-w-[120px] bg-muted/50",children:"Total Mes"})]})}),r.jsxs(kt,{children:[N.map(L=>r.jsxs(Oe,{children:[r.jsx(Z,{className:"font-medium",children:L.mes}),_.map(ue=>r.jsx(Z,{className:"text-right",children:te(L[ue.codigo]||0)},ue.codigo)),r.jsx(Z,{className:"text-right font-bold bg-muted/20",children:te(L.total)})]},L.mes)),r.jsxs(Oe,{className:"bg-primary/10 font-bold",children:[r.jsx(Z,{children:"Total Anual"}),_.map(L=>r.jsx(Z,{className:"text-right",children:te(N.reduce((ue,pe)=>ue+(pe[L.codigo]||0),0))},L.codigo)),r.jsx(Z,{className:"text-right bg-primary/20",children:te(N.reduce((L,ue)=>L+ue.total,0))})]})]})]})})})]})]}):r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Sin Datos de Costos"}),r.jsx(Me,{children:"No hay transacciones de costos registradas para el ao actual"})]}),r.jsx(Q,{children:r.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Comienza a registrar costos para ver el anlisis mensual"})})]})})]})]})]})},dFe=()=>{const{data:e,isLoading:t}=vV();if(t)return r.jsx("div",{className:"h-full overflow-auto p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(gr,{className:"h-32 w-full"}),r.jsx(gr,{className:"h-96 w-full"})]})});if(!e)return null;const n=e.caja+e.bancos+e.cuentasPorCobrar+e.inventario,s=e.activosFijos,a=n+s,o=e.proveedores,i=e.financiamientos,l=o+i,c=e.capitalSocial+e.utilidadesRetenidas,d=o>0?n/o:0,u=o>0?(n-e.inventario)/o:0,m=n-o,f=a>0?l/a*100:0,h=c>0?l/c*100:0,x=c>0?a/c:0,p=e.ingresos>0&&a>0?e.ingresos/a:0,v=e.ingresos>0&&s>0?e.ingresos/s:0,j=[{name:"Caja",value:e.caja,fill:"hsl(var(--chart-1))"},{name:"Bancos",value:e.bancos,fill:"hsl(var(--chart-2))"},{name:"Cuentas por Cobrar",value:e.cuentasPorCobrar,fill:"hsl(var(--chart-3))"},{name:"Inventario",value:e.inventario,fill:"hsl(var(--chart-4))"},{name:"Activos Fijos",value:s,fill:"hsl(var(--chart-5))"}],g=[{name:"Proveedores",value:o,fill:"hsl(var(--chart-2))"},{name:"Financiamientos",value:i,fill:"hsl(var(--chart-3))"},{name:"Capital Contable",value:c,fill:"hsl(var(--chart-1))"}],N=[{name:"Razn Corriente",value:d,fill:"hsl(var(--chart-1))"},{name:"Prueba cida",value:u,fill:"hsl(var(--chart-2))"}],_=C=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0,maximumFractionDigits:0}).format(C),b=C=>`${C.toFixed(2)}%`,w=C=>C.toFixed(2),S=(C,A,P)=>C>=A?"text-green-600":C>=P?"text-yellow-600":"text-red-600";return r.jsxs("div",{className:"h-full overflow-auto",children:[r.jsxs("div",{className:"p-6 border-b bg-background",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Anlisis Financiero del Balance"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Anlisis detallado de liquidez, solvencia y estructura financiera"})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Activo Total"}),r.jsx(sS,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:_(a)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recursos totales"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Pasivo Total"}),r.jsx(aU,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:_(l)}),r.jsxs("p",{className:`text-xs mt-1 font-medium ${S(f,0,50)}`,children:[b(f)," de endeudamiento"]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Capital Contable"}),r.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:_(c)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Patrimonio neto"})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Capital de Trabajo"}),r.jsx(Hh,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Q,{children:[r.jsx("div",{className:"text-2xl font-bold",children:_(m)}),r.jsx("p",{className:`text-xs mt-1 font-medium ${m>=0?"text-green-600":"text-red-600"}`,children:m>=0?"Positivo":"Negativo"})]})]})]}),r.jsxs(Lr,{defaultValue:"liquidez",className:"w-full",children:[r.jsxs(Dr,{className:"grid w-full grid-cols-4",children:[r.jsx(Qe,{value:"liquidez",children:"Liquidez"}),r.jsx(Qe,{value:"endeudamiento",children:"Endeudamiento"}),r.jsx(Qe,{value:"estructura",children:"Estructura"}),r.jsx(Qe,{value:"eficiencia",children:"Eficiencia"})]}),r.jsx(Je,{value:"liquidez",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Ratios de Liquidez"}),r.jsx(Me,{children:"Capacidad de pago de obligaciones de corto plazo"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{value:{label:"Ratio",color:"hsl(var(--chart-1))"}},className:"h-[300px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(Gt,{data:N,children:[r.jsx(Lt,{strokeDasharray:"3 3"}),r.jsx(jt,{dataKey:"name"}),r.jsx(gt,{}),r.jsx(Vn,{content:r.jsx(Uo,{})}),r.jsx(rt,{dataKey:"value",name:"Ratio",children:N.map((C,A)=>r.jsx(Kt,{fill:C.fill},`cell-${A}`))})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Interpretacin de Liquidez"}),r.jsx(Me,{children:"Anlisis de capacidad de pago"})]}),r.jsxs(Q,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Razn Corriente"}),r.jsx("span",{className:`text-lg font-bold ${S(d,2,1)}`,children:w(d)})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:d>=2?"Excelente capacidad de pago. Activos circulantes cubren bien las obligaciones.":d>=1?"Capacidad de pago aceptable. Se pueden cubrir las obligaciones a corto plazo.":"Liquidez insuficiente. Riesgo de problemas de flujo de efectivo."}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Por cada $1 de pasivo circulante hay $",w(d)," de activo circulante."]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Prueba cida"}),r.jsx("span",{className:`text-lg font-bold ${S(u,1,.5)}`,children:w(u)})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:u>=1?"Excelente liquidez inmediata. Puede pagar obligaciones sin vender inventario.":u>=.5?"Liquidez inmediata aceptable, aunque dependiente del inventario.":"Liquidez inmediata baja. Alta dependencia de venta de inventario."})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Capital de Trabajo"}),r.jsx("span",{className:`text-lg font-bold ${m>=0?"text-green-600":"text-red-600"}`,children:_(m)})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:m>0?"Capital de trabajo positivo. Hay recursos para operaciones diarias.":"Capital de trabajo negativo. Puede haber problemas de operacin."})]})]})]})]})}),r.jsx(Je,{value:"endeudamiento",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Ratios de Endeudamiento"}),r.jsx(Me,{children:"Nivel de apalancamiento y dependencia de deuda"})]}),r.jsxs(Q,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Razn de Endeudamiento"}),r.jsx("span",{className:`text-lg font-bold ${S(100-f,50,30)}`,children:b(f)})]}),r.jsx("div",{className:"w-full bg-secondary h-3 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-chart-2 h-full rounded-full transition-all",style:{width:`${Math.min(f,100)}%`}})}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:f<=50?"Nivel de endeudamiento saludable. Buena estructura financiera.":f<=70?"Endeudamiento moderado. Revisar estructura de deuda.":"Alto endeudamiento. Riesgo financiero elevado."})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Razn Deuda/Capital"}),r.jsx("span",{className:`text-lg font-bold ${S(100-h,50,0)}`,children:b(h)})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:h<=100?"Deuda controlada respecto al capital propio.":h<=200?"Deuda significativa. Monitorear capacidad de pago.":"Deuda muy alta respecto al capital. Riesgo financiero."})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Multiplicador de Capital"}),r.jsxs("span",{className:"text-lg font-bold",children:[w(x),"x"]})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Por cada $1 de capital propio se tienen $",w(x)," en activos totales."]})]})]})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Composicin Pasivo + Capital"}),r.jsx(Me,{children:"Distribucin de fuentes de financiamiento"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{value:{label:"Monto",color:"hsl(var(--chart-1))"}},className:"h-[300px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(dl,{children:[r.jsx(Xn,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:C,percent:A})=>`${C}: ${(A*100).toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((C,A)=>r.jsx(Kt,{fill:C.fill},`cell-${A}`))}),r.jsx(Vn,{content:r.jsx(Uo,{}),formatter:C=>_(C)})]})})})})]})]})}),r.jsx(Je,{value:"estructura",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Composicin de Activos"}),r.jsx(Me,{children:"Distribucin de recursos de la empresa"})]}),r.jsx(Q,{children:r.jsx(Dn,{config:{value:{label:"Monto",color:"hsl(var(--chart-1))"}},className:"h-[300px]",children:r.jsx(mt,{width:"100%",height:"100%",children:r.jsxs(dl,{children:[r.jsx(Xn,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:({name:C,percent:A})=>`${C}: ${(A*100).toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:j.map((C,A)=>r.jsx(Kt,{fill:C.fill},`cell-${A}`))}),r.jsx(Vn,{content:r.jsx(Uo,{}),formatter:C=>_(C)})]})})})})]}),r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Desglose de Activos"}),r.jsx(Me,{children:"Valores monetarios por categora"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold",children:[r.jsx("span",{children:"Activo Circulante"}),r.jsx("span",{children:_(n)})]}),j.filter(C=>C.name!=="Activos Fijos").map((C,A)=>r.jsx("div",{className:"ml-4 space-y-1",children:r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:C.name}),r.jsx("span",{children:_(C.value)})]})},A))]}),r.jsx("div",{className:"space-y-2 pt-2 border-t",children:r.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold",children:[r.jsx("span",{children:"Activo Fijo"}),r.jsx("span",{children:_(s)})]})}),r.jsx("div",{className:"space-y-2 pt-2 border-t",children:r.jsxs("div",{className:"flex justify-between items-center text-base font-bold",children:[r.jsx("span",{children:"Activo Total"}),r.jsx("span",{children:_(a)})]})})]})]})]})}),r.jsx(Je,{value:"eficiencia",className:"space-y-4",children:r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Ratios de Eficiencia"}),r.jsx(Me,{children:"Aprovechamiento de activos para generar ingresos"})]}),r.jsxs(Q,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Rotacin de Activos Totales"}),r.jsxs("span",{className:"text-lg font-bold",children:[w(p)," veces"]})]}),r.jsx("div",{className:"w-full bg-secondary h-3 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-chart-1 h-full rounded-full transition-all",style:{width:`${Math.min(p*50,100)}%`}})}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:p>=2?"Excelente rotacin. Los activos generan mltiples veces su valor en ingresos.":p>=1?"Rotacin aceptable. Los activos estn generando ingresos razonables.":"Baja rotacin. Los activos no estn siendo aprovechados eficientemente."}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Cada peso invertido en activos gener $",w(p)," en ingresos."]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Rotacin de Activos Fijos"}),r.jsxs("span",{className:"text-lg font-bold",children:[w(v)," veces"]})]}),r.jsx("div",{className:"w-full bg-secondary h-3 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-chart-2 h-full rounded-full transition-all",style:{width:`${Math.min(v*20,100)}%`}})}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:v>=5?"Excelente aprovechamiento de activos fijos.":v>=2?"Aprovechamiento aceptable de activos fijos.":"Baja productividad de activos fijos."}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Los activos fijos generaron $",w(v)," en ingresos por cada peso invertido."]})]})]})]})})]})]})]})},uFe=()=>{const[e,t]=y.useState(!1),[n,s]=y.useState(!1),a=async()=>{t(!0);try{const{data:o}=await ce.from("asientos_contables").select("id"),i=(o==null?void 0:o.map(l=>l.id))||[];i.length>0&&await ce.from("detalle_asientos").delete().in("asiento_id",i),await Promise.all([ce.from("asientos_contables").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("transacciones_cobros_pagos").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("transacciones_impuestos").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("movimientos_inventario").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("transacciones_financiamientos").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("transacciones_capital").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("transacciones_egresos").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("transacciones_ingresos").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("inversiones_capex").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("financiamientos").delete().neq("id","00000000-0000-0000-0000-000000000000")]),Le({title:" Datos reseteados",description:"Todas las transacciones han sido eliminadas completamente. La pgina se recargar."}),s(!1),setTimeout(()=>{window.location.reload()},1500)}catch(o){console.error("Error al resetear datos:",o),Le({title:" Error",description:"Hubo un error al borrar los datos. Intenta nuevamente.",variant:"destructive"})}finally{t(!1)}};return r.jsxs("div",{className:"min-h-screen bg-background p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(o0,{className:"h-8 w-8"}),"Configuracin"]}),r.jsx("p",{className:"text-muted-foreground",children:"Gestiona las preferencias y configuracin del sistema"})]}),r.jsxs("div",{className:"space-y-6 max-w-4xl",children:[r.jsxs(G,{children:[r.jsxs(ne,{children:[r.jsx(ae,{children:"Informacin de la Cuenta"}),r.jsx(Me,{children:"Detalles de tu cuenta de usuario"})]}),r.jsx(Q,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Usuario"}),r.jsx("p",{className:"text-base",children:"Administrador"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rol"}),r.jsx("p",{className:"text-base",children:"Administrador"})]})]})})]}),r.jsxs(G,{className:"border-red-200",children:[r.jsxs(ne,{children:[r.jsxs(ae,{className:"flex items-center gap-2 text-red-600",children:[r.jsx(Wr,{className:"h-5 w-5"}),"Zona de Peligro"]}),r.jsx(Me,{children:"Acciones irreversibles que afectarn permanentemente tus datos"})]}),r.jsxs(Q,{className:"space-y-4",children:[r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Resetear Todas las Transacciones"}),r.jsx("p",{className:"text-sm text-red-800 mb-4",children:"Esta accin borrar permanentemente todas tus transacciones, movimientos de inventario y asientos contables. Los catlogos y configuracin se mantendrn intactos."}),r.jsxs(wa,{open:n,onOpenChange:s,children:[r.jsx(Fv,{asChild:!0,children:r.jsxs(Pe,{variant:"destructive",className:"w-full sm:w-auto",children:[r.jsx(xs,{className:"h-4 w-4 mr-2"}),"Resetear Todos los Datos"]})}),r.jsxs(Xs,{children:[r.jsxs(Ys,{children:[r.jsxs(Zs,{className:"flex items-center gap-2 text-red-600",children:[r.jsx(Wr,{className:"h-5 w-5"}),"Ests completamente seguro?"]}),r.jsx(Js,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"font-semibold",children:"Esta accin NO se puede deshacer. Se borrarn permanentemente:"}),r.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside bg-red-50 p-3 rounded",children:[r.jsx("li",{children:"Todas las transacciones de ingresos y egresos"}),r.jsx("li",{children:"Todos los movimientos de inventario"}),r.jsx("li",{children:"Todos los asientos contables"}),r.jsx("li",{children:"Transacciones de capital, financiamientos e impuestos"}),r.jsx("li",{children:"Cobros y pagos registrados"}),r.jsx("li",{children:"Todas las inversiones CAPEX registradas"}),r.jsx("li",{children:"Todos los financiamientos y crditos registrados"})]}),r.jsx("p",{className:"text-sm font-semibold text-green-600 bg-green-50 p-3 rounded mt-3",children:" Se mantendrn: Plan de cuentas, catlogos de productos, clientes, proveedores, accionistas y toda la configuracin del sistema."})]})})]}),r.jsxs(Qs,{children:[r.jsx(ta,{disabled:e,children:"Cancelar"}),r.jsx(ea,{onClick:a,disabled:e,className:"bg-red-600 hover:bg-red-700",children:e?"Borrando...":"S, borrar todo"})]})]})]})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",r.jsx("strong",{children:"Sugerencia:"})," Si solo quieres corregir algunos datos, considera editar las transacciones individuales en lugar de resetear todo el sistema."]})})]})]})]})]})},mFe=new wG,fFe=()=>{const[e,t]=y.useState(!1);return r.jsx(AG,{client:mFe,children:r.jsxs(iG,{children:[r.jsx(WU,{}),r.jsx(b7,{}),r.jsx(DH,{basename:"/dashboard",children:r.jsxs("div",{className:"h-screen bg-background flex overflow-hidden w-full",children:[r.jsx(e$e,{collapsed:e,onToggle:()=>t(!e)}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs(AH,{children:[r.jsx(Hr,{path:"/",element:r.jsx(ISe,{})}),r.jsx(Hr,{path:"/plan-cuentas",element:r.jsx(KCe,{})}),r.jsx(Hr,{path:"/estados-financieros/resultados",element:r.jsx(PTe,{})}),r.jsx(Hr,{path:"/estados-financieros/balance",element:r.jsx(OTe,{})}),r.jsx(Hr,{path:"/estados-financieros/flujo-efectivo",element:r.jsx(LTe,{})}),r.jsx(Hr,{path:"/estados-financieros/balanza",element:r.jsx(BTe,{})}),r.jsx(Hr,{path:"/analisis-financiero/resultados",element:r.jsx(cFe,{})}),r.jsx(Hr,{path:"/analisis-financiero/balance",element:r.jsx(dFe,{})}),r.jsx(Hr,{path:"/registros/ingresos",element:r.jsx(o$e,{})}),r.jsx(Hr,{path:"/registros/egresos",element:r.jsx(y$e,{})}),r.jsx(Hr,{path:"/registros/inversiones",element:r.jsx(F$e,{})}),r.jsx(Hr,{path:"/registros/inventario",element:r.jsx(PMe,{})}),r.jsx(Hr,{path:"/registros/financiamientos",element:r.jsx(jDe,{})}),r.jsx(Hr,{path:"/registros/capital",element:r.jsx(ADe,{})}),r.jsx(Hr,{path:"/registros/impuestos",element:r.jsx(kDe,{})}),r.jsx(Hr,{path:"/cobros-pagos/cuentas-por-cobrar",element:r.jsx(FDe,{})}),r.jsx(Hr,{path:"/cobros-pagos/cuentas-por-pagar",element:r.jsx(KDe,{})}),r.jsx(Hr,{path:"/clientes",element:r.jsx(QDe,{})}),r.jsx(Hr,{path:"/proveedores",element:r.jsx(tFe,{})}),r.jsx(Hr,{path:"/configuracion",element:r.jsx(uFe,{})}),r.jsx(Hr,{path:"*",element:r.jsx(RSe,{})})]})})]})})]})})};Db.createRoot(document.getElementById("root")).render(r.jsx(K.StrictMode,{children:r.jsx(fFe,{})}));export{wn as $,ne as A,Pe as B,Ht as C,vr as D,ae as E,Me as F,Q as G,iS as H,Ae as I,On as J,sr as K,se as L,ar as M,De as N,ke as O,Zr as P,Fe as Q,Hn as R,Jr as S,Lr as T,Gu as U,$e as V,le as W,Kr as X,Xh as Y,li as Z,Hc as _,Nj as a,_n as a0,Te as a1,er as a2,ze as a3,fn as a4,Nn as a5,mt as a6,bl as a7,Lt as a8,jt as a9,gt as aa,yt as ab,jr as ac,Wt as ad,Et as ae,dl as af,Xn as ag,Kt as ah,Gt as ai,rt as aj,vc as ak,nU as al,as as am,ht as an,Ca as b,lt as c,mp as d,NFe as e,A$e as f,gPe as g,vPe as h,wFe as i,E$e as j,r as k,mr as l,fr as m,hr as n,mn as o,VF as p,It as q,y as r,ce as s,Th as t,iL as u,Le as v,Dr as w,Qe as x,Je as y,G as z};
